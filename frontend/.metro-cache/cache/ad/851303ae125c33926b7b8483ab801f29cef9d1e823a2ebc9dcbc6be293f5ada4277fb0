{"dependencies":[{"name":"../../regex.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":19,"index":133},"end":{"line":4,"column":44,"index":158}}],"key":"LCN0jXQgTUYerywAbT2lm49XszQ=","exportNames":["*"],"imports":1}},{"name":"../errors/abiItem.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":21,"index":181},"end":{"line":5,"column":52,"index":212}}],"key":"BHoRMWdR+xGktjwj7wHBS1aEQ7A=","exportNames":["*"],"imports":1}},{"name":"../errors/abiParameter.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":26,"index":240},"end":{"line":6,"column":62,"index":276}}],"key":"NW50mz+hZQbWe8ehZhzixpjKbS4=","exportNames":["*"],"imports":1}},{"name":"../errors/signature.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":23,"index":301},"end":{"line":7,"column":56,"index":334}}],"key":"nPnHMYR/aaEuUpB0EBmrldNy/t4=","exportNames":["*"],"imports":1}},{"name":"../errors/struct.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":20,"index":356},"end":{"line":8,"column":50,"index":386}}],"key":"XOLIyO9GBJju8U7qrCdQghCkLwQ=","exportNames":["*"],"imports":1}},{"name":"./signatures.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":24,"index":412},"end":{"line":9,"column":50,"index":438}}],"key":"Siw3A8zd2Tqdk3uHzdTgE4Rz5Z0=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":19,"index":459},"end":{"line":10,"column":40,"index":480}}],"key":"v6h+l9IeOWbEcXdtKQqd2f4now4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.parseStructs = parseStructs;\n  const regex_js_1 = require(_dependencyMap[0], \"../../regex.js\");\n  const abiItem_js_1 = require(_dependencyMap[1], \"../errors/abiItem.js\");\n  const abiParameter_js_1 = require(_dependencyMap[2], \"../errors/abiParameter.js\");\n  const signature_js_1 = require(_dependencyMap[3], \"../errors/signature.js\");\n  const struct_js_1 = require(_dependencyMap[4], \"../errors/struct.js\");\n  const signatures_js_1 = require(_dependencyMap[5], \"./signatures.js\");\n  const utils_js_1 = require(_dependencyMap[6], \"./utils.js\");\n  function parseStructs(signatures) {\n    const shallowStructs = {};\n    const signaturesLength = signatures.length;\n    for (let i = 0; i < signaturesLength; i++) {\n      const signature = signatures[i];\n      if (!(0, signatures_js_1.isStructSignature)(signature)) continue;\n      const match = (0, signatures_js_1.execStructSignature)(signature);\n      if (!match) throw new signature_js_1.InvalidSignatureError({\n        signature,\n        type: 'struct'\n      });\n      const properties = match.properties.split(';');\n      const components = [];\n      const propertiesLength = properties.length;\n      for (let k = 0; k < propertiesLength; k++) {\n        const property = properties[k];\n        const trimmed = property.trim();\n        if (!trimmed) continue;\n        const abiParameter = (0, utils_js_1.parseAbiParameter)(trimmed, {\n          type: 'struct'\n        });\n        components.push(abiParameter);\n      }\n      if (!components.length) throw new signature_js_1.InvalidStructSignatureError({\n        signature\n      });\n      shallowStructs[match.name] = components;\n    }\n    const resolvedStructs = {};\n    const entries = Object.entries(shallowStructs);\n    const entriesLength = entries.length;\n    for (let i = 0; i < entriesLength; i++) {\n      const [name, parameters] = entries[i];\n      resolvedStructs[name] = resolveStructs(parameters, shallowStructs);\n    }\n    return resolvedStructs;\n  }\n  const typeWithoutTupleRegex = /^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\\[\\d*?\\])+?)?$/;\n  function resolveStructs(abiParameters, structs, ancestors = new Set()) {\n    const components = [];\n    const length = abiParameters.length;\n    for (let i = 0; i < length; i++) {\n      const abiParameter = abiParameters[i];\n      const isTuple = regex_js_1.isTupleRegex.test(abiParameter.type);\n      if (isTuple) components.push(abiParameter);else {\n        const match = (0, regex_js_1.execTyped)(typeWithoutTupleRegex, abiParameter.type);\n        if (!match?.type) throw new abiParameter_js_1.InvalidAbiTypeParameterError({\n          abiParameter\n        });\n        const {\n          array,\n          type\n        } = match;\n        if (type in structs) {\n          if (ancestors.has(type)) throw new struct_js_1.CircularReferenceError({\n            type\n          });\n          components.push({\n            ...abiParameter,\n            type: `tuple${array ?? ''}`,\n            components: resolveStructs(structs[type] ?? [], structs, new Set([...ancestors, type]))\n          });\n        } else {\n          if ((0, utils_js_1.isSolidityType)(type)) components.push(abiParameter);else throw new abiItem_js_1.UnknownTypeError({\n            type\n          });\n        }\n      }\n    }\n    return components;\n  }\n});","lineCount":86,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"parseStructs"],[7,22,3,20],[7,25,3,23,"parseStructs"],[7,37,3,35],[8,2,4,0],[8,8,4,6,"regex_js_1"],[8,18,4,16],[8,21,4,19,"require"],[8,28,4,26],[8,29,4,26,"_dependencyMap"],[8,43,4,26],[8,64,4,43],[8,65,4,44],[9,2,5,0],[9,8,5,6,"abiItem_js_1"],[9,20,5,18],[9,23,5,21,"require"],[9,30,5,28],[9,31,5,28,"_dependencyMap"],[9,45,5,28],[9,72,5,51],[9,73,5,52],[10,2,6,0],[10,8,6,6,"abiParameter_js_1"],[10,25,6,23],[10,28,6,26,"require"],[10,35,6,33],[10,36,6,33,"_dependencyMap"],[10,50,6,33],[10,82,6,61],[10,83,6,62],[11,2,7,0],[11,8,7,6,"signature_js_1"],[11,22,7,20],[11,25,7,23,"require"],[11,32,7,30],[11,33,7,30,"_dependencyMap"],[11,47,7,30],[11,76,7,55],[11,77,7,56],[12,2,8,0],[12,8,8,6,"struct_js_1"],[12,19,8,17],[12,22,8,20,"require"],[12,29,8,27],[12,30,8,27,"_dependencyMap"],[12,44,8,27],[12,70,8,49],[12,71,8,50],[13,2,9,0],[13,8,9,6,"signatures_js_1"],[13,23,9,21],[13,26,9,24,"require"],[13,33,9,31],[13,34,9,31,"_dependencyMap"],[13,48,9,31],[13,70,9,49],[13,71,9,50],[14,2,10,0],[14,8,10,6,"utils_js_1"],[14,18,10,16],[14,21,10,19,"require"],[14,28,10,26],[14,29,10,26,"_dependencyMap"],[14,43,10,26],[14,60,10,39],[14,61,10,40],[15,2,11,0],[15,11,11,9,"parseStructs"],[15,23,11,21,"parseStructs"],[15,24,11,22,"signatures"],[15,34,11,32],[15,36,11,34],[16,4,12,4],[16,10,12,10,"shallowStructs"],[16,24,12,24],[16,27,12,27],[16,28,12,28],[16,29,12,29],[17,4,13,4],[17,10,13,10,"signaturesLength"],[17,26,13,26],[17,29,13,29,"signatures"],[17,39,13,39],[17,40,13,40,"length"],[17,46,13,46],[18,4,14,4],[18,9,14,9],[18,13,14,13,"i"],[18,14,14,14],[18,17,14,17],[18,18,14,18],[18,20,14,20,"i"],[18,21,14,21],[18,24,14,24,"signaturesLength"],[18,40,14,40],[18,42,14,42,"i"],[18,43,14,43],[18,45,14,45],[18,47,14,47],[19,6,15,8],[19,12,15,14,"signature"],[19,21,15,23],[19,24,15,26,"signatures"],[19,34,15,36],[19,35,15,37,"i"],[19,36,15,38],[19,37,15,39],[20,6,16,8],[20,10,16,12],[20,11,16,13],[20,12,16,14],[20,13,16,15],[20,15,16,17,"signatures_js_1"],[20,30,16,32],[20,31,16,33,"isStructSignature"],[20,48,16,50],[20,50,16,52,"signature"],[20,59,16,61],[20,60,16,62],[20,62,17,12],[21,6,18,8],[21,12,18,14,"match"],[21,17,18,19],[21,20,18,22],[21,21,18,23],[21,22,18,24],[21,24,18,26,"signatures_js_1"],[21,39,18,41],[21,40,18,42,"execStructSignature"],[21,59,18,61],[21,61,18,63,"signature"],[21,70,18,72],[21,71,18,73],[22,6,19,8],[22,10,19,12],[22,11,19,13,"match"],[22,16,19,18],[22,18,20,12],[22,24,20,18],[22,28,20,22,"signature_js_1"],[22,42,20,36],[22,43,20,37,"InvalidSignatureError"],[22,64,20,58],[22,65,20,59],[23,8,20,61,"signature"],[23,17,20,70],[24,8,20,72,"type"],[24,12,20,76],[24,14,20,78],[25,6,20,87],[25,7,20,88],[25,8,20,89],[26,6,21,8],[26,12,21,14,"properties"],[26,22,21,24],[26,25,21,27,"match"],[26,30,21,32],[26,31,21,33,"properties"],[26,41,21,43],[26,42,21,44,"split"],[26,47,21,49],[26,48,21,50],[26,51,21,53],[26,52,21,54],[27,6,22,8],[27,12,22,14,"components"],[27,22,22,24],[27,25,22,27],[27,27,22,29],[28,6,23,8],[28,12,23,14,"propertiesLength"],[28,28,23,30],[28,31,23,33,"properties"],[28,41,23,43],[28,42,23,44,"length"],[28,48,23,50],[29,6,24,8],[29,11,24,13],[29,15,24,17,"k"],[29,16,24,18],[29,19,24,21],[29,20,24,22],[29,22,24,24,"k"],[29,23,24,25],[29,26,24,28,"propertiesLength"],[29,42,24,44],[29,44,24,46,"k"],[29,45,24,47],[29,47,24,49],[29,49,24,51],[30,8,25,12],[30,14,25,18,"property"],[30,22,25,26],[30,25,25,29,"properties"],[30,35,25,39],[30,36,25,40,"k"],[30,37,25,41],[30,38,25,42],[31,8,26,12],[31,14,26,18,"trimmed"],[31,21,26,25],[31,24,26,28,"property"],[31,32,26,36],[31,33,26,37,"trim"],[31,37,26,41],[31,38,26,42],[31,39,26,43],[32,8,27,12],[32,12,27,16],[32,13,27,17,"trimmed"],[32,20,27,24],[32,22,28,16],[33,8,29,12],[33,14,29,18,"abiParameter"],[33,26,29,30],[33,29,29,33],[33,30,29,34],[33,31,29,35],[33,33,29,37,"utils_js_1"],[33,43,29,47],[33,44,29,48,"parseAbiParameter"],[33,61,29,65],[33,63,29,67,"trimmed"],[33,70,29,74],[33,72,29,76],[34,10,30,16,"type"],[34,14,30,20],[34,16,30,22],[35,8,31,12],[35,9,31,13],[35,10,31,14],[36,8,32,12,"components"],[36,18,32,22],[36,19,32,23,"push"],[36,23,32,27],[36,24,32,28,"abiParameter"],[36,36,32,40],[36,37,32,41],[37,6,33,8],[38,6,34,8],[38,10,34,12],[38,11,34,13,"components"],[38,21,34,23],[38,22,34,24,"length"],[38,28,34,30],[38,30,35,12],[38,36,35,18],[38,40,35,22,"signature_js_1"],[38,54,35,36],[38,55,35,37,"InvalidStructSignatureError"],[38,82,35,64],[38,83,35,65],[39,8,35,67,"signature"],[40,6,35,77],[40,7,35,78],[40,8,35,79],[41,6,36,8,"shallowStructs"],[41,20,36,22],[41,21,36,23,"match"],[41,26,36,28],[41,27,36,29,"name"],[41,31,36,33],[41,32,36,34],[41,35,36,37,"components"],[41,45,36,47],[42,4,37,4],[43,4,38,4],[43,10,38,10,"resolvedStructs"],[43,25,38,25],[43,28,38,28],[43,29,38,29],[43,30,38,30],[44,4,39,4],[44,10,39,10,"entries"],[44,17,39,17],[44,20,39,20,"Object"],[44,26,39,26],[44,27,39,27,"entries"],[44,34,39,34],[44,35,39,35,"shallowStructs"],[44,49,39,49],[44,50,39,50],[45,4,40,4],[45,10,40,10,"entriesLength"],[45,23,40,23],[45,26,40,26,"entries"],[45,33,40,33],[45,34,40,34,"length"],[45,40,40,40],[46,4,41,4],[46,9,41,9],[46,13,41,13,"i"],[46,14,41,14],[46,17,41,17],[46,18,41,18],[46,20,41,20,"i"],[46,21,41,21],[46,24,41,24,"entriesLength"],[46,37,41,37],[46,39,41,39,"i"],[46,40,41,40],[46,42,41,42],[46,44,41,44],[47,6,42,8],[47,12,42,14],[47,13,42,15,"name"],[47,17,42,19],[47,19,42,21,"parameters"],[47,29,42,31],[47,30,42,32],[47,33,42,35,"entries"],[47,40,42,42],[47,41,42,43,"i"],[47,42,42,44],[47,43,42,45],[48,6,43,8,"resolvedStructs"],[48,21,43,23],[48,22,43,24,"name"],[48,26,43,28],[48,27,43,29],[48,30,43,32,"resolveStructs"],[48,44,43,46],[48,45,43,47,"parameters"],[48,55,43,57],[48,57,43,59,"shallowStructs"],[48,71,43,73],[48,72,43,74],[49,4,44,4],[50,4,45,4],[50,11,45,11,"resolvedStructs"],[50,26,45,26],[51,2,46,0],[52,2,47,0],[52,8,47,6,"typeWithoutTupleRegex"],[52,29,47,27],[52,32,47,30],[52,94,47,92],[53,2,48,0],[53,11,48,9,"resolveStructs"],[53,25,48,23,"resolveStructs"],[53,26,48,24,"abiParameters"],[53,39,48,37],[53,41,48,39,"structs"],[53,48,48,46],[53,50,48,48,"ancestors"],[53,59,48,57],[53,62,48,60],[53,66,48,64,"Set"],[53,69,48,67],[53,70,48,68],[53,71,48,69],[53,73,48,71],[54,4,49,4],[54,10,49,10,"components"],[54,20,49,20],[54,23,49,23],[54,25,49,25],[55,4,50,4],[55,10,50,10,"length"],[55,16,50,16],[55,19,50,19,"abiParameters"],[55,32,50,32],[55,33,50,33,"length"],[55,39,50,39],[56,4,51,4],[56,9,51,9],[56,13,51,13,"i"],[56,14,51,14],[56,17,51,17],[56,18,51,18],[56,20,51,20,"i"],[56,21,51,21],[56,24,51,24,"length"],[56,30,51,30],[56,32,51,32,"i"],[56,33,51,33],[56,35,51,35],[56,37,51,37],[57,6,52,8],[57,12,52,14,"abiParameter"],[57,24,52,26],[57,27,52,29,"abiParameters"],[57,40,52,42],[57,41,52,43,"i"],[57,42,52,44],[57,43,52,45],[58,6,53,8],[58,12,53,14,"isTuple"],[58,19,53,21],[58,22,53,24,"regex_js_1"],[58,32,53,34],[58,33,53,35,"isTupleRegex"],[58,45,53,47],[58,46,53,48,"test"],[58,50,53,52],[58,51,53,53,"abiParameter"],[58,63,53,65],[58,64,53,66,"type"],[58,68,53,70],[58,69,53,71],[59,6,54,8],[59,10,54,12,"isTuple"],[59,17,54,19],[59,19,55,12,"components"],[59,29,55,22],[59,30,55,23,"push"],[59,34,55,27],[59,35,55,28,"abiParameter"],[59,47,55,40],[59,48,55,41],[59,49,55,42],[59,54,56,13],[60,8,57,12],[60,14,57,18,"match"],[60,19,57,23],[60,22,57,26],[60,23,57,27],[60,24,57,28],[60,26,57,30,"regex_js_1"],[60,36,57,40],[60,37,57,41,"execTyped"],[60,46,57,50],[60,48,57,52,"typeWithoutTupleRegex"],[60,69,57,73],[60,71,57,75,"abiParameter"],[60,83,57,87],[60,84,57,88,"type"],[60,88,57,92],[60,89,57,93],[61,8,58,12],[61,12,58,16],[61,13,58,17,"match"],[61,18,58,22],[61,20,58,24,"type"],[61,24,58,28],[61,26,59,16],[61,32,59,22],[61,36,59,26,"abiParameter_js_1"],[61,53,59,43],[61,54,59,44,"InvalidAbiTypeParameterError"],[61,82,59,72],[61,83,59,73],[62,10,59,75,"abiParameter"],[63,8,59,88],[63,9,59,89],[63,10,59,90],[64,8,60,12],[64,14,60,18],[65,10,60,20,"array"],[65,15,60,25],[66,10,60,27,"type"],[67,8,60,32],[67,9,60,33],[67,12,60,36,"match"],[67,17,60,41],[68,8,61,12],[68,12,61,16,"type"],[68,16,61,20],[68,20,61,24,"structs"],[68,27,61,31],[68,29,61,33],[69,10,62,16],[69,14,62,20,"ancestors"],[69,23,62,29],[69,24,62,30,"has"],[69,27,62,33],[69,28,62,34,"type"],[69,32,62,38],[69,33,62,39],[69,35,63,20],[69,41,63,26],[69,45,63,30,"struct_js_1"],[69,56,63,41],[69,57,63,42,"CircularReferenceError"],[69,79,63,64],[69,80,63,65],[70,12,63,67,"type"],[71,10,63,72],[71,11,63,73],[71,12,63,74],[72,10,64,16,"components"],[72,20,64,26],[72,21,64,27,"push"],[72,25,64,31],[72,26,64,32],[73,12,65,20],[73,15,65,23,"abiParameter"],[73,27,65,35],[74,12,66,20,"type"],[74,16,66,24],[74,18,66,26],[74,26,66,34,"array"],[74,31,66,39],[74,35,66,43],[74,37,66,45],[74,39,66,47],[75,12,67,20,"components"],[75,22,67,30],[75,24,67,32,"resolveStructs"],[75,38,67,46],[75,39,67,47,"structs"],[75,46,67,54],[75,47,67,55,"type"],[75,51,67,59],[75,52,67,60],[75,56,67,64],[75,58,67,66],[75,60,67,68,"structs"],[75,67,67,75],[75,69,67,77],[75,73,67,81,"Set"],[75,76,67,84],[75,77,67,85],[75,78,67,86],[75,81,67,89,"ancestors"],[75,90,67,98],[75,92,67,100,"type"],[75,96,67,104],[75,97,67,105],[75,98,67,106],[76,10,68,16],[76,11,68,17],[76,12,68,18],[77,8,69,12],[77,9,69,13],[77,15,70,17],[78,10,71,16],[78,14,71,20],[78,15,71,21],[78,16,71,22],[78,18,71,24,"utils_js_1"],[78,28,71,34],[78,29,71,35,"isSolidityType"],[78,43,71,49],[78,45,71,51,"type"],[78,49,71,55],[78,50,71,56],[78,52,72,20,"components"],[78,62,72,30],[78,63,72,31,"push"],[78,67,72,35],[78,68,72,36,"abiParameter"],[78,80,72,48],[78,81,72,49],[78,82,72,50],[78,87,74,20],[78,93,74,26],[78,97,74,30,"abiItem_js_1"],[78,109,74,42],[78,110,74,43,"UnknownTypeError"],[78,126,74,59],[78,127,74,60],[79,12,74,62,"type"],[80,10,74,67],[80,11,74,68],[80,12,74,69],[81,8,75,12],[82,6,76,8],[83,4,77,4],[84,4,78,4],[84,11,78,11,"components"],[84,21,78,21],[85,2,79,0],[86,0,79,1],[86,3]],"functionMap":{"names":["<global>","parseStructs","resolveStructs"],"mappings":"AAA;ACU;CDmC;AEE;CF+B"},"hasCjsExports":true},"type":"js/module"}]}