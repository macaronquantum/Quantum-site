{"dependencies":[{"name":"./tabbable","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":16,"index":125},"end":{"line":8,"column":37,"index":146}}],"key":"sB0rWjEzjbHJRR7XLCK6TLw9UDk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = scopeTab;\n  var _tabbable = require(_dependencyMap[0], \"./tabbable\");\n  var _tabbable2 = _interopRequireDefault(_tabbable);\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n  function getActiveElement() {\n    var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n    return el.activeElement.shadowRoot ? getActiveElement(el.activeElement.shadowRoot) : el.activeElement;\n  }\n  function scopeTab(node, event) {\n    var tabbable = (0, _tabbable2.default)(node);\n    if (!tabbable.length) {\n      // Do nothing, since there are no elements that can receive focus.\n      event.preventDefault();\n      return;\n    }\n    var target = void 0;\n    var shiftKey = event.shiftKey;\n    var head = tabbable[0];\n    var tail = tabbable[tabbable.length - 1];\n    var activeElement = getActiveElement();\n\n    // proceed with default browser behavior on tab.\n    // Focus on last element on shift + tab.\n    if (node === activeElement) {\n      if (!shiftKey) return;\n      target = tail;\n    }\n    if (tail === activeElement && !shiftKey) {\n      target = head;\n    }\n    if (head === activeElement && shiftKey) {\n      target = tail;\n    }\n    if (target) {\n      event.preventDefault();\n      target.focus();\n      return;\n    }\n\n    // Safari radio issue.\n    //\n    // Safari does not move the focus to the radio button,\n    // so we need to force it to really walk through all elements.\n    //\n    // This is very error prone, since we are trying to guess\n    // if it is a safari browser from the first occurence between\n    // chrome or safari.\n    //\n    // The chrome user agent contains the first ocurrence\n    // as the 'chrome/version' and later the 'safari/version'.\n    var checkSafari = /(\\bChrome\\b|\\bSafari\\b)\\//.exec(navigator.userAgent);\n    var isSafariDesktop = checkSafari != null && checkSafari[1] != \"Chrome\" && /\\biPod\\b|\\biPad\\b/g.exec(navigator.userAgent) == null;\n\n    // If we are not in safari desktop, let the browser control\n    // the focus\n    if (!isSafariDesktop) return;\n    var x = tabbable.indexOf(activeElement);\n    if (x > -1) {\n      x += shiftKey ? -1 : 1;\n    }\n    target = tabbable[x];\n\n    // If the tabbable element does not exist,\n    // focus head/tail based on shiftKey\n    if (typeof target === \"undefined\") {\n      event.preventDefault();\n      target = shiftKey ? tail : head;\n      target.focus();\n      return;\n    }\n    event.preventDefault();\n    target.focus();\n  }\n  module.exports = exports[\"default\"];\n});","lineCount":85,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"default"],[7,17,6,15],[7,20,6,18,"scopeTab"],[7,28,6,26],[8,2,8,0],[8,6,8,4,"_tabbable"],[8,15,8,13],[8,18,8,16,"require"],[8,25,8,23],[8,26,8,23,"_dependencyMap"],[8,40,8,23],[8,57,8,36],[8,58,8,37],[9,2,10,0],[9,6,10,4,"_tabbable2"],[9,16,10,14],[9,19,10,17,"_interopRequireDefault"],[9,41,10,39],[9,42,10,40,"_tabbable"],[9,51,10,49],[9,52,10,50],[10,2,12,0],[10,11,12,9,"_interopRequireDefault"],[10,33,12,31,"_interopRequireDefault"],[10,34,12,32,"obj"],[10,37,12,35],[10,39,12,37],[11,4,12,39],[11,11,12,46,"obj"],[11,14,12,49],[11,18,12,53,"obj"],[11,21,12,56],[11,22,12,57,"__esModule"],[11,32,12,67],[11,35,12,70,"obj"],[11,38,12,73],[11,41,12,76],[12,6,12,78,"default"],[12,13,12,85],[12,15,12,87,"obj"],[13,4,12,91],[13,5,12,92],[14,2,12,94],[15,2,14,0],[15,11,14,9,"getActiveElement"],[15,27,14,25,"getActiveElement"],[15,28,14,25],[15,30,14,28],[16,4,15,2],[16,8,15,6,"el"],[16,10,15,8],[16,13,15,11,"arguments"],[16,22,15,20],[16,23,15,21,"length"],[16,29,15,27],[16,32,15,30],[16,33,15,31],[16,37,15,35,"arguments"],[16,46,15,44],[16,47,15,45],[16,48,15,46],[16,49,15,47],[16,54,15,52,"undefined"],[16,63,15,61],[16,66,15,64,"arguments"],[16,75,15,73],[16,76,15,74],[16,77,15,75],[16,78,15,76],[16,81,15,79,"document"],[16,89,15,87],[17,4,17,2],[17,11,17,9,"el"],[17,13,17,11],[17,14,17,12,"activeElement"],[17,27,17,25],[17,28,17,26,"shadowRoot"],[17,38,17,36],[17,41,17,39,"getActiveElement"],[17,57,17,55],[17,58,17,56,"el"],[17,60,17,58],[17,61,17,59,"activeElement"],[17,74,17,72],[17,75,17,73,"shadowRoot"],[17,85,17,83],[17,86,17,84],[17,89,17,87,"el"],[17,91,17,89],[17,92,17,90,"activeElement"],[17,105,17,103],[18,2,18,0],[19,2,20,0],[19,11,20,9,"scopeTab"],[19,19,20,17,"scopeTab"],[19,20,20,18,"node"],[19,24,20,22],[19,26,20,24,"event"],[19,31,20,29],[19,33,20,31],[20,4,21,2],[20,8,21,6,"tabbable"],[20,16,21,14],[20,19,21,17],[20,20,21,18],[20,21,21,19],[20,23,21,21,"_tabbable2"],[20,33,21,31],[20,34,21,32,"default"],[20,41,21,39],[20,43,21,41,"node"],[20,47,21,45],[20,48,21,46],[21,4,23,2],[21,8,23,6],[21,9,23,7,"tabbable"],[21,17,23,15],[21,18,23,16,"length"],[21,24,23,22],[21,26,23,24],[22,6,24,4],[23,6,25,4,"event"],[23,11,25,9],[23,12,25,10,"preventDefault"],[23,26,25,24],[23,27,25,25],[23,28,25,26],[24,6,26,4],[25,4,27,2],[26,4,29,2],[26,8,29,6,"target"],[26,14,29,12],[26,17,29,15],[26,22,29,20],[26,23,29,21],[27,4,31,2],[27,8,31,6,"shiftKey"],[27,16,31,14],[27,19,31,17,"event"],[27,24,31,22],[27,25,31,23,"shiftKey"],[27,33,31,31],[28,4,32,2],[28,8,32,6,"head"],[28,12,32,10],[28,15,32,13,"tabbable"],[28,23,32,21],[28,24,32,22],[28,25,32,23],[28,26,32,24],[29,4,33,2],[29,8,33,6,"tail"],[29,12,33,10],[29,15,33,13,"tabbable"],[29,23,33,21],[29,24,33,22,"tabbable"],[29,32,33,30],[29,33,33,31,"length"],[29,39,33,37],[29,42,33,40],[29,43,33,41],[29,44,33,42],[30,4,34,2],[30,8,34,6,"activeElement"],[30,21,34,19],[30,24,34,22,"getActiveElement"],[30,40,34,38],[30,41,34,39],[30,42,34,40],[32,4,36,2],[33,4,37,2],[34,4,38,2],[34,8,38,6,"node"],[34,12,38,10],[34,17,38,15,"activeElement"],[34,30,38,28],[34,32,38,30],[35,6,39,4],[35,10,39,8],[35,11,39,9,"shiftKey"],[35,19,39,17],[35,21,39,19],[36,6,40,4,"target"],[36,12,40,10],[36,15,40,13,"tail"],[36,19,40,17],[37,4,41,2],[38,4,43,2],[38,8,43,6,"tail"],[38,12,43,10],[38,17,43,15,"activeElement"],[38,30,43,28],[38,34,43,32],[38,35,43,33,"shiftKey"],[38,43,43,41],[38,45,43,43],[39,6,44,4,"target"],[39,12,44,10],[39,15,44,13,"head"],[39,19,44,17],[40,4,45,2],[41,4,47,2],[41,8,47,6,"head"],[41,12,47,10],[41,17,47,15,"activeElement"],[41,30,47,28],[41,34,47,32,"shiftKey"],[41,42,47,40],[41,44,47,42],[42,6,48,4,"target"],[42,12,48,10],[42,15,48,13,"tail"],[42,19,48,17],[43,4,49,2],[44,4,51,2],[44,8,51,6,"target"],[44,14,51,12],[44,16,51,14],[45,6,52,4,"event"],[45,11,52,9],[45,12,52,10,"preventDefault"],[45,26,52,24],[45,27,52,25],[45,28,52,26],[46,6,53,4,"target"],[46,12,53,10],[46,13,53,11,"focus"],[46,18,53,16],[46,19,53,17],[46,20,53,18],[47,6,54,4],[48,4,55,2],[50,4,57,2],[51,4,58,2],[52,4,59,2],[53,4,60,2],[54,4,61,2],[55,4,62,2],[56,4,63,2],[57,4,64,2],[58,4,65,2],[59,4,66,2],[60,4,67,2],[61,4,68,2],[61,8,68,6,"checkSafari"],[61,19,68,17],[61,22,68,20],[61,49,68,47],[61,50,68,48,"exec"],[61,54,68,52],[61,55,68,53,"navigator"],[61,64,68,62],[61,65,68,63,"userAgent"],[61,74,68,72],[61,75,68,73],[62,4,69,2],[62,8,69,6,"isSafariDesktop"],[62,23,69,21],[62,26,69,24,"checkSafari"],[62,37,69,35],[62,41,69,39],[62,45,69,43],[62,49,69,47,"checkSafari"],[62,60,69,58],[62,61,69,59],[62,62,69,60],[62,63,69,61],[62,67,69,65],[62,75,69,73],[62,79,69,77],[62,99,69,97],[62,100,69,98,"exec"],[62,104,69,102],[62,105,69,103,"navigator"],[62,114,69,112],[62,115,69,113,"userAgent"],[62,124,69,122],[62,125,69,123],[62,129,69,127],[62,133,69,131],[64,4,71,2],[65,4,72,2],[66,4,73,2],[66,8,73,6],[66,9,73,7,"isSafariDesktop"],[66,24,73,22],[66,26,73,24],[67,4,75,2],[67,8,75,6,"x"],[67,9,75,7],[67,12,75,10,"tabbable"],[67,20,75,18],[67,21,75,19,"indexOf"],[67,28,75,26],[67,29,75,27,"activeElement"],[67,42,75,40],[67,43,75,41],[68,4,77,2],[68,8,77,6,"x"],[68,9,77,7],[68,12,77,10],[68,13,77,11],[68,14,77,12],[68,16,77,14],[69,6,78,4,"x"],[69,7,78,5],[69,11,78,9,"shiftKey"],[69,19,78,17],[69,22,78,20],[69,23,78,21],[69,24,78,22],[69,27,78,25],[69,28,78,26],[70,4,79,2],[71,4,81,2,"target"],[71,10,81,8],[71,13,81,11,"tabbable"],[71,21,81,19],[71,22,81,20,"x"],[71,23,81,21],[71,24,81,22],[73,4,83,2],[74,4,84,2],[75,4,85,2],[75,8,85,6],[75,15,85,13,"target"],[75,21,85,19],[75,26,85,24],[75,37,85,35],[75,39,85,37],[76,6,86,4,"event"],[76,11,86,9],[76,12,86,10,"preventDefault"],[76,26,86,24],[76,27,86,25],[76,28,86,26],[77,6,87,4,"target"],[77,12,87,10],[77,15,87,13,"shiftKey"],[77,23,87,21],[77,26,87,24,"tail"],[77,30,87,28],[77,33,87,31,"head"],[77,37,87,35],[78,6,88,4,"target"],[78,12,88,10],[78,13,88,11,"focus"],[78,18,88,16],[78,19,88,17],[78,20,88,18],[79,6,89,4],[80,4,90,2],[81,4,92,2,"event"],[81,9,92,7],[81,10,92,8,"preventDefault"],[81,24,92,22],[81,25,92,23],[81,26,92,24],[82,4,94,2,"target"],[82,10,94,8],[82,11,94,9,"focus"],[82,16,94,14],[82,17,94,15],[82,18,94,16],[83,2,95,0],[84,2,96,0,"module"],[84,8,96,6],[84,9,96,7,"exports"],[84,16,96,14],[84,19,96,17,"exports"],[84,26,96,24],[84,27,96,25],[84,36,96,34],[84,37,96,35],[85,0,96,36],[85,3]],"functionMap":{"names":["<global>","_interopRequireDefault","getActiveElement","scopeTab"],"mappings":"AAA;ACW,+FD;AEE;CFI;AGE;CH2E"},"hasCjsExports":true},"type":"js/module"}]}