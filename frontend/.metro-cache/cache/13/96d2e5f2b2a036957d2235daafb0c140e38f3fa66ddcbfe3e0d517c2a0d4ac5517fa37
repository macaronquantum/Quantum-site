{"dependencies":[{"name":"./utils.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":19,"index":143},"end":{"line":4,"column":40,"index":164}}],"key":"v6h+l9IeOWbEcXdtKQqd2f4now4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.parseAvatarRecord = parseAvatarRecord;\n  const utils_js_1 = require(_dependencyMap[0], \"./utils.js\");\n  async function parseAvatarRecord(client, {\n    gatewayUrls,\n    record\n  }) {\n    if (/eip155:/i.test(record)) return parseNftAvatarUri(client, {\n      gatewayUrls,\n      record\n    });\n    return (0, utils_js_1.parseAvatarUri)({\n      uri: record,\n      gatewayUrls\n    });\n  }\n  async function parseNftAvatarUri(client, {\n    gatewayUrls,\n    record\n  }) {\n    const nft = (0, utils_js_1.parseNftUri)(record);\n    const nftUri = await (0, utils_js_1.getNftTokenUri)(client, {\n      nft\n    });\n    const {\n      uri: resolvedNftUri,\n      isOnChain,\n      isEncoded\n    } = (0, utils_js_1.resolveAvatarUri)({\n      uri: nftUri,\n      gatewayUrls\n    });\n    if (isOnChain && (resolvedNftUri.includes('data:application/json;base64,') || resolvedNftUri.startsWith('{'))) {\n      const encodedJson = isEncoded ? atob(resolvedNftUri.replace('data:application/json;base64,', '')) : resolvedNftUri;\n      const decoded = JSON.parse(encodedJson);\n      return (0, utils_js_1.parseAvatarUri)({\n        uri: (0, utils_js_1.getJsonImage)(decoded),\n        gatewayUrls\n      });\n    }\n    let uriTokenId = nft.tokenID;\n    if (nft.namespace === 'erc1155') uriTokenId = uriTokenId.replace('0x', '').padStart(64, '0');\n    return (0, utils_js_1.getMetadataAvatarUri)({\n      gatewayUrls,\n      uri: resolvedNftUri.replace(/(?:0x)?{id}/, uriTokenId)\n    });\n  }\n});","lineCount":53,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"parseAvatarRecord"],[7,27,3,25],[7,30,3,28,"parseAvatarRecord"],[7,47,3,45],[8,2,4,0],[8,8,4,6,"utils_js_1"],[8,18,4,16],[8,21,4,19,"require"],[8,28,4,26],[8,29,4,26,"_dependencyMap"],[8,43,4,26],[8,60,4,39],[8,61,4,40],[9,2,5,0],[9,17,5,15,"parseAvatarRecord"],[9,34,5,32,"parseAvatarRecord"],[9,35,5,33,"client"],[9,41,5,39],[9,43,5,41],[10,4,5,43,"gatewayUrls"],[10,15,5,54],[11,4,5,56,"record"],[12,2,5,64],[12,3,5,65],[12,5,5,67],[13,4,6,4],[13,8,6,8],[13,18,6,18],[13,19,6,19,"test"],[13,23,6,23],[13,24,6,24,"record"],[13,30,6,30],[13,31,6,31],[13,33,7,8],[13,40,7,15,"parseNftAvatarUri"],[13,57,7,32],[13,58,7,33,"client"],[13,64,7,39],[13,66,7,41],[14,6,7,43,"gatewayUrls"],[14,17,7,54],[15,6,7,56,"record"],[16,4,7,63],[16,5,7,64],[16,6,7,65],[17,4,8,4],[17,11,8,11],[17,12,8,12],[17,13,8,13],[17,15,8,15,"utils_js_1"],[17,25,8,25],[17,26,8,26,"parseAvatarUri"],[17,40,8,40],[17,42,8,42],[18,6,8,44,"uri"],[18,9,8,47],[18,11,8,49,"record"],[18,17,8,55],[19,6,8,57,"gatewayUrls"],[20,4,8,69],[20,5,8,70],[20,6,8,71],[21,2,9,0],[22,2,10,0],[22,17,10,15,"parseNftAvatarUri"],[22,34,10,32,"parseNftAvatarUri"],[22,35,10,33,"client"],[22,41,10,39],[22,43,10,41],[23,4,10,43,"gatewayUrls"],[23,15,10,54],[24,4,10,56,"record"],[25,2,10,64],[25,3,10,65],[25,5,10,67],[26,4,11,4],[26,10,11,10,"nft"],[26,13,11,13],[26,16,11,16],[26,17,11,17],[26,18,11,18],[26,20,11,20,"utils_js_1"],[26,30,11,30],[26,31,11,31,"parseNftUri"],[26,42,11,42],[26,44,11,44,"record"],[26,50,11,50],[26,51,11,51],[27,4,12,4],[27,10,12,10,"nftUri"],[27,16,12,16],[27,19,12,19],[27,25,12,25],[27,26,12,26],[27,27,12,27],[27,29,12,29,"utils_js_1"],[27,39,12,39],[27,40,12,40,"getNftTokenUri"],[27,54,12,54],[27,56,12,56,"client"],[27,62,12,62],[27,64,12,64],[28,6,12,66,"nft"],[29,4,12,70],[29,5,12,71],[29,6,12,72],[30,4,13,4],[30,10,13,10],[31,6,13,12,"uri"],[31,9,13,15],[31,11,13,17,"resolvedNftUri"],[31,25,13,31],[32,6,13,33,"isOnChain"],[32,15,13,42],[33,6,13,44,"isEncoded"],[34,4,13,55],[34,5,13,56],[34,8,13,59],[34,9,13,60],[34,10,13,61],[34,12,13,63,"utils_js_1"],[34,22,13,73],[34,23,13,74,"resolveAvatarUri"],[34,39,13,90],[34,41,13,92],[35,6,13,94,"uri"],[35,9,13,97],[35,11,13,99,"nftUri"],[35,17,13,105],[36,6,13,107,"gatewayUrls"],[37,4,13,119],[37,5,13,120],[37,6,13,121],[38,4,14,4],[38,8,14,8,"isOnChain"],[38,17,14,17],[38,22,15,9,"resolvedNftUri"],[38,36,15,23],[38,37,15,24,"includes"],[38,45,15,32],[38,46,15,33],[38,77,15,64],[38,78,15,65],[38,82,16,12,"resolvedNftUri"],[38,96,16,26],[38,97,16,27,"startsWith"],[38,107,16,37],[38,108,16,38],[38,111,16,41],[38,112,16,42],[38,113,16,43],[38,115,16,45],[39,6,17,8],[39,12,17,14,"encodedJson"],[39,23,17,25],[39,26,17,28,"isEncoded"],[39,35,17,37],[39,38,19,16,"atob"],[39,42,19,20],[39,43,19,21,"resolvedNftUri"],[39,57,19,35],[39,58,19,36,"replace"],[39,65,19,43],[39,66,19,44],[39,97,19,75],[39,99,19,77],[39,101,19,79],[39,102,19,80],[39,103,19,81],[39,106,21,16,"resolvedNftUri"],[39,120,21,30],[40,6,22,8],[40,12,22,14,"decoded"],[40,19,22,21],[40,22,22,24,"JSON"],[40,26,22,28],[40,27,22,29,"parse"],[40,32,22,34],[40,33,22,35,"encodedJson"],[40,44,22,46],[40,45,22,47],[41,6,23,8],[41,13,23,15],[41,14,23,16],[41,15,23,17],[41,17,23,19,"utils_js_1"],[41,27,23,29],[41,28,23,30,"parseAvatarUri"],[41,42,23,44],[41,44,23,46],[42,8,23,48,"uri"],[42,11,23,51],[42,13,23,53],[42,14,23,54],[42,15,23,55],[42,17,23,57,"utils_js_1"],[42,27,23,67],[42,28,23,68,"getJsonImage"],[42,40,23,80],[42,42,23,82,"decoded"],[42,49,23,89],[42,50,23,90],[43,8,23,92,"gatewayUrls"],[44,6,23,104],[44,7,23,105],[44,8,23,106],[45,4,24,4],[46,4,25,4],[46,8,25,8,"uriTokenId"],[46,18,25,18],[46,21,25,21,"nft"],[46,24,25,24],[46,25,25,25,"tokenID"],[46,32,25,32],[47,4,26,4],[47,8,26,8,"nft"],[47,11,26,11],[47,12,26,12,"namespace"],[47,21,26,21],[47,26,26,26],[47,35,26,35],[47,37,27,8,"uriTokenId"],[47,47,27,18],[47,50,27,21,"uriTokenId"],[47,60,27,31],[47,61,27,32,"replace"],[47,68,27,39],[47,69,27,40],[47,73,27,44],[47,75,27,46],[47,77,27,48],[47,78,27,49],[47,79,27,50,"padStart"],[47,87,27,58],[47,88,27,59],[47,90,27,61],[47,92,27,63],[47,95,27,66],[47,96,27,67],[48,4,28,4],[48,11,28,11],[48,12,28,12],[48,13,28,13],[48,15,28,15,"utils_js_1"],[48,25,28,25],[48,26,28,26,"getMetadataAvatarUri"],[48,46,28,46],[48,48,28,48],[49,6,29,8,"gatewayUrls"],[49,17,29,19],[50,6,30,8,"uri"],[50,9,30,11],[50,11,30,13,"resolvedNftUri"],[50,25,30,27],[50,26,30,28,"replace"],[50,33,30,35],[50,34,30,36],[50,47,30,49],[50,49,30,51,"uriTokenId"],[50,59,30,61],[51,4,31,4],[51,5,31,5],[51,6,31,6],[52,2,32,0],[53,0,32,1],[53,3]],"functionMap":{"names":["<global>","parseAvatarRecord","parseNftAvatarUri"],"mappings":"AAA;ACI;CDI;AEC;CFsB"},"hasCjsExports":true},"type":"js/module"}]}