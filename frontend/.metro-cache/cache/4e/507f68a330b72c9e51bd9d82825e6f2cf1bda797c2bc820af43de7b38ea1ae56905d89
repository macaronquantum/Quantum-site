{"dependencies":[{"name":"once","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":11,"index":11},"end":{"line":1,"column":26,"index":26}}],"key":"aXrSj/VKaOyLpbwRVEdGWpeb9PQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var once = require(_dependencyMap[0], \"once\");\n  var noop = function () {};\n  var qnt = global.Bare ? queueMicrotask : process.nextTick.bind(process);\n  var isRequest = function (stream) {\n    return stream.setHeader && typeof stream.abort === 'function';\n  };\n  var isChildProcess = function (stream) {\n    return stream.stdio && Array.isArray(stream.stdio) && stream.stdio.length === 3;\n  };\n  var eos = function (stream, opts, callback) {\n    if (typeof opts === 'function') return eos(stream, null, opts);\n    if (!opts) opts = {};\n    callback = once(callback || noop);\n    var ws = stream._writableState;\n    var rs = stream._readableState;\n    var readable = opts.readable || opts.readable !== false && stream.readable;\n    var writable = opts.writable || opts.writable !== false && stream.writable;\n    var cancelled = false;\n    var onlegacyfinish = function () {\n      if (!stream.writable) onfinish();\n    };\n    var onfinish = function () {\n      writable = false;\n      if (!readable) callback.call(stream);\n    };\n    var onend = function () {\n      readable = false;\n      if (!writable) callback.call(stream);\n    };\n    var onexit = function (exitCode) {\n      callback.call(stream, exitCode ? new Error('exited with error code: ' + exitCode) : null);\n    };\n    var onerror = function (err) {\n      callback.call(stream, err);\n    };\n    var onclose = function () {\n      qnt(onclosenexttick);\n    };\n    var onclosenexttick = function () {\n      if (cancelled) return;\n      if (readable && !(rs && rs.ended && !rs.destroyed)) return callback.call(stream, new Error('premature close'));\n      if (writable && !(ws && ws.ended && !ws.destroyed)) return callback.call(stream, new Error('premature close'));\n    };\n    var onrequest = function () {\n      stream.req.on('finish', onfinish);\n    };\n    if (isRequest(stream)) {\n      stream.on('complete', onfinish);\n      stream.on('abort', onclose);\n      if (stream.req) onrequest();else stream.on('request', onrequest);\n    } else if (writable && !ws) {\n      // legacy streams\n      stream.on('end', onlegacyfinish);\n      stream.on('close', onlegacyfinish);\n    }\n    if (isChildProcess(stream)) stream.on('exit', onexit);\n    stream.on('end', onend);\n    stream.on('finish', onfinish);\n    if (opts.error !== false) stream.on('error', onerror);\n    stream.on('close', onclose);\n    return function () {\n      cancelled = true;\n      stream.removeListener('complete', onfinish);\n      stream.removeListener('abort', onclose);\n      stream.removeListener('request', onrequest);\n      if (stream.req) stream.req.removeListener('finish', onfinish);\n      stream.removeListener('end', onlegacyfinish);\n      stream.removeListener('close', onlegacyfinish);\n      stream.removeListener('finish', onfinish);\n      stream.removeListener('exit', onexit);\n      stream.removeListener('end', onend);\n      stream.removeListener('error', onerror);\n      stream.removeListener('close', onclose);\n    };\n  };\n  module.exports = eos;\n});","lineCount":78,"map":[[2,2,1,0],[2,6,1,4,"once"],[2,10,1,8],[2,13,1,11,"require"],[2,20,1,18],[2,21,1,18,"_dependencyMap"],[2,35,1,18],[2,46,1,25],[2,47,1,26],[3,2,3,0],[3,6,3,4,"noop"],[3,10,3,8],[3,13,3,11],[3,22,3,11,"noop"],[3,23,3,11],[3,25,3,22],[3,26,3,23],[3,27,3,24],[4,2,5,0],[4,6,5,4,"qnt"],[4,9,5,7],[4,12,5,10,"global"],[4,18,5,16],[4,19,5,17,"Bare"],[4,23,5,21],[4,26,5,24,"queueMicrotask"],[4,40,5,38],[4,43,5,41,"process"],[4,50,5,48],[4,51,5,49,"nextTick"],[4,59,5,57],[4,60,5,58,"bind"],[4,64,5,62],[4,65,5,63,"process"],[4,72,5,70],[4,73,5,71],[5,2,7,0],[5,6,7,4,"isRequest"],[5,15,7,13],[5,18,7,16],[5,27,7,16,"isRequest"],[5,28,7,25,"stream"],[5,34,7,31],[5,36,7,33],[6,4,8,1],[6,11,8,8,"stream"],[6,17,8,14],[6,18,8,15,"setHeader"],[6,27,8,24],[6,31,8,28],[6,38,8,35,"stream"],[6,44,8,41],[6,45,8,42,"abort"],[6,50,8,47],[6,55,8,52],[6,65,8,62],[7,2,9,0],[7,3,9,1],[8,2,11,0],[8,6,11,4,"isChildProcess"],[8,20,11,18],[8,23,11,21],[8,32,11,21,"isChildProcess"],[8,33,11,30,"stream"],[8,39,11,36],[8,41,11,38],[9,4,12,1],[9,11,12,8,"stream"],[9,17,12,14],[9,18,12,15,"stdio"],[9,23,12,20],[9,27,12,24,"Array"],[9,32,12,29],[9,33,12,30,"isArray"],[9,40,12,37],[9,41,12,38,"stream"],[9,47,12,44],[9,48,12,45,"stdio"],[9,53,12,50],[9,54,12,51],[9,58,12,55,"stream"],[9,64,12,61],[9,65,12,62,"stdio"],[9,70,12,67],[9,71,12,68,"length"],[9,77,12,74],[9,82,12,79],[9,83,12,80],[10,2,13,0],[10,3,13,1],[11,2,15,0],[11,6,15,4,"eos"],[11,9,15,7],[11,12,15,10],[11,21,15,10,"eos"],[11,22,15,19,"stream"],[11,28,15,25],[11,30,15,27,"opts"],[11,34,15,31],[11,36,15,33,"callback"],[11,44,15,41],[11,46,15,43],[12,4,16,1],[12,8,16,5],[12,15,16,12,"opts"],[12,19,16,16],[12,24,16,21],[12,34,16,31],[12,36,16,33],[12,43,16,40,"eos"],[12,46,16,43],[12,47,16,44,"stream"],[12,53,16,50],[12,55,16,52],[12,59,16,56],[12,61,16,58,"opts"],[12,65,16,62],[12,66,16,63],[13,4,17,1],[13,8,17,5],[13,9,17,6,"opts"],[13,13,17,10],[13,15,17,12,"opts"],[13,19,17,16],[13,22,17,19],[13,23,17,20],[13,24,17,21],[14,4,19,1,"callback"],[14,12,19,9],[14,15,19,12,"once"],[14,19,19,16],[14,20,19,17,"callback"],[14,28,19,25],[14,32,19,29,"noop"],[14,36,19,33],[14,37,19,34],[15,4,21,1],[15,8,21,5,"ws"],[15,10,21,7],[15,13,21,10,"stream"],[15,19,21,16],[15,20,21,17,"_writableState"],[15,34,21,31],[16,4,22,1],[16,8,22,5,"rs"],[16,10,22,7],[16,13,22,10,"stream"],[16,19,22,16],[16,20,22,17,"_readableState"],[16,34,22,31],[17,4,23,1],[17,8,23,5,"readable"],[17,16,23,13],[17,19,23,16,"opts"],[17,23,23,20],[17,24,23,21,"readable"],[17,32,23,29],[17,36,23,34,"opts"],[17,40,23,38],[17,41,23,39,"readable"],[17,49,23,47],[17,54,23,52],[17,59,23,57],[17,63,23,61,"stream"],[17,69,23,67],[17,70,23,68,"readable"],[17,78,23,77],[18,4,24,1],[18,8,24,5,"writable"],[18,16,24,13],[18,19,24,16,"opts"],[18,23,24,20],[18,24,24,21,"writable"],[18,32,24,29],[18,36,24,34,"opts"],[18,40,24,38],[18,41,24,39,"writable"],[18,49,24,47],[18,54,24,52],[18,59,24,57],[18,63,24,61,"stream"],[18,69,24,67],[18,70,24,68,"writable"],[18,78,24,77],[19,4,25,1],[19,8,25,5,"cancelled"],[19,17,25,14],[19,20,25,17],[19,25,25,22],[20,4,27,1],[20,8,27,5,"onlegacyfinish"],[20,22,27,19],[20,25,27,22],[20,34,27,22,"onlegacyfinish"],[20,35,27,22],[20,37,27,33],[21,6,28,2],[21,10,28,6],[21,11,28,7,"stream"],[21,17,28,13],[21,18,28,14,"writable"],[21,26,28,22],[21,28,28,24,"onfinish"],[21,36,28,32],[21,37,28,33],[21,38,28,34],[22,4,29,1],[22,5,29,2],[23,4,31,1],[23,8,31,5,"onfinish"],[23,16,31,13],[23,19,31,16],[23,28,31,16,"onfinish"],[23,29,31,16],[23,31,31,27],[24,6,32,2,"writable"],[24,14,32,10],[24,17,32,13],[24,22,32,18],[25,6,33,2],[25,10,33,6],[25,11,33,7,"readable"],[25,19,33,15],[25,21,33,17,"callback"],[25,29,33,25],[25,30,33,26,"call"],[25,34,33,30],[25,35,33,31,"stream"],[25,41,33,37],[25,42,33,38],[26,4,34,1],[26,5,34,2],[27,4,36,1],[27,8,36,5,"onend"],[27,13,36,10],[27,16,36,13],[27,25,36,13,"onend"],[27,26,36,13],[27,28,36,24],[28,6,37,2,"readable"],[28,14,37,10],[28,17,37,13],[28,22,37,18],[29,6,38,2],[29,10,38,6],[29,11,38,7,"writable"],[29,19,38,15],[29,21,38,17,"callback"],[29,29,38,25],[29,30,38,26,"call"],[29,34,38,30],[29,35,38,31,"stream"],[29,41,38,37],[29,42,38,38],[30,4,39,1],[30,5,39,2],[31,4,41,1],[31,8,41,5,"onexit"],[31,14,41,11],[31,17,41,14],[31,26,41,14,"onexit"],[31,27,41,23,"exitCode"],[31,35,41,31],[31,37,41,33],[32,6,42,2,"callback"],[32,14,42,10],[32,15,42,11,"call"],[32,19,42,15],[32,20,42,16,"stream"],[32,26,42,22],[32,28,42,24,"exitCode"],[32,36,42,32],[32,39,42,35],[32,43,42,39,"Error"],[32,48,42,44],[32,49,42,45],[32,75,42,71],[32,78,42,74,"exitCode"],[32,86,42,82],[32,87,42,83],[32,90,42,86],[32,94,42,90],[32,95,42,91],[33,4,43,1],[33,5,43,2],[34,4,45,1],[34,8,45,5,"onerror"],[34,15,45,12],[34,18,45,15],[34,27,45,15,"onerror"],[34,28,45,24,"err"],[34,31,45,27],[34,33,45,29],[35,6,46,2,"callback"],[35,14,46,10],[35,15,46,11,"call"],[35,19,46,15],[35,20,46,16,"stream"],[35,26,46,22],[35,28,46,24,"err"],[35,31,46,27],[35,32,46,28],[36,4,47,1],[36,5,47,2],[37,4,49,1],[37,8,49,5,"onclose"],[37,15,49,12],[37,18,49,15],[37,27,49,15,"onclose"],[37,28,49,15],[37,30,49,26],[38,6,50,2,"qnt"],[38,9,50,5],[38,10,50,6,"onclosenexttick"],[38,25,50,21],[38,26,50,22],[39,4,51,1],[39,5,51,2],[40,4,53,1],[40,8,53,5,"onclosenexttick"],[40,23,53,20],[40,26,53,23],[40,35,53,23,"onclosenexttick"],[40,36,53,23],[40,38,53,34],[41,6,54,2],[41,10,54,6,"cancelled"],[41,19,54,15],[41,21,54,17],[42,6,55,2],[42,10,55,6,"readable"],[42,18,55,14],[42,22,55,18],[42,24,55,20,"rs"],[42,26,55,22],[42,30,55,27,"rs"],[42,32,55,29],[42,33,55,30,"ended"],[42,38,55,35],[42,42,55,39],[42,43,55,40,"rs"],[42,45,55,42],[42,46,55,43,"destroyed"],[42,55,55,53],[42,56,55,54],[42,58,55,56],[42,65,55,63,"callback"],[42,73,55,71],[42,74,55,72,"call"],[42,78,55,76],[42,79,55,77,"stream"],[42,85,55,83],[42,87,55,85],[42,91,55,89,"Error"],[42,96,55,94],[42,97,55,95],[42,114,55,112],[42,115,55,113],[42,116,55,114],[43,6,56,2],[43,10,56,6,"writable"],[43,18,56,14],[43,22,56,18],[43,24,56,20,"ws"],[43,26,56,22],[43,30,56,27,"ws"],[43,32,56,29],[43,33,56,30,"ended"],[43,38,56,35],[43,42,56,39],[43,43,56,40,"ws"],[43,45,56,42],[43,46,56,43,"destroyed"],[43,55,56,53],[43,56,56,54],[43,58,56,56],[43,65,56,63,"callback"],[43,73,56,71],[43,74,56,72,"call"],[43,78,56,76],[43,79,56,77,"stream"],[43,85,56,83],[43,87,56,85],[43,91,56,89,"Error"],[43,96,56,94],[43,97,56,95],[43,114,56,112],[43,115,56,113],[43,116,56,114],[44,4,57,1],[44,5,57,2],[45,4,59,1],[45,8,59,5,"onrequest"],[45,17,59,14],[45,20,59,17],[45,29,59,17,"onrequest"],[45,30,59,17],[45,32,59,28],[46,6,60,2,"stream"],[46,12,60,8],[46,13,60,9,"req"],[46,16,60,12],[46,17,60,13,"on"],[46,19,60,15],[46,20,60,16],[46,28,60,24],[46,30,60,26,"onfinish"],[46,38,60,34],[46,39,60,35],[47,4,61,1],[47,5,61,2],[48,4,63,1],[48,8,63,5,"isRequest"],[48,17,63,14],[48,18,63,15,"stream"],[48,24,63,21],[48,25,63,22],[48,27,63,24],[49,6,64,2,"stream"],[49,12,64,8],[49,13,64,9,"on"],[49,15,64,11],[49,16,64,12],[49,26,64,22],[49,28,64,24,"onfinish"],[49,36,64,32],[49,37,64,33],[50,6,65,2,"stream"],[50,12,65,8],[50,13,65,9,"on"],[50,15,65,11],[50,16,65,12],[50,23,65,19],[50,25,65,21,"onclose"],[50,32,65,28],[50,33,65,29],[51,6,66,2],[51,10,66,6,"stream"],[51,16,66,12],[51,17,66,13,"req"],[51,20,66,16],[51,22,66,18,"onrequest"],[51,31,66,27],[51,32,66,28],[51,33,66,29],[51,34,66,30],[51,39,67,7,"stream"],[51,45,67,13],[51,46,67,14,"on"],[51,48,67,16],[51,49,67,17],[51,58,67,26],[51,60,67,28,"onrequest"],[51,69,67,37],[51,70,67,38],[52,4,68,1],[52,5,68,2],[52,11,68,8],[52,15,68,12,"writable"],[52,23,68,20],[52,27,68,24],[52,28,68,25,"ws"],[52,30,68,27],[52,32,68,29],[53,6,68,31],[54,6,69,2,"stream"],[54,12,69,8],[54,13,69,9,"on"],[54,15,69,11],[54,16,69,12],[54,21,69,17],[54,23,69,19,"onlegacyfinish"],[54,37,69,33],[54,38,69,34],[55,6,70,2,"stream"],[55,12,70,8],[55,13,70,9,"on"],[55,15,70,11],[55,16,70,12],[55,23,70,19],[55,25,70,21,"onlegacyfinish"],[55,39,70,35],[55,40,70,36],[56,4,71,1],[57,4,73,1],[57,8,73,5,"isChildProcess"],[57,22,73,19],[57,23,73,20,"stream"],[57,29,73,26],[57,30,73,27],[57,32,73,29,"stream"],[57,38,73,35],[57,39,73,36,"on"],[57,41,73,38],[57,42,73,39],[57,48,73,45],[57,50,73,47,"onexit"],[57,56,73,53],[57,57,73,54],[58,4,75,1,"stream"],[58,10,75,7],[58,11,75,8,"on"],[58,13,75,10],[58,14,75,11],[58,19,75,16],[58,21,75,18,"onend"],[58,26,75,23],[58,27,75,24],[59,4,76,1,"stream"],[59,10,76,7],[59,11,76,8,"on"],[59,13,76,10],[59,14,76,11],[59,22,76,19],[59,24,76,21,"onfinish"],[59,32,76,29],[59,33,76,30],[60,4,77,1],[60,8,77,5,"opts"],[60,12,77,9],[60,13,77,10,"error"],[60,18,77,15],[60,23,77,20],[60,28,77,25],[60,30,77,27,"stream"],[60,36,77,33],[60,37,77,34,"on"],[60,39,77,36],[60,40,77,37],[60,47,77,44],[60,49,77,46,"onerror"],[60,56,77,53],[60,57,77,54],[61,4,78,1,"stream"],[61,10,78,7],[61,11,78,8,"on"],[61,13,78,10],[61,14,78,11],[61,21,78,18],[61,23,78,20,"onclose"],[61,30,78,27],[61,31,78,28],[62,4,80,1],[62,11,80,8],[62,23,80,19],[63,6,81,2,"cancelled"],[63,15,81,11],[63,18,81,14],[63,22,81,18],[64,6,82,2,"stream"],[64,12,82,8],[64,13,82,9,"removeListener"],[64,27,82,23],[64,28,82,24],[64,38,82,34],[64,40,82,36,"onfinish"],[64,48,82,44],[64,49,82,45],[65,6,83,2,"stream"],[65,12,83,8],[65,13,83,9,"removeListener"],[65,27,83,23],[65,28,83,24],[65,35,83,31],[65,37,83,33,"onclose"],[65,44,83,40],[65,45,83,41],[66,6,84,2,"stream"],[66,12,84,8],[66,13,84,9,"removeListener"],[66,27,84,23],[66,28,84,24],[66,37,84,33],[66,39,84,35,"onrequest"],[66,48,84,44],[66,49,84,45],[67,6,85,2],[67,10,85,6,"stream"],[67,16,85,12],[67,17,85,13,"req"],[67,20,85,16],[67,22,85,18,"stream"],[67,28,85,24],[67,29,85,25,"req"],[67,32,85,28],[67,33,85,29,"removeListener"],[67,47,85,43],[67,48,85,44],[67,56,85,52],[67,58,85,54,"onfinish"],[67,66,85,62],[67,67,85,63],[68,6,86,2,"stream"],[68,12,86,8],[68,13,86,9,"removeListener"],[68,27,86,23],[68,28,86,24],[68,33,86,29],[68,35,86,31,"onlegacyfinish"],[68,49,86,45],[68,50,86,46],[69,6,87,2,"stream"],[69,12,87,8],[69,13,87,9,"removeListener"],[69,27,87,23],[69,28,87,24],[69,35,87,31],[69,37,87,33,"onlegacyfinish"],[69,51,87,47],[69,52,87,48],[70,6,88,2,"stream"],[70,12,88,8],[70,13,88,9,"removeListener"],[70,27,88,23],[70,28,88,24],[70,36,88,32],[70,38,88,34,"onfinish"],[70,46,88,42],[70,47,88,43],[71,6,89,2,"stream"],[71,12,89,8],[71,13,89,9,"removeListener"],[71,27,89,23],[71,28,89,24],[71,34,89,30],[71,36,89,32,"onexit"],[71,42,89,38],[71,43,89,39],[72,6,90,2,"stream"],[72,12,90,8],[72,13,90,9,"removeListener"],[72,27,90,23],[72,28,90,24],[72,33,90,29],[72,35,90,31,"onend"],[72,40,90,36],[72,41,90,37],[73,6,91,2,"stream"],[73,12,91,8],[73,13,91,9,"removeListener"],[73,27,91,23],[73,28,91,24],[73,35,91,31],[73,37,91,33,"onerror"],[73,44,91,40],[73,45,91,41],[74,6,92,2,"stream"],[74,12,92,8],[74,13,92,9,"removeListener"],[74,27,92,23],[74,28,92,24],[74,35,92,31],[74,37,92,33,"onclose"],[74,44,92,40],[74,45,92,41],[75,4,93,1],[75,5,93,2],[76,2,94,0],[76,3,94,1],[77,2,96,0,"module"],[77,8,96,6],[77,9,96,7,"exports"],[77,16,96,14],[77,19,96,17,"eos"],[77,22,96,20],[78,0,96,21],[78,3]],"functionMap":{"names":["<global>","noop","isRequest","isChildProcess","eos","onlegacyfinish","onfinish","onend","onexit","onerror","onclose","onclosenexttick","onrequest","<anonymous>"],"mappings":"AAA;WCE,aD;gBEI;CFE;qBGE;CHE;UIE;sBCY;EDE;gBEE;EFG;aGE;EHG;cIE;EJE;eKE;ELE;eME;ENE;uBOE;EPI;iBQE;ERE;QSmB;ETa;CJC"},"hasCjsExports":true},"type":"js/module"}]}