{"dependencies":[{"name":"../encoding/toBytes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"GqDTp/VAr9RTfwQrAix+tpikPzk=","exportNames":["*"],"imports":1}},{"name":"../encoding/toHex.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":50,"index":103}}],"key":"1u7+Hy8ShwFUBPl4caP50RjfjdI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.signatureToCompactSignature = signatureToCompactSignature;\n  var _encodingToBytesJs = require(_dependencyMap[0], \"../encoding/toBytes.js\");\n  var _encodingToHexJs = require(_dependencyMap[1], \"../encoding/toHex.js\");\n  /**\n   * @description Converts a signature into an [EIP-2098 compact signature](https://eips.ethereum.org/EIPS/eip-2098).\n   *\n   * @param signature The signature to convert.\n   * @returns The signature in compact format.\n   *\n   * @example\n   * signatureToCompactSignature({\n   *   r: '0x68a020a209d3d56c46f38cc50a33f704f4a9a10a59377f8dd762ac66910e9b90',\n   *   s: '0x7e865ad05c4035ab5792787d4a0297a43617ae897930a6fe4d822b8faea52064',\n   *   yParity: 0\n   * })\n   * // {\n   * //   r: '0x68a020a209d3d56c46f38cc50a33f704f4a9a10a59377f8dd762ac66910e9b90',\n   * //   yParityAndS: '0x7e865ad05c4035ab5792787d4a0297a43617ae897930a6fe4d822b8faea52064'\n   * // }\n   */\n  function signatureToCompactSignature(signature) {\n    const {\n      r,\n      s,\n      v,\n      yParity\n    } = signature;\n    const yParity_ = Number(yParity ?? v - 27n);\n    let yParityAndS = s;\n    if (yParity_ === 1) {\n      const bytes = (0, _encodingToBytesJs.hexToBytes)(s);\n      bytes[0] |= 0x80;\n      yParityAndS = (0, _encodingToHexJs.bytesToHex)(bytes);\n    }\n    return {\n      r,\n      yParityAndS\n    };\n  }\n});","lineCount":46,"map":[[7,2,20,0,"exports"],[7,9,20,0],[7,10,20,0,"signatureToCompactSignature"],[7,37,20,0],[7,40,20,0,"signatureToCompactSignature"],[7,67,20,0],[8,2,1,0],[8,6,1,0,"_encodingToBytesJs"],[8,24,1,0],[8,27,1,0,"require"],[8,34,1,0],[8,35,1,0,"_dependencyMap"],[8,49,1,0],[9,2,2,0],[9,6,2,0,"_encodingToHexJs"],[9,22,2,0],[9,25,2,0,"require"],[9,32,2,0],[9,33,2,0,"_dependencyMap"],[9,47,2,0],[10,2,3,0],[11,0,4,0],[12,0,5,0],[13,0,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[17,0,10,0],[18,0,11,0],[19,0,12,0],[20,0,13,0],[21,0,14,0],[22,0,15,0],[23,0,16,0],[24,0,17,0],[25,0,18,0],[26,0,19,0],[27,2,20,7],[27,11,20,16,"signatureToCompactSignature"],[27,38,20,43,"signatureToCompactSignature"],[27,39,20,44,"signature"],[27,48,20,53],[27,50,20,55],[28,4,21,4],[28,10,21,10],[29,6,21,12,"r"],[29,7,21,13],[30,6,21,15,"s"],[30,7,21,16],[31,6,21,18,"v"],[31,7,21,19],[32,6,21,21,"yParity"],[33,4,21,29],[33,5,21,30],[33,8,21,33,"signature"],[33,17,21,42],[34,4,22,4],[34,10,22,10,"yParity_"],[34,18,22,18],[34,21,22,21,"Number"],[34,27,22,27],[34,28,22,28,"yParity"],[34,35,22,35],[34,39,22,39,"v"],[34,40,22,40],[34,43,22,43],[34,46,22,46],[34,47,22,47],[35,4,23,4],[35,8,23,8,"yParityAndS"],[35,19,23,19],[35,22,23,22,"s"],[35,23,23,23],[36,4,24,4],[36,8,24,8,"yParity_"],[36,16,24,16],[36,21,24,21],[36,22,24,22],[36,24,24,24],[37,6,25,8],[37,12,25,14,"bytes"],[37,17,25,19],[37,20,25,22],[37,24,25,22,"hexToBytes"],[37,42,25,32],[37,43,25,32,"hexToBytes"],[37,53,25,32],[37,55,25,33,"s"],[37,56,25,34],[37,57,25,35],[38,6,26,8,"bytes"],[38,11,26,13],[38,12,26,14],[38,13,26,15],[38,14,26,16],[38,18,26,20],[38,22,26,24],[39,6,27,8,"yParityAndS"],[39,17,27,19],[39,20,27,22],[39,24,27,22,"bytesToHex"],[39,40,27,32],[39,41,27,32,"bytesToHex"],[39,51,27,32],[39,53,27,33,"bytes"],[39,58,27,38],[39,59,27,39],[40,4,28,4],[41,4,29,4],[41,11,29,11],[42,6,29,13,"r"],[42,7,29,14],[43,6,29,16,"yParityAndS"],[44,4,29,28],[44,5,29,29],[45,2,30,0],[46,0,30,1],[46,3]],"functionMap":{"names":["<global>","signatureToCompactSignature"],"mappings":"AAA;OCmB;CDU"},"hasCjsExports":false},"type":"js/module"}]}