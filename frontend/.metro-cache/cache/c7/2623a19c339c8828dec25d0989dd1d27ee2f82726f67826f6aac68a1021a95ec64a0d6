{"dependencies":[{"name":"./abstract","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":19,"index":137},"end":{"line":7,"column":40,"index":158}}],"key":"6weGtcTgUrBSGCEb9+arSKHTMcA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WindowWindowChannel = void 0;\n  const abstract_1 = require(_dependencyMap[0], \"./abstract\");\n  class WindowWindowChannel extends abstract_1.AbstractMessageChannel {\n    constructor({\n      windowHere,\n      windowPeer,\n      channel,\n      logger,\n      origin,\n      legacyMode\n    }) {\n      super({\n        channel,\n        sendFn: message => {\n          windowPeer()?.postMessage(message, origin);\n        },\n        logger,\n        legacyMode\n      });\n      this._listener = this.listener.bind(this);\n      this._windowHere = windowHere;\n      this.connect();\n    }\n    listener(event) {\n      const message = {\n        ...event.data,\n        success: true,\n        origin: event.origin,\n        payload: event.data.payload || {},\n        channel: event.data.channel || {\n          peer: this.channel.here,\n          here: this.channel.peer\n        }\n      };\n      this.onMessage(message);\n    }\n    connect() {\n      this._windowHere.addEventListener('message', this._listener);\n      this.isConnected = true;\n    }\n    disconnect() {\n      if (!this.isConnected) return;\n      this._windowHere.removeEventListener('message', this._listener);\n      this.isConnected = false;\n    }\n  }\n  exports.WindowWindowChannel = WindowWindowChannel;\n});","lineCount":54,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"WindowWindowChannel"],[7,29,6,27],[7,32,6,30],[7,37,6,35],[7,38,6,36],[8,2,7,0],[8,8,7,6,"abstract_1"],[8,18,7,16],[8,21,7,19,"require"],[8,28,7,26],[8,29,7,26,"_dependencyMap"],[8,43,7,26],[8,60,7,39],[8,61,7,40],[9,2,8,0],[9,8,8,6,"WindowWindowChannel"],[9,27,8,25],[9,36,8,34,"abstract_1"],[9,46,8,44],[9,47,8,45,"AbstractMessageChannel"],[9,69,8,67],[9,70,8,68],[10,4,11,2,"constructor"],[10,15,11,13,"constructor"],[10,16,11,14],[11,6,12,4,"windowHere"],[11,16,12,14],[12,6,13,4,"windowPeer"],[12,16,13,14],[13,6,14,4,"channel"],[13,13,14,11],[14,6,15,4,"logger"],[14,12,15,10],[15,6,16,4,"origin"],[15,12,16,10],[16,6,17,4,"legacyMode"],[17,4,18,2],[17,5,18,3],[17,7,18,5],[18,6,19,4],[18,11,19,9],[18,12,19,10],[19,8,20,6,"channel"],[19,15,20,13],[20,8,21,6,"sendFn"],[20,14,21,12],[20,16,21,14,"message"],[20,23,21,21],[20,27,21,25],[21,10,22,8,"windowPeer"],[21,20,22,18],[21,21,22,19],[21,22,22,20],[21,24,22,22,"postMessage"],[21,35,22,33],[21,36,22,34,"message"],[21,43,22,41],[21,45,22,43,"origin"],[21,51,22,49],[21,52,22,50],[22,8,23,6],[22,9,23,7],[23,8,24,6,"logger"],[23,14,24,12],[24,8,25,6,"legacyMode"],[25,6,26,4],[25,7,26,5],[25,8,26,6],[26,6,27,4],[26,10,27,8],[26,11,27,9,"_listener"],[26,20,27,18],[26,23,27,21],[26,27,27,25],[26,28,27,26,"listener"],[26,36,27,34],[26,37,27,35,"bind"],[26,41,27,39],[26,42,27,40],[26,46,27,44],[26,47,27,45],[27,6,28,4],[27,10,28,8],[27,11,28,9,"_windowHere"],[27,22,28,20],[27,25,28,23,"windowHere"],[27,35,28,33],[28,6,29,4],[28,10,29,8],[28,11,29,9,"connect"],[28,18,29,16],[28,19,29,17],[28,20,29,18],[29,4,30,2],[30,4,31,2,"listener"],[30,12,31,10,"listener"],[30,13,31,11,"event"],[30,18,31,16],[30,20,31,18],[31,6,32,4],[31,12,32,10,"message"],[31,19,32,17],[31,22,32,20],[32,8,33,6],[32,11,33,9,"event"],[32,16,33,14],[32,17,33,15,"data"],[32,21,33,19],[33,8,34,6,"success"],[33,15,34,13],[33,17,34,15],[33,21,34,19],[34,8,35,6,"origin"],[34,14,35,12],[34,16,35,14,"event"],[34,21,35,19],[34,22,35,20,"origin"],[34,28,35,26],[35,8,36,6,"payload"],[35,15,36,13],[35,17,36,15,"event"],[35,22,36,20],[35,23,36,21,"data"],[35,27,36,25],[35,28,36,26,"payload"],[35,35,36,33],[35,39,36,37],[35,40,36,38],[35,41,36,39],[36,8,37,6,"channel"],[36,15,37,13],[36,17,37,15,"event"],[36,22,37,20],[36,23,37,21,"data"],[36,27,37,25],[36,28,37,26,"channel"],[36,35,37,33],[36,39,37,37],[37,10,38,8,"peer"],[37,14,38,12],[37,16,38,14],[37,20,38,18],[37,21,38,19,"channel"],[37,28,38,26],[37,29,38,27,"here"],[37,33,38,31],[38,10,39,8,"here"],[38,14,39,12],[38,16,39,14],[38,20,39,18],[38,21,39,19,"channel"],[38,28,39,26],[38,29,39,27,"peer"],[39,8,40,6],[40,6,41,4],[40,7,41,5],[41,6,42,4],[41,10,42,8],[41,11,42,9,"onMessage"],[41,20,42,18],[41,21,42,19,"message"],[41,28,42,26],[41,29,42,27],[42,4,43,2],[43,4,44,2,"connect"],[43,11,44,9,"connect"],[43,12,44,9],[43,14,44,12],[44,6,45,4],[44,10,45,8],[44,11,45,9,"_windowHere"],[44,22,45,20],[44,23,45,21,"addEventListener"],[44,39,45,37],[44,40,45,38],[44,49,45,47],[44,51,45,49],[44,55,45,53],[44,56,45,54,"_listener"],[44,65,45,63],[44,66,45,64],[45,6,46,4],[45,10,46,8],[45,11,46,9,"isConnected"],[45,22,46,20],[45,25,46,23],[45,29,46,27],[46,4,47,2],[47,4,48,2,"disconnect"],[47,14,48,12,"disconnect"],[47,15,48,12],[47,17,48,15],[48,6,49,4],[48,10,49,8],[48,11,49,9],[48,15,49,13],[48,16,49,14,"isConnected"],[48,27,49,25],[48,29,49,27],[49,6,50,4],[49,10,50,8],[49,11,50,9,"_windowHere"],[49,22,50,20],[49,23,50,21,"removeEventListener"],[49,42,50,40],[49,43,50,41],[49,52,50,50],[49,54,50,52],[49,58,50,56],[49,59,50,57,"_listener"],[49,68,50,66],[49,69,50,67],[50,6,51,4],[50,10,51,8],[50,11,51,9,"isConnected"],[50,22,51,20],[50,25,51,23],[50,30,51,28],[51,4,52,2],[52,2,53,0],[53,2,54,0,"exports"],[53,9,54,7],[53,10,54,8,"WindowWindowChannel"],[53,29,54,27],[53,32,54,30,"WindowWindowChannel"],[53,51,54,49],[54,0,54,50],[54,3]],"functionMap":{"names":["<global>","WindowWindowChannel","WindowWindowChannel#constructor","sendFn","WindowWindowChannel#listener","WindowWindowChannel#connect","WindowWindowChannel#disconnect"],"mappings":"AAA;ACO;ECG;cCU;ODE;GDO;EGC;GHY;EIC;GJG;EKC;GLI;CDC"},"hasCjsExports":true},"type":"js/module"}]}