{"dependencies":[{"name":"../encoding/toBytes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":56,"index":56}}],"key":"GqDTp/VAr9RTfwQrAix+tpikPzk=","exportNames":["*"],"imports":1}},{"name":"./encodeLabelhash.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":57},"end":{"line":2,"column":56,"index":113}}],"key":"hI3raQIK6+TB8zKQtxAFyScY3VE=","exportNames":["*"],"imports":1}},{"name":"./labelhash.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":114},"end":{"line":3,"column":43,"index":157}}],"key":"OcX6vziNjcZzNFCGO8nLaBjwuwM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.packetToBytes = packetToBytes;\n  var _encodingToBytesJs = require(_dependencyMap[0], \"../encoding/toBytes.js\");\n  var _encodeLabelhashJs = require(_dependencyMap[1], \"./encodeLabelhash.js\");\n  var _labelhashJs = require(_dependencyMap[2], \"./labelhash.js\");\n  /*\n   * @description Encodes a DNS packet into a ByteArray containing a UDP payload.\n   *\n   * @example\n   * packetToBytes('awkweb.eth')\n   * '0x0661776b7765620365746800'\n   *\n   * @see https://docs.ens.domains/resolution/names#dns\n   *\n   */\n  function packetToBytes(packet) {\n    // strip leading and trailing `.`\n    const value = packet.replace(/^\\.|\\.$/gm, '');\n    if (value.length === 0) return new Uint8Array(1);\n    const bytes = new Uint8Array((0, _encodingToBytesJs.stringToBytes)(value).byteLength + 2);\n    let offset = 0;\n    const list = value.split('.');\n    for (let i = 0; i < list.length; i++) {\n      let encoded = (0, _encodingToBytesJs.stringToBytes)(list[i]);\n      // if the length is > 255, make the encoded label value a labelhash\n      // this is compatible with the universal resolver\n      if (encoded.byteLength > 255) encoded = (0, _encodingToBytesJs.stringToBytes)((0, _encodeLabelhashJs.encodeLabelhash)((0, _labelhashJs.labelhash)(list[i])));\n      bytes[offset] = encoded.length;\n      bytes.set(encoded, offset + 1);\n      offset += encoded.length + 1;\n    }\n    if (bytes.byteLength !== offset + 1) return bytes.slice(0, offset + 1);\n    return bytes;\n  }\n});","lineCount":40,"map":[[7,2,14,0,"exports"],[7,9,14,0],[7,10,14,0,"packetToBytes"],[7,23,14,0],[7,26,14,0,"packetToBytes"],[7,39,14,0],[8,2,1,0],[8,6,1,0,"_encodingToBytesJs"],[8,24,1,0],[8,27,1,0,"require"],[8,34,1,0],[8,35,1,0,"_dependencyMap"],[8,49,1,0],[9,2,2,0],[9,6,2,0,"_encodeLabelhashJs"],[9,24,2,0],[9,27,2,0,"require"],[9,34,2,0],[9,35,2,0,"_dependencyMap"],[9,49,2,0],[10,2,3,0],[10,6,3,0,"_labelhashJs"],[10,18,3,0],[10,21,3,0,"require"],[10,28,3,0],[10,29,3,0,"_dependencyMap"],[10,43,3,0],[11,2,4,0],[12,0,5,0],[13,0,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[17,0,10,0],[18,0,11,0],[19,0,12,0],[20,0,13,0],[21,2,14,7],[21,11,14,16,"packetToBytes"],[21,24,14,29,"packetToBytes"],[21,25,14,30,"packet"],[21,31,14,36],[21,33,14,38],[22,4,15,4],[23,4,16,4],[23,10,16,10,"value"],[23,15,16,15],[23,18,16,18,"packet"],[23,24,16,24],[23,25,16,25,"replace"],[23,32,16,32],[23,33,16,33],[23,44,16,44],[23,46,16,46],[23,48,16,48],[23,49,16,49],[24,4,17,4],[24,8,17,8,"value"],[24,13,17,13],[24,14,17,14,"length"],[24,20,17,20],[24,25,17,25],[24,26,17,26],[24,28,18,8],[24,35,18,15],[24,39,18,19,"Uint8Array"],[24,49,18,29],[24,50,18,30],[24,51,18,31],[24,52,18,32],[25,4,19,4],[25,10,19,10,"bytes"],[25,15,19,15],[25,18,19,18],[25,22,19,22,"Uint8Array"],[25,32,19,32],[25,33,19,33],[25,37,19,33,"stringToBytes"],[25,55,19,46],[25,56,19,46,"stringToBytes"],[25,69,19,46],[25,71,19,47,"value"],[25,76,19,52],[25,77,19,53],[25,78,19,54,"byteLength"],[25,88,19,64],[25,91,19,67],[25,92,19,68],[25,93,19,69],[26,4,20,4],[26,8,20,8,"offset"],[26,14,20,14],[26,17,20,17],[26,18,20,18],[27,4,21,4],[27,10,21,10,"list"],[27,14,21,14],[27,17,21,17,"value"],[27,22,21,22],[27,23,21,23,"split"],[27,28,21,28],[27,29,21,29],[27,32,21,32],[27,33,21,33],[28,4,22,4],[28,9,22,9],[28,13,22,13,"i"],[28,14,22,14],[28,17,22,17],[28,18,22,18],[28,20,22,20,"i"],[28,21,22,21],[28,24,22,24,"list"],[28,28,22,28],[28,29,22,29,"length"],[28,35,22,35],[28,37,22,37,"i"],[28,38,22,38],[28,40,22,40],[28,42,22,42],[29,6,23,8],[29,10,23,12,"encoded"],[29,17,23,19],[29,20,23,22],[29,24,23,22,"stringToBytes"],[29,42,23,35],[29,43,23,35,"stringToBytes"],[29,56,23,35],[29,58,23,36,"list"],[29,62,23,40],[29,63,23,41,"i"],[29,64,23,42],[29,65,23,43],[29,66,23,44],[30,6,24,8],[31,6,25,8],[32,6,26,8],[32,10,26,12,"encoded"],[32,17,26,19],[32,18,26,20,"byteLength"],[32,28,26,30],[32,31,26,33],[32,34,26,36],[32,36,27,12,"encoded"],[32,43,27,19],[32,46,27,22],[32,50,27,22,"stringToBytes"],[32,68,27,35],[32,69,27,35,"stringToBytes"],[32,82,27,35],[32,84,27,36],[32,88,27,36,"encodeLabelhash"],[32,106,27,51],[32,107,27,51,"encodeLabelhash"],[32,122,27,51],[32,124,27,52],[32,128,27,52,"labelhash"],[32,140,27,61],[32,141,27,61,"labelhash"],[32,150,27,61],[32,152,27,62,"list"],[32,156,27,66],[32,157,27,67,"i"],[32,158,27,68],[32,159,27,69],[32,160,27,70],[32,161,27,71],[32,162,27,72],[33,6,28,8,"bytes"],[33,11,28,13],[33,12,28,14,"offset"],[33,18,28,20],[33,19,28,21],[33,22,28,24,"encoded"],[33,29,28,31],[33,30,28,32,"length"],[33,36,28,38],[34,6,29,8,"bytes"],[34,11,29,13],[34,12,29,14,"set"],[34,15,29,17],[34,16,29,18,"encoded"],[34,23,29,25],[34,25,29,27,"offset"],[34,31,29,33],[34,34,29,36],[34,35,29,37],[34,36,29,38],[35,6,30,8,"offset"],[35,12,30,14],[35,16,30,18,"encoded"],[35,23,30,25],[35,24,30,26,"length"],[35,30,30,32],[35,33,30,35],[35,34,30,36],[36,4,31,4],[37,4,32,4],[37,8,32,8,"bytes"],[37,13,32,13],[37,14,32,14,"byteLength"],[37,24,32,24],[37,29,32,29,"offset"],[37,35,32,35],[37,38,32,38],[37,39,32,39],[37,41,33,8],[37,48,33,15,"bytes"],[37,53,33,20],[37,54,33,21,"slice"],[37,59,33,26],[37,60,33,27],[37,61,33,28],[37,63,33,30,"offset"],[37,69,33,36],[37,72,33,39],[37,73,33,40],[37,74,33,41],[38,4,34,4],[38,11,34,11,"bytes"],[38,16,34,16],[39,2,35,0],[40,0,35,1],[40,3]],"functionMap":{"names":["<global>","packetToBytes"],"mappings":"AAA;OCa;CDqB"},"hasCjsExports":false},"type":"js/module"}]}