{"dependencies":[{"name":"../../constants/abis.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":70,"index":70}}],"key":"LZvwvaZmwAX6SyAqVHRt5iP6qx8=","exportNames":["*"],"imports":1}},{"name":"../../utils/chain/getChainContractAddress.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":71},"end":{"line":2,"column":88,"index":159}}],"key":"8qS5kCcV3GKt7vxDZBWLzJuplRM=","exportNames":["*"],"imports":1}},{"name":"../../utils/encoding/toHex.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":54,"index":214}}],"key":"U2IsyW1seIe5m4FUbe8axrr/0FQ=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/errors.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":215},"end":{"line":4,"column":73,"index":288}}],"key":"PnlrScciUN4PT5dk7YYfSZS8dDA=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/packetToBytes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":289},"end":{"line":5,"column":66,"index":355}}],"key":"vy6lnJxRhohVWN+VTecRsVVoAi0=","exportNames":["*"],"imports":1}},{"name":"../../utils/getAction.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":356},"end":{"line":6,"column":53,"index":409}}],"key":"vt4scbNyA2t/tyY0oQJI6AZPJS4=","exportNames":["*"],"imports":1}},{"name":"../public/readContract.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":410},"end":{"line":7,"column":58,"index":468}}],"key":"duxLiRpfja/POd/F8+OKH9hCagk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getEnsName = getEnsName;\n  var _constantsAbisJs = require(_dependencyMap[0], \"../../constants/abis.js\");\n  var _utilsChainGetChainContractAddressJs = require(_dependencyMap[1], \"../../utils/chain/getChainContractAddress.js\");\n  var _utilsEncodingToHexJs = require(_dependencyMap[2], \"../../utils/encoding/toHex.js\");\n  var _utilsEnsErrorsJs = require(_dependencyMap[3], \"../../utils/ens/errors.js\");\n  var _utilsEnsPacketToBytesJs = require(_dependencyMap[4], \"../../utils/ens/packetToBytes.js\");\n  var _utilsGetActionJs = require(_dependencyMap[5], \"../../utils/getAction.js\");\n  var _publicReadContractJs = require(_dependencyMap[6], \"../public/readContract.js\");\n  /**\n   * Gets primary name for specified address.\n   *\n   * - Docs: https://viem.sh/docs/ens/actions/getEnsName\n   * - Examples: https://stackblitz.com/github/wevm/viem/tree/main/examples/ens\n   *\n   * Calls `reverse(bytes)` on ENS Universal Resolver Contract to \"reverse resolve\" the address to the primary ENS name.\n   *\n   * @param client - Client to use\n   * @param parameters - {@link GetEnsNameParameters}\n   * @returns Name or `null` if not found. {@link GetEnsNameReturnType}\n   *\n   * @example\n   * import { createPublicClient, http } from 'viem'\n   * import { mainnet } from 'viem/chains'\n   * import { getEnsName } from 'viem/ens'\n   *\n   * const client = createPublicClient({\n   *   chain: mainnet,\n   *   transport: http(),\n   * })\n   * const ensName = await getEnsName(client, {\n   *   address: '0xd2135CfB216b74109775236E36d4b433F1DF507B',\n   * })\n   * // 'wevm.eth'\n   */\n  async function getEnsName(client, {\n    address,\n    blockNumber,\n    blockTag,\n    gatewayUrls,\n    strict,\n    universalResolverAddress: universalResolverAddress_\n  }) {\n    let universalResolverAddress = universalResolverAddress_;\n    if (!universalResolverAddress) {\n      if (!client.chain) throw new Error('client chain not configured. universalResolverAddress is required.');\n      universalResolverAddress = (0, _utilsChainGetChainContractAddressJs.getChainContractAddress)({\n        blockNumber,\n        chain: client.chain,\n        contract: 'ensUniversalResolver'\n      });\n    }\n    const reverseNode = `${address.toLowerCase().substring(2)}.addr.reverse`;\n    try {\n      const readContractParameters = {\n        address: universalResolverAddress,\n        abi: _constantsAbisJs.universalResolverReverseAbi,\n        functionName: 'reverse',\n        args: [(0, _utilsEncodingToHexJs.toHex)((0, _utilsEnsPacketToBytesJs.packetToBytes)(reverseNode))],\n        blockNumber,\n        blockTag\n      };\n      const readContractAction = (0, _utilsGetActionJs.getAction)(client, _publicReadContractJs.readContract, 'readContract');\n      const [name, resolvedAddress] = gatewayUrls ? await readContractAction(Object.assign({}, readContractParameters, {\n        args: [...readContractParameters.args, gatewayUrls]\n      })) : await readContractAction(readContractParameters);\n      if (address.toLowerCase() !== resolvedAddress.toLowerCase()) return null;\n      return name;\n    } catch (err) {\n      if (strict) throw err;\n      if ((0, _utilsEnsErrorsJs.isNullUniversalResolverError)(err, 'reverse')) return null;\n      throw err;\n    }\n  }\n});","lineCount":80,"map":[[7,2,34,0,"exports"],[7,9,34,0],[7,10,34,0,"getEnsName"],[7,20,34,0],[7,23,34,0,"getEnsName"],[7,33,34,0],[8,2,1,0],[8,6,1,0,"_constantsAbisJs"],[8,22,1,0],[8,25,1,0,"require"],[8,32,1,0],[8,33,1,0,"_dependencyMap"],[8,47,1,0],[9,2,2,0],[9,6,2,0,"_utilsChainGetChainContractAddressJs"],[9,42,2,0],[9,45,2,0,"require"],[9,52,2,0],[9,53,2,0,"_dependencyMap"],[9,67,2,0],[10,2,3,0],[10,6,3,0,"_utilsEncodingToHexJs"],[10,27,3,0],[10,30,3,0,"require"],[10,37,3,0],[10,38,3,0,"_dependencyMap"],[10,52,3,0],[11,2,4,0],[11,6,4,0,"_utilsEnsErrorsJs"],[11,23,4,0],[11,26,4,0,"require"],[11,33,4,0],[11,34,4,0,"_dependencyMap"],[11,48,4,0],[12,2,5,0],[12,6,5,0,"_utilsEnsPacketToBytesJs"],[12,30,5,0],[12,33,5,0,"require"],[12,40,5,0],[12,41,5,0,"_dependencyMap"],[12,55,5,0],[13,2,6,0],[13,6,6,0,"_utilsGetActionJs"],[13,23,6,0],[13,26,6,0,"require"],[13,33,6,0],[13,34,6,0,"_dependencyMap"],[13,48,6,0],[14,2,7,0],[14,6,7,0,"_publicReadContractJs"],[14,27,7,0],[14,30,7,0,"require"],[14,37,7,0],[14,38,7,0,"_dependencyMap"],[14,52,7,0],[15,2,8,0],[16,0,9,0],[17,0,10,0],[18,0,11,0],[19,0,12,0],[20,0,13,0],[21,0,14,0],[22,0,15,0],[23,0,16,0],[24,0,17,0],[25,0,18,0],[26,0,19,0],[27,0,20,0],[28,0,21,0],[29,0,22,0],[30,0,23,0],[31,0,24,0],[32,0,25,0],[33,0,26,0],[34,0,27,0],[35,0,28,0],[36,0,29,0],[37,0,30,0],[38,0,31,0],[39,0,32,0],[40,0,33,0],[41,2,34,7],[41,17,34,22,"getEnsName"],[41,27,34,32,"getEnsName"],[41,28,34,33,"client"],[41,34,34,39],[41,36,34,41],[42,4,34,43,"address"],[42,11,34,50],[43,4,34,52,"blockNumber"],[43,15,34,63],[44,4,34,65,"blockTag"],[44,12,34,73],[45,4,34,75,"gatewayUrls"],[45,15,34,86],[46,4,34,88,"strict"],[46,10,34,94],[47,4,34,96,"universalResolverAddress"],[47,28,34,120],[47,30,34,122,"universalResolverAddress_"],[48,2,34,149],[48,3,34,150],[48,5,34,152],[49,4,35,4],[49,8,35,8,"universalResolverAddress"],[49,32,35,32],[49,35,35,35,"universalResolverAddress_"],[49,60,35,60],[50,4,36,4],[50,8,36,8],[50,9,36,9,"universalResolverAddress"],[50,33,36,33],[50,35,36,35],[51,6,37,8],[51,10,37,12],[51,11,37,13,"client"],[51,17,37,19],[51,18,37,20,"chain"],[51,23,37,25],[51,25,38,12],[51,31,38,18],[51,35,38,22,"Error"],[51,40,38,27],[51,41,38,28],[51,109,38,96],[51,110,38,97],[52,6,39,8,"universalResolverAddress"],[52,30,39,32],[52,33,39,35],[52,37,39,35,"getChainContractAddress"],[52,73,39,58],[52,74,39,58,"getChainContractAddress"],[52,97,39,58],[52,99,39,59],[53,8,40,12,"blockNumber"],[53,19,40,23],[54,8,41,12,"chain"],[54,13,41,17],[54,15,41,19,"client"],[54,21,41,25],[54,22,41,26,"chain"],[54,27,41,31],[55,8,42,12,"contract"],[55,16,42,20],[55,18,42,22],[56,6,43,8],[56,7,43,9],[56,8,43,10],[57,4,44,4],[58,4,45,4],[58,10,45,10,"reverseNode"],[58,21,45,21],[58,24,45,24],[58,27,45,27,"address"],[58,34,45,34],[58,35,45,35,"toLowerCase"],[58,46,45,46],[58,47,45,47],[58,48,45,48],[58,49,45,49,"substring"],[58,58,45,58],[58,59,45,59],[58,60,45,60],[58,61,45,61],[58,76,45,76],[59,4,46,4],[59,8,46,8],[60,6,47,8],[60,12,47,14,"readContractParameters"],[60,34,47,36],[60,37,47,39],[61,8,48,12,"address"],[61,15,48,19],[61,17,48,21,"universalResolverAddress"],[61,41,48,45],[62,8,49,12,"abi"],[62,11,49,15],[62,13,49,17,"universalResolverReverseAbi"],[62,29,49,44],[62,30,49,44,"universalResolverReverseAbi"],[62,57,49,44],[63,8,50,12,"functionName"],[63,20,50,24],[63,22,50,26],[63,31,50,35],[64,8,51,12,"args"],[64,12,51,16],[64,14,51,18],[64,15,51,19],[64,19,51,19,"toHex"],[64,40,51,24],[64,41,51,24,"toHex"],[64,46,51,24],[64,48,51,25],[64,52,51,25,"packetToBytes"],[64,76,51,38],[64,77,51,38,"packetToBytes"],[64,90,51,38],[64,92,51,39,"reverseNode"],[64,103,51,50],[64,104,51,51],[64,105,51,52],[64,106,51,53],[65,8,52,12,"blockNumber"],[65,19,52,23],[66,8,53,12,"blockTag"],[67,6,54,8],[67,7,54,9],[68,6,55,8],[68,12,55,14,"readContractAction"],[68,30,55,32],[68,33,55,35],[68,37,55,35,"getAction"],[68,54,55,44],[68,55,55,44,"getAction"],[68,64,55,44],[68,66,55,45,"client"],[68,72,55,51],[68,74,55,53,"readContract"],[68,95,55,65],[68,96,55,65,"readContract"],[68,108,55,65],[68,110,55,67],[68,124,55,81],[68,125,55,82],[69,6,56,8],[69,12,56,14],[69,13,56,15,"name"],[69,17,56,19],[69,19,56,21,"resolvedAddress"],[69,34,56,36],[69,35,56,37],[69,38,56,40,"gatewayUrls"],[69,49,56,51],[69,52,57,14],[69,58,57,20,"readContractAction"],[69,76,57,38],[69,77,57,38,"Object"],[69,83,57,38],[69,84,57,38,"assign"],[69,90,57,38],[69,95,58,19,"readContractParameters"],[69,117,58,41],[70,8,59,16,"args"],[70,12,59,20],[70,14,59,22],[70,15,59,23],[70,18,59,26,"readContractParameters"],[70,40,59,48],[70,41,59,49,"args"],[70,45,59,53],[70,47,59,55,"gatewayUrls"],[70,58,59,66],[71,6,59,67],[71,8,60,13],[71,9,60,14],[71,12,61,14],[71,18,61,20,"readContractAction"],[71,36,61,38],[71,37,61,39,"readContractParameters"],[71,59,61,61],[71,60,61,62],[72,6,62,8],[72,10,62,12,"address"],[72,17,62,19],[72,18,62,20,"toLowerCase"],[72,29,62,31],[72,30,62,32],[72,31,62,33],[72,36,62,38,"resolvedAddress"],[72,51,62,53],[72,52,62,54,"toLowerCase"],[72,63,62,65],[72,64,62,66],[72,65,62,67],[72,67,63,12],[72,74,63,19],[72,78,63,23],[73,6,64,8],[73,13,64,15,"name"],[73,17,64,19],[74,4,65,4],[74,5,65,5],[74,6,66,4],[74,13,66,11,"err"],[74,16,66,14],[74,18,66,16],[75,6,67,8],[75,10,67,12,"strict"],[75,16,67,18],[75,18,68,12],[75,24,68,18,"err"],[75,27,68,21],[76,6,69,8],[76,10,69,12],[76,14,69,12,"isNullUniversalResolverError"],[76,31,69,40],[76,32,69,40,"isNullUniversalResolverError"],[76,60,69,40],[76,62,69,41,"err"],[76,65,69,44],[76,67,69,46],[76,76,69,55],[76,77,69,56],[76,79,70,12],[76,86,70,19],[76,90,70,23],[77,6,71,8],[77,12,71,14,"err"],[77,15,71,17],[78,4,72,4],[79,2,73,0],[80,0,73,1],[80,3]],"functionMap":{"names":["<global>","getEnsName"],"mappings":"AAA;OCiC;CDuC"},"hasCjsExports":false},"type":"js/module"}]}