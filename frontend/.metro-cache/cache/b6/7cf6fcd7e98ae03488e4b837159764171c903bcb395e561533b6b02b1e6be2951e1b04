{"dependencies":[{"name":"./wait.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"jMoN28520GIvK8wHoV7TH9I7E1Q=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.poll = poll;\n  var _waitJs = require(_dependencyMap[0], \"./wait.js\");\n  /**\n   * @description Polls a function at a specified interval.\n   */\n  function poll(fn, {\n    emitOnBegin,\n    initialWaitTime,\n    interval\n  }) {\n    let active = true;\n    const unwatch = () => active = false;\n    const watch = async () => {\n      let data;\n      if (emitOnBegin) data = await fn({\n        unpoll: unwatch\n      });\n      const initialWait = (await initialWaitTime?.(data)) ?? interval;\n      await (0, _waitJs.wait)(initialWait);\n      const poll = async () => {\n        if (!active) return;\n        await fn({\n          unpoll: unwatch\n        });\n        await (0, _waitJs.wait)(interval);\n        poll();\n      };\n      poll();\n    };\n    watch();\n    return unwatch;\n  }\n});","lineCount":39,"map":[[7,2,5,0,"exports"],[7,9,5,0],[7,10,5,0,"poll"],[7,14,5,0],[7,17,5,0,"poll"],[7,21,5,0],[8,2,1,0],[8,6,1,0,"_waitJs"],[8,13,1,0],[8,16,1,0,"require"],[8,23,1,0],[8,24,1,0,"_dependencyMap"],[8,38,1,0],[9,2,2,0],[10,0,3,0],[11,0,4,0],[12,2,5,7],[12,11,5,16,"poll"],[12,15,5,20,"poll"],[12,16,5,21,"fn"],[12,18,5,23],[12,20,5,25],[13,4,5,27,"emitOnBegin"],[13,15,5,38],[14,4,5,40,"initialWaitTime"],[14,19,5,55],[15,4,5,57,"interval"],[16,2,5,66],[16,3,5,67],[16,5,5,69],[17,4,6,4],[17,8,6,8,"active"],[17,14,6,14],[17,17,6,17],[17,21,6,21],[18,4,7,4],[18,10,7,10,"unwatch"],[18,17,7,17],[18,20,7,20,"unwatch"],[18,21,7,20],[18,26,7,27,"active"],[18,32,7,33],[18,35,7,36],[18,40,7,42],[19,4,8,4],[19,10,8,10,"watch"],[19,15,8,15],[19,18,8,18],[19,24,8,18,"watch"],[19,25,8,18],[19,30,8,30],[20,6,9,8],[20,10,9,12,"data"],[20,14,9,16],[21,6,10,8],[21,10,10,12,"emitOnBegin"],[21,21,10,23],[21,23,11,12,"data"],[21,27,11,16],[21,30,11,19],[21,36,11,25,"fn"],[21,38,11,27],[21,39,11,28],[22,8,11,30,"unpoll"],[22,14,11,36],[22,16,11,38,"unwatch"],[23,6,11,46],[23,7,11,47],[23,8,11,48],[24,6,12,8],[24,12,12,14,"initialWait"],[24,23,12,25],[24,26,12,28],[24,27,12,29],[24,33,12,35,"initialWaitTime"],[24,48,12,50],[24,51,12,53,"data"],[24,55,12,57],[24,56,12,58],[24,61,12,63,"interval"],[24,69,12,71],[25,6,13,8],[25,12,13,14],[25,16,13,14,"wait"],[25,23,13,18],[25,24,13,18,"wait"],[25,28,13,18],[25,30,13,19,"initialWait"],[25,41,13,30],[25,42,13,31],[26,6,14,8],[26,12,14,14,"poll"],[26,16,14,18],[26,19,14,21],[26,25,14,21,"poll"],[26,26,14,21],[26,31,14,33],[27,8,15,12],[27,12,15,16],[27,13,15,17,"active"],[27,19,15,23],[27,21,16,16],[28,8,17,12],[28,14,17,18,"fn"],[28,16,17,20],[28,17,17,21],[29,10,17,23,"unpoll"],[29,16,17,29],[29,18,17,31,"unwatch"],[30,8,17,39],[30,9,17,40],[30,10,17,41],[31,8,18,12],[31,14,18,18],[31,18,18,18,"wait"],[31,25,18,22],[31,26,18,22,"wait"],[31,30,18,22],[31,32,18,23,"interval"],[31,40,18,31],[31,41,18,32],[32,8,19,12,"poll"],[32,12,19,16],[32,13,19,17],[32,14,19,18],[33,6,20,8],[33,7,20,9],[34,6,21,8,"poll"],[34,10,21,12],[34,11,21,13],[34,12,21,14],[35,4,22,4],[35,5,22,5],[36,4,23,4,"watch"],[36,9,23,9],[36,10,23,10],[36,11,23,11],[37,4,24,4],[37,11,24,11,"unwatch"],[37,18,24,18],[38,2,25,0],[39,0,25,1],[39,3]],"functionMap":{"names":["<global>","poll","unwatch","watch"],"mappings":"AAA;OCI;oBCE,sBD;kBEC;qBFM;SEM;KFE;CDG"},"hasCjsExports":false},"type":"js/module"}]}