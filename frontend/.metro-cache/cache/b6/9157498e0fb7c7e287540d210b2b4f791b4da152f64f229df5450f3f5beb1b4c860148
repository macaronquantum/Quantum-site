{"dependencies":[{"name":"../../regex.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"uAUnl82F1EUureqVBFUFZY23MM4=","exportNames":["*"],"imports":1}},{"name":"../errors/abiItem.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":56,"index":114}}],"key":"8nIjYK1/SBZ2yI8SzeyrFpuO2dM=","exportNames":["*"],"imports":1}},{"name":"../errors/abiParameter.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":115},"end":{"line":3,"column":73,"index":188}}],"key":"eTIp6+MI2HAjQP+EvzCl5j5Vj0Y=","exportNames":["*"],"imports":1}},{"name":"../errors/signature.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":189},"end":{"line":4,"column":93,"index":282}}],"key":"JBZsK+A5GGevN+hoeVtxkvorpcc=","exportNames":["*"],"imports":1}},{"name":"../errors/struct.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":283},"end":{"line":5,"column":61,"index":344}}],"key":"sRT4JkjtlpDBuNEmVPUW8kIDl+E=","exportNames":["*"],"imports":1}},{"name":"./signatures.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":345},"end":{"line":6,"column":73,"index":418}}],"key":"CpjYOAIzKuZmzwnalMJpZRsRkb4=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":419},"end":{"line":7,"column":63,"index":482}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.parseStructs = parseStructs;\n  var _regexJs = require(_dependencyMap[0], \"../../regex.js\");\n  var _errorsAbiItemJs = require(_dependencyMap[1], \"../errors/abiItem.js\");\n  var _errorsAbiParameterJs = require(_dependencyMap[2], \"../errors/abiParameter.js\");\n  var _errorsSignatureJs = require(_dependencyMap[3], \"../errors/signature.js\");\n  var _errorsStructJs = require(_dependencyMap[4], \"../errors/struct.js\");\n  var _signaturesJs = require(_dependencyMap[5], \"./signatures.js\");\n  var _utilsJs = require(_dependencyMap[6], \"./utils.js\");\n  function parseStructs(signatures) {\n    // Create \"shallow\" version of each struct (and filter out non-structs or invalid structs)\n    const shallowStructs = {};\n    const signaturesLength = signatures.length;\n    for (let i = 0; i < signaturesLength; i++) {\n      const signature = signatures[i];\n      if (!(0, _signaturesJs.isStructSignature)(signature)) continue;\n      const match = (0, _signaturesJs.execStructSignature)(signature);\n      if (!match) throw new _errorsSignatureJs.InvalidSignatureError({\n        signature,\n        type: 'struct'\n      });\n      const properties = match.properties.split(';');\n      const components = [];\n      const propertiesLength = properties.length;\n      for (let k = 0; k < propertiesLength; k++) {\n        const property = properties[k];\n        const trimmed = property.trim();\n        if (!trimmed) continue;\n        const abiParameter = (0, _utilsJs.parseAbiParameter)(trimmed, {\n          type: 'struct'\n        });\n        components.push(abiParameter);\n      }\n      if (!components.length) throw new _errorsSignatureJs.InvalidStructSignatureError({\n        signature\n      });\n      shallowStructs[match.name] = components;\n    }\n    // Resolve nested structs inside each parameter\n    const resolvedStructs = {};\n    const entries = Object.entries(shallowStructs);\n    const entriesLength = entries.length;\n    for (let i = 0; i < entriesLength; i++) {\n      const [name, parameters] = entries[i];\n      resolvedStructs[name] = resolveStructs(parameters, shallowStructs);\n    }\n    return resolvedStructs;\n  }\n  const typeWithoutTupleRegex = /^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\\[\\d*?\\])+?)?$/;\n  function resolveStructs(abiParameters, structs, ancestors = new Set()) {\n    const components = [];\n    const length = abiParameters.length;\n    for (let i = 0; i < length; i++) {\n      const abiParameter = abiParameters[i];\n      const isTuple = _regexJs.isTupleRegex.test(abiParameter.type);\n      if (isTuple) components.push(abiParameter);else {\n        const match = (0, _regexJs.execTyped)(typeWithoutTupleRegex, abiParameter.type);\n        if (!match?.type) throw new _errorsAbiParameterJs.InvalidAbiTypeParameterError({\n          abiParameter\n        });\n        const {\n          array,\n          type\n        } = match;\n        if (type in structs) {\n          if (ancestors.has(type)) throw new _errorsStructJs.CircularReferenceError({\n            type\n          });\n          components.push({\n            ...abiParameter,\n            type: `tuple${array ?? ''}`,\n            components: resolveStructs(structs[type] ?? [], structs, new Set([...ancestors, type]))\n          });\n        } else {\n          if ((0, _utilsJs.isSolidityType)(type)) components.push(abiParameter);else throw new _errorsAbiItemJs.UnknownTypeError({\n            type\n          });\n        }\n      }\n    }\n    return components;\n  }\n});","lineCount":88,"map":[[7,2,8,0,"exports"],[7,9,8,0],[7,10,8,0,"parseStructs"],[7,22,8,0],[7,25,8,0,"parseStructs"],[7,37,8,0],[8,2,1,0],[8,6,1,0,"_regexJs"],[8,14,1,0],[8,17,1,0,"require"],[8,24,1,0],[8,25,1,0,"_dependencyMap"],[8,39,1,0],[9,2,2,0],[9,6,2,0,"_errorsAbiItemJs"],[9,22,2,0],[9,25,2,0,"require"],[9,32,2,0],[9,33,2,0,"_dependencyMap"],[9,47,2,0],[10,2,3,0],[10,6,3,0,"_errorsAbiParameterJs"],[10,27,3,0],[10,30,3,0,"require"],[10,37,3,0],[10,38,3,0,"_dependencyMap"],[10,52,3,0],[11,2,4,0],[11,6,4,0,"_errorsSignatureJs"],[11,24,4,0],[11,27,4,0,"require"],[11,34,4,0],[11,35,4,0,"_dependencyMap"],[11,49,4,0],[12,2,5,0],[12,6,5,0,"_errorsStructJs"],[12,21,5,0],[12,24,5,0,"require"],[12,31,5,0],[12,32,5,0,"_dependencyMap"],[12,46,5,0],[13,2,6,0],[13,6,6,0,"_signaturesJs"],[13,19,6,0],[13,22,6,0,"require"],[13,29,6,0],[13,30,6,0,"_dependencyMap"],[13,44,6,0],[14,2,7,0],[14,6,7,0,"_utilsJs"],[14,14,7,0],[14,17,7,0,"require"],[14,24,7,0],[14,25,7,0,"_dependencyMap"],[14,39,7,0],[15,2,8,7],[15,11,8,16,"parseStructs"],[15,23,8,28,"parseStructs"],[15,24,8,29,"signatures"],[15,34,8,39],[15,36,8,41],[16,4,9,4],[17,4,10,4],[17,10,10,10,"shallowStructs"],[17,24,10,24],[17,27,10,27],[17,28,10,28],[17,29,10,29],[18,4,11,4],[18,10,11,10,"signaturesLength"],[18,26,11,26],[18,29,11,29,"signatures"],[18,39,11,39],[18,40,11,40,"length"],[18,46,11,46],[19,4,12,4],[19,9,12,9],[19,13,12,13,"i"],[19,14,12,14],[19,17,12,17],[19,18,12,18],[19,20,12,20,"i"],[19,21,12,21],[19,24,12,24,"signaturesLength"],[19,40,12,40],[19,42,12,42,"i"],[19,43,12,43],[19,45,12,45],[19,47,12,47],[20,6,13,8],[20,12,13,14,"signature"],[20,21,13,23],[20,24,13,26,"signatures"],[20,34,13,36],[20,35,13,37,"i"],[20,36,13,38],[20,37,13,39],[21,6,14,8],[21,10,14,12],[21,11,14,13],[21,15,14,13,"isStructSignature"],[21,28,14,30],[21,29,14,30,"isStructSignature"],[21,46,14,30],[21,48,14,31,"signature"],[21,57,14,40],[21,58,14,41],[21,60,15,12],[22,6,16,8],[22,12,16,14,"match"],[22,17,16,19],[22,20,16,22],[22,24,16,22,"execStructSignature"],[22,37,16,41],[22,38,16,41,"execStructSignature"],[22,57,16,41],[22,59,16,42,"signature"],[22,68,16,51],[22,69,16,52],[23,6,17,8],[23,10,17,12],[23,11,17,13,"match"],[23,16,17,18],[23,18,18,12],[23,24,18,18],[23,28,18,22,"InvalidSignatureError"],[23,46,18,43],[23,47,18,43,"InvalidSignatureError"],[23,68,18,43],[23,69,18,44],[24,8,18,46,"signature"],[24,17,18,55],[25,8,18,57,"type"],[25,12,18,61],[25,14,18,63],[26,6,18,72],[26,7,18,73],[26,8,18,74],[27,6,19,8],[27,12,19,14,"properties"],[27,22,19,24],[27,25,19,27,"match"],[27,30,19,32],[27,31,19,33,"properties"],[27,41,19,43],[27,42,19,44,"split"],[27,47,19,49],[27,48,19,50],[27,51,19,53],[27,52,19,54],[28,6,20,8],[28,12,20,14,"components"],[28,22,20,24],[28,25,20,27],[28,27,20,29],[29,6,21,8],[29,12,21,14,"propertiesLength"],[29,28,21,30],[29,31,21,33,"properties"],[29,41,21,43],[29,42,21,44,"length"],[29,48,21,50],[30,6,22,8],[30,11,22,13],[30,15,22,17,"k"],[30,16,22,18],[30,19,22,21],[30,20,22,22],[30,22,22,24,"k"],[30,23,22,25],[30,26,22,28,"propertiesLength"],[30,42,22,44],[30,44,22,46,"k"],[30,45,22,47],[30,47,22,49],[30,49,22,51],[31,8,23,12],[31,14,23,18,"property"],[31,22,23,26],[31,25,23,29,"properties"],[31,35,23,39],[31,36,23,40,"k"],[31,37,23,41],[31,38,23,42],[32,8,24,12],[32,14,24,18,"trimmed"],[32,21,24,25],[32,24,24,28,"property"],[32,32,24,36],[32,33,24,37,"trim"],[32,37,24,41],[32,38,24,42],[32,39,24,43],[33,8,25,12],[33,12,25,16],[33,13,25,17,"trimmed"],[33,20,25,24],[33,22,26,16],[34,8,27,12],[34,14,27,18,"abiParameter"],[34,26,27,30],[34,29,27,33],[34,33,27,33,"parseAbiParameter"],[34,41,27,50],[34,42,27,50,"parseAbiParameter"],[34,59,27,50],[34,61,27,51,"trimmed"],[34,68,27,58],[34,70,27,60],[35,10,28,16,"type"],[35,14,28,20],[35,16,28,22],[36,8,29,12],[36,9,29,13],[36,10,29,14],[37,8,30,12,"components"],[37,18,30,22],[37,19,30,23,"push"],[37,23,30,27],[37,24,30,28,"abiParameter"],[37,36,30,40],[37,37,30,41],[38,6,31,8],[39,6,32,8],[39,10,32,12],[39,11,32,13,"components"],[39,21,32,23],[39,22,32,24,"length"],[39,28,32,30],[39,30,33,12],[39,36,33,18],[39,40,33,22,"InvalidStructSignatureError"],[39,58,33,49],[39,59,33,49,"InvalidStructSignatureError"],[39,86,33,49],[39,87,33,50],[40,8,33,52,"signature"],[41,6,33,62],[41,7,33,63],[41,8,33,64],[42,6,34,8,"shallowStructs"],[42,20,34,22],[42,21,34,23,"match"],[42,26,34,28],[42,27,34,29,"name"],[42,31,34,33],[42,32,34,34],[42,35,34,37,"components"],[42,45,34,47],[43,4,35,4],[44,4,36,4],[45,4,37,4],[45,10,37,10,"resolvedStructs"],[45,25,37,25],[45,28,37,28],[45,29,37,29],[45,30,37,30],[46,4,38,4],[46,10,38,10,"entries"],[46,17,38,17],[46,20,38,20,"Object"],[46,26,38,26],[46,27,38,27,"entries"],[46,34,38,34],[46,35,38,35,"shallowStructs"],[46,49,38,49],[46,50,38,50],[47,4,39,4],[47,10,39,10,"entriesLength"],[47,23,39,23],[47,26,39,26,"entries"],[47,33,39,33],[47,34,39,34,"length"],[47,40,39,40],[48,4,40,4],[48,9,40,9],[48,13,40,13,"i"],[48,14,40,14],[48,17,40,17],[48,18,40,18],[48,20,40,20,"i"],[48,21,40,21],[48,24,40,24,"entriesLength"],[48,37,40,37],[48,39,40,39,"i"],[48,40,40,40],[48,42,40,42],[48,44,40,44],[49,6,41,8],[49,12,41,14],[49,13,41,15,"name"],[49,17,41,19],[49,19,41,21,"parameters"],[49,29,41,31],[49,30,41,32],[49,33,41,35,"entries"],[49,40,41,42],[49,41,41,43,"i"],[49,42,41,44],[49,43,41,45],[50,6,42,8,"resolvedStructs"],[50,21,42,23],[50,22,42,24,"name"],[50,26,42,28],[50,27,42,29],[50,30,42,32,"resolveStructs"],[50,44,42,46],[50,45,42,47,"parameters"],[50,55,42,57],[50,57,42,59,"shallowStructs"],[50,71,42,73],[50,72,42,74],[51,4,43,4],[52,4,44,4],[52,11,44,11,"resolvedStructs"],[52,26,44,26],[53,2,45,0],[54,2,46,0],[54,8,46,6,"typeWithoutTupleRegex"],[54,29,46,27],[54,32,46,30],[54,94,46,92],[55,2,47,0],[55,11,47,9,"resolveStructs"],[55,25,47,23,"resolveStructs"],[55,26,47,24,"abiParameters"],[55,39,47,37],[55,41,47,39,"structs"],[55,48,47,46],[55,50,47,48,"ancestors"],[55,59,47,57],[55,62,47,60],[55,66,47,64,"Set"],[55,69,47,67],[55,70,47,68],[55,71,47,69],[55,73,47,71],[56,4,48,4],[56,10,48,10,"components"],[56,20,48,20],[56,23,48,23],[56,25,48,25],[57,4,49,4],[57,10,49,10,"length"],[57,16,49,16],[57,19,49,19,"abiParameters"],[57,32,49,32],[57,33,49,33,"length"],[57,39,49,39],[58,4,50,4],[58,9,50,9],[58,13,50,13,"i"],[58,14,50,14],[58,17,50,17],[58,18,50,18],[58,20,50,20,"i"],[58,21,50,21],[58,24,50,24,"length"],[58,30,50,30],[58,32,50,32,"i"],[58,33,50,33],[58,35,50,35],[58,37,50,37],[59,6,51,8],[59,12,51,14,"abiParameter"],[59,24,51,26],[59,27,51,29,"abiParameters"],[59,40,51,42],[59,41,51,43,"i"],[59,42,51,44],[59,43,51,45],[60,6,52,8],[60,12,52,14,"isTuple"],[60,19,52,21],[60,22,52,24,"isTupleRegex"],[60,30,52,36],[60,31,52,36,"isTupleRegex"],[60,43,52,36],[60,44,52,37,"test"],[60,48,52,41],[60,49,52,42,"abiParameter"],[60,61,52,54],[60,62,52,55,"type"],[60,66,52,59],[60,67,52,60],[61,6,53,8],[61,10,53,12,"isTuple"],[61,17,53,19],[61,19,54,12,"components"],[61,29,54,22],[61,30,54,23,"push"],[61,34,54,27],[61,35,54,28,"abiParameter"],[61,47,54,40],[61,48,54,41],[61,49,54,42],[61,54,55,13],[62,8,56,12],[62,14,56,18,"match"],[62,19,56,23],[62,22,56,26],[62,26,56,26,"execTyped"],[62,34,56,35],[62,35,56,35,"execTyped"],[62,44,56,35],[62,46,56,36,"typeWithoutTupleRegex"],[62,67,56,57],[62,69,56,59,"abiParameter"],[62,81,56,71],[62,82,56,72,"type"],[62,86,56,76],[62,87,56,77],[63,8,57,12],[63,12,57,16],[63,13,57,17,"match"],[63,18,57,22],[63,20,57,24,"type"],[63,24,57,28],[63,26,58,16],[63,32,58,22],[63,36,58,26,"InvalidAbiTypeParameterError"],[63,57,58,54],[63,58,58,54,"InvalidAbiTypeParameterError"],[63,86,58,54],[63,87,58,55],[64,10,58,57,"abiParameter"],[65,8,58,70],[65,9,58,71],[65,10,58,72],[66,8,59,12],[66,14,59,18],[67,10,59,20,"array"],[67,15,59,25],[68,10,59,27,"type"],[69,8,59,32],[69,9,59,33],[69,12,59,36,"match"],[69,17,59,41],[70,8,60,12],[70,12,60,16,"type"],[70,16,60,20],[70,20,60,24,"structs"],[70,27,60,31],[70,29,60,33],[71,10,61,16],[71,14,61,20,"ancestors"],[71,23,61,29],[71,24,61,30,"has"],[71,27,61,33],[71,28,61,34,"type"],[71,32,61,38],[71,33,61,39],[71,35,62,20],[71,41,62,26],[71,45,62,30,"CircularReferenceError"],[71,60,62,52],[71,61,62,52,"CircularReferenceError"],[71,83,62,52],[71,84,62,53],[72,12,62,55,"type"],[73,10,62,60],[73,11,62,61],[73,12,62,62],[74,10,63,16,"components"],[74,20,63,26],[74,21,63,27,"push"],[74,25,63,31],[74,26,63,32],[75,12,64,20],[75,15,64,23,"abiParameter"],[75,27,64,35],[76,12,65,20,"type"],[76,16,65,24],[76,18,65,26],[76,26,65,34,"array"],[76,31,65,39],[76,35,65,43],[76,37,65,45],[76,39,65,47],[77,12,66,20,"components"],[77,22,66,30],[77,24,66,32,"resolveStructs"],[77,38,66,46],[77,39,66,47,"structs"],[77,46,66,54],[77,47,66,55,"type"],[77,51,66,59],[77,52,66,60],[77,56,66,64],[77,58,66,66],[77,60,66,68,"structs"],[77,67,66,75],[77,69,66,77],[77,73,66,81,"Set"],[77,76,66,84],[77,77,66,85],[77,78,66,86],[77,81,66,89,"ancestors"],[77,90,66,98],[77,92,66,100,"type"],[77,96,66,104],[77,97,66,105],[77,98,66,106],[78,10,67,16],[78,11,67,17],[78,12,67,18],[79,8,68,12],[79,9,68,13],[79,15,69,17],[80,10,70,16],[80,14,70,20],[80,18,70,20,"isSolidityType"],[80,26,70,34],[80,27,70,34,"isSolidityType"],[80,41,70,34],[80,43,70,35,"type"],[80,47,70,39],[80,48,70,40],[80,50,71,20,"components"],[80,60,71,30],[80,61,71,31,"push"],[80,65,71,35],[80,66,71,36,"abiParameter"],[80,78,71,48],[80,79,71,49],[80,80,71,50],[80,85,73,20],[80,91,73,26],[80,95,73,30,"UnknownTypeError"],[80,111,73,46],[80,112,73,46,"UnknownTypeError"],[80,128,73,46],[80,129,73,47],[81,12,73,49,"type"],[82,10,73,54],[82,11,73,55],[82,12,73,56],[83,8,74,12],[84,6,75,8],[85,4,76,4],[86,4,77,4],[86,11,77,11,"components"],[86,21,77,21],[87,2,78,0],[88,0,78,1],[88,3]],"functionMap":{"names":["<global>","parseStructs","resolveStructs"],"mappings":"AAA;OCO;CDqC;AEE;CF+B"},"hasCjsExports":false},"type":"js/module"}]}