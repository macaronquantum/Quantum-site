{"dependencies":[{"name":"@babel/runtime/helpers/objectWithoutPropertiesLoose","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"HFkXuFcBAqfzGtqyPj8g62MKT0M=","exportNames":["*"],"imports":1}},{"name":"../../errors/node.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":62,"index":62}}],"key":"77WMnM7SznuAKwCFdGhR5ZXGxsM=","exportNames":["*"],"imports":1}},{"name":"../../errors/rpc.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":63},"end":{"line":2,"column":93,"index":156}}],"key":"zzuuH+nFKSb2Q8jW2Edg8fdhe/g=","exportNames":["*"],"imports":1}},{"name":"../../utils/wait.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":157},"end":{"line":3,"column":43,"index":200}}],"key":"NKuI88+z+kJiTc2V0TuFKnDBBps=","exportNames":["*"],"imports":1}},{"name":"./createTransport.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":201},"end":{"line":4,"column":56,"index":257}}],"key":"IMAs7VdCtDa1Nl7Tey+wGJLFCUk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  const _excluded = [\"chain\", \"pollingInterval\", \"timeout\"];\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.fallback = fallback;\n  exports.rankTransports = rankTransports;\n  var _babelRuntimeHelpersObjectWithoutPropertiesLoose = require(_dependencyMap[0], \"@babel/runtime/helpers/objectWithoutPropertiesLoose\");\n  var _objectWithoutPropertiesLoose = _interopDefault(_babelRuntimeHelpersObjectWithoutPropertiesLoose);\n  var _errorsNodeJs = require(_dependencyMap[1], \"../../errors/node.js\");\n  var _errorsRpcJs = require(_dependencyMap[2], \"../../errors/rpc.js\");\n  var _utilsWaitJs = require(_dependencyMap[3], \"../../utils/wait.js\");\n  var _createTransportJs = require(_dependencyMap[4], \"./createTransport.js\");\n  function fallback(transports_, config = {}) {\n    const {\n      key = 'fallback',\n      name = 'Fallback',\n      rank = false,\n      retryCount,\n      retryDelay\n    } = config;\n    return _ref => {\n      let {\n          chain,\n          pollingInterval = 4_000,\n          timeout\n        } = _ref,\n        rest = (0, _objectWithoutPropertiesLoose.default)(_ref, _excluded);\n      let transports = transports_;\n      let onResponse = () => {};\n      const transport = (0, _createTransportJs.createTransport)({\n        key,\n        name,\n        async request({\n          method,\n          params\n        }) {\n          let includes;\n          const fetch = async (i = 0) => {\n            const transport = transports[i](Object.assign({}, rest, {\n              chain,\n              retryCount: 0,\n              timeout\n            }));\n            try {\n              const response = await transport.request({\n                method,\n                params\n              });\n              onResponse({\n                method,\n                params: params,\n                response,\n                transport,\n                status: 'success'\n              });\n              return response;\n            } catch (err) {\n              onResponse({\n                error: err,\n                method,\n                params: params,\n                transport,\n                status: 'error'\n              });\n              if (shouldThrow(err)) throw err;\n              // If we've reached the end of the fallbacks, throw the error.\n              if (i === transports.length - 1) throw err;\n              // Check if at least one other transport includes the method\n              includes ??= transports.slice(i + 1).some(transport => {\n                const {\n                  include,\n                  exclude\n                } = transport({\n                  chain\n                }).config.methods || {};\n                if (include) return include.includes(method);\n                if (exclude) return !exclude.includes(method);\n                return true;\n              });\n              if (!includes) throw err;\n              // Otherwise, try the next fallback.\n              return fetch(i + 1);\n            }\n          };\n          return fetch();\n        },\n        retryCount,\n        retryDelay,\n        type: 'fallback'\n      }, {\n        onResponse: fn => onResponse = fn,\n        transports: transports.map(fn => fn({\n          chain,\n          retryCount: 0\n        }))\n      });\n      if (rank) {\n        const rankOptions = typeof rank === 'object' ? rank : {};\n        rankTransports({\n          chain,\n          interval: rankOptions.interval ?? pollingInterval,\n          onTransports: transports_ => transports = transports_,\n          ping: rankOptions.ping,\n          sampleCount: rankOptions.sampleCount,\n          timeout: rankOptions.timeout,\n          transports,\n          weights: rankOptions.weights\n        });\n      }\n      return transport;\n    };\n  }\n  function shouldThrow(error) {\n    if ('code' in error && typeof error.code === 'number') {\n      if (error.code === _errorsRpcJs.TransactionRejectedRpcError.code || error.code === _errorsRpcJs.UserRejectedRequestError.code || _errorsNodeJs.ExecutionRevertedError.nodeMessage.test(error.message) || error.code === 5000 // CAIP UserRejectedRequestError\n      ) return true;\n    }\n    return false;\n  }\n  /** @internal */\n  function rankTransports({\n    chain,\n    interval = 4_000,\n    onTransports,\n    ping,\n    sampleCount = 10,\n    timeout = 1_000,\n    transports,\n    weights = {}\n  }) {\n    const {\n      stability: stabilityWeight = 0.7,\n      latency: latencyWeight = 0.3\n    } = weights;\n    const samples = [];\n    const rankTransports_ = async () => {\n      // 1. Take a sample from each Transport.\n      const sample = await Promise.all(transports.map(async transport => {\n        const transport_ = transport({\n          chain,\n          retryCount: 0,\n          timeout\n        });\n        const start = Date.now();\n        let end;\n        let success;\n        try {\n          await (ping ? ping({\n            transport: transport_\n          }) : transport_.request({\n            method: 'net_listening'\n          }));\n          success = 1;\n        } catch {\n          success = 0;\n        } finally {\n          end = Date.now();\n        }\n        const latency = end - start;\n        return {\n          latency,\n          success\n        };\n      }));\n      // 2. Store the sample. If we have more than `sampleCount` samples, remove\n      // the oldest sample.\n      samples.push(sample);\n      if (samples.length > sampleCount) samples.shift();\n      // 3. Calculate the max latency from samples.\n      const maxLatency = Math.max(...samples.map(sample => Math.max(...sample.map(({\n        latency\n      }) => latency))));\n      // 4. Calculate the score for each Transport.\n      const scores = transports.map((_, i) => {\n        const latencies = samples.map(sample => sample[i].latency);\n        const meanLatency = latencies.reduce((acc, latency) => acc + latency, 0) / latencies.length;\n        const latencyScore = 1 - meanLatency / maxLatency;\n        const successes = samples.map(sample => sample[i].success);\n        const stabilityScore = successes.reduce((acc, success) => acc + success, 0) / successes.length;\n        if (stabilityScore === 0) return [0, i];\n        return [latencyWeight * latencyScore + stabilityWeight * stabilityScore, i];\n      }).sort((a, b) => b[0] - a[0]);\n      // 5. Sort the Transports by score.\n      onTransports(scores.map(([, i]) => transports[i]));\n      // 6. Wait, and then rank again.\n      await (0, _utilsWaitJs.wait)(interval);\n      rankTransports_();\n    };\n    rankTransports_();\n  }\n});","lineCount":199,"map":[[13,2,5,0,"exports"],[13,9,5,0],[13,10,5,0,"fallback"],[13,18,5,0],[13,21,5,0,"fallback"],[13,29,5,0],[14,2,101,0,"exports"],[14,9,101,0],[14,10,101,0,"rankTransports"],[14,24,101,0],[14,27,101,0,"rankTransports"],[14,41,101,0],[15,2,158,1],[15,6,158,1,"_babelRuntimeHelpersObjectWithoutPropertiesLoose"],[15,54,158,1],[15,57,158,1,"require"],[15,64,158,1],[15,65,158,1,"_dependencyMap"],[15,79,158,1],[16,2,158,1],[16,6,158,1,"_objectWithoutPropertiesLoose"],[16,35,158,1],[16,38,158,1,"_interopDefault"],[16,53,158,1],[16,54,158,1,"_babelRuntimeHelpersObjectWithoutPropertiesLoose"],[16,102,158,1],[17,2,1,0],[17,6,1,0,"_errorsNodeJs"],[17,19,1,0],[17,22,1,0,"require"],[17,29,1,0],[17,30,1,0,"_dependencyMap"],[17,44,1,0],[18,2,2,0],[18,6,2,0,"_errorsRpcJs"],[18,18,2,0],[18,21,2,0,"require"],[18,28,2,0],[18,29,2,0,"_dependencyMap"],[18,43,2,0],[19,2,3,0],[19,6,3,0,"_utilsWaitJs"],[19,18,3,0],[19,21,3,0,"require"],[19,28,3,0],[19,29,3,0,"_dependencyMap"],[19,43,3,0],[20,2,4,0],[20,6,4,0,"_createTransportJs"],[20,24,4,0],[20,27,4,0,"require"],[20,34,4,0],[20,35,4,0,"_dependencyMap"],[20,49,4,0],[21,2,5,7],[21,11,5,16,"fallback"],[21,19,5,24,"fallback"],[21,20,5,25,"transports_"],[21,31,5,36],[21,33,5,38,"config"],[21,39,5,44],[21,42,5,47],[21,43,5,48],[21,44,5,49],[21,46,5,51],[22,4,6,4],[22,10,6,10],[23,6,6,12,"key"],[23,9,6,15],[23,12,6,18],[23,22,6,28],[24,6,6,30,"name"],[24,10,6,34],[24,13,6,37],[24,23,6,47],[25,6,6,49,"rank"],[25,10,6,53],[25,13,6,56],[25,18,6,61],[26,6,6,63,"retryCount"],[26,16,6,73],[27,6,6,75,"retryDelay"],[28,4,6,87],[28,5,6,88],[28,8,6,91,"config"],[28,14,6,97],[29,4,7,4],[29,11,7,12,"_ref"],[29,15,7,12],[29,19,7,70],[30,6,7,70],[30,10,7,13],[31,10,7,15,"chain"],[31,15,7,20],[32,10,7,22,"pollingInterval"],[32,25,7,37],[32,28,7,40],[32,33,7,45],[33,10,7,47,"timeout"],[34,8,7,64],[34,9,7,65],[34,12,7,65,"_ref"],[34,16,7,65],[35,8,7,59,"rest"],[35,12,7,63],[35,19,7,63,"_objectWithoutPropertiesLoose"],[35,48,7,63],[35,49,7,63,"default"],[35,56,7,63],[35,58,7,63,"_ref"],[35,62,7,63],[35,64,7,63,"_excluded"],[35,73,7,63],[36,6,8,8],[36,10,8,12,"transports"],[36,20,8,22],[36,23,8,25,"transports_"],[36,34,8,36],[37,6,9,8],[37,10,9,12,"onResponse"],[37,20,9,22],[37,23,9,25,"onResponse"],[37,24,9,25],[37,29,9,31],[37,30,9,33],[37,31,9,34],[38,6,10,8],[38,12,10,14,"transport"],[38,21,10,23],[38,24,10,26],[38,28,10,26,"createTransport"],[38,46,10,41],[38,47,10,41,"createTransport"],[38,62,10,41],[38,64,10,42],[39,8,11,12,"key"],[39,11,11,15],[40,8,12,12,"name"],[40,12,12,16],[41,8,13,12],[41,14,13,18,"request"],[41,21,13,25,"request"],[41,22,13,26],[42,10,13,28,"method"],[42,16,13,34],[43,10,13,36,"params"],[44,8,13,43],[44,9,13,44],[44,11,13,46],[45,10,14,16],[45,14,14,20,"includes"],[45,22,14,28],[46,10,15,16],[46,16,15,22,"fetch"],[46,21,15,27],[46,24,15,30],[46,30,15,30,"fetch"],[46,31,15,37,"i"],[46,32,15,38],[46,35,15,41],[46,36,15,42],[46,41,15,47],[47,12,16,20],[47,18,16,26,"transport"],[47,27,16,35],[47,30,16,38,"transports"],[47,40,16,48],[47,41,16,49,"i"],[47,42,16,50],[47,43,16,51],[47,44,16,51,"Object"],[47,50,16,51],[47,51,16,51,"assign"],[47,57,16,51],[47,62,17,27,"rest"],[47,66,17,31],[48,14,18,24,"chain"],[48,19,18,29],[49,14,19,24,"retryCount"],[49,24,19,34],[49,26,19,36],[49,27,19,37],[50,14,20,24,"timeout"],[51,12,20,31],[51,14,21,21],[51,15,21,22],[52,12,22,20],[52,16,22,24],[53,14,23,24],[53,20,23,30,"response"],[53,28,23,38],[53,31,23,41],[53,37,23,47,"transport"],[53,46,23,56],[53,47,23,57,"request"],[53,54,23,64],[53,55,23,65],[54,16,24,28,"method"],[54,22,24,34],[55,16,25,28,"params"],[56,14,26,24],[56,15,26,25],[56,16,26,26],[57,14,27,24,"onResponse"],[57,24,27,34],[57,25,27,35],[58,16,28,28,"method"],[58,22,28,34],[59,16,29,28,"params"],[59,22,29,34],[59,24,29,36,"params"],[59,30,29,42],[60,16,30,28,"response"],[60,24,30,36],[61,16,31,28,"transport"],[61,25,31,37],[62,16,32,28,"status"],[62,22,32,34],[62,24,32,36],[63,14,33,24],[63,15,33,25],[63,16,33,26],[64,14,34,24],[64,21,34,31,"response"],[64,29,34,39],[65,12,35,20],[65,13,35,21],[65,14,36,20],[65,21,36,27,"err"],[65,24,36,30],[65,26,36,32],[66,14,37,24,"onResponse"],[66,24,37,34],[66,25,37,35],[67,16,38,28,"error"],[67,21,38,33],[67,23,38,35,"err"],[67,26,38,38],[68,16,39,28,"method"],[68,22,39,34],[69,16,40,28,"params"],[69,22,40,34],[69,24,40,36,"params"],[69,30,40,42],[70,16,41,28,"transport"],[70,25,41,37],[71,16,42,28,"status"],[71,22,42,34],[71,24,42,36],[72,14,43,24],[72,15,43,25],[72,16,43,26],[73,14,44,24],[73,18,44,28,"shouldThrow"],[73,29,44,39],[73,30,44,40,"err"],[73,33,44,43],[73,34,44,44],[73,36,45,28],[73,42,45,34,"err"],[73,45,45,37],[74,14,46,24],[75,14,47,24],[75,18,47,28,"i"],[75,19,47,29],[75,24,47,34,"transports"],[75,34,47,44],[75,35,47,45,"length"],[75,41,47,51],[75,44,47,54],[75,45,47,55],[75,47,48,28],[75,53,48,34,"err"],[75,56,48,37],[76,14,49,24],[77,14,50,24,"includes"],[77,22,50,32],[77,27,50,37,"transports"],[77,37,50,47],[77,38,50,48,"slice"],[77,43,50,53],[77,44,50,54,"i"],[77,45,50,55],[77,48,50,58],[77,49,50,59],[77,50,50,60],[77,51,50,61,"some"],[77,55,50,65],[77,56,50,67,"transport"],[77,65,50,76],[77,69,50,81],[78,16,51,28],[78,22,51,34],[79,18,51,36,"include"],[79,25,51,43],[80,18,51,45,"exclude"],[81,16,51,53],[81,17,51,54],[81,20,51,57,"transport"],[81,29,51,66],[81,30,51,67],[82,18,51,69,"chain"],[83,16,51,75],[83,17,51,76],[83,18,51,77],[83,19,51,78,"config"],[83,25,51,84],[83,26,51,85,"methods"],[83,33,51,92],[83,37,51,96],[83,38,51,97],[83,39,51,98],[84,16,52,28],[84,20,52,32,"include"],[84,27,52,39],[84,29,53,32],[84,36,53,39,"include"],[84,43,53,46],[84,44,53,47,"includes"],[84,52,53,55],[84,53,53,56,"method"],[84,59,53,62],[84,60,53,63],[85,16,54,28],[85,20,54,32,"exclude"],[85,27,54,39],[85,29,55,32],[85,36,55,39],[85,37,55,40,"exclude"],[85,44,55,47],[85,45,55,48,"includes"],[85,53,55,56],[85,54,55,57,"method"],[85,60,55,63],[85,61,55,64],[86,16,56,28],[86,23,56,35],[86,27,56,39],[87,14,57,24],[87,15,57,25],[87,16,57,26],[88,14,58,24],[88,18,58,28],[88,19,58,29,"includes"],[88,27,58,37],[88,29,59,28],[88,35,59,34,"err"],[88,38,59,37],[89,14,60,24],[90,14,61,24],[90,21,61,31,"fetch"],[90,26,61,36],[90,27,61,37,"i"],[90,28,61,38],[90,31,61,41],[90,32,61,42],[90,33,61,43],[91,12,62,20],[92,10,63,16],[92,11,63,17],[93,10,64,16],[93,17,64,23,"fetch"],[93,22,64,28],[93,23,64,29],[93,24,64,30],[94,8,65,12],[94,9,65,13],[95,8,66,12,"retryCount"],[95,18,66,22],[96,8,67,12,"retryDelay"],[96,18,67,22],[97,8,68,12,"type"],[97,12,68,16],[97,14,68,18],[98,6,69,8],[98,7,69,9],[98,9,69,11],[99,8,70,12,"onResponse"],[99,18,70,22],[99,20,70,25,"fn"],[99,22,70,27],[99,26,70,33,"onResponse"],[99,36,70,43],[99,39,70,46,"fn"],[99,41,70,49],[100,8,71,12,"transports"],[100,18,71,22],[100,20,71,24,"transports"],[100,30,71,34],[100,31,71,35,"map"],[100,34,71,38],[100,35,71,40,"fn"],[100,37,71,42],[100,41,71,47,"fn"],[100,43,71,49],[100,44,71,50],[101,10,71,52,"chain"],[101,15,71,57],[102,10,71,59,"retryCount"],[102,20,71,69],[102,22,71,71],[103,8,71,73],[103,9,71,74],[103,10,71,75],[104,6,72,8],[104,7,72,9],[104,8,72,10],[105,6,73,8],[105,10,73,12,"rank"],[105,14,73,16],[105,16,73,18],[106,8,74,12],[106,14,74,18,"rankOptions"],[106,25,74,29],[106,28,74,33],[106,35,74,40,"rank"],[106,39,74,44],[106,44,74,49],[106,52,74,57],[106,55,74,60,"rank"],[106,59,74,64],[106,62,74,67],[106,63,74,68],[106,64,74,70],[107,8,75,12,"rankTransports"],[107,22,75,26],[107,23,75,27],[108,10,76,16,"chain"],[108,15,76,21],[109,10,77,16,"interval"],[109,18,77,24],[109,20,77,26,"rankOptions"],[109,31,77,37],[109,32,77,38,"interval"],[109,40,77,46],[109,44,77,50,"pollingInterval"],[109,59,77,65],[110,10,78,16,"onTransports"],[110,22,78,28],[110,24,78,31,"transports_"],[110,35,78,42],[110,39,78,48,"transports"],[110,49,78,58],[110,52,78,61,"transports_"],[110,63,78,73],[111,10,79,16,"ping"],[111,14,79,20],[111,16,79,22,"rankOptions"],[111,27,79,33],[111,28,79,34,"ping"],[111,32,79,38],[112,10,80,16,"sampleCount"],[112,21,80,27],[112,23,80,29,"rankOptions"],[112,34,80,40],[112,35,80,41,"sampleCount"],[112,46,80,52],[113,10,81,16,"timeout"],[113,17,81,23],[113,19,81,25,"rankOptions"],[113,30,81,36],[113,31,81,37,"timeout"],[113,38,81,44],[114,10,82,16,"transports"],[114,20,82,26],[115,10,83,16,"weights"],[115,17,83,23],[115,19,83,25,"rankOptions"],[115,30,83,36],[115,31,83,37,"weights"],[116,8,84,12],[116,9,84,13],[116,10,84,14],[117,6,85,8],[118,6,86,8],[118,13,86,15,"transport"],[118,22,86,24],[119,4,87,4],[119,5,87,5],[120,2,88,0],[121,2,89,0],[121,11,89,9,"shouldThrow"],[121,22,89,20,"shouldThrow"],[121,23,89,21,"error"],[121,28,89,26],[121,30,89,28],[122,4,90,4],[122,8,90,8],[122,14,90,14],[122,18,90,18,"error"],[122,23,90,23],[122,27,90,27],[122,34,90,34,"error"],[122,39,90,39],[122,40,90,40,"code"],[122,44,90,44],[122,49,90,49],[122,57,90,57],[122,59,90,59],[123,6,91,8],[123,10,91,12,"error"],[123,15,91,17],[123,16,91,18,"code"],[123,20,91,22],[123,25,91,27,"TransactionRejectedRpcError"],[123,37,91,54],[123,38,91,54,"TransactionRejectedRpcError"],[123,65,91,54],[123,66,91,55,"code"],[123,70,91,59],[123,74,92,12,"error"],[123,79,92,17],[123,80,92,18,"code"],[123,84,92,22],[123,89,92,27,"UserRejectedRequestError"],[123,101,92,51],[123,102,92,51,"UserRejectedRequestError"],[123,126,92,51],[123,127,92,52,"code"],[123,131,92,56],[123,135,93,12,"ExecutionRevertedError"],[123,148,93,34],[123,149,93,34,"ExecutionRevertedError"],[123,171,93,34],[123,172,93,35,"nodeMessage"],[123,183,93,46],[123,184,93,47,"test"],[123,188,93,51],[123,189,93,52,"error"],[123,194,93,57],[123,195,93,58,"message"],[123,202,93,65],[123,203,93,66],[123,207,94,12,"error"],[123,212,94,17],[123,213,94,18,"code"],[123,217,94,22],[123,222,94,27],[123,226,94,31],[123,227,94,32],[124,6,94,32],[124,8,96,12],[124,15,96,19],[124,19,96,23],[125,4,97,4],[126,4,98,4],[126,11,98,11],[126,16,98,16],[127,2,99,0],[128,2,100,0],[129,2,101,7],[129,11,101,16,"rankTransports"],[129,25,101,30,"rankTransports"],[129,26,101,31],[130,4,101,33,"chain"],[130,9,101,38],[131,4,101,40,"interval"],[131,12,101,48],[131,15,101,51],[131,20,101,56],[132,4,101,58,"onTransports"],[132,16,101,70],[133,4,101,72,"ping"],[133,8,101,76],[134,4,101,78,"sampleCount"],[134,15,101,89],[134,18,101,92],[134,20,101,94],[135,4,101,96,"timeout"],[135,11,101,103],[135,14,101,106],[135,19,101,111],[136,4,101,113,"transports"],[136,14,101,123],[137,4,101,125,"weights"],[137,11,101,132],[137,14,101,135],[137,15,101,136],[138,2,101,139],[138,3,101,140],[138,5,101,142],[139,4,102,4],[139,10,102,10],[140,6,102,12,"stability"],[140,15,102,21],[140,17,102,23,"stabilityWeight"],[140,32,102,38],[140,35,102,41],[140,38,102,44],[141,6,102,46,"latency"],[141,13,102,53],[141,15,102,55,"latencyWeight"],[141,28,102,68],[141,31,102,71],[142,4,102,75],[142,5,102,76],[142,8,102,79,"weights"],[142,15,102,86],[143,4,103,4],[143,10,103,10,"samples"],[143,17,103,17],[143,20,103,20],[143,22,103,22],[144,4,104,4],[144,10,104,10,"rankTransports_"],[144,25,104,25],[144,28,104,28],[144,34,104,28,"rankTransports_"],[144,35,104,28],[144,40,104,40],[145,6,105,8],[146,6,106,8],[146,12,106,14,"sample"],[146,18,106,20],[146,21,106,23],[146,27,106,29,"Promise"],[146,34,106,36],[146,35,106,37,"all"],[146,38,106,40],[146,39,106,41,"transports"],[146,49,106,51],[146,50,106,52,"map"],[146,53,106,55],[146,54,106,56],[146,60,106,63,"transport"],[146,69,106,72],[146,73,106,77],[147,8,107,12],[147,14,107,18,"transport_"],[147,24,107,28],[147,27,107,31,"transport"],[147,36,107,40],[147,37,107,41],[148,10,107,43,"chain"],[148,15,107,48],[149,10,107,50,"retryCount"],[149,20,107,60],[149,22,107,62],[149,23,107,63],[150,10,107,65,"timeout"],[151,8,107,73],[151,9,107,74],[151,10,107,75],[152,8,108,12],[152,14,108,18,"start"],[152,19,108,23],[152,22,108,26,"Date"],[152,26,108,30],[152,27,108,31,"now"],[152,30,108,34],[152,31,108,35],[152,32,108,36],[153,8,109,12],[153,12,109,16,"end"],[153,15,109,19],[154,8,110,12],[154,12,110,16,"success"],[154,19,110,23],[155,8,111,12],[155,12,111,16],[156,10,112,16],[156,17,112,23,"ping"],[156,21,112,27],[156,24,113,22,"ping"],[156,28,113,26],[156,29,113,27],[157,12,113,29,"transport"],[157,21,113,38],[157,23,113,40,"transport_"],[158,10,113,51],[158,11,113,52],[158,12,113,53],[158,15,114,22,"transport_"],[158,25,114,32],[158,26,114,33,"request"],[158,33,114,40],[158,34,114,41],[159,12,114,43,"method"],[159,18,114,49],[159,20,114,51],[160,10,114,67],[160,11,114,68],[160,12,114,69],[160,13,114,70],[161,10,115,16,"success"],[161,17,115,23],[161,20,115,26],[161,21,115,27],[162,8,116,12],[162,9,116,13],[162,10,117,12],[162,16,117,18],[163,10,118,16,"success"],[163,17,118,23],[163,20,118,26],[163,21,118,27],[164,8,119,12],[164,9,119,13],[164,18,120,20],[165,10,121,16,"end"],[165,13,121,19],[165,16,121,22,"Date"],[165,20,121,26],[165,21,121,27,"now"],[165,24,121,30],[165,25,121,31],[165,26,121,32],[166,8,122,12],[167,8,123,12],[167,14,123,18,"latency"],[167,21,123,25],[167,24,123,28,"end"],[167,27,123,31],[167,30,123,34,"start"],[167,35,123,39],[168,8,124,12],[168,15,124,19],[169,10,124,21,"latency"],[169,17,124,28],[170,10,124,30,"success"],[171,8,124,38],[171,9,124,39],[172,6,125,8],[172,7,125,9],[172,8,125,10],[172,9,125,11],[173,6,126,8],[174,6,127,8],[175,6,128,8,"samples"],[175,13,128,15],[175,14,128,16,"push"],[175,18,128,20],[175,19,128,21,"sample"],[175,25,128,27],[175,26,128,28],[176,6,129,8],[176,10,129,12,"samples"],[176,17,129,19],[176,18,129,20,"length"],[176,24,129,26],[176,27,129,29,"sampleCount"],[176,38,129,40],[176,40,130,12,"samples"],[176,47,130,19],[176,48,130,20,"shift"],[176,53,130,25],[176,54,130,26],[176,55,130,27],[177,6,131,8],[178,6,132,8],[178,12,132,14,"maxLatency"],[178,22,132,24],[178,25,132,27,"Math"],[178,29,132,31],[178,30,132,32,"max"],[178,33,132,35],[178,34,132,36],[178,37,132,39,"samples"],[178,44,132,46],[178,45,132,47,"map"],[178,48,132,50],[178,49,132,52,"sample"],[178,55,132,58],[178,59,132,63,"Math"],[178,63,132,67],[178,64,132,68,"max"],[178,67,132,71],[178,68,132,72],[178,71,132,75,"sample"],[178,77,132,81],[178,78,132,82,"map"],[178,81,132,85],[178,82,132,86],[178,83,132,87],[179,8,132,89,"latency"],[180,6,132,97],[180,7,132,98],[180,12,132,103,"latency"],[180,19,132,110],[180,20,132,111],[180,21,132,112],[180,22,132,113],[180,23,132,114],[181,6,133,8],[182,6,134,8],[182,12,134,14,"scores"],[182,18,134,20],[182,21,134,23,"transports"],[182,31,134,33],[182,32,135,13,"map"],[182,35,135,16],[182,36,135,17],[182,37,135,18,"_"],[182,38,135,19],[182,40,135,21,"i"],[182,41,135,22],[182,46,135,27],[183,8,136,12],[183,14,136,18,"latencies"],[183,23,136,27],[183,26,136,30,"samples"],[183,33,136,37],[183,34,136,38,"map"],[183,37,136,41],[183,38,136,43,"sample"],[183,44,136,49],[183,48,136,54,"sample"],[183,54,136,60],[183,55,136,61,"i"],[183,56,136,62],[183,57,136,63],[183,58,136,64,"latency"],[183,65,136,71],[183,66,136,72],[184,8,137,12],[184,14,137,18,"meanLatency"],[184,25,137,29],[184,28,137,32,"latencies"],[184,37,137,41],[184,38,137,42,"reduce"],[184,44,137,48],[184,45,137,49],[184,46,137,50,"acc"],[184,49,137,53],[184,51,137,55,"latency"],[184,58,137,62],[184,63,137,67,"acc"],[184,66,137,70],[184,69,137,73,"latency"],[184,76,137,80],[184,78,137,82],[184,79,137,83],[184,80,137,84],[184,83,138,16,"latencies"],[184,92,138,25],[184,93,138,26,"length"],[184,99,138,32],[185,8,139,12],[185,14,139,18,"latencyScore"],[185,26,139,30],[185,29,139,33],[185,30,139,34],[185,33,139,37,"meanLatency"],[185,44,139,48],[185,47,139,51,"maxLatency"],[185,57,139,61],[186,8,140,12],[186,14,140,18,"successes"],[186,23,140,27],[186,26,140,30,"samples"],[186,33,140,37],[186,34,140,38,"map"],[186,37,140,41],[186,38,140,43,"sample"],[186,44,140,49],[186,48,140,54,"sample"],[186,54,140,60],[186,55,140,61,"i"],[186,56,140,62],[186,57,140,63],[186,58,140,64,"success"],[186,65,140,71],[186,66,140,72],[187,8,141,12],[187,14,141,18,"stabilityScore"],[187,28,141,32],[187,31,141,35,"successes"],[187,40,141,44],[187,41,141,45,"reduce"],[187,47,141,51],[187,48,141,52],[187,49,141,53,"acc"],[187,52,141,56],[187,54,141,58,"success"],[187,61,141,65],[187,66,141,70,"acc"],[187,69,141,73],[187,72,141,76,"success"],[187,79,141,83],[187,81,141,85],[187,82,141,86],[187,83,141,87],[187,86,142,16,"successes"],[187,95,142,25],[187,96,142,26,"length"],[187,102,142,32],[188,8,143,12],[188,12,143,16,"stabilityScore"],[188,26,143,30],[188,31,143,35],[188,32,143,36],[188,34,144,16],[188,41,144,23],[188,42,144,24],[188,43,144,25],[188,45,144,27,"i"],[188,46,144,28],[188,47,144,29],[189,8,145,12],[189,15,145,19],[189,16,146,16,"latencyWeight"],[189,29,146,29],[189,32,146,32,"latencyScore"],[189,44,146,44],[189,47,146,47,"stabilityWeight"],[189,62,146,62],[189,65,146,65,"stabilityScore"],[189,79,146,79],[189,81,147,16,"i"],[189,82,147,17],[189,83,148,13],[190,6,149,8],[190,7,149,9],[190,8,149,10],[190,9,150,13,"sort"],[190,13,150,17],[190,14,150,18],[190,15,150,19,"a"],[190,16,150,20],[190,18,150,22,"b"],[190,19,150,23],[190,24,150,28,"b"],[190,25,150,29],[190,26,150,30],[190,27,150,31],[190,28,150,32],[190,31,150,35,"a"],[190,32,150,36],[190,33,150,37],[190,34,150,38],[190,35,150,39],[190,36,150,40],[191,6,151,8],[192,6,152,8,"onTransports"],[192,18,152,20],[192,19,152,21,"scores"],[192,25,152,27],[192,26,152,28,"map"],[192,29,152,31],[192,30,152,32],[192,31,152,33],[192,34,152,36,"i"],[192,35,152,37],[192,36,152,38],[192,41,152,43,"transports"],[192,51,152,53],[192,52,152,54,"i"],[192,53,152,55],[192,54,152,56],[192,55,152,57],[192,56,152,58],[193,6,153,8],[194,6,154,8],[194,12,154,14],[194,16,154,14,"wait"],[194,28,154,18],[194,29,154,18,"wait"],[194,33,154,18],[194,35,154,19,"interval"],[194,43,154,27],[194,44,154,28],[195,6,155,8,"rankTransports_"],[195,21,155,23],[195,22,155,24],[195,23,155,25],[196,4,156,4],[196,5,156,5],[197,4,157,4,"rankTransports_"],[197,19,157,19],[197,20,157,20],[197,21,157,21],[198,2,158,0],[199,0,158,1],[199,3]],"functionMap":{"names":["<global>","fallback","<anonymous>","onResponse","createTransport$argument_0.request","fetch","transports.slice.some$argument_0","createTransport$argument_1.onResponse","transports.map$argument_0","rankTransports$argument_0.onTransports","shouldThrow","rankTransports","rankTransports_","samples.map$argument_0","sample.map$argument_0","latencies.reduce$argument_0","successes.reduce$argument_0","transports.map.sort$argument_0","scores.map$argument_0"],"mappings":"AAA;OCI;YCE;yBCE,SD;YEI;8BCE;kECmC;yBDO;iBDM;aFE;wBKK,yBL;uCMC,oCN;8BOO,2CP;KDS;CDC;AUC;CVU;OWE;4BCG;wDJE;SImB;mDCO,mCC,wBD,ED;iBJG;0CKC,6BL;iDOC,+BP;0CKG,6BL;oDQC,+BR;SIQ;kBKC,qBL;gCME,wBN;KDI;CXE"},"hasCjsExports":false},"type":"js/module"}]}