{"dependencies":[{"name":"../../constants/abis.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":18,"index":128},"end":{"line":4,"column":52,"index":162}}],"key":"yrHWypZlegCAdNz0tkfsugt0VBw=","exportNames":["*"],"imports":1}},{"name":"../../constants/contracts.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":23,"index":187},"end":{"line":5,"column":62,"index":226}}],"key":"q8eBukRnwMAbCuh12EYSggQUZco=","exportNames":["*"],"imports":1}},{"name":"../../errors/contract.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":22,"index":250},"end":{"line":6,"column":57,"index":285}}],"key":"JCP4e7HazwS+yRxhz6Tlpc8a2RY=","exportNames":["*"],"imports":1}},{"name":"../../utils/abi/encodeDeployData.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":30,"index":317},"end":{"line":7,"column":76,"index":363}}],"key":"uu734cTnoRyrDBUJz/V8AEeNXC4=","exportNames":["*"],"imports":1}},{"name":"../../utils/address/getAddress.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":24,"index":389},"end":{"line":8,"column":68,"index":433}}],"key":"gYhM/GCuFykv0G8wwxuEIOfuAOQ=","exportNames":["*"],"imports":1}},{"name":"../../utils/address/isAddressEqual.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":28,"index":463},"end":{"line":9,"column":76,"index":511}}],"key":"wM5jO47f0I4dlqGrxr+yf5KVD40=","exportNames":["*"],"imports":1}},{"name":"../../utils/data/isHex.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":19,"index":532},"end":{"line":10,"column":55,"index":568}}],"key":"dsAwr7YVnSpsqPQy9zq6sDVuQN4=","exportNames":["*"],"imports":1}},{"name":"../../utils/encoding/toHex.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":19,"index":589},"end":{"line":11,"column":59,"index":629}}],"key":"H7vq9DbZar/LBdoWrgikLXyV5L0=","exportNames":["*"],"imports":1}},{"name":"../../utils/getAction.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":23,"index":654},"end":{"line":12,"column":58,"index":689}}],"key":"d685V9n1u7O1oRJ2ZbnkuLpcslA=","exportNames":["*"],"imports":1}},{"name":"../../utils/index.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":13,"column":19,"index":710},"end":{"line":13,"column":50,"index":741}}],"key":"/CNRJ7gMNHLKZCNqrEIlEss0Djk=","exportNames":["*"],"imports":1}},{"name":"../../utils/signature/isErc6492Signature.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":14,"column":32,"index":775},"end":{"line":14,"column":86,"index":829}}],"key":"PS5ZV0ZNf1EJ6wXW9I+J+6NWkv8=","exportNames":["*"],"imports":1}},{"name":"../../utils/signature/recoverAddress.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":15,"column":28,"index":859},"end":{"line":15,"column":78,"index":909}}],"key":"Ue1p1tuS8FJNxtMcr1UvmIEPq64=","exportNames":["*"],"imports":1}},{"name":"../../utils/signature/serializeErc6492Signature.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":16,"column":39,"index":950},"end":{"line":16,"column":100,"index":1011}}],"key":"Q8Zb1kpkF5iXOypAsEExoe3SyvQ=","exportNames":["*"],"imports":1}},{"name":"../../utils/signature/serializeSignature.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":17,"column":32,"index":1045},"end":{"line":17,"column":86,"index":1099}}],"key":"AkZAMVXjJaGcNJh0V49lUO0GrDc=","exportNames":["*"],"imports":1}},{"name":"./call.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":18,"column":18,"index":1119},"end":{"line":18,"column":38,"index":1139}}],"key":"sLj73fNtYU/4MxGahZB/41LRkOc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.verifyHash = verifyHash;\n  const abis_js_1 = require(_dependencyMap[0], \"../../constants/abis.js\");\n  const contracts_js_1 = require(_dependencyMap[1], \"../../constants/contracts.js\");\n  const contract_js_1 = require(_dependencyMap[2], \"../../errors/contract.js\");\n  const encodeDeployData_js_1 = require(_dependencyMap[3], \"../../utils/abi/encodeDeployData.js\");\n  const getAddress_js_1 = require(_dependencyMap[4], \"../../utils/address/getAddress.js\");\n  const isAddressEqual_js_1 = require(_dependencyMap[5], \"../../utils/address/isAddressEqual.js\");\n  const isHex_js_1 = require(_dependencyMap[6], \"../../utils/data/isHex.js\");\n  const toHex_js_1 = require(_dependencyMap[7], \"../../utils/encoding/toHex.js\");\n  const getAction_js_1 = require(_dependencyMap[8], \"../../utils/getAction.js\");\n  const index_js_1 = require(_dependencyMap[9], \"../../utils/index.js\");\n  const isErc6492Signature_js_1 = require(_dependencyMap[10], \"../../utils/signature/isErc6492Signature.js\");\n  const recoverAddress_js_1 = require(_dependencyMap[11], \"../../utils/signature/recoverAddress.js\");\n  const serializeErc6492Signature_js_1 = require(_dependencyMap[12], \"../../utils/signature/serializeErc6492Signature.js\");\n  const serializeSignature_js_1 = require(_dependencyMap[13], \"../../utils/signature/serializeSignature.js\");\n  const call_js_1 = require(_dependencyMap[14], \"./call.js\");\n  async function verifyHash(client, parameters) {\n    const {\n      address,\n      factory,\n      factoryData,\n      hash,\n      signature,\n      universalSignatureVerifierAddress = client.chain?.contracts?.universalSignatureVerifier?.address,\n      ...rest\n    } = parameters;\n    const signatureHex = (() => {\n      if ((0, isHex_js_1.isHex)(signature)) return signature;\n      if (typeof signature === 'object' && 'r' in signature && 's' in signature) return (0, serializeSignature_js_1.serializeSignature)(signature);\n      return (0, toHex_js_1.bytesToHex)(signature);\n    })();\n    const wrappedSignature = await (async () => {\n      if (!factory && !factoryData) return signatureHex;\n      if ((0, isErc6492Signature_js_1.isErc6492Signature)(signatureHex)) return signatureHex;\n      return (0, serializeErc6492Signature_js_1.serializeErc6492Signature)({\n        address: factory,\n        data: factoryData,\n        signature: signatureHex\n      });\n    })();\n    try {\n      const args = universalSignatureVerifierAddress ? {\n        to: universalSignatureVerifierAddress,\n        data: (0, index_js_1.encodeFunctionData)({\n          abi: abis_js_1.universalSignatureValidatorAbi,\n          functionName: 'isValidSig',\n          args: [address, hash, wrappedSignature]\n        }),\n        ...rest\n      } : {\n        data: (0, encodeDeployData_js_1.encodeDeployData)({\n          abi: abis_js_1.universalSignatureValidatorAbi,\n          args: [address, hash, wrappedSignature],\n          bytecode: contracts_js_1.universalSignatureValidatorByteCode\n        }),\n        ...rest\n      };\n      const {\n        data\n      } = await (0, getAction_js_1.getAction)(client, call_js_1.call, 'call')(args);\n      return (0, index_js_1.hexToBool)(data ?? '0x0');\n    } catch (error) {\n      try {\n        const verified = (0, isAddressEqual_js_1.isAddressEqual)((0, getAddress_js_1.getAddress)(address), await (0, recoverAddress_js_1.recoverAddress)({\n          hash,\n          signature\n        }));\n        if (verified) return true;\n      } catch {}\n      if (error instanceof contract_js_1.CallExecutionError) {\n        return false;\n      }\n      throw error;\n    }\n  }\n});","lineCount":82,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"verifyHash"],[7,20,3,18],[7,23,3,21,"verifyHash"],[7,33,3,31],[8,2,4,0],[8,8,4,6,"abis_js_1"],[8,17,4,15],[8,20,4,18,"require"],[8,27,4,25],[8,28,4,25,"_dependencyMap"],[8,42,4,25],[8,72,4,51],[8,73,4,52],[9,2,5,0],[9,8,5,6,"contracts_js_1"],[9,22,5,20],[9,25,5,23,"require"],[9,32,5,30],[9,33,5,30,"_dependencyMap"],[9,47,5,30],[9,82,5,61],[9,83,5,62],[10,2,6,0],[10,8,6,6,"contract_js_1"],[10,21,6,19],[10,24,6,22,"require"],[10,31,6,29],[10,32,6,29,"_dependencyMap"],[10,46,6,29],[10,77,6,56],[10,78,6,57],[11,2,7,0],[11,8,7,6,"encodeDeployData_js_1"],[11,29,7,27],[11,32,7,30,"require"],[11,39,7,37],[11,40,7,37,"_dependencyMap"],[11,54,7,37],[11,96,7,75],[11,97,7,76],[12,2,8,0],[12,8,8,6,"getAddress_js_1"],[12,23,8,21],[12,26,8,24,"require"],[12,33,8,31],[12,34,8,31,"_dependencyMap"],[12,48,8,31],[12,88,8,67],[12,89,8,68],[13,2,9,0],[13,8,9,6,"isAddressEqual_js_1"],[13,27,9,25],[13,30,9,28,"require"],[13,37,9,35],[13,38,9,35,"_dependencyMap"],[13,52,9,35],[13,96,9,75],[13,97,9,76],[14,2,10,0],[14,8,10,6,"isHex_js_1"],[14,18,10,16],[14,21,10,19,"require"],[14,28,10,26],[14,29,10,26,"_dependencyMap"],[14,43,10,26],[14,75,10,54],[14,76,10,55],[15,2,11,0],[15,8,11,6,"toHex_js_1"],[15,18,11,16],[15,21,11,19,"require"],[15,28,11,26],[15,29,11,26,"_dependencyMap"],[15,43,11,26],[15,79,11,58],[15,80,11,59],[16,2,12,0],[16,8,12,6,"getAction_js_1"],[16,22,12,20],[16,25,12,23,"require"],[16,32,12,30],[16,33,12,30,"_dependencyMap"],[16,47,12,30],[16,78,12,57],[16,79,12,58],[17,2,13,0],[17,8,13,6,"index_js_1"],[17,18,13,16],[17,21,13,19,"require"],[17,28,13,26],[17,29,13,26,"_dependencyMap"],[17,43,13,26],[17,70,13,49],[17,71,13,50],[18,2,14,0],[18,8,14,6,"isErc6492Signature_js_1"],[18,31,14,29],[18,34,14,32,"require"],[18,41,14,39],[18,42,14,39,"_dependencyMap"],[18,56,14,39],[18,107,14,85],[18,108,14,86],[19,2,15,0],[19,8,15,6,"recoverAddress_js_1"],[19,27,15,25],[19,30,15,28,"require"],[19,37,15,35],[19,38,15,35,"_dependencyMap"],[19,52,15,35],[19,99,15,77],[19,100,15,78],[20,2,16,0],[20,8,16,6,"serializeErc6492Signature_js_1"],[20,38,16,36],[20,41,16,39,"require"],[20,48,16,46],[20,49,16,46,"_dependencyMap"],[20,63,16,46],[20,121,16,99],[20,122,16,100],[21,2,17,0],[21,8,17,6,"serializeSignature_js_1"],[21,31,17,29],[21,34,17,32,"require"],[21,41,17,39],[21,42,17,39,"_dependencyMap"],[21,56,17,39],[21,107,17,85],[21,108,17,86],[22,2,18,0],[22,8,18,6,"call_js_1"],[22,17,18,15],[22,20,18,18,"require"],[22,27,18,25],[22,28,18,25,"_dependencyMap"],[22,42,18,25],[22,59,18,37],[22,60,18,38],[23,2,19,0],[23,17,19,15,"verifyHash"],[23,27,19,25,"verifyHash"],[23,28,19,26,"client"],[23,34,19,32],[23,36,19,34,"parameters"],[23,46,19,44],[23,48,19,46],[24,4,20,4],[24,10,20,10],[25,6,20,12,"address"],[25,13,20,19],[26,6,20,21,"factory"],[26,13,20,28],[27,6,20,30,"factoryData"],[27,17,20,41],[28,6,20,43,"hash"],[28,10,20,47],[29,6,20,49,"signature"],[29,15,20,58],[30,6,20,60,"universalSignatureVerifierAddress"],[30,39,20,93],[30,42,20,96,"client"],[30,48,20,102],[30,49,20,103,"chain"],[30,54,20,108],[30,56,20,110,"contracts"],[30,65,20,119],[30,67,21,10,"universalSignatureVerifier"],[30,93,21,36],[30,95,21,38,"address"],[30,102,21,45],[31,6,21,47],[31,9,21,50,"rest"],[32,4,21,55],[32,5,21,56],[32,8,21,59,"parameters"],[32,18,21,69],[33,4,22,4],[33,10,22,10,"signatureHex"],[33,22,22,22],[33,25,22,25],[33,26,22,26],[33,32,22,32],[34,6,23,8],[34,10,23,12],[34,11,23,13],[34,12,23,14],[34,14,23,16,"isHex_js_1"],[34,24,23,26],[34,25,23,27,"isHex"],[34,30,23,32],[34,32,23,34,"signature"],[34,41,23,43],[34,42,23,44],[34,44,24,12],[34,51,24,19,"signature"],[34,60,24,28],[35,6,25,8],[35,10,25,12],[35,17,25,19,"signature"],[35,26,25,28],[35,31,25,33],[35,39,25,41],[35,43,25,45],[35,46,25,48],[35,50,25,52,"signature"],[35,59,25,61],[35,63,25,65],[35,66,25,68],[35,70,25,72,"signature"],[35,79,25,81],[35,81,26,12],[35,88,26,19],[35,89,26,20],[35,90,26,21],[35,92,26,23,"serializeSignature_js_1"],[35,115,26,46],[35,116,26,47,"serializeSignature"],[35,134,26,65],[35,136,26,67,"signature"],[35,145,26,76],[35,146,26,77],[36,6,27,8],[36,13,27,15],[36,14,27,16],[36,15,27,17],[36,17,27,19,"toHex_js_1"],[36,27,27,29],[36,28,27,30,"bytesToHex"],[36,38,27,40],[36,40,27,42,"signature"],[36,49,27,51],[36,50,27,52],[37,4,28,4],[37,5,28,5],[37,7,28,7],[37,8,28,8],[38,4,29,4],[38,10,29,10,"wrappedSignature"],[38,26,29,26],[38,29,29,29],[38,35,29,35],[38,36,29,36],[38,48,29,48],[39,6,30,8],[39,10,30,12],[39,11,30,13,"factory"],[39,18,30,20],[39,22,30,24],[39,23,30,25,"factoryData"],[39,34,30,36],[39,36,31,12],[39,43,31,19,"signatureHex"],[39,55,31,31],[40,6,32,8],[40,10,32,12],[40,11,32,13],[40,12,32,14],[40,14,32,16,"isErc6492Signature_js_1"],[40,37,32,39],[40,38,32,40,"isErc6492Signature"],[40,56,32,58],[40,58,32,60,"signatureHex"],[40,70,32,72],[40,71,32,73],[40,73,33,12],[40,80,33,19,"signatureHex"],[40,92,33,31],[41,6,34,8],[41,13,34,15],[41,14,34,16],[41,15,34,17],[41,17,34,19,"serializeErc6492Signature_js_1"],[41,47,34,49],[41,48,34,50,"serializeErc6492Signature"],[41,73,34,75],[41,75,34,77],[42,8,35,12,"address"],[42,15,35,19],[42,17,35,21,"factory"],[42,24,35,28],[43,8,36,12,"data"],[43,12,36,16],[43,14,36,18,"factoryData"],[43,25,36,29],[44,8,37,12,"signature"],[44,17,37,21],[44,19,37,23,"signatureHex"],[45,6,38,8],[45,7,38,9],[45,8,38,10],[46,4,39,4],[46,5,39,5],[46,7,39,7],[46,8,39,8],[47,4,40,4],[47,8,40,8],[48,6,41,8],[48,12,41,14,"args"],[48,16,41,18],[48,19,41,21,"universalSignatureVerifierAddress"],[48,52,41,54],[48,55,42,14],[49,8,43,16,"to"],[49,10,43,18],[49,12,43,20,"universalSignatureVerifierAddress"],[49,45,43,53],[50,8,44,16,"data"],[50,12,44,20],[50,14,44,22],[50,15,44,23],[50,16,44,24],[50,18,44,26,"index_js_1"],[50,28,44,36],[50,29,44,37,"encodeFunctionData"],[50,47,44,55],[50,49,44,57],[51,10,45,20,"abi"],[51,13,45,23],[51,15,45,25,"abis_js_1"],[51,24,45,34],[51,25,45,35,"universalSignatureValidatorAbi"],[51,55,45,65],[52,10,46,20,"functionName"],[52,22,46,32],[52,24,46,34],[52,36,46,46],[53,10,47,20,"args"],[53,14,47,24],[53,16,47,26],[53,17,47,27,"address"],[53,24,47,34],[53,26,47,36,"hash"],[53,30,47,40],[53,32,47,42,"wrappedSignature"],[53,48,47,58],[54,8,48,16],[54,9,48,17],[54,10,48,18],[55,8,49,16],[55,11,49,19,"rest"],[56,6,50,12],[56,7,50,13],[56,10,51,14],[57,8,52,16,"data"],[57,12,52,20],[57,14,52,22],[57,15,52,23],[57,16,52,24],[57,18,52,26,"encodeDeployData_js_1"],[57,39,52,47],[57,40,52,48,"encodeDeployData"],[57,56,52,64],[57,58,52,66],[58,10,53,20,"abi"],[58,13,53,23],[58,15,53,25,"abis_js_1"],[58,24,53,34],[58,25,53,35,"universalSignatureValidatorAbi"],[58,55,53,65],[59,10,54,20,"args"],[59,14,54,24],[59,16,54,26],[59,17,54,27,"address"],[59,24,54,34],[59,26,54,36,"hash"],[59,30,54,40],[59,32,54,42,"wrappedSignature"],[59,48,54,58],[59,49,54,59],[60,10,55,20,"bytecode"],[60,18,55,28],[60,20,55,30,"contracts_js_1"],[60,34,55,44],[60,35,55,45,"universalSignatureValidatorByteCode"],[61,8,56,16],[61,9,56,17],[61,10,56,18],[62,8,57,16],[62,11,57,19,"rest"],[63,6,58,12],[63,7,58,13],[64,6,59,8],[64,12,59,14],[65,8,59,16,"data"],[66,6,59,21],[66,7,59,22],[66,10,59,25],[66,16,59,31],[66,17,59,32],[66,18,59,33],[66,20,59,35,"getAction_js_1"],[66,34,59,49],[66,35,59,50,"getAction"],[66,44,59,59],[66,46,59,61,"client"],[66,52,59,67],[66,54,59,69,"call_js_1"],[66,63,59,78],[66,64,59,79,"call"],[66,68,59,83],[66,70,59,85],[66,76,59,91],[66,77,59,92],[66,78,59,93,"args"],[66,82,59,97],[66,83,59,98],[67,6,60,8],[67,13,60,15],[67,14,60,16],[67,15,60,17],[67,17,60,19,"index_js_1"],[67,27,60,29],[67,28,60,30,"hexToBool"],[67,37,60,39],[67,39,60,41,"data"],[67,43,60,45],[67,47,60,49],[67,52,60,54],[67,53,60,55],[68,4,61,4],[68,5,61,5],[68,6,62,4],[68,13,62,11,"error"],[68,18,62,16],[68,20,62,18],[69,6,63,8],[69,10,63,12],[70,8,64,12],[70,14,64,18,"verified"],[70,22,64,26],[70,25,64,29],[70,26,64,30],[70,27,64,31],[70,29,64,33,"isAddressEqual_js_1"],[70,48,64,52],[70,49,64,53,"isAddressEqual"],[70,63,64,67],[70,65,64,69],[70,66,64,70],[70,67,64,71],[70,69,64,73,"getAddress_js_1"],[70,84,64,88],[70,85,64,89,"getAddress"],[70,95,64,99],[70,97,64,101,"address"],[70,104,64,108],[70,105,64,109],[70,107,64,111],[70,113,64,117],[70,114,64,118],[70,115,64,119],[70,117,64,121,"recoverAddress_js_1"],[70,136,64,140],[70,137,64,141,"recoverAddress"],[70,151,64,155],[70,153,64,157],[71,10,64,159,"hash"],[71,14,64,163],[72,10,64,165,"signature"],[73,8,64,175],[73,9,64,176],[73,10,64,177],[73,11,64,178],[74,8,65,12],[74,12,65,16,"verified"],[74,20,65,24],[74,22,66,16],[74,29,66,23],[74,33,66,27],[75,6,67,8],[75,7,67,9],[75,8,68,8],[75,14,68,14],[75,15,68,16],[76,6,69,8],[76,10,69,12,"error"],[76,15,69,17],[76,27,69,29,"contract_js_1"],[76,40,69,42],[76,41,69,43,"CallExecutionError"],[76,59,69,61],[76,61,69,63],[77,8,70,12],[77,15,70,19],[77,20,70,24],[78,6,71,8],[79,6,72,8],[79,12,72,14,"error"],[79,17,72,19],[80,4,73,4],[81,2,74,0],[82,0,74,1],[82,3]],"functionMap":{"names":["<global>","verifyHash","<anonymous>"],"mappings":"AAA;ACkB;0BCG;KDM;oCCC;KDU;CDmC"},"hasCjsExports":true},"type":"js/module"}]}