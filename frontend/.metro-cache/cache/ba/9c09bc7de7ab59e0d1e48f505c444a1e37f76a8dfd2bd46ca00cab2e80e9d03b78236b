{"dependencies":[{"name":"./bytes.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":19,"index":120},"end":{"line":4,"column":40,"index":141}}],"key":"eokoOkEvDYYQnD7pk9MNYe/uRJE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.MapDB = void 0;\n  const bytes_js_1 = require(_dependencyMap[0], \"./bytes.js\");\n  class MapDB {\n    constructor(database) {\n      this._database = database ?? new Map();\n    }\n    async get(key) {\n      const dbKey = key instanceof Uint8Array ? (0, bytes_js_1.bytesToUnprefixedHex)(key) : key.toString();\n      return this._database.get(dbKey);\n    }\n    async put(key, val) {\n      const dbKey = key instanceof Uint8Array ? (0, bytes_js_1.bytesToUnprefixedHex)(key) : key.toString();\n      this._database.set(dbKey, val);\n    }\n    async del(key) {\n      const dbKey = key instanceof Uint8Array ? (0, bytes_js_1.bytesToUnprefixedHex)(key) : key.toString();\n      this._database.delete(dbKey);\n    }\n    async batch(opStack) {\n      for (const op of opStack) {\n        if (op.type === 'del') {\n          await this.del(op.key);\n        }\n        if (op.type === 'put') {\n          await this.put(op.key, op.value);\n        }\n      }\n    }\n    /**\n     * Note that the returned shallow copy will share the underlying database with the original\n     *\n     * @returns DB\n     */\n    shallowCopy() {\n      return new MapDB(this._database);\n    }\n    open() {\n      return Promise.resolve();\n    }\n  }\n  exports.MapDB = MapDB;\n});","lineCount":48,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"MapDB"],[7,15,3,13],[7,18,3,16],[7,23,3,21],[7,24,3,22],[8,2,4,0],[8,8,4,6,"bytes_js_1"],[8,18,4,16],[8,21,4,19,"require"],[8,28,4,26],[8,29,4,26,"_dependencyMap"],[8,43,4,26],[8,60,4,39],[8,61,4,40],[9,2,5,0],[9,8,5,6,"MapDB"],[9,13,5,11],[9,14,5,12],[10,4,6,4,"constructor"],[10,15,6,15,"constructor"],[10,16,6,16,"database"],[10,24,6,24],[10,26,6,26],[11,6,7,8],[11,10,7,12],[11,11,7,13,"_database"],[11,20,7,22],[11,23,7,25,"database"],[11,31,7,33],[11,35,7,37],[11,39,7,41,"Map"],[11,42,7,44],[11,43,7,45],[11,44,7,46],[12,4,8,4],[13,4,9,4],[13,10,9,10,"get"],[13,13,9,13,"get"],[13,14,9,14,"key"],[13,17,9,17],[13,19,9,19],[14,6,10,8],[14,12,10,14,"dbKey"],[14,17,10,19],[14,20,10,22,"key"],[14,23,10,25],[14,35,10,37,"Uint8Array"],[14,45,10,47],[14,48,10,50],[14,49,10,51],[14,50,10,52],[14,52,10,54,"bytes_js_1"],[14,62,10,64],[14,63,10,65,"bytesToUnprefixedHex"],[14,83,10,85],[14,85,10,87,"key"],[14,88,10,90],[14,89,10,91],[14,92,10,94,"key"],[14,95,10,97],[14,96,10,98,"toString"],[14,104,10,106],[14,105,10,107],[14,106,10,108],[15,6,11,8],[15,13,11,15],[15,17,11,19],[15,18,11,20,"_database"],[15,27,11,29],[15,28,11,30,"get"],[15,31,11,33],[15,32,11,34,"dbKey"],[15,37,11,39],[15,38,11,40],[16,4,12,4],[17,4,13,4],[17,10,13,10,"put"],[17,13,13,13,"put"],[17,14,13,14,"key"],[17,17,13,17],[17,19,13,19,"val"],[17,22,13,22],[17,24,13,24],[18,6,14,8],[18,12,14,14,"dbKey"],[18,17,14,19],[18,20,14,22,"key"],[18,23,14,25],[18,35,14,37,"Uint8Array"],[18,45,14,47],[18,48,14,50],[18,49,14,51],[18,50,14,52],[18,52,14,54,"bytes_js_1"],[18,62,14,64],[18,63,14,65,"bytesToUnprefixedHex"],[18,83,14,85],[18,85,14,87,"key"],[18,88,14,90],[18,89,14,91],[18,92,14,94,"key"],[18,95,14,97],[18,96,14,98,"toString"],[18,104,14,106],[18,105,14,107],[18,106,14,108],[19,6,15,8],[19,10,15,12],[19,11,15,13,"_database"],[19,20,15,22],[19,21,15,23,"set"],[19,24,15,26],[19,25,15,27,"dbKey"],[19,30,15,32],[19,32,15,34,"val"],[19,35,15,37],[19,36,15,38],[20,4,16,4],[21,4,17,4],[21,10,17,10,"del"],[21,13,17,13,"del"],[21,14,17,14,"key"],[21,17,17,17],[21,19,17,19],[22,6,18,8],[22,12,18,14,"dbKey"],[22,17,18,19],[22,20,18,22,"key"],[22,23,18,25],[22,35,18,37,"Uint8Array"],[22,45,18,47],[22,48,18,50],[22,49,18,51],[22,50,18,52],[22,52,18,54,"bytes_js_1"],[22,62,18,64],[22,63,18,65,"bytesToUnprefixedHex"],[22,83,18,85],[22,85,18,87,"key"],[22,88,18,90],[22,89,18,91],[22,92,18,94,"key"],[22,95,18,97],[22,96,18,98,"toString"],[22,104,18,106],[22,105,18,107],[22,106,18,108],[23,6,19,8],[23,10,19,12],[23,11,19,13,"_database"],[23,20,19,22],[23,21,19,23,"delete"],[23,27,19,29],[23,28,19,30,"dbKey"],[23,33,19,35],[23,34,19,36],[24,4,20,4],[25,4,21,4],[25,10,21,10,"batch"],[25,15,21,15,"batch"],[25,16,21,16,"opStack"],[25,23,21,23],[25,25,21,25],[26,6,22,8],[26,11,22,13],[26,17,22,19,"op"],[26,19,22,21],[26,23,22,25,"opStack"],[26,30,22,32],[26,32,22,34],[27,8,23,12],[27,12,23,16,"op"],[27,14,23,18],[27,15,23,19,"type"],[27,19,23,23],[27,24,23,28],[27,29,23,33],[27,31,23,35],[28,10,24,16],[28,16,24,22],[28,20,24,26],[28,21,24,27,"del"],[28,24,24,30],[28,25,24,31,"op"],[28,27,24,33],[28,28,24,34,"key"],[28,31,24,37],[28,32,24,38],[29,8,25,12],[30,8,26,12],[30,12,26,16,"op"],[30,14,26,18],[30,15,26,19,"type"],[30,19,26,23],[30,24,26,28],[30,29,26,33],[30,31,26,35],[31,10,27,16],[31,16,27,22],[31,20,27,26],[31,21,27,27,"put"],[31,24,27,30],[31,25,27,31,"op"],[31,27,27,33],[31,28,27,34,"key"],[31,31,27,37],[31,33,27,39,"op"],[31,35,27,41],[31,36,27,42,"value"],[31,41,27,47],[31,42,27,48],[32,8,28,12],[33,6,29,8],[34,4,30,4],[35,4,31,4],[36,0,32,0],[37,0,33,0],[38,0,34,0],[39,0,35,0],[40,4,36,4,"shallowCopy"],[40,15,36,15,"shallowCopy"],[40,16,36,15],[40,18,36,18],[41,6,37,8],[41,13,37,15],[41,17,37,19,"MapDB"],[41,22,37,24],[41,23,37,25],[41,27,37,29],[41,28,37,30,"_database"],[41,37,37,39],[41,38,37,40],[42,4,38,4],[43,4,39,4,"open"],[43,8,39,8,"open"],[43,9,39,8],[43,11,39,11],[44,6,40,8],[44,13,40,15,"Promise"],[44,20,40,22],[44,21,40,23,"resolve"],[44,28,40,30],[44,29,40,31],[44,30,40,32],[45,4,41,4],[46,2,42,0],[47,2,43,0,"exports"],[47,9,43,7],[47,10,43,8,"MapDB"],[47,15,43,13],[47,18,43,16,"MapDB"],[47,23,43,21],[48,0,43,22],[48,3]],"functionMap":{"names":["<global>","MapDB","MapDB#constructor","MapDB#get","MapDB#put","MapDB#del","MapDB#batch","MapDB#shallowCopy","MapDB#open"],"mappings":"AAA;ACI;ICC;KDE;IEC;KFG;IGC;KHG;IIC;KJG;IKC;KLS;IMM;KNE;IOC;KPE;CDC"},"hasCjsExports":true},"type":"js/module"}]}