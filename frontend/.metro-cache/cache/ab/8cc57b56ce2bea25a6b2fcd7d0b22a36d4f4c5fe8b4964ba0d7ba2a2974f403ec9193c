{"dependencies":[{"name":"./fountainEncoder","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":42,"index":258},"end":{"line":6,"column":70,"index":286}}],"key":"MX5UsTACrwldTOM4xSgl4IPZehA=","exportNames":["*"],"imports":1}},{"name":"./bytewords","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":36,"index":325},"end":{"line":7,"column":58,"index":347}}],"key":"7X0Ora8nN1au/ubYjp5R3ftYFu8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var __importDefault = this && this.__importDefault || function (mod) {\n    return mod && mod.__esModule ? mod : {\n      \"default\": mod\n    };\n  };\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  const fountainEncoder_1 = __importDefault(require(_dependencyMap[0], \"./fountainEncoder\"));\n  const bytewords_1 = __importDefault(require(_dependencyMap[1], \"./bytewords\"));\n  class UREncoder {\n    constructor(_ur, maxFragmentLength, firstSeqNum, minFragmentLength) {\n      this.ur = _ur;\n      this.fountainEncoder = new fountainEncoder_1.default(_ur.cbor, maxFragmentLength, firstSeqNum, minFragmentLength);\n    }\n    get fragmentsLength() {\n      return this.fountainEncoder.fragmentsLength;\n    }\n    get fragments() {\n      return this.fountainEncoder.fragments;\n    }\n    get messageLength() {\n      return this.fountainEncoder.messageLength;\n    }\n    get cbor() {\n      return this.ur.cbor;\n    }\n    encodeWhole() {\n      return [...new Array(this.fragmentsLength)].map(() => this.nextPart());\n    }\n    nextPart() {\n      const part = this.fountainEncoder.nextPart();\n      if (this.fountainEncoder.isSinglePart()) {\n        return UREncoder.encodeSinglePart(this.ur);\n      } else {\n        return UREncoder.encodePart(this.ur.type, part);\n      }\n    }\n    static encodeUri(scheme, pathComponents) {\n      const path = pathComponents.join('/');\n      return [scheme, path].join(':');\n    }\n    static encodeUR(pathComponents) {\n      return UREncoder.encodeUri('ur', pathComponents);\n    }\n    static encodePart(type, part) {\n      const seq = `${part.seqNum}-${part.seqLength}`;\n      const body = bytewords_1.default.encode(part.cbor().toString('hex'), bytewords_1.default.STYLES.MINIMAL);\n      return UREncoder.encodeUR([type, seq, body]);\n    }\n    static encodeSinglePart(ur) {\n      const body = bytewords_1.default.encode(ur.cbor.toString('hex'), bytewords_1.default.STYLES.MINIMAL);\n      return UREncoder.encodeUR([ur.type, body]);\n    }\n  }\n  exports.default = UREncoder;\n});","lineCount":60,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[4,6,2,4,"__importDefault"],[4,21,2,19],[4,24,2,23],[4,28,2,27],[4,32,2,31],[4,36,2,35],[4,37,2,36,"__importDefault"],[4,52,2,51],[4,56,2,56],[4,66,2,66,"mod"],[4,69,2,69],[4,71,2,71],[5,4,3,4],[5,11,3,12,"mod"],[5,14,3,15],[5,18,3,19,"mod"],[5,21,3,22],[5,22,3,23,"__esModule"],[5,32,3,33],[5,35,3,37,"mod"],[5,38,3,40],[5,41,3,43],[6,6,3,45],[6,15,3,54],[6,17,3,56,"mod"],[7,4,3,60],[7,5,3,61],[8,2,4,0],[8,3,4,1],[9,2,5,0,"Object"],[9,8,5,6],[9,9,5,7,"defineProperty"],[9,23,5,21],[9,24,5,22,"exports"],[9,31,5,29],[9,33,5,31],[9,45,5,43],[9,47,5,45],[10,4,5,47,"value"],[10,9,5,52],[10,11,5,54],[11,2,5,59],[11,3,5,60],[11,4,5,61],[12,2,6,0],[12,8,6,6,"fountainEncoder_1"],[12,25,6,23],[12,28,6,26,"__importDefault"],[12,43,6,41],[12,44,6,42,"require"],[12,51,6,49],[12,52,6,49,"_dependencyMap"],[12,66,6,49],[12,90,6,69],[12,91,6,70],[12,92,6,71],[13,2,7,0],[13,8,7,6,"bytewords_1"],[13,19,7,17],[13,22,7,20,"__importDefault"],[13,37,7,35],[13,38,7,36,"require"],[13,45,7,43],[13,46,7,43,"_dependencyMap"],[13,60,7,43],[13,78,7,57],[13,79,7,58],[13,80,7,59],[14,2,8,0],[14,8,8,6,"UREncoder"],[14,17,8,15],[14,18,8,16],[15,4,9,4,"constructor"],[15,15,9,15,"constructor"],[15,16,9,16,"_ur"],[15,19,9,19],[15,21,9,21,"maxFragmentLength"],[15,38,9,38],[15,40,9,40,"firstSeqNum"],[15,51,9,51],[15,53,9,53,"minFragmentLength"],[15,70,9,70],[15,72,9,72],[16,6,10,8],[16,10,10,12],[16,11,10,13,"ur"],[16,13,10,15],[16,16,10,18,"_ur"],[16,19,10,21],[17,6,11,8],[17,10,11,12],[17,11,11,13,"fountainEncoder"],[17,26,11,28],[17,29,11,31],[17,33,11,35,"fountainEncoder_1"],[17,50,11,52],[17,51,11,53,"default"],[17,58,11,60],[17,59,11,61,"_ur"],[17,62,11,64],[17,63,11,65,"cbor"],[17,67,11,69],[17,69,11,71,"maxFragmentLength"],[17,86,11,88],[17,88,11,90,"firstSeqNum"],[17,99,11,101],[17,101,11,103,"minFragmentLength"],[17,118,11,120],[17,119,11,121],[18,4,12,4],[19,4,13,4],[19,8,13,8,"fragmentsLength"],[19,23,13,23,"fragmentsLength"],[19,24,13,23],[19,26,13,26],[20,6,13,28],[20,13,13,35],[20,17,13,39],[20,18,13,40,"fountainEncoder"],[20,33,13,55],[20,34,13,56,"fragmentsLength"],[20,49,13,71],[21,4,13,73],[22,4,14,4],[22,8,14,8,"fragments"],[22,17,14,17,"fragments"],[22,18,14,17],[22,20,14,20],[23,6,14,22],[23,13,14,29],[23,17,14,33],[23,18,14,34,"fountainEncoder"],[23,33,14,49],[23,34,14,50,"fragments"],[23,43,14,59],[24,4,14,61],[25,4,15,4],[25,8,15,8,"messageLength"],[25,21,15,21,"messageLength"],[25,22,15,21],[25,24,15,24],[26,6,15,26],[26,13,15,33],[26,17,15,37],[26,18,15,38,"fountainEncoder"],[26,33,15,53],[26,34,15,54,"messageLength"],[26,47,15,67],[27,4,15,69],[28,4,16,4],[28,8,16,8,"cbor"],[28,12,16,12,"cbor"],[28,13,16,12],[28,15,16,15],[29,6,16,17],[29,13,16,24],[29,17,16,28],[29,18,16,29,"ur"],[29,20,16,31],[29,21,16,32,"cbor"],[29,25,16,36],[30,4,16,38],[31,4,17,4,"encodeWhole"],[31,15,17,15,"encodeWhole"],[31,16,17,15],[31,18,17,18],[32,6,18,8],[32,13,18,15],[32,14,18,16],[32,17,18,19],[32,21,18,23,"Array"],[32,26,18,28],[32,27,18,29],[32,31,18,33],[32,32,18,34,"fragmentsLength"],[32,47,18,49],[32,48,18,50],[32,49,18,51],[32,50,18,52,"map"],[32,53,18,55],[32,54,18,56],[32,60,18,62],[32,64,18,66],[32,65,18,67,"nextPart"],[32,73,18,75],[32,74,18,76],[32,75,18,77],[32,76,18,78],[33,4,19,4],[34,4,20,4,"nextPart"],[34,12,20,12,"nextPart"],[34,13,20,12],[34,15,20,15],[35,6,21,8],[35,12,21,14,"part"],[35,16,21,18],[35,19,21,21],[35,23,21,25],[35,24,21,26,"fountainEncoder"],[35,39,21,41],[35,40,21,42,"nextPart"],[35,48,21,50],[35,49,21,51],[35,50,21,52],[36,6,22,8],[36,10,22,12],[36,14,22,16],[36,15,22,17,"fountainEncoder"],[36,30,22,32],[36,31,22,33,"isSinglePart"],[36,43,22,45],[36,44,22,46],[36,45,22,47],[36,47,22,49],[37,8,23,12],[37,15,23,19,"UREncoder"],[37,24,23,28],[37,25,23,29,"encodeSinglePart"],[37,41,23,45],[37,42,23,46],[37,46,23,50],[37,47,23,51,"ur"],[37,49,23,53],[37,50,23,54],[38,6,24,8],[38,7,24,9],[38,13,25,13],[39,8,26,12],[39,15,26,19,"UREncoder"],[39,24,26,28],[39,25,26,29,"encodePart"],[39,35,26,39],[39,36,26,40],[39,40,26,44],[39,41,26,45,"ur"],[39,43,26,47],[39,44,26,48,"type"],[39,48,26,52],[39,50,26,54,"part"],[39,54,26,58],[39,55,26,59],[40,6,27,8],[41,4,28,4],[42,4,29,4],[42,11,29,11,"encodeUri"],[42,20,29,20,"encodeUri"],[42,21,29,21,"scheme"],[42,27,29,27],[42,29,29,29,"pathComponents"],[42,43,29,43],[42,45,29,45],[43,6,30,8],[43,12,30,14,"path"],[43,16,30,18],[43,19,30,21,"pathComponents"],[43,33,30,35],[43,34,30,36,"join"],[43,38,30,40],[43,39,30,41],[43,42,30,44],[43,43,30,45],[44,6,31,8],[44,13,31,15],[44,14,31,16,"scheme"],[44,20,31,22],[44,22,31,24,"path"],[44,26,31,28],[44,27,31,29],[44,28,31,30,"join"],[44,32,31,34],[44,33,31,35],[44,36,31,38],[44,37,31,39],[45,4,32,4],[46,4,33,4],[46,11,33,11,"encodeUR"],[46,19,33,19,"encodeUR"],[46,20,33,20,"pathComponents"],[46,34,33,34],[46,36,33,36],[47,6,34,8],[47,13,34,15,"UREncoder"],[47,22,34,24],[47,23,34,25,"encodeUri"],[47,32,34,34],[47,33,34,35],[47,37,34,39],[47,39,34,41,"pathComponents"],[47,53,34,55],[47,54,34,56],[48,4,35,4],[49,4,36,4],[49,11,36,11,"encodePart"],[49,21,36,21,"encodePart"],[49,22,36,22,"type"],[49,26,36,26],[49,28,36,28,"part"],[49,32,36,32],[49,34,36,34],[50,6,37,8],[50,12,37,14,"seq"],[50,15,37,17],[50,18,37,20],[50,21,37,23,"part"],[50,25,37,27],[50,26,37,28,"seqNum"],[50,32,37,34],[50,36,37,38,"part"],[50,40,37,42],[50,41,37,43,"seqLength"],[50,50,37,52],[50,52,37,54],[51,6,38,8],[51,12,38,14,"body"],[51,16,38,18],[51,19,38,21,"bytewords_1"],[51,30,38,32],[51,31,38,33,"default"],[51,38,38,40],[51,39,38,41,"encode"],[51,45,38,47],[51,46,38,48,"part"],[51,50,38,52],[51,51,38,53,"cbor"],[51,55,38,57],[51,56,38,58],[51,57,38,59],[51,58,38,60,"toString"],[51,66,38,68],[51,67,38,69],[51,72,38,74],[51,73,38,75],[51,75,38,77,"bytewords_1"],[51,86,38,88],[51,87,38,89,"default"],[51,94,38,96],[51,95,38,97,"STYLES"],[51,101,38,103],[51,102,38,104,"MINIMAL"],[51,109,38,111],[51,110,38,112],[52,6,39,8],[52,13,39,15,"UREncoder"],[52,22,39,24],[52,23,39,25,"encodeUR"],[52,31,39,33],[52,32,39,34],[52,33,39,35,"type"],[52,37,39,39],[52,39,39,41,"seq"],[52,42,39,44],[52,44,39,46,"body"],[52,48,39,50],[52,49,39,51],[52,50,39,52],[53,4,40,4],[54,4,41,4],[54,11,41,11,"encodeSinglePart"],[54,27,41,27,"encodeSinglePart"],[54,28,41,28,"ur"],[54,30,41,30],[54,32,41,32],[55,6,42,8],[55,12,42,14,"body"],[55,16,42,18],[55,19,42,21,"bytewords_1"],[55,30,42,32],[55,31,42,33,"default"],[55,38,42,40],[55,39,42,41,"encode"],[55,45,42,47],[55,46,42,48,"ur"],[55,48,42,50],[55,49,42,51,"cbor"],[55,53,42,55],[55,54,42,56,"toString"],[55,62,42,64],[55,63,42,65],[55,68,42,70],[55,69,42,71],[55,71,42,73,"bytewords_1"],[55,82,42,84],[55,83,42,85,"default"],[55,90,42,92],[55,91,42,93,"STYLES"],[55,97,42,99],[55,98,42,100,"MINIMAL"],[55,105,42,107],[55,106,42,108],[56,6,43,8],[56,13,43,15,"UREncoder"],[56,22,43,24],[56,23,43,25,"encodeUR"],[56,31,43,33],[56,32,43,34],[56,33,43,35,"ur"],[56,35,43,37],[56,36,43,38,"type"],[56,40,43,42],[56,42,43,44,"body"],[56,46,43,48],[56,47,43,49],[56,48,43,50],[57,4,44,4],[58,2,45,0],[59,2,46,0,"exports"],[59,9,46,7],[59,10,46,8,"default"],[59,17,46,15],[59,20,46,18,"UREncoder"],[59,29,46,27],[60,0,46,28],[60,3]],"functionMap":{"names":["<global>","<anonymous>","UREncoder","UREncoder#constructor","UREncoder#get__fragmentsLength","UREncoder#get__fragments","UREncoder#get__messageLength","UREncoder#get__cbor","UREncoder#encodeWhole","map$argument_0","UREncoder#nextPart","UREncoder.encodeUri","UREncoder.encodeUR","UREncoder.encodePart","UREncoder.encodeSinglePart"],"mappings":"AAA;wDCC;CDE;AEI;ICC;KDG;IEC,sEF;IGC,0DH;IIC,kEJ;IKC,mCL;IMC;wDCC,qBD;KNC;IQC;KRQ;ISC;KTG;IUC;KVE;IWC;KXI;IYC;KZG;CFC"},"hasCjsExports":true},"type":"js/module"}]}