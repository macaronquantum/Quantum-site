{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.withTimeout = withTimeout;\n  function withTimeout(fn, {\n    errorInstance = new Error('timed out'),\n    timeout,\n    signal\n  }) {\n    return new Promise((resolve, reject) => {\n      ;\n      (async () => {\n        let timeoutId;\n        try {\n          const controller = new AbortController();\n          if (timeout > 0) {\n            timeoutId = setTimeout(() => {\n              if (signal) {\n                controller.abort();\n              } else {\n                reject(errorInstance);\n              }\n            }, timeout); // need to cast because bun globals.d.ts overrides @types/node\n          }\n          resolve(await fn({\n            signal: controller?.signal || null\n          }));\n        } catch (err) {\n          if (err?.name === 'AbortError') reject(errorInstance);\n          reject(err);\n        } finally {\n          clearTimeout(timeoutId);\n        }\n      })();\n    });\n  }\n});","lineCount":40,"map":[[7,2,1,0,"exports"],[7,9,1,0],[7,10,1,0,"withTimeout"],[7,21,1,0],[7,24,1,0,"withTimeout"],[7,35,1,0],[8,2,1,7],[8,11,1,16,"withTimeout"],[8,22,1,27,"withTimeout"],[8,23,1,28,"fn"],[8,25,1,30],[8,27,1,32],[9,4,1,34,"errorInstance"],[9,17,1,47],[9,20,1,50],[9,24,1,54,"Error"],[9,29,1,59],[9,30,1,60],[9,41,1,71],[9,42,1,72],[10,4,1,74,"timeout"],[10,11,1,81],[11,4,1,83,"signal"],[12,2,1,91],[12,3,1,92],[12,5,1,94],[13,4,2,4],[13,11,2,11],[13,15,2,15,"Promise"],[13,22,2,22],[13,23,2,23],[13,24,2,24,"resolve"],[13,31,2,31],[13,33,2,33,"reject"],[13,39,2,39],[13,44,2,44],[14,6,3,8],[15,6,4,8],[15,7,4,9],[15,19,4,21],[16,8,5,12],[16,12,5,16,"timeoutId"],[16,21,5,25],[17,8,6,12],[17,12,6,16],[18,10,7,16],[18,16,7,22,"controller"],[18,26,7,32],[18,29,7,35],[18,33,7,39,"AbortController"],[18,48,7,54],[18,49,7,55],[18,50,7,56],[19,10,8,16],[19,14,8,20,"timeout"],[19,21,8,27],[19,24,8,30],[19,25,8,31],[19,27,8,33],[20,12,9,20,"timeoutId"],[20,21,9,29],[20,24,9,32,"setTimeout"],[20,34,9,42],[20,35,9,43],[20,41,9,49],[21,14,10,24],[21,18,10,28,"signal"],[21,24,10,34],[21,26,10,36],[22,16,11,28,"controller"],[22,26,11,38],[22,27,11,39,"abort"],[22,32,11,44],[22,33,11,45],[22,34,11,46],[23,14,12,24],[23,15,12,25],[23,21,13,29],[24,16,14,28,"reject"],[24,22,14,34],[24,23,14,35,"errorInstance"],[24,36,14,48],[24,37,14,49],[25,14,15,24],[26,12,16,20],[26,13,16,21],[26,15,16,23,"timeout"],[26,22,16,30],[26,23,16,31],[26,24,16,32],[26,25,16,33],[27,10,17,16],[28,10,18,16,"resolve"],[28,17,18,23],[28,18,18,24],[28,24,18,30,"fn"],[28,26,18,32],[28,27,18,33],[29,12,18,35,"signal"],[29,18,18,41],[29,20,18,43,"controller"],[29,30,18,53],[29,32,18,55,"signal"],[29,38,18,61],[29,42,18,65],[30,10,18,70],[30,11,18,71],[30,12,18,72],[30,13,18,73],[31,8,19,12],[31,9,19,13],[31,10,20,12],[31,17,20,19,"err"],[31,20,20,22],[31,22,20,24],[32,10,21,16],[32,14,21,20,"err"],[32,17,21,23],[32,19,21,25,"name"],[32,23,21,29],[32,28,21,34],[32,40,21,46],[32,42,22,20,"reject"],[32,48,22,26],[32,49,22,27,"errorInstance"],[32,62,22,40],[32,63,22,41],[33,10,23,16,"reject"],[33,16,23,22],[33,17,23,23,"err"],[33,20,23,26],[33,21,23,27],[34,8,24,12],[34,9,24,13],[34,18,25,20],[35,10,26,16,"clearTimeout"],[35,22,26,28],[35,23,26,29,"timeoutId"],[35,32,26,38],[35,33,26,39],[36,8,27,12],[37,6,28,8],[37,7,28,9],[37,9,28,11],[37,10,28,12],[38,4,29,4],[38,5,29,5],[38,6,29,6],[39,2,30,0],[40,0,30,1],[40,3]],"functionMap":{"names":["<global>","withTimeout","Promise$argument_0","<anonymous>","setTimeout$argument_0"],"mappings":"AAA,OC;uBCC;SCE;2CCK;qBDO;SDY;KDC;CDC"},"hasCjsExports":false},"type":"js/module"}]}