{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getBalancesViaBackend = getBalancesViaBackend;\n  exports.getSolBalance = getSolBalance;\n  exports.getQuantumBalance = getQuantumBalance;\n  exports.getAllTokenAccounts = getAllTokenAccounts;\n  exports.getUsdToEurRate = getUsdToEurRate;\n  Object.defineProperty(exports, \"QUANTUM_MINT\", {\n    enumerable: true,\n    get: function () {\n      return QUANTUM_MINT;\n    }\n  });\n  Object.defineProperty(exports, \"QUANTUM_PRICE_USD\", {\n    enumerable: true,\n    get: function () {\n      return QUANTUM_PRICE_USD;\n    }\n  });\n  /**\n   * Direct Solana JSON-RPC client.\n   * Uses backend proxy to avoid browser CORS/rate-limit issues.\n   * Falls back to direct RPC if proxy unavailable.\n   */\n\n  const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL || '';\n  const RPC_ENDPOINTS = ['https://api.mainnet-beta.solana.com', 'https://solana-mainnet.g.alchemy.com/v2/demo'];\n  const QUANTUM_MINT = '4KsZXRH3Xjd7z4CiuwgfNQstC2aHDLdJHv5u3tDixtLc';\n  const QUANTUM_PRICE_USD = 2.5;\n\n  // ─── Backend proxy for balances (preferred) ─────────────────\n\n  async function getBalancesViaBackend(walletAddress) {\n    try {\n      const response = await fetch(`${BACKEND_URL}/api/solana/balance/${walletAddress}`);\n      if (!response.ok) return null;\n      return await response.json();\n    } catch (err) {\n      console.warn('Backend balance proxy failed:', err);\n      return null;\n    }\n  }\n  async function rpcCall(method, params) {\n    let lastError;\n    for (const endpoint of RPC_ENDPOINTS) {\n      try {\n        const response = await fetch(endpoint, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            jsonrpc: '2.0',\n            id: 1,\n            method,\n            params\n          })\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}`);\n        }\n        const data = await response.json();\n        if (data.error) {\n          throw new Error(data.error.message || 'RPC error');\n        }\n        return data.result;\n      } catch (err) {\n        lastError = err;\n        console.warn(`RPC call to ${endpoint} failed:`, err);\n        continue; // try next endpoint\n      }\n    }\n    throw lastError || new Error('All RPC endpoints failed');\n  }\n\n  // ─── Get SOL balance (in SOL, not lamports) ─────────────────\n  async function getSolBalance(walletAddress) {\n    try {\n      const lamports = await rpcCall('getBalance', [walletAddress]);\n      return (lamports?.value ?? 0) / 1e9; // lamports → SOL\n    } catch (err) {\n      console.error('getSolBalance error:', err);\n      return 0;\n    }\n  }\n\n  // ─── Get Quantum (SPL) token balance ────────────────────────\n\n  async function getQuantumBalance(walletAddress) {\n    try {\n      const result = await rpcCall('getTokenAccountsByOwner', [walletAddress, {\n        mint: QUANTUM_MINT\n      }, {\n        encoding: 'jsonParsed'\n      }]);\n      if (result?.value?.length > 0) {\n        const info = result.value[0].account.data.parsed.info.tokenAmount;\n        return {\n          amount: info.uiAmount ?? 0,\n          rawAmount: info.amount ?? '0',\n          decimals: info.decimals ?? 0,\n          uiAmountString: info.uiAmountString ?? '0'\n        };\n      }\n      return {\n        amount: 0,\n        rawAmount: '0',\n        decimals: 0,\n        uiAmountString: '0'\n      };\n    } catch (err) {\n      console.error('getQuantumBalance error:', err);\n      return {\n        amount: 0,\n        rawAmount: '0',\n        decimals: 0,\n        uiAmountString: '0'\n      };\n    }\n  }\n\n  // ─── Get all SPL token accounts for the wallet ──────────────\n  async function getAllTokenAccounts(walletAddress) {\n    try {\n      const result = await rpcCall('getTokenAccountsByOwner', [walletAddress, {\n        programId: 'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA'\n      }, {\n        encoding: 'jsonParsed'\n      }]);\n      return result?.value ?? [];\n    } catch (err) {\n      console.error('getAllTokenAccounts error:', err);\n      return [];\n    }\n  }\n\n  // ─── USD to EUR real-time rate ──────────────────────────────\n  let cachedEurRate = null;\n  const RATE_CACHE_MS = 10 * 60 * 1000; // 10 minutes\n\n  async function getUsdToEurRate() {\n    if (cachedEurRate && Date.now() - cachedEurRate.timestamp < RATE_CACHE_MS) {\n      return cachedEurRate.rate;\n    }\n    try {\n      const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');\n      const data = await response.json();\n      const rate = data.rates?.EUR ?? 0.92;\n      cachedEurRate = {\n        rate,\n        timestamp: Date.now()\n      };\n      return rate;\n    } catch {\n      return cachedEurRate?.rate ?? 0.92; // fallback\n    }\n  }\n\n  // ─── Constants ──────────────────────────────────────────────\n});","lineCount":164,"map":[[7,2,26,0,"exports"],[7,9,26,0],[7,10,26,0,"getBalancesViaBackend"],[7,31,26,0],[7,34,26,0,"getBalancesViaBackend"],[7,55,26,0],[8,2,79,0,"exports"],[8,9,79,0],[8,10,79,0,"getSolBalance"],[8,23,79,0],[8,26,79,0,"getSolBalance"],[8,39,79,0],[9,2,97,0,"exports"],[9,9,97,0],[9,10,97,0,"getQuantumBalance"],[9,27,97,0],[9,30,97,0,"getQuantumBalance"],[9,47,97,0],[10,2,125,0,"exports"],[10,9,125,0],[10,10,125,0,"getAllTokenAccounts"],[10,29,125,0],[10,32,125,0,"getAllTokenAccounts"],[10,51,125,0],[11,2,145,0,"exports"],[11,9,145,0],[11,10,145,0,"getUsdToEurRate"],[11,25,145,0],[11,28,145,0,"getUsdToEurRate"],[11,43,145,0],[12,2,167,0,"Object"],[12,8,167,0],[12,9,167,0,"defineProperty"],[12,23,167,0],[12,24,167,0,"exports"],[12,31,167,0],[13,4,167,0,"enumerable"],[13,14,167,0],[14,4,167,0,"get"],[14,7,167,0],[14,18,167,0,"get"],[14,19,167,0],[15,6,167,0],[15,13,167,9,"QUANTUM_MINT"],[15,25,167,21],[16,4,167,21],[17,2,167,21],[18,2,167,0,"Object"],[18,8,167,0],[18,9,167,0,"defineProperty"],[18,23,167,0],[18,24,167,0,"exports"],[18,31,167,0],[19,4,167,0,"enumerable"],[19,14,167,0],[20,4,167,0,"get"],[20,7,167,0],[20,18,167,0,"get"],[20,19,167,0],[21,6,167,0],[21,13,167,23,"QUANTUM_PRICE_USD"],[21,30,167,40],[22,4,167,40],[23,2,167,40],[24,2,1,0],[25,0,2,0],[26,0,3,0],[27,0,4,0],[28,0,5,0],[30,2,7,0],[30,8,7,6,"BACKEND_URL"],[30,19,7,17],[30,22,7,20,"process"],[30,29,7,27],[30,30,7,28,"env"],[30,33,7,31],[30,34,7,32,"EXPO_PUBLIC_BACKEND_URL"],[30,57,7,55],[30,61,7,59],[30,63,7,61],[31,2,9,0],[31,8,9,6,"RPC_ENDPOINTS"],[31,21,9,19],[31,24,9,22],[31,25,10,2],[31,62,10,39],[31,64,11,2],[31,110,11,48],[31,111,12,1],[32,2,14,0],[32,8,14,6,"QUANTUM_MINT"],[32,20,14,18],[32,23,14,21],[32,69,14,67],[33,2,15,0],[33,8,15,6,"QUANTUM_PRICE_USD"],[33,25,15,23],[33,28,15,26],[33,31,15,29],[35,2,17,0],[37,2,26,7],[37,17,26,22,"getBalancesViaBackend"],[37,38,26,43,"getBalancesViaBackend"],[37,39,27,2,"walletAddress"],[37,52,27,23],[37,54,28,42],[38,4,29,2],[38,8,29,6],[39,6,30,4],[39,12,30,10,"response"],[39,20,30,18],[39,23,30,21],[39,29,30,27,"fetch"],[39,34,30,32],[39,35,31,6],[39,38,31,9,"BACKEND_URL"],[39,49,31,20],[39,72,31,43,"walletAddress"],[39,85,31,56],[39,87,32,4],[39,88,32,5],[40,6,33,4],[40,10,33,8],[40,11,33,9,"response"],[40,19,33,17],[40,20,33,18,"ok"],[40,22,33,20],[40,24,33,22],[40,31,33,29],[40,35,33,33],[41,6,34,4],[41,13,34,11],[41,19,34,17,"response"],[41,27,34,25],[41,28,34,26,"json"],[41,32,34,30],[41,33,34,31],[41,34,34,32],[42,4,35,2],[42,5,35,3],[42,6,35,4],[42,13,35,11,"err"],[42,16,35,14],[42,18,35,16],[43,6,36,4,"console"],[43,13,36,11],[43,14,36,12,"warn"],[43,18,36,16],[43,19,36,17],[43,50,36,48],[43,52,36,50,"err"],[43,55,36,53],[43,56,36,54],[44,6,37,4],[44,13,37,11],[44,17,37,15],[45,4,38,2],[46,2,39,0],[47,2,41,0],[47,17,41,15,"rpcCall"],[47,24,41,22,"rpcCall"],[47,25,41,23,"method"],[47,31,41,37],[47,33,41,39,"params"],[47,39,41,52],[47,41,41,68],[48,4,42,2],[48,8,42,6,"lastError"],[48,17,42,20],[49,4,44,2],[49,9,44,7],[49,15,44,13,"endpoint"],[49,23,44,21],[49,27,44,25,"RPC_ENDPOINTS"],[49,40,44,38],[49,42,44,40],[50,6,45,4],[50,10,45,8],[51,8,46,6],[51,14,46,12,"response"],[51,22,46,20],[51,25,46,23],[51,31,46,29,"fetch"],[51,36,46,34],[51,37,46,35,"endpoint"],[51,45,46,43],[51,47,46,45],[52,10,47,8,"method"],[52,16,47,14],[52,18,47,16],[52,24,47,22],[53,10,48,8,"headers"],[53,17,48,15],[53,19,48,17],[54,12,48,19],[54,26,48,33],[54,28,48,35],[55,10,48,54],[55,11,48,55],[56,10,49,8,"body"],[56,14,49,12],[56,16,49,14,"JSON"],[56,20,49,18],[56,21,49,19,"stringify"],[56,30,49,28],[56,31,49,29],[57,12,50,10,"jsonrpc"],[57,19,50,17],[57,21,50,19],[57,26,50,24],[58,12,51,10,"id"],[58,14,51,12],[58,16,51,14],[58,17,51,15],[59,12,52,10,"method"],[59,18,52,16],[60,12,53,10,"params"],[61,10,54,8],[61,11,54,9],[62,8,55,6],[62,9,55,7],[62,10,55,8],[63,8,57,6],[63,12,57,10],[63,13,57,11,"response"],[63,21,57,19],[63,22,57,20,"ok"],[63,24,57,22],[63,26,57,24],[64,10,58,8],[64,16,58,14],[64,20,58,18,"Error"],[64,25,58,23],[64,26,58,24],[64,34,58,32,"response"],[64,42,58,40],[64,43,58,41,"status"],[64,49,58,47],[64,51,58,49],[64,52,58,50],[65,8,59,6],[66,8,61,6],[66,14,61,12,"data"],[66,18,61,16],[66,21,61,19],[66,27,61,25,"response"],[66,35,61,33],[66,36,61,34,"json"],[66,40,61,38],[66,41,61,39],[66,42,61,40],[67,8,63,6],[67,12,63,10,"data"],[67,16,63,14],[67,17,63,15,"error"],[67,22,63,20],[67,24,63,22],[68,10,64,8],[68,16,64,14],[68,20,64,18,"Error"],[68,25,64,23],[68,26,64,24,"data"],[68,30,64,28],[68,31,64,29,"error"],[68,36,64,34],[68,37,64,35,"message"],[68,44,64,42],[68,48,64,46],[68,59,64,57],[68,60,64,58],[69,8,65,6],[70,8,67,6],[70,15,67,13,"data"],[70,19,67,17],[70,20,67,18,"result"],[70,26,67,24],[71,6,68,4],[71,7,68,5],[71,8,68,6],[71,15,68,13,"err"],[71,18,68,16],[71,20,68,18],[72,8,69,6,"lastError"],[72,17,69,15],[72,20,69,18,"err"],[72,23,69,21],[73,8,70,6,"console"],[73,15,70,13],[73,16,70,14,"warn"],[73,20,70,18],[73,21,70,19],[73,36,70,34,"endpoint"],[73,44,70,42],[73,54,70,52],[73,56,70,54,"err"],[73,59,70,57],[73,60,70,58],[74,8,71,6],[74,17,71,15],[74,18,71,16],[75,6,72,4],[76,4,73,2],[77,4,75,2],[77,10,75,8,"lastError"],[77,19,75,17],[77,23,75,21],[77,27,75,25,"Error"],[77,32,75,30],[77,33,75,31],[77,59,75,57],[77,60,75,58],[78,2,76,0],[80,2,78,0],[81,2,79,7],[81,17,79,22,"getSolBalance"],[81,30,79,35,"getSolBalance"],[81,31,79,36,"walletAddress"],[81,44,79,57],[81,46,79,76],[82,4,80,2],[82,8,80,6],[83,6,81,4],[83,12,81,10,"lamports"],[83,20,81,18],[83,23,81,21],[83,29,81,27,"rpcCall"],[83,36,81,34],[83,37,81,35],[83,49,81,47],[83,51,81,49],[83,52,81,50,"walletAddress"],[83,65,81,63],[83,66,81,64],[83,67,81,65],[84,6,82,4],[84,13,82,11],[84,14,82,12,"lamports"],[84,22,82,20],[84,24,82,22,"value"],[84,29,82,27],[84,33,82,31],[84,34,82,32],[84,38,82,36],[84,41,82,39],[84,42,82,40],[84,43,82,41],[85,4,83,2],[85,5,83,3],[85,6,83,4],[85,13,83,11,"err"],[85,16,83,14],[85,18,83,16],[86,6,84,4,"console"],[86,13,84,11],[86,14,84,12,"error"],[86,19,84,17],[86,20,84,18],[86,42,84,40],[86,44,84,42,"err"],[86,47,84,45],[86,48,84,46],[87,6,85,4],[87,13,85,11],[87,14,85,12],[88,4,86,2],[89,2,87,0],[91,2,89,0],[93,2,97,7],[93,17,97,22,"getQuantumBalance"],[93,34,97,39,"getQuantumBalance"],[93,35,98,2,"walletAddress"],[93,48,98,23],[93,50,99,25],[94,4,100,2],[94,8,100,6],[95,6,101,4],[95,12,101,10,"result"],[95,18,101,16],[95,21,101,19],[95,27,101,25,"rpcCall"],[95,34,101,32],[95,35,101,33],[95,60,101,58],[95,62,101,60],[95,63,102,6,"walletAddress"],[95,76,102,19],[95,78,103,6],[96,8,103,8,"mint"],[96,12,103,12],[96,14,103,14,"QUANTUM_MINT"],[97,6,103,27],[97,7,103,28],[97,9,104,6],[98,8,104,8,"encoding"],[98,16,104,16],[98,18,104,18],[99,6,104,31],[99,7,104,32],[99,8,105,5],[99,9,105,6],[100,6,107,4],[100,10,107,8,"result"],[100,16,107,14],[100,18,107,16,"value"],[100,23,107,21],[100,25,107,23,"length"],[100,31,107,29],[100,34,107,32],[100,35,107,33],[100,37,107,35],[101,8,108,6],[101,14,108,12,"info"],[101,18,108,16],[101,21,108,19,"result"],[101,27,108,25],[101,28,108,26,"value"],[101,33,108,31],[101,34,108,32],[101,35,108,33],[101,36,108,34],[101,37,108,35,"account"],[101,44,108,42],[101,45,108,43,"data"],[101,49,108,47],[101,50,108,48,"parsed"],[101,56,108,54],[101,57,108,55,"info"],[101,61,108,59],[101,62,108,60,"tokenAmount"],[101,73,108,71],[102,8,109,6],[102,15,109,13],[103,10,110,8,"amount"],[103,16,110,14],[103,18,110,16,"info"],[103,22,110,20],[103,23,110,21,"uiAmount"],[103,31,110,29],[103,35,110,33],[103,36,110,34],[104,10,111,8,"rawAmount"],[104,19,111,17],[104,21,111,19,"info"],[104,25,111,23],[104,26,111,24,"amount"],[104,32,111,30],[104,36,111,34],[104,39,111,37],[105,10,112,8,"decimals"],[105,18,112,16],[105,20,112,18,"info"],[105,24,112,22],[105,25,112,23,"decimals"],[105,33,112,31],[105,37,112,35],[105,38,112,36],[106,10,113,8,"uiAmountString"],[106,24,113,22],[106,26,113,24,"info"],[106,30,113,28],[106,31,113,29,"uiAmountString"],[106,45,113,43],[106,49,113,47],[107,8,114,6],[107,9,114,7],[108,6,115,4],[109,6,117,4],[109,13,117,11],[110,8,117,13,"amount"],[110,14,117,19],[110,16,117,21],[110,17,117,22],[111,8,117,24,"rawAmount"],[111,17,117,33],[111,19,117,35],[111,22,117,38],[112,8,117,40,"decimals"],[112,16,117,48],[112,18,117,50],[112,19,117,51],[113,8,117,53,"uiAmountString"],[113,22,117,67],[113,24,117,69],[114,6,117,73],[114,7,117,74],[115,4,118,2],[115,5,118,3],[115,6,118,4],[115,13,118,11,"err"],[115,16,118,14],[115,18,118,16],[116,6,119,4,"console"],[116,13,119,11],[116,14,119,12,"error"],[116,19,119,17],[116,20,119,18],[116,46,119,44],[116,48,119,46,"err"],[116,51,119,49],[116,52,119,50],[117,6,120,4],[117,13,120,11],[118,8,120,13,"amount"],[118,14,120,19],[118,16,120,21],[118,17,120,22],[119,8,120,24,"rawAmount"],[119,17,120,33],[119,19,120,35],[119,22,120,38],[120,8,120,40,"decimals"],[120,16,120,48],[120,18,120,50],[120,19,120,51],[121,8,120,53,"uiAmountString"],[121,22,120,67],[121,24,120,69],[122,6,120,73],[122,7,120,74],[123,4,121,2],[124,2,122,0],[126,2,124,0],[127,2,125,7],[127,17,125,22,"getAllTokenAccounts"],[127,36,125,41,"getAllTokenAccounts"],[127,37,126,2,"walletAddress"],[127,50,126,23],[127,52,127,18],[128,4,128,2],[128,8,128,6],[129,6,129,4],[129,12,129,10,"result"],[129,18,129,16],[129,21,129,19],[129,27,129,25,"rpcCall"],[129,34,129,32],[129,35,129,33],[129,60,129,58],[129,62,129,60],[129,63,130,6,"walletAddress"],[129,76,130,19],[129,78,131,6],[130,8,131,8,"programId"],[130,17,131,17],[130,19,131,19],[131,6,131,65],[131,7,131,66],[131,9,132,6],[132,8,132,8,"encoding"],[132,16,132,16],[132,18,132,18],[133,6,132,31],[133,7,132,32],[133,8,133,5],[133,9,133,6],[134,6,134,4],[134,13,134,11,"result"],[134,19,134,17],[134,21,134,19,"value"],[134,26,134,24],[134,30,134,28],[134,32,134,30],[135,4,135,2],[135,5,135,3],[135,6,135,4],[135,13,135,11,"err"],[135,16,135,14],[135,18,135,16],[136,6,136,4,"console"],[136,13,136,11],[136,14,136,12,"error"],[136,19,136,17],[136,20,136,18],[136,48,136,46],[136,50,136,48,"err"],[136,53,136,51],[136,54,136,52],[137,6,137,4],[137,13,137,11],[137,15,137,13],[138,4,138,2],[139,2,139,0],[141,2,141,0],[142,2,142,0],[142,6,142,4,"cachedEurRate"],[142,19,142,61],[142,22,142,64],[142,26,142,68],[143,2,143,0],[143,8,143,6,"RATE_CACHE_MS"],[143,21,143,19],[143,24,143,22],[143,26,143,24],[143,29,143,27],[143,31,143,29],[143,34,143,32],[143,38,143,36],[143,39,143,37],[143,40,143,38],[145,2,145,7],[145,17,145,22,"getUsdToEurRate"],[145,32,145,37,"getUsdToEurRate"],[145,33,145,37],[145,35,145,57],[146,4,146,2],[146,8,147,4,"cachedEurRate"],[146,21,147,17],[146,25,148,4,"Date"],[146,29,148,8],[146,30,148,9,"now"],[146,33,148,12],[146,34,148,13],[146,35,148,14],[146,38,148,17,"cachedEurRate"],[146,51,148,30],[146,52,148,31,"timestamp"],[146,61,148,40],[146,64,148,43,"RATE_CACHE_MS"],[146,77,148,56],[146,79,149,4],[147,6,150,4],[147,13,150,11,"cachedEurRate"],[147,26,150,24],[147,27,150,25,"rate"],[147,31,150,29],[148,4,151,2],[149,4,153,2],[149,8,153,6],[150,6,154,4],[150,12,154,10,"response"],[150,20,154,18],[150,23,154,21],[150,29,154,27,"fetch"],[150,34,154,32],[150,35,155,6],[150,83,156,4],[150,84,156,5],[151,6,157,4],[151,12,157,10,"data"],[151,16,157,14],[151,19,157,17],[151,25,157,23,"response"],[151,33,157,31],[151,34,157,32,"json"],[151,38,157,36],[151,39,157,37],[151,40,157,38],[152,6,158,4],[152,12,158,10,"rate"],[152,16,158,14],[152,19,158,17,"data"],[152,23,158,21],[152,24,158,22,"rates"],[152,29,158,27],[152,31,158,29,"EUR"],[152,34,158,32],[152,38,158,36],[152,42,158,40],[153,6,159,4,"cachedEurRate"],[153,19,159,17],[153,22,159,20],[154,8,159,22,"rate"],[154,12,159,26],[155,8,159,28,"timestamp"],[155,17,159,37],[155,19,159,39,"Date"],[155,23,159,43],[155,24,159,44,"now"],[155,27,159,47],[155,28,159,48],[156,6,159,50],[156,7,159,51],[157,6,160,4],[157,13,160,11,"rate"],[157,17,160,15],[158,4,161,2],[158,5,161,3],[158,6,161,4],[158,12,161,10],[159,6,162,4],[159,13,162,11,"cachedEurRate"],[159,26,162,24],[159,28,162,26,"rate"],[159,32,162,30],[159,36,162,34],[159,40,162,38],[159,41,162,39],[159,42,162,40],[160,4,163,2],[161,2,164,0],[163,2,166,0],[164,0,166,0],[164,3]],"functionMap":{"names":["<global>","getBalancesViaBackend","rpcCall","getSolBalance","getQuantumBalance","getAllTokenAccounts","getUsdToEurRate"],"mappings":"AAA;OCyB;CDa;AEE;CFmC;OGG;CHQ;OIU;CJyB;OKG;CLc;OMM;CNmB"},"hasCjsExports":false},"type":"js/module"}]}