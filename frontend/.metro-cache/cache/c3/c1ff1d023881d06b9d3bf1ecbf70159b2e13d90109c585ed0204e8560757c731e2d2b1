{"dependencies":[{"name":"../../accounts/utils/parseAccount.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":69,"index":69}}],"key":"/2Bvi5qErxbS6yBB5FzUPODHkYU=","exportNames":["*"],"imports":1}},{"name":"../../errors/account.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":70},"end":{"line":2,"column":64,"index":134}}],"key":"K61ywxBVZ9paXlRCxRBVdR8Z3Zk=","exportNames":["*"],"imports":1}},{"name":"../../utils/typedData.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":135},"end":{"line":3,"column":107,"index":242}}],"key":"qDEgbddcDauVa7tjUbYcrlmYb70=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.signTypedData = signTypedData;\n  var _accountsUtilsParseAccountJs = require(_dependencyMap[0], \"../../accounts/utils/parseAccount.js\");\n  var _errorsAccountJs = require(_dependencyMap[1], \"../../errors/account.js\");\n  var _utilsTypedDataJs = require(_dependencyMap[2], \"../../utils/typedData.js\");\n  /**\n   * Signs typed data and calculates an Ethereum-specific signature in [https://eips.ethereum.org/EIPS/eip-712](https://eips.ethereum.org/EIPS/eip-712): `sign(keccak256(\"\\x19\\x01\" ‖ domainSeparator ‖ hashStruct(message)))`\n   *\n   * - Docs: https://viem.sh/docs/actions/wallet/signTypedData\n   * - JSON-RPC Methods:\n   *   - JSON-RPC Accounts: [`eth_signTypedData_v4`](https://docs.metamask.io/guide/signing-data#signtypeddata-v4)\n   *   - Local Accounts: Signs locally. No JSON-RPC request.\n   *\n   * @param client - Client to use\n   * @param parameters - {@link SignTypedDataParameters}\n   * @returns The signed data. {@link SignTypedDataReturnType}\n   *\n   * @example\n   * import { createWalletClient, custom } from 'viem'\n   * import { mainnet } from 'viem/chains'\n   * import { signTypedData } from 'viem/wallet'\n   *\n   * const client = createWalletClient({\n   *   chain: mainnet,\n   *   transport: custom(window.ethereum),\n   * })\n   * const signature = await signTypedData(client, {\n   *   account: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n   *   domain: {\n   *     name: 'Ether Mail',\n   *     version: '1',\n   *     chainId: 1,\n   *     verifyingContract: '0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC',\n   *   },\n   *   types: {\n   *     Person: [\n   *       { name: 'name', type: 'string' },\n   *       { name: 'wallet', type: 'address' },\n   *     ],\n   *     Mail: [\n   *       { name: 'from', type: 'Person' },\n   *       { name: 'to', type: 'Person' },\n   *       { name: 'contents', type: 'string' },\n   *     ],\n   *   },\n   *   primaryType: 'Mail',\n   *   message: {\n   *     from: {\n   *       name: 'Cow',\n   *       wallet: '0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826',\n   *     },\n   *     to: {\n   *       name: 'Bob',\n   *       wallet: '0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB',\n   *     },\n   *     contents: 'Hello, Bob!',\n   *   },\n   * })\n   *\n   * @example\n   * // Account Hoisting\n   * import { createWalletClient, http } from 'viem'\n   * import { privateKeyToAccount } from 'viem/accounts'\n   * import { mainnet } from 'viem/chains'\n   * import { signTypedData } from 'viem/wallet'\n   *\n   * const client = createWalletClient({\n   *   account: privateKeyToAccount('0x…'),\n   *   chain: mainnet,\n   *   transport: http(),\n   * })\n   * const signature = await signTypedData(client, {\n   *   domain: {\n   *     name: 'Ether Mail',\n   *     version: '1',\n   *     chainId: 1,\n   *     verifyingContract: '0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC',\n   *   },\n   *   types: {\n   *     Person: [\n   *       { name: 'name', type: 'string' },\n   *       { name: 'wallet', type: 'address' },\n   *     ],\n   *     Mail: [\n   *       { name: 'from', type: 'Person' },\n   *       { name: 'to', type: 'Person' },\n   *       { name: 'contents', type: 'string' },\n   *     ],\n   *   },\n   *   primaryType: 'Mail',\n   *   message: {\n   *     from: {\n   *       name: 'Cow',\n   *       wallet: '0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826',\n   *     },\n   *     to: {\n   *       name: 'Bob',\n   *       wallet: '0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB',\n   *     },\n   *     contents: 'Hello, Bob!',\n   *   },\n   * })\n   */\n  async function signTypedData(client, parameters) {\n    const {\n      account: account_ = client.account,\n      domain,\n      message,\n      primaryType\n    } = parameters;\n    if (!account_) throw new _errorsAccountJs.AccountNotFoundError({\n      docsPath: '/docs/actions/wallet/signTypedData'\n    });\n    const account = (0, _accountsUtilsParseAccountJs.parseAccount)(account_);\n    const types = {\n      EIP712Domain: (0, _utilsTypedDataJs.getTypesForEIP712Domain)({\n        domain\n      }),\n      ...parameters.types\n    };\n    // Need to do a runtime validation check on addresses, byte ranges, integer ranges, etc\n    // as we can't statically check this with TypeScript.\n    (0, _utilsTypedDataJs.validateTypedData)({\n      domain,\n      message,\n      primaryType,\n      types\n    });\n    if (account.signTypedData) return account.signTypedData({\n      domain,\n      message,\n      primaryType,\n      types\n    });\n    const typedData = (0, _utilsTypedDataJs.serializeTypedData)({\n      domain,\n      message,\n      primaryType,\n      types\n    });\n    return client.request({\n      method: 'eth_signTypedData_v4',\n      params: [account.address, typedData]\n    }, {\n      retryCount: 0\n    });\n  }\n});","lineCount":153,"map":[[7,2,102,0,"exports"],[7,9,102,0],[7,10,102,0,"signTypedData"],[7,23,102,0],[7,26,102,0,"signTypedData"],[7,39,102,0],[8,2,1,0],[8,6,1,0,"_accountsUtilsParseAccountJs"],[8,34,1,0],[8,37,1,0,"require"],[8,44,1,0],[8,45,1,0,"_dependencyMap"],[8,59,1,0],[9,2,2,0],[9,6,2,0,"_errorsAccountJs"],[9,22,2,0],[9,25,2,0,"require"],[9,32,2,0],[9,33,2,0,"_dependencyMap"],[9,47,2,0],[10,2,3,0],[10,6,3,0,"_utilsTypedDataJs"],[10,23,3,0],[10,26,3,0,"require"],[10,33,3,0],[10,34,3,0,"_dependencyMap"],[10,48,3,0],[11,2,4,0],[12,0,5,0],[13,0,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[17,0,10,0],[18,0,11,0],[19,0,12,0],[20,0,13,0],[21,0,14,0],[22,0,15,0],[23,0,16,0],[24,0,17,0],[25,0,18,0],[26,0,19,0],[27,0,20,0],[28,0,21,0],[29,0,22,0],[30,0,23,0],[31,0,24,0],[32,0,25,0],[33,0,26,0],[34,0,27,0],[35,0,28,0],[36,0,29,0],[37,0,30,0],[38,0,31,0],[39,0,32,0],[40,0,33,0],[41,0,34,0],[42,0,35,0],[43,0,36,0],[44,0,37,0],[45,0,38,0],[46,0,39,0],[47,0,40,0],[48,0,41,0],[49,0,42,0],[50,0,43,0],[51,0,44,0],[52,0,45,0],[53,0,46,0],[54,0,47,0],[55,0,48,0],[56,0,49,0],[57,0,50,0],[58,0,51,0],[59,0,52,0],[60,0,53,0],[61,0,54,0],[62,0,55,0],[63,0,56,0],[64,0,57,0],[65,0,58,0],[66,0,59,0],[67,0,60,0],[68,0,61,0],[69,0,62,0],[70,0,63,0],[71,0,64,0],[72,0,65,0],[73,0,66,0],[74,0,67,0],[75,0,68,0],[76,0,69,0],[77,0,70,0],[78,0,71,0],[79,0,72,0],[80,0,73,0],[81,0,74,0],[82,0,75,0],[83,0,76,0],[84,0,77,0],[85,0,78,0],[86,0,79,0],[87,0,80,0],[88,0,81,0],[89,0,82,0],[90,0,83,0],[91,0,84,0],[92,0,85,0],[93,0,86,0],[94,0,87,0],[95,0,88,0],[96,0,89,0],[97,0,90,0],[98,0,91,0],[99,0,92,0],[100,0,93,0],[101,0,94,0],[102,0,95,0],[103,0,96,0],[104,0,97,0],[105,0,98,0],[106,0,99,0],[107,0,100,0],[108,0,101,0],[109,2,102,7],[109,17,102,22,"signTypedData"],[109,30,102,35,"signTypedData"],[109,31,102,36,"client"],[109,37,102,42],[109,39,102,44,"parameters"],[109,49,102,54],[109,51,102,56],[110,4,103,4],[110,10,103,10],[111,6,103,12,"account"],[111,13,103,19],[111,15,103,21,"account_"],[111,23,103,29],[111,26,103,32,"client"],[111,32,103,38],[111,33,103,39,"account"],[111,40,103,46],[112,6,103,48,"domain"],[112,12,103,54],[113,6,103,56,"message"],[113,13,103,63],[114,6,103,65,"primaryType"],[115,4,103,78],[115,5,103,79],[115,8,103,82,"parameters"],[115,18,103,92],[116,4,104,4],[116,8,104,8],[116,9,104,9,"account_"],[116,17,104,17],[116,19,105,8],[116,25,105,14],[116,29,105,18,"AccountNotFoundError"],[116,45,105,38],[116,46,105,38,"AccountNotFoundError"],[116,66,105,38],[116,67,105,39],[117,6,106,12,"docsPath"],[117,14,106,20],[117,16,106,22],[118,4,107,8],[118,5,107,9],[118,6,107,10],[119,4,108,4],[119,10,108,10,"account"],[119,17,108,17],[119,20,108,20],[119,24,108,20,"parseAccount"],[119,52,108,32],[119,53,108,32,"parseAccount"],[119,65,108,32],[119,67,108,33,"account_"],[119,75,108,41],[119,76,108,42],[120,4,109,4],[120,10,109,10,"types"],[120,15,109,15],[120,18,109,18],[121,6,110,8,"EIP712Domain"],[121,18,110,20],[121,20,110,22],[121,24,110,22,"getTypesForEIP712Domain"],[121,41,110,45],[121,42,110,45,"getTypesForEIP712Domain"],[121,65,110,45],[121,67,110,46],[122,8,110,48,"domain"],[123,6,110,55],[123,7,110,56],[123,8,110,57],[124,6,111,8],[124,9,111,11,"parameters"],[124,19,111,21],[124,20,111,22,"types"],[125,4,112,4],[125,5,112,5],[126,4,113,4],[127,4,114,4],[128,4,115,4],[128,8,115,4,"validateTypedData"],[128,25,115,21],[128,26,115,21,"validateTypedData"],[128,43,115,21],[128,45,115,22],[129,6,115,24,"domain"],[129,12,115,30],[130,6,115,32,"message"],[130,13,115,39],[131,6,115,41,"primaryType"],[131,17,115,52],[132,6,115,54,"types"],[133,4,115,60],[133,5,115,61],[133,6,115,62],[134,4,116,4],[134,8,116,8,"account"],[134,15,116,15],[134,16,116,16,"signTypedData"],[134,29,116,29],[134,31,117,8],[134,38,117,15,"account"],[134,45,117,22],[134,46,117,23,"signTypedData"],[134,59,117,36],[134,60,117,37],[135,6,117,39,"domain"],[135,12,117,45],[136,6,117,47,"message"],[136,13,117,54],[137,6,117,56,"primaryType"],[137,17,117,67],[138,6,117,69,"types"],[139,4,117,75],[139,5,117,76],[139,6,117,77],[140,4,118,4],[140,10,118,10,"typedData"],[140,19,118,19],[140,22,118,22],[140,26,118,22,"serializeTypedData"],[140,43,118,40],[140,44,118,40,"serializeTypedData"],[140,62,118,40],[140,64,118,41],[141,6,118,43,"domain"],[141,12,118,49],[142,6,118,51,"message"],[142,13,118,58],[143,6,118,60,"primaryType"],[143,17,118,71],[144,6,118,73,"types"],[145,4,118,79],[145,5,118,80],[145,6,118,81],[146,4,119,4],[146,11,119,11,"client"],[146,17,119,17],[146,18,119,18,"request"],[146,25,119,25],[146,26,119,26],[147,6,120,8,"method"],[147,12,120,14],[147,14,120,16],[147,36,120,38],[148,6,121,8,"params"],[148,12,121,14],[148,14,121,16],[148,15,121,17,"account"],[148,22,121,24],[148,23,121,25,"address"],[148,30,121,32],[148,32,121,34,"typedData"],[148,41,121,43],[149,4,122,4],[149,5,122,5],[149,7,122,7],[150,6,122,9,"retryCount"],[150,16,122,19],[150,18,122,21],[151,4,122,23],[151,5,122,24],[151,6,122,25],[152,2,123,0],[153,0,123,1],[153,3]],"functionMap":{"names":["<global>","signTypedData"],"mappings":"AAA;OCqG;CDqB"},"hasCjsExports":false},"type":"js/module"}]}