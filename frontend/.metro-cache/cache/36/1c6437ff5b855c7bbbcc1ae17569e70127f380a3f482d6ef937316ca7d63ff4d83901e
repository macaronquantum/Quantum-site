{"dependencies":[{"name":"../Subscriber","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":16,"column":19,"index":681},"end":{"line":16,"column":43,"index":705}}],"key":"Srlwi+5aBm0xpxoSOsmTzEtagCw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var __extends = this && this.__extends || function () {\n    var extendStatics = function (d, b) {\n      extendStatics = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n      } || function (d, b) {\n        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n      };\n      return extendStatics(d, b);\n    };\n    return function (d, b) {\n      extendStatics(d, b);\n      function __() {\n        this.constructor = d;\n      }\n      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n  }();\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  var Subscriber_1 = require(_dependencyMap[0], \"../Subscriber\");\n  function refCount() {\n    return function refCountOperatorFunction(source) {\n      return source.lift(new RefCountOperator(source));\n    };\n  }\n  exports.refCount = refCount;\n  var RefCountOperator = function () {\n    function RefCountOperator(connectable) {\n      this.connectable = connectable;\n    }\n    RefCountOperator.prototype.call = function (subscriber, source) {\n      var connectable = this.connectable;\n      connectable._refCount++;\n      var refCounter = new RefCountSubscriber(subscriber, connectable);\n      var subscription = source.subscribe(refCounter);\n      if (!refCounter.closed) {\n        refCounter.connection = connectable.connect();\n      }\n      return subscription;\n    };\n    return RefCountOperator;\n  }();\n  var RefCountSubscriber = function (_super) {\n    __extends(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n      var _this = _super.call(this, destination) || this;\n      _this.connectable = connectable;\n      return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n      var connectable = this.connectable;\n      if (!connectable) {\n        this.connection = null;\n        return;\n      }\n      this.connectable = null;\n      var refCount = connectable._refCount;\n      if (refCount <= 0) {\n        this.connection = null;\n        return;\n      }\n      connectable._refCount = refCount - 1;\n      if (refCount > 1) {\n        this.connection = null;\n        return;\n      }\n      var connection = this.connection;\n      var sharedConnection = connectable._connection;\n      this.connection = null;\n      if (sharedConnection && (!connection || sharedConnection === connection)) {\n        sharedConnection.unsubscribe();\n      }\n    };\n    return RefCountSubscriber;\n  }(Subscriber_1.Subscriber);\n});","lineCount":82,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[4,6,2,4,"__extends"],[4,15,2,13],[4,18,2,17],[4,22,2,21],[4,26,2,25],[4,30,2,29],[4,31,2,30,"__extends"],[4,40,2,39],[4,44,2,45],[4,56,2,57],[5,4,3,4],[5,8,3,8,"extendStatics"],[5,21,3,21],[5,24,3,24],[5,33,3,24,"extendStatics"],[5,34,3,34,"d"],[5,35,3,35],[5,37,3,37,"b"],[5,38,3,38],[5,40,3,40],[6,6,4,8,"extendStatics"],[6,19,4,21],[6,22,4,24,"Object"],[6,28,4,30],[6,29,4,31,"setPrototypeOf"],[6,43,4,45],[6,47,5,13],[7,8,5,15,"__proto__"],[7,17,5,24],[7,19,5,26],[8,6,5,29],[8,7,5,30],[8,19,5,42,"Array"],[8,24,5,47],[8,28,5,51],[8,38,5,61,"d"],[8,39,5,62],[8,41,5,64,"b"],[8,42,5,65],[8,44,5,67],[9,8,5,69,"d"],[9,9,5,70],[9,10,5,71,"__proto__"],[9,19,5,80],[9,22,5,83,"b"],[9,23,5,84],[10,6,5,86],[10,7,5,88],[10,11,6,12],[10,21,6,22,"d"],[10,22,6,23],[10,24,6,25,"b"],[10,25,6,26],[10,27,6,28],[11,8,6,30],[11,13,6,35],[11,17,6,39,"p"],[11,18,6,40],[11,22,6,44,"b"],[11,23,6,45],[11,25,6,47],[11,29,6,51,"b"],[11,30,6,52],[11,31,6,53,"hasOwnProperty"],[11,45,6,67],[11,46,6,68,"p"],[11,47,6,69],[11,48,6,70],[11,50,6,72,"d"],[11,51,6,73],[11,52,6,74,"p"],[11,53,6,75],[11,54,6,76],[11,57,6,79,"b"],[11,58,6,80],[11,59,6,81,"p"],[11,60,6,82],[11,61,6,83],[12,6,6,85],[12,7,6,86],[13,6,7,8],[13,13,7,15,"extendStatics"],[13,26,7,28],[13,27,7,29,"d"],[13,28,7,30],[13,30,7,32,"b"],[13,31,7,33],[13,32,7,34],[14,4,8,4],[14,5,8,5],[15,4,9,4],[15,11,9,11],[15,21,9,21,"d"],[15,22,9,22],[15,24,9,24,"b"],[15,25,9,25],[15,27,9,27],[16,6,10,8,"extendStatics"],[16,19,10,21],[16,20,10,22,"d"],[16,21,10,23],[16,23,10,25,"b"],[16,24,10,26],[16,25,10,27],[17,6,11,8],[17,15,11,17,"__"],[17,17,11,19,"__"],[17,18,11,19],[17,20,11,22],[18,8,11,24],[18,12,11,28],[18,13,11,29,"constructor"],[18,24,11,40],[18,27,11,43,"d"],[18,28,11,44],[19,6,11,46],[20,6,12,8,"d"],[20,7,12,9],[20,8,12,10,"prototype"],[20,17,12,19],[20,20,12,22,"b"],[20,21,12,23],[20,26,12,28],[20,30,12,32],[20,33,12,35,"Object"],[20,39,12,41],[20,40,12,42,"create"],[20,46,12,48],[20,47,12,49,"b"],[20,48,12,50],[20,49,12,51],[20,53,12,55,"__"],[20,55,12,57],[20,56,12,58,"prototype"],[20,65,12,67],[20,68,12,70,"b"],[20,69,12,71],[20,70,12,72,"prototype"],[20,79,12,81],[20,81,12,83],[20,85,12,87,"__"],[20,87,12,89],[20,88,12,90],[20,89,12,91],[20,90,12,92],[21,4,13,4],[21,5,13,5],[22,2,14,0],[22,3,14,1],[22,4,14,3],[22,5,14,4],[23,2,15,0,"Object"],[23,8,15,6],[23,9,15,7,"defineProperty"],[23,23,15,21],[23,24,15,22,"exports"],[23,31,15,29],[23,33,15,31],[23,45,15,43],[23,47,15,45],[24,4,15,47,"value"],[24,9,15,52],[24,11,15,54],[25,2,15,59],[25,3,15,60],[25,4,15,61],[26,2,16,0],[26,6,16,4,"Subscriber_1"],[26,18,16,16],[26,21,16,19,"require"],[26,28,16,26],[26,29,16,26,"_dependencyMap"],[26,43,16,26],[26,63,16,42],[26,64,16,43],[27,2,17,0],[27,11,17,9,"refCount"],[27,19,17,17,"refCount"],[27,20,17,17],[27,22,17,20],[28,4,18,4],[28,11,18,11],[28,20,18,20,"refCountOperatorFunction"],[28,44,18,44,"refCountOperatorFunction"],[28,45,18,45,"source"],[28,51,18,51],[28,53,18,53],[29,6,19,8],[29,13,19,15,"source"],[29,19,19,21],[29,20,19,22,"lift"],[29,24,19,26],[29,25,19,27],[29,29,19,31,"RefCountOperator"],[29,45,19,47],[29,46,19,48,"source"],[29,52,19,54],[29,53,19,55],[29,54,19,56],[30,4,20,4],[30,5,20,5],[31,2,21,0],[32,2,22,0,"exports"],[32,9,22,7],[32,10,22,8,"refCount"],[32,18,22,16],[32,21,22,19,"refCount"],[32,29,22,27],[33,2,23,0],[33,6,23,4,"RefCountOperator"],[33,22,23,20],[33,25,23,24],[33,37,23,36],[34,4,24,4],[34,13,24,13,"RefCountOperator"],[34,29,24,29,"RefCountOperator"],[34,30,24,30,"connectable"],[34,41,24,41],[34,43,24,43],[35,6,25,8],[35,10,25,12],[35,11,25,13,"connectable"],[35,22,25,24],[35,25,25,27,"connectable"],[35,36,25,38],[36,4,26,4],[37,4,27,4,"RefCountOperator"],[37,20,27,20],[37,21,27,21,"prototype"],[37,30,27,30],[37,31,27,31,"call"],[37,35,27,35],[37,38,27,38],[37,48,27,48,"subscriber"],[37,58,27,58],[37,60,27,60,"source"],[37,66,27,66],[37,68,27,68],[38,6,28,8],[38,10,28,12,"connectable"],[38,21,28,23],[38,24,28,26],[38,28,28,30],[38,29,28,31,"connectable"],[38,40,28,42],[39,6,29,8,"connectable"],[39,17,29,19],[39,18,29,20,"_refCount"],[39,27,29,29],[39,29,29,31],[40,6,30,8],[40,10,30,12,"refCounter"],[40,20,30,22],[40,23,30,25],[40,27,30,29,"RefCountSubscriber"],[40,45,30,47],[40,46,30,48,"subscriber"],[40,56,30,58],[40,58,30,60,"connectable"],[40,69,30,71],[40,70,30,72],[41,6,31,8],[41,10,31,12,"subscription"],[41,22,31,24],[41,25,31,27,"source"],[41,31,31,33],[41,32,31,34,"subscribe"],[41,41,31,43],[41,42,31,44,"refCounter"],[41,52,31,54],[41,53,31,55],[42,6,32,8],[42,10,32,12],[42,11,32,13,"refCounter"],[42,21,32,23],[42,22,32,24,"closed"],[42,28,32,30],[42,30,32,32],[43,8,33,12,"refCounter"],[43,18,33,22],[43,19,33,23,"connection"],[43,29,33,33],[43,32,33,36,"connectable"],[43,43,33,47],[43,44,33,48,"connect"],[43,51,33,55],[43,52,33,56],[43,53,33,57],[44,6,34,8],[45,6,35,8],[45,13,35,15,"subscription"],[45,25,35,27],[46,4,36,4],[46,5,36,5],[47,4,37,4],[47,11,37,11,"RefCountOperator"],[47,27,37,27],[48,2,38,0],[48,3,38,1],[48,4,38,2],[48,5,38,4],[49,2,39,0],[49,6,39,4,"RefCountSubscriber"],[49,24,39,22],[49,27,39,26],[49,37,39,36,"_super"],[49,43,39,42],[49,45,39,44],[50,4,40,4,"__extends"],[50,13,40,13],[50,14,40,14,"RefCountSubscriber"],[50,32,40,32],[50,34,40,34,"_super"],[50,40,40,40],[50,41,40,41],[51,4,41,4],[51,13,41,13,"RefCountSubscriber"],[51,31,41,31,"RefCountSubscriber"],[51,32,41,32,"destination"],[51,43,41,43],[51,45,41,45,"connectable"],[51,56,41,56],[51,58,41,58],[52,6,42,8],[52,10,42,12,"_this"],[52,15,42,17],[52,18,42,20,"_super"],[52,24,42,26],[52,25,42,27,"call"],[52,29,42,31],[52,30,42,32],[52,34,42,36],[52,36,42,38,"destination"],[52,47,42,49],[52,48,42,50],[52,52,42,54],[52,56,42,58],[53,6,43,8,"_this"],[53,11,43,13],[53,12,43,14,"connectable"],[53,23,43,25],[53,26,43,28,"connectable"],[53,37,43,39],[54,6,44,8],[54,13,44,15,"_this"],[54,18,44,20],[55,4,45,4],[56,4,46,4,"RefCountSubscriber"],[56,22,46,22],[56,23,46,23,"prototype"],[56,32,46,32],[56,33,46,33,"_unsubscribe"],[56,45,46,45],[56,48,46,48],[56,60,46,60],[57,6,47,8],[57,10,47,12,"connectable"],[57,21,47,23],[57,24,47,26],[57,28,47,30],[57,29,47,31,"connectable"],[57,40,47,42],[58,6,48,8],[58,10,48,12],[58,11,48,13,"connectable"],[58,22,48,24],[58,24,48,26],[59,8,49,12],[59,12,49,16],[59,13,49,17,"connection"],[59,23,49,27],[59,26,49,30],[59,30,49,34],[60,8,50,12],[61,6,51,8],[62,6,52,8],[62,10,52,12],[62,11,52,13,"connectable"],[62,22,52,24],[62,25,52,27],[62,29,52,31],[63,6,53,8],[63,10,53,12,"refCount"],[63,18,53,20],[63,21,53,23,"connectable"],[63,32,53,34],[63,33,53,35,"_refCount"],[63,42,53,44],[64,6,54,8],[64,10,54,12,"refCount"],[64,18,54,20],[64,22,54,24],[64,23,54,25],[64,25,54,27],[65,8,55,12],[65,12,55,16],[65,13,55,17,"connection"],[65,23,55,27],[65,26,55,30],[65,30,55,34],[66,8,56,12],[67,6,57,8],[68,6,58,8,"connectable"],[68,17,58,19],[68,18,58,20,"_refCount"],[68,27,58,29],[68,30,58,32,"refCount"],[68,38,58,40],[68,41,58,43],[68,42,58,44],[69,6,59,8],[69,10,59,12,"refCount"],[69,18,59,20],[69,21,59,23],[69,22,59,24],[69,24,59,26],[70,8,60,12],[70,12,60,16],[70,13,60,17,"connection"],[70,23,60,27],[70,26,60,30],[70,30,60,34],[71,8,61,12],[72,6,62,8],[73,6,63,8],[73,10,63,12,"connection"],[73,20,63,22],[73,23,63,25],[73,27,63,29],[73,28,63,30,"connection"],[73,38,63,40],[74,6,64,8],[74,10,64,12,"sharedConnection"],[74,26,64,28],[74,29,64,31,"connectable"],[74,40,64,42],[74,41,64,43,"_connection"],[74,52,64,54],[75,6,65,8],[75,10,65,12],[75,11,65,13,"connection"],[75,21,65,23],[75,24,65,26],[75,28,65,30],[76,6,66,8],[76,10,66,12,"sharedConnection"],[76,26,66,28],[76,31,66,33],[76,32,66,34,"connection"],[76,42,66,44],[76,46,66,48,"sharedConnection"],[76,62,66,64],[76,67,66,69,"connection"],[76,77,66,79],[76,78,66,80],[76,80,66,82],[77,8,67,12,"sharedConnection"],[77,24,67,28],[77,25,67,29,"unsubscribe"],[77,36,67,40],[77,37,67,41],[77,38,67,42],[78,6,68,8],[79,4,69,4],[79,5,69,5],[80,4,70,4],[80,11,70,11,"RefCountSubscriber"],[80,29,70,29],[81,2,71,0],[81,3,71,1],[81,4,71,2,"Subscriber_1"],[81,16,71,14],[81,17,71,15,"Subscriber"],[81,27,71,25],[81,28,71,27],[82,0,71,28],[82,3]],"functionMap":{"names":["<global>","<anonymous>","extendStatics","__","refCount","refCountOperatorFunction","RefCountOperator","RefCountOperator.prototype.call","RefCountSubscriber","RefCountSubscriber.prototype._unsubscribe"],"mappings":"AAA;6CCC;wBCC;mDDE,oCC;YDC,0EC;KDE;QEG,uCF;CDG;AIG;WCC;KDE;CJC;wBCE;IKC;KLE;sCMC;KNS;CDE;0BCC;IOE;KPI;gDQC;KRuB;CDE"},"hasCjsExports":true},"type":"js/module"}]}