{"dependencies":[{"name":"./util","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":15,"index":172},"end":{"line":4,"column":32,"index":189}}],"key":"hA8WsniBZrUJ/dmBZgrNdZcEmJ8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.hasMixin = exports.registerMixins = exports.getMixinsForClass = void 0;\n  const util_1 = require(_dependencyMap[0], \"./util\");\n  // Keeps track of constituent classes for every mixin class created by ts-mixer.\n  const mixins = new WeakMap();\n  const getMixinsForClass = clazz => mixins.get(clazz);\n  exports.getMixinsForClass = getMixinsForClass;\n  const registerMixins = (mixedClass, constituents) => mixins.set(mixedClass, constituents);\n  exports.registerMixins = registerMixins;\n  const hasMixin = (instance, mixin) => {\n    if (instance instanceof mixin) return true;\n    const constructor = instance.constructor;\n    const visited = new Set();\n    let frontier = new Set();\n    frontier.add(constructor);\n    while (frontier.size > 0) {\n      // check if the frontier has the mixin we're looking for.  if not, we can say we visited every item in the frontier\n      if (frontier.has(mixin)) return true;\n      frontier.forEach(item => visited.add(item));\n      // build a new frontier based on the associated mixin classes and prototype chains of each frontier item\n      const newFrontier = new Set();\n      frontier.forEach(item => {\n        var _a;\n        const itemConstituents = (_a = mixins.get(item)) !== null && _a !== void 0 ? _a : (0, util_1.protoChain)(item.prototype).map(proto => proto.constructor).filter(item => item !== null);\n        if (itemConstituents) itemConstituents.forEach(constituent => {\n          if (!visited.has(constituent) && !frontier.has(constituent)) newFrontier.add(constituent);\n        });\n      });\n      // we have a new frontier, now search again\n      frontier = newFrontier;\n    }\n    // if we get here, we couldn't find the mixin anywhere in the prototype chain or associated mixin classes\n    return false;\n  };\n  exports.hasMixin = hasMixin;\n});","lineCount":41,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"hasMixin"],[7,18,3,16],[7,21,3,19,"exports"],[7,28,3,26],[7,29,3,27,"registerMixins"],[7,43,3,41],[7,46,3,44,"exports"],[7,53,3,51],[7,54,3,52,"getMixinsForClass"],[7,71,3,69],[7,74,3,72],[7,79,3,77],[7,80,3,78],[8,2,4,0],[8,8,4,6,"util_1"],[8,14,4,12],[8,17,4,15,"require"],[8,24,4,22],[8,25,4,22,"_dependencyMap"],[8,39,4,22],[8,52,4,31],[8,53,4,32],[9,2,5,0],[10,2,6,0],[10,8,6,6,"mixins"],[10,14,6,12],[10,17,6,15],[10,21,6,19,"WeakMap"],[10,28,6,26],[10,29,6,27],[10,30,6,28],[11,2,7,0],[11,8,7,6,"getMixinsForClass"],[11,25,7,23],[11,28,7,27,"clazz"],[11,33,7,32],[11,37,7,37,"mixins"],[11,43,7,43],[11,44,7,44,"get"],[11,47,7,47],[11,48,7,48,"clazz"],[11,53,7,53],[11,54,7,54],[12,2,8,0,"exports"],[12,9,8,7],[12,10,8,8,"getMixinsForClass"],[12,27,8,25],[12,30,8,28,"getMixinsForClass"],[12,47,8,45],[13,2,9,0],[13,8,9,6,"registerMixins"],[13,22,9,20],[13,25,9,23,"registerMixins"],[13,26,9,24,"mixedClass"],[13,36,9,34],[13,38,9,36,"constituents"],[13,50,9,48],[13,55,9,53,"mixins"],[13,61,9,59],[13,62,9,60,"set"],[13,65,9,63],[13,66,9,64,"mixedClass"],[13,76,9,74],[13,78,9,76,"constituents"],[13,90,9,88],[13,91,9,89],[14,2,10,0,"exports"],[14,9,10,7],[14,10,10,8,"registerMixins"],[14,24,10,22],[14,27,10,25,"registerMixins"],[14,41,10,39],[15,2,11,0],[15,8,11,6,"hasMixin"],[15,16,11,14],[15,19,11,17,"hasMixin"],[15,20,11,18,"instance"],[15,28,11,26],[15,30,11,28,"mixin"],[15,35,11,33],[15,40,11,38],[16,4,12,4],[16,8,12,8,"instance"],[16,16,12,16],[16,28,12,28,"mixin"],[16,33,12,33],[16,35,13,8],[16,42,13,15],[16,46,13,19],[17,4,14,4],[17,10,14,10,"constructor"],[17,21,14,21],[17,24,14,24,"instance"],[17,32,14,32],[17,33,14,33,"constructor"],[17,44,14,44],[18,4,15,4],[18,10,15,10,"visited"],[18,17,15,17],[18,20,15,20],[18,24,15,24,"Set"],[18,27,15,27],[18,28,15,28],[18,29,15,29],[19,4,16,4],[19,8,16,8,"frontier"],[19,16,16,16],[19,19,16,19],[19,23,16,23,"Set"],[19,26,16,26],[19,27,16,27],[19,28,16,28],[20,4,17,4,"frontier"],[20,12,17,12],[20,13,17,13,"add"],[20,16,17,16],[20,17,17,17,"constructor"],[20,28,17,28],[20,29,17,29],[21,4,18,4],[21,11,18,11,"frontier"],[21,19,18,19],[21,20,18,20,"size"],[21,24,18,24],[21,27,18,27],[21,28,18,28],[21,30,18,30],[22,6,19,8],[23,6,20,8],[23,10,20,12,"frontier"],[23,18,20,20],[23,19,20,21,"has"],[23,22,20,24],[23,23,20,25,"mixin"],[23,28,20,30],[23,29,20,31],[23,31,21,12],[23,38,21,19],[23,42,21,23],[24,6,22,8,"frontier"],[24,14,22,16],[24,15,22,17,"forEach"],[24,22,22,24],[24,23,22,26,"item"],[24,27,22,30],[24,31,22,35,"visited"],[24,38,22,42],[24,39,22,43,"add"],[24,42,22,46],[24,43,22,47,"item"],[24,47,22,51],[24,48,22,52],[24,49,22,53],[25,6,23,8],[26,6,24,8],[26,12,24,14,"newFrontier"],[26,23,24,25],[26,26,24,28],[26,30,24,32,"Set"],[26,33,24,35],[26,34,24,36],[26,35,24,37],[27,6,25,8,"frontier"],[27,14,25,16],[27,15,25,17,"forEach"],[27,22,25,24],[27,23,25,26,"item"],[27,27,25,30],[27,31,25,35],[28,8,26,12],[28,12,26,16,"_a"],[28,14,26,18],[29,8,27,12],[29,14,27,18,"itemConstituents"],[29,30,27,34],[29,33,27,37],[29,34,27,38,"_a"],[29,36,27,40],[29,39,27,43,"mixins"],[29,45,27,49],[29,46,27,50,"get"],[29,49,27,53],[29,50,27,54,"item"],[29,54,27,58],[29,55,27,59],[29,61,27,65],[29,65,27,69],[29,69,27,73,"_a"],[29,71,27,75],[29,76,27,80],[29,81,27,85],[29,82,27,86],[29,85,27,89,"_a"],[29,87,27,91],[29,90,27,94],[29,91,27,95],[29,92,27,96],[29,94,27,98,"util_1"],[29,100,27,104],[29,101,27,105,"protoChain"],[29,111,27,115],[29,113,27,117,"item"],[29,117,27,121],[29,118,27,122,"prototype"],[29,127,27,131],[29,128,27,132],[29,129,28,17,"map"],[29,132,28,20],[29,133,28,22,"proto"],[29,138,28,27],[29,142,28,32,"proto"],[29,147,28,37],[29,148,28,38,"constructor"],[29,159,28,49],[29,160,28,50],[29,161,29,17,"filter"],[29,167,29,23],[29,168,29,25,"item"],[29,172,29,29],[29,176,29,34,"item"],[29,180,29,38],[29,185,29,43],[29,189,29,47],[29,190,29,48],[30,8,30,12],[30,12,30,16,"itemConstituents"],[30,28,30,32],[30,30,31,16,"itemConstituents"],[30,46,31,32],[30,47,31,33,"forEach"],[30,54,31,40],[30,55,31,42,"constituent"],[30,66,31,53],[30,70,31,58],[31,10,32,20],[31,14,32,24],[31,15,32,25,"visited"],[31,22,32,32],[31,23,32,33,"has"],[31,26,32,36],[31,27,32,37,"constituent"],[31,38,32,48],[31,39,32,49],[31,43,32,53],[31,44,32,54,"frontier"],[31,52,32,62],[31,53,32,63,"has"],[31,56,32,66],[31,57,32,67,"constituent"],[31,68,32,78],[31,69,32,79],[31,71,33,24,"newFrontier"],[31,82,33,35],[31,83,33,36,"add"],[31,86,33,39],[31,87,33,40,"constituent"],[31,98,33,51],[31,99,33,52],[32,8,34,16],[32,9,34,17],[32,10,34,18],[33,6,35,8],[33,7,35,9],[33,8,35,10],[34,6,36,8],[35,6,37,8,"frontier"],[35,14,37,16],[35,17,37,19,"newFrontier"],[35,28,37,30],[36,4,38,4],[37,4,39,4],[38,4,40,4],[38,11,40,11],[38,16,40,16],[39,2,41,0],[39,3,41,1],[40,2,42,0,"exports"],[40,9,42,7],[40,10,42,8,"hasMixin"],[40,18,42,16],[40,21,42,19,"hasMixin"],[40,29,42,27],[41,0,42,28],[41,3]],"functionMap":{"names":["<global>","getMixinsForClass","registerMixins","hasMixin","frontier.forEach$argument_0","map$argument_0","map.filter$argument_0","itemConstituents.forEach$argument_0"],"mappings":"AAA;0BCM,4BD;uBEE,kEF;iBGE;yBCW,2BD;yBCG;qBCG,4BD;wBEC,uBF;yCGE;iBHG;SDC;CHM"},"hasCjsExports":true},"type":"js/module"}]}