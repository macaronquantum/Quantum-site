{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.cleanupCache = exports.listenersCache = void 0;\n  exports.observe = observe;\n  exports.listenersCache = new Map();\n  exports.cleanupCache = new Map();\n  let callbackCount = 0;\n  function observe(observerId, callbacks, fn) {\n    const callbackId = ++callbackCount;\n    const getListeners = () => exports.listenersCache.get(observerId) || [];\n    const unsubscribe = () => {\n      const listeners = getListeners();\n      exports.listenersCache.set(observerId, listeners.filter(cb => cb.id !== callbackId));\n    };\n    const unwatch = () => {\n      const listeners = getListeners();\n      if (!listeners.some(cb => cb.id === callbackId)) return;\n      const cleanup = exports.cleanupCache.get(observerId);\n      if (listeners.length === 1 && cleanup) cleanup();\n      unsubscribe();\n    };\n    const listeners = getListeners();\n    exports.listenersCache.set(observerId, [...listeners, {\n      id: callbackId,\n      fns: callbacks\n    }]);\n    if (listeners && listeners.length > 0) return unwatch;\n    const emit = {};\n    for (const key in callbacks) {\n      emit[key] = (...args) => {\n        const listeners = getListeners();\n        if (listeners.length === 0) return;\n        for (const listener of listeners) listener.fns[key]?.(...args);\n      };\n    }\n    const cleanup = fn(emit);\n    if (typeof cleanup === 'function') exports.cleanupCache.set(observerId, cleanup);\n    return unwatch;\n  }\n});","lineCount":44,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"cleanupCache"],[7,22,3,20],[7,25,3,23,"exports"],[7,32,3,30],[7,33,3,31,"listenersCache"],[7,47,3,45],[7,50,3,48],[7,55,3,53],[7,56,3,54],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"observe"],[8,17,4,15],[8,20,4,18,"observe"],[8,27,4,25],[9,2,5,0,"exports"],[9,9,5,7],[9,10,5,8,"listenersCache"],[9,24,5,22],[9,27,5,25],[9,31,5,29,"Map"],[9,34,5,32],[9,35,5,33],[9,36,5,34],[10,2,6,0,"exports"],[10,9,6,7],[10,10,6,8,"cleanupCache"],[10,22,6,20],[10,25,6,23],[10,29,6,27,"Map"],[10,32,6,30],[10,33,6,31],[10,34,6,32],[11,2,7,0],[11,6,7,4,"callbackCount"],[11,19,7,17],[11,22,7,20],[11,23,7,21],[12,2,8,0],[12,11,8,9,"observe"],[12,18,8,16,"observe"],[12,19,8,17,"observerId"],[12,29,8,27],[12,31,8,29,"callbacks"],[12,40,8,38],[12,42,8,40,"fn"],[12,44,8,42],[12,46,8,44],[13,4,9,4],[13,10,9,10,"callbackId"],[13,20,9,20],[13,23,9,23],[13,25,9,25,"callbackCount"],[13,38,9,38],[14,4,10,4],[14,10,10,10,"getListeners"],[14,22,10,22],[14,25,10,25,"getListeners"],[14,26,10,25],[14,31,10,31,"exports"],[14,38,10,38],[14,39,10,39,"listenersCache"],[14,53,10,53],[14,54,10,54,"get"],[14,57,10,57],[14,58,10,58,"observerId"],[14,68,10,68],[14,69,10,69],[14,73,10,73],[14,75,10,75],[15,4,11,4],[15,10,11,10,"unsubscribe"],[15,21,11,21],[15,24,11,24,"unsubscribe"],[15,25,11,24],[15,30,11,30],[16,6,12,8],[16,12,12,14,"listeners"],[16,21,12,23],[16,24,12,26,"getListeners"],[16,36,12,38],[16,37,12,39],[16,38,12,40],[17,6,13,8,"exports"],[17,13,13,15],[17,14,13,16,"listenersCache"],[17,28,13,30],[17,29,13,31,"set"],[17,32,13,34],[17,33,13,35,"observerId"],[17,43,13,45],[17,45,13,47,"listeners"],[17,54,13,56],[17,55,13,57,"filter"],[17,61,13,63],[17,62,13,65,"cb"],[17,64,13,67],[17,68,13,72,"cb"],[17,70,13,74],[17,71,13,75,"id"],[17,73,13,77],[17,78,13,82,"callbackId"],[17,88,13,92],[17,89,13,93],[17,90,13,94],[18,4,14,4],[18,5,14,5],[19,4,15,4],[19,10,15,10,"unwatch"],[19,17,15,17],[19,20,15,20,"unwatch"],[19,21,15,20],[19,26,15,26],[20,6,16,8],[20,12,16,14,"listeners"],[20,21,16,23],[20,24,16,26,"getListeners"],[20,36,16,38],[20,37,16,39],[20,38,16,40],[21,6,17,8],[21,10,17,12],[21,11,17,13,"listeners"],[21,20,17,22],[21,21,17,23,"some"],[21,25,17,27],[21,26,17,29,"cb"],[21,28,17,31],[21,32,17,36,"cb"],[21,34,17,38],[21,35,17,39,"id"],[21,37,17,41],[21,42,17,46,"callbackId"],[21,52,17,56],[21,53,17,57],[21,55,18,12],[22,6,19,8],[22,12,19,14,"cleanup"],[22,19,19,21],[22,22,19,24,"exports"],[22,29,19,31],[22,30,19,32,"cleanupCache"],[22,42,19,44],[22,43,19,45,"get"],[22,46,19,48],[22,47,19,49,"observerId"],[22,57,19,59],[22,58,19,60],[23,6,20,8],[23,10,20,12,"listeners"],[23,19,20,21],[23,20,20,22,"length"],[23,26,20,28],[23,31,20,33],[23,32,20,34],[23,36,20,38,"cleanup"],[23,43,20,45],[23,45,21,12,"cleanup"],[23,52,21,19],[23,53,21,20],[23,54,21,21],[24,6,22,8,"unsubscribe"],[24,17,22,19],[24,18,22,20],[24,19,22,21],[25,4,23,4],[25,5,23,5],[26,4,24,4],[26,10,24,10,"listeners"],[26,19,24,19],[26,22,24,22,"getListeners"],[26,34,24,34],[26,35,24,35],[26,36,24,36],[27,4,25,4,"exports"],[27,11,25,11],[27,12,25,12,"listenersCache"],[27,26,25,26],[27,27,25,27,"set"],[27,30,25,30],[27,31,25,31,"observerId"],[27,41,25,41],[27,43,25,43],[27,44,26,8],[27,47,26,11,"listeners"],[27,56,26,20],[27,58,27,8],[28,6,27,10,"id"],[28,8,27,12],[28,10,27,14,"callbackId"],[28,20,27,24],[29,6,27,26,"fns"],[29,9,27,29],[29,11,27,31,"callbacks"],[30,4,27,41],[30,5,27,42],[30,6,28,5],[30,7,28,6],[31,4,29,4],[31,8,29,8,"listeners"],[31,17,29,17],[31,21,29,21,"listeners"],[31,30,29,30],[31,31,29,31,"length"],[31,37,29,37],[31,40,29,40],[31,41,29,41],[31,43,30,8],[31,50,30,15,"unwatch"],[31,57,30,22],[32,4,31,4],[32,10,31,10,"emit"],[32,14,31,14],[32,17,31,17],[32,18,31,18],[32,19,31,19],[33,4,32,4],[33,9,32,9],[33,15,32,15,"key"],[33,18,32,18],[33,22,32,22,"callbacks"],[33,31,32,31],[33,33,32,33],[34,6,33,8,"emit"],[34,10,33,12],[34,11,33,13,"key"],[34,14,33,16],[34,15,33,17],[34,18,33,21],[34,19,33,22],[34,22,33,25,"args"],[34,26,33,29],[34,31,33,34],[35,8,34,12],[35,14,34,18,"listeners"],[35,23,34,27],[35,26,34,30,"getListeners"],[35,38,34,42],[35,39,34,43],[35,40,34,44],[36,8,35,12],[36,12,35,16,"listeners"],[36,21,35,25],[36,22,35,26,"length"],[36,28,35,32],[36,33,35,37],[36,34,35,38],[36,36,36,16],[37,8,37,12],[37,13,37,17],[37,19,37,23,"listener"],[37,27,37,31],[37,31,37,35,"listeners"],[37,40,37,44],[37,42,38,16,"listener"],[37,50,38,24],[37,51,38,25,"fns"],[37,54,38,28],[37,55,38,29,"key"],[37,58,38,32],[37,59,38,33],[37,62,38,36],[37,65,38,39,"args"],[37,69,38,43],[37,70,38,44],[38,6,39,8],[38,7,39,10],[39,4,40,4],[40,4,41,4],[40,10,41,10,"cleanup"],[40,17,41,17],[40,20,41,20,"fn"],[40,22,41,22],[40,23,41,23,"emit"],[40,27,41,27],[40,28,41,28],[41,4,42,4],[41,8,42,8],[41,15,42,15,"cleanup"],[41,22,42,22],[41,27,42,27],[41,37,42,37],[41,39,43,8,"exports"],[41,46,43,15],[41,47,43,16,"cleanupCache"],[41,59,43,28],[41,60,43,29,"set"],[41,63,43,32],[41,64,43,33,"observerId"],[41,74,43,43],[41,76,43,45,"cleanup"],[41,83,43,52],[41,84,43,53],[42,4,44,4],[42,11,44,11,"unwatch"],[42,18,44,18],[43,2,45,0],[44,0,45,1],[44,3]],"functionMap":{"names":["<global>","observe","getListeners","unsubscribe","listeners.filter$argument_0","unwatch","listeners.some$argument_0","emit.key"],"mappings":"AAA;ACO;yBCE,kDD;wBEC;gECE,4BD;KFC;oBIC;4BCE,4BD;KJM;qBMU;SNM;CDM"},"hasCjsExports":true},"type":"js/module"}]}