{"dependencies":[{"name":"../../utils/data/pad.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"InxCefFmGnSZwPviBgpt9HhhTs8=","exportNames":["*"],"imports":1}},{"name":"../../utils/encoding/toBytes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":47},"end":{"line":2,"column":58,"index":105}}],"key":"coacpTiYwJTHrobL05PgAx0cZfc=","exportNames":["*"],"imports":1}},{"name":"../../utils/hash/sha256.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":106},"end":{"line":3,"column":52,"index":158}}],"key":"MRo9qL4+oKkbsoAOCLMEsa+QVh0=","exportNames":["*"],"imports":1}},{"name":"../constants/number.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":159},"end":{"line":4,"column":57,"index":216}}],"key":"YipcbaENM30OXVCb8uL8zbkIUSU=","exportNames":["*"],"imports":1}},{"name":"../errors/bytecode.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":217},"end":{"line":5,"column":152,"index":369}}],"key":"On5CZalah8zVIqflJ6gYMS5PH9M=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.hashBytecode = hashBytecode;\n  var _utilsDataPadJs = require(_dependencyMap[0], \"../../utils/data/pad.js\");\n  var _utilsEncodingToBytesJs = require(_dependencyMap[1], \"../../utils/encoding/toBytes.js\");\n  var _utilsHashSha256Js = require(_dependencyMap[2], \"../../utils/hash/sha256.js\");\n  var _constantsNumberJs = require(_dependencyMap[3], \"../constants/number.js\");\n  var _errorsBytecodeJs = require(_dependencyMap[4], \"../errors/bytecode.js\");\n  function hashBytecode(bytecode) {\n    const bytecodeBytes = (0, _utilsEncodingToBytesJs.toBytes)(bytecode);\n    if (bytecodeBytes.length % 32 !== 0) throw new _errorsBytecodeJs.BytecodeLengthMustBeDivisibleBy32Error({\n      givenLength: bytecodeBytes.length\n    });\n    if (bytecodeBytes.length > _constantsNumberJs.maxBytecodeSize) throw new _errorsBytecodeJs.BytecodeLengthExceedsMaxSizeError({\n      givenLength: bytecodeBytes.length,\n      maxBytecodeSize: _constantsNumberJs.maxBytecodeSize\n    });\n    const hashStr = (0, _utilsHashSha256Js.sha256)(bytecodeBytes);\n    const hash = (0, _utilsEncodingToBytesJs.toBytes)(hashStr);\n    // Note that the length of the bytecode\n    // should be provided in 32-byte words.\n    const bytecodeLengthInWords = bytecodeBytes.length / 32;\n    if (bytecodeLengthInWords % 2 === 0) {\n      throw new _errorsBytecodeJs.BytecodeLengthInWordsMustBeOddError({\n        givenLengthInWords: bytecodeLengthInWords\n      });\n    }\n    const bytecodeLength = (0, _utilsEncodingToBytesJs.toBytes)(bytecodeLengthInWords);\n    // The bytecode should always take the first 2 bytes of the bytecode hash,\n    // so we pad it from the left in case the length is smaller than 2 bytes.\n    const bytecodeLengthPadded = (0, _utilsDataPadJs.pad)(bytecodeLength, {\n      size: 2\n    });\n    const codeHashVersion = new Uint8Array([1, 0]);\n    hash.set(codeHashVersion, 0);\n    hash.set(bytecodeLengthPadded, 2);\n    return hash;\n  }\n});","lineCount":43,"map":[[7,2,6,0,"exports"],[7,9,6,0],[7,10,6,0,"hashBytecode"],[7,22,6,0],[7,25,6,0,"hashBytecode"],[7,37,6,0],[8,2,1,0],[8,6,1,0,"_utilsDataPadJs"],[8,21,1,0],[8,24,1,0,"require"],[8,31,1,0],[8,32,1,0,"_dependencyMap"],[8,46,1,0],[9,2,2,0],[9,6,2,0,"_utilsEncodingToBytesJs"],[9,29,2,0],[9,32,2,0,"require"],[9,39,2,0],[9,40,2,0,"_dependencyMap"],[9,54,2,0],[10,2,3,0],[10,6,3,0,"_utilsHashSha256Js"],[10,24,3,0],[10,27,3,0,"require"],[10,34,3,0],[10,35,3,0,"_dependencyMap"],[10,49,3,0],[11,2,4,0],[11,6,4,0,"_constantsNumberJs"],[11,24,4,0],[11,27,4,0,"require"],[11,34,4,0],[11,35,4,0,"_dependencyMap"],[11,49,4,0],[12,2,5,0],[12,6,5,0,"_errorsBytecodeJs"],[12,23,5,0],[12,26,5,0,"require"],[12,33,5,0],[12,34,5,0,"_dependencyMap"],[12,48,5,0],[13,2,6,7],[13,11,6,16,"hashBytecode"],[13,23,6,28,"hashBytecode"],[13,24,6,29,"bytecode"],[13,32,6,37],[13,34,6,39],[14,4,7,4],[14,10,7,10,"bytecodeBytes"],[14,23,7,23],[14,26,7,26],[14,30,7,26,"toBytes"],[14,53,7,33],[14,54,7,33,"toBytes"],[14,61,7,33],[14,63,7,34,"bytecode"],[14,71,7,42],[14,72,7,43],[15,4,8,4],[15,8,8,8,"bytecodeBytes"],[15,21,8,21],[15,22,8,22,"length"],[15,28,8,28],[15,31,8,31],[15,33,8,33],[15,38,8,38],[15,39,8,39],[15,41,9,8],[15,47,9,14],[15,51,9,18,"BytecodeLengthMustBeDivisibleBy32Error"],[15,68,9,56],[15,69,9,56,"BytecodeLengthMustBeDivisibleBy32Error"],[15,107,9,56],[15,108,9,57],[16,6,10,12,"givenLength"],[16,17,10,23],[16,19,10,25,"bytecodeBytes"],[16,32,10,38],[16,33,10,39,"length"],[17,4,11,8],[17,5,11,9],[17,6,11,10],[18,4,12,4],[18,8,12,8,"bytecodeBytes"],[18,21,12,21],[18,22,12,22,"length"],[18,28,12,28],[18,31,12,31,"maxBytecodeSize"],[18,49,12,46],[18,50,12,46,"maxBytecodeSize"],[18,65,12,46],[18,67,13,8],[18,73,13,14],[18,77,13,18,"BytecodeLengthExceedsMaxSizeError"],[18,94,13,51],[18,95,13,51,"BytecodeLengthExceedsMaxSizeError"],[18,128,13,51],[18,129,13,52],[19,6,14,12,"givenLength"],[19,17,14,23],[19,19,14,25,"bytecodeBytes"],[19,32,14,38],[19,33,14,39,"length"],[19,39,14,45],[20,6,15,12,"maxBytecodeSize"],[20,21,15,27],[20,23,15,12,"maxBytecodeSize"],[20,41,15,27],[20,42,15,27,"maxBytecodeSize"],[21,4,16,8],[21,5,16,9],[21,6,16,10],[22,4,17,4],[22,10,17,10,"hashStr"],[22,17,17,17],[22,20,17,20],[22,24,17,20,"sha256"],[22,42,17,26],[22,43,17,26,"sha256"],[22,49,17,26],[22,51,17,27,"bytecodeBytes"],[22,64,17,40],[22,65,17,41],[23,4,18,4],[23,10,18,10,"hash"],[23,14,18,14],[23,17,18,17],[23,21,18,17,"toBytes"],[23,44,18,24],[23,45,18,24,"toBytes"],[23,52,18,24],[23,54,18,25,"hashStr"],[23,61,18,32],[23,62,18,33],[24,4,19,4],[25,4,20,4],[26,4,21,4],[26,10,21,10,"bytecodeLengthInWords"],[26,31,21,31],[26,34,21,34,"bytecodeBytes"],[26,47,21,47],[26,48,21,48,"length"],[26,54,21,54],[26,57,21,57],[26,59,21,59],[27,4,22,4],[27,8,22,8,"bytecodeLengthInWords"],[27,29,22,29],[27,32,22,32],[27,33,22,33],[27,38,22,38],[27,39,22,39],[27,41,22,41],[28,6,23,8],[28,12,23,14],[28,16,23,18,"BytecodeLengthInWordsMustBeOddError"],[28,33,23,53],[28,34,23,53,"BytecodeLengthInWordsMustBeOddError"],[28,69,23,53],[28,70,23,54],[29,8,24,12,"givenLengthInWords"],[29,26,24,30],[29,28,24,32,"bytecodeLengthInWords"],[30,6,25,8],[30,7,25,9],[30,8,25,10],[31,4,26,4],[32,4,27,4],[32,10,27,10,"bytecodeLength"],[32,24,27,24],[32,27,27,27],[32,31,27,27,"toBytes"],[32,54,27,34],[32,55,27,34,"toBytes"],[32,62,27,34],[32,64,27,35,"bytecodeLengthInWords"],[32,85,27,56],[32,86,27,57],[33,4,28,4],[34,4,29,4],[35,4,30,4],[35,10,30,10,"bytecodeLengthPadded"],[35,30,30,30],[35,33,30,33],[35,37,30,33,"pad"],[35,52,30,36],[35,53,30,36,"pad"],[35,56,30,36],[35,58,30,37,"bytecodeLength"],[35,72,30,51],[35,74,30,53],[36,6,30,55,"size"],[36,10,30,59],[36,12,30,61],[37,4,30,63],[37,5,30,64],[37,6,30,65],[38,4,31,4],[38,10,31,10,"codeHashVersion"],[38,25,31,25],[38,28,31,28],[38,32,31,32,"Uint8Array"],[38,42,31,42],[38,43,31,43],[38,44,31,44],[38,45,31,45],[38,47,31,47],[38,48,31,48],[38,49,31,49],[38,50,31,50],[39,4,32,4,"hash"],[39,8,32,8],[39,9,32,9,"set"],[39,12,32,12],[39,13,32,13,"codeHashVersion"],[39,28,32,28],[39,30,32,30],[39,31,32,31],[39,32,32,32],[40,4,33,4,"hash"],[40,8,33,8],[40,9,33,9,"set"],[40,12,33,12],[40,13,33,13,"bytecodeLengthPadded"],[40,33,33,33],[40,35,33,35],[40,36,33,36],[40,37,33,37],[41,4,34,4],[41,11,34,11,"hash"],[41,15,34,15],[42,2,35,0],[43,0,35,1],[43,3]],"functionMap":{"names":["<global>","hashBytecode"],"mappings":"AAA;OCK;CD6B"},"hasCjsExports":false},"type":"js/module"}]}