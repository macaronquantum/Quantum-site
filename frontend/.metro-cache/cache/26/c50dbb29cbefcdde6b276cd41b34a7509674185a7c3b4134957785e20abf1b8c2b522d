{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.listen = exports.LocalTracer = exports.trace = exports.log = void 0;\n  let id = 0;\n  const subscribers = [];\n  /**\n   * Logs something\n   *\n   * @param type a namespaced identifier of the log (it is not a level like \"debug\", \"error\" but more like \"apdu-in\", \"apdu-out\", etc...)\n   * @param message a clear message of the log associated to the type\n   */\n  const log = (type, message, data) => {\n    const obj = {\n      type,\n      id: String(++id),\n      date: new Date()\n    };\n    if (message) obj.message = message;\n    if (data) obj.data = data;\n    dispatch(obj);\n  };\n  exports.log = log;\n  /**\n   * A simple tracer function, only expanding the existing log function\n   *\n   * Its goal is to capture more context than a log function.\n   * This is simple for now, but can be improved later.\n   *\n   * @param context Anything representing the context where the log occurred\n   */\n  const trace = ({\n    type,\n    message,\n    data,\n    context\n  }) => {\n    const obj = {\n      type,\n      id: String(++id),\n      date: new Date()\n    };\n    if (message) obj.message = message;\n    if (data) obj.data = data;\n    if (context) obj.context = context;\n    dispatch(obj);\n  };\n  exports.trace = trace;\n  /**\n   * A simple tracer class, that can be used to avoid repetition when using the `trace` function\n   *\n   * Its goal is to capture more context than a log function.\n   * This is simple for now, but can be improved later.\n   *\n   * @param type A given type (not level) for the current local tracer (\"hw\", \"withDevice\", etc.)\n   * @param context Anything representing the context where the log occurred\n   */\n  class LocalTracer {\n    constructor(type, context) {\n      this.type = type;\n      this.context = context;\n    }\n    trace(message, data) {\n      (0, exports.trace)({\n        type: this.type,\n        message,\n        data,\n        context: this.context\n      });\n    }\n    getContext() {\n      return this.context;\n    }\n    setContext(context) {\n      this.context = context;\n    }\n    updateContext(contextToAdd) {\n      this.context = {\n        ...this.context,\n        ...contextToAdd\n      };\n    }\n    getType() {\n      return this.type;\n    }\n    setType(type) {\n      this.type = type;\n    }\n    /**\n     * Create a new instance of the LocalTracer with an updated `type`\n     *\n     * It does not mutate the calling instance, but returns a new LocalTracer,\n     * following a simple builder pattern.\n     */\n    withType(type) {\n      return new LocalTracer(type, this.context);\n    }\n    /**\n     * Create a new instance of the LocalTracer with a new `context`\n     *\n     * It does not mutate the calling instance, but returns a new LocalTracer,\n     * following a simple builder pattern.\n     *\n     * @param context A TraceContext, that can undefined to reset the context\n     */\n    withContext(context) {\n      return new LocalTracer(this.type, context);\n    }\n    /**\n     * Create a new instance of the LocalTracer with an updated `context`,\n     * on which an additional context is merged with the existing one.\n     *\n     * It does not mutate the calling instance, but returns a new LocalTracer,\n     * following a simple builder pattern.\n     */\n    withUpdatedContext(contextToAdd) {\n      return new LocalTracer(this.type, {\n        ...this.context,\n        ...contextToAdd\n      });\n    }\n  }\n  exports.LocalTracer = LocalTracer;\n  /**\n   * Adds a subscribers to the emitted logs.\n   *\n   * @param cb that is called for each future log() with the Log object\n   * @return a function that can be called to unsubscribe the listener\n   */\n  const listen = cb => {\n    subscribers.push(cb);\n    return () => {\n      const i = subscribers.indexOf(cb);\n      if (i !== -1) {\n        // equivalent of subscribers.splice(i, 1) // https://twitter.com/Rich_Harris/status/1125850391155965952\n        subscribers[i] = subscribers[subscribers.length - 1];\n        subscribers.pop();\n      }\n    };\n  };\n  exports.listen = listen;\n  function dispatch(log) {\n    for (let i = 0; i < subscribers.length; i++) {\n      try {\n        subscribers[i](log);\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  }\n  if (false) {\n    window.__ledgerLogsListen = exports.listen;\n  }\n});","lineCount":157,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"listen"],[7,16,3,14],[7,19,3,17,"exports"],[7,26,3,24],[7,27,3,25,"LocalTracer"],[7,38,3,36],[7,41,3,39,"exports"],[7,48,3,46],[7,49,3,47,"trace"],[7,54,3,52],[7,57,3,55,"exports"],[7,64,3,62],[7,65,3,63,"log"],[7,68,3,66],[7,71,3,69],[7,76,3,74],[7,77,3,75],[8,2,4,0],[8,6,4,4,"id"],[8,8,4,6],[8,11,4,9],[8,12,4,10],[9,2,5,0],[9,8,5,6,"subscribers"],[9,19,5,17],[9,22,5,20],[9,24,5,22],[10,2,6,0],[11,0,7,0],[12,0,8,0],[13,0,9,0],[14,0,10,0],[15,0,11,0],[16,2,12,0],[16,8,12,6,"log"],[16,11,12,9],[16,14,12,12,"log"],[16,15,12,13,"type"],[16,19,12,17],[16,21,12,19,"message"],[16,28,12,26],[16,30,12,28,"data"],[16,34,12,32],[16,39,12,37],[17,4,13,4],[17,10,13,10,"obj"],[17,13,13,13],[17,16,13,16],[18,6,14,8,"type"],[18,10,14,12],[19,6,15,8,"id"],[19,8,15,10],[19,10,15,12,"String"],[19,16,15,18],[19,17,15,19],[19,19,15,21,"id"],[19,21,15,23],[19,22,15,24],[20,6,16,8,"date"],[20,10,16,12],[20,12,16,14],[20,16,16,18,"Date"],[20,20,16,22],[20,21,16,23],[21,4,17,4],[21,5,17,5],[22,4,18,4],[22,8,18,8,"message"],[22,15,18,15],[22,17,19,8,"obj"],[22,20,19,11],[22,21,19,12,"message"],[22,28,19,19],[22,31,19,22,"message"],[22,38,19,29],[23,4,20,4],[23,8,20,8,"data"],[23,12,20,12],[23,14,21,8,"obj"],[23,17,21,11],[23,18,21,12,"data"],[23,22,21,16],[23,25,21,19,"data"],[23,29,21,23],[24,4,22,4,"dispatch"],[24,12,22,12],[24,13,22,13,"obj"],[24,16,22,16],[24,17,22,17],[25,2,23,0],[25,3,23,1],[26,2,24,0,"exports"],[26,9,24,7],[26,10,24,8,"log"],[26,13,24,11],[26,16,24,14,"log"],[26,19,24,17],[27,2,25,0],[28,0,26,0],[29,0,27,0],[30,0,28,0],[31,0,29,0],[32,0,30,0],[33,0,31,0],[34,0,32,0],[35,2,33,0],[35,8,33,6,"trace"],[35,13,33,11],[35,16,33,14,"trace"],[35,17,33,15],[36,4,33,17,"type"],[36,8,33,21],[37,4,33,23,"message"],[37,11,33,30],[38,4,33,32,"data"],[38,8,33,36],[39,4,33,38,"context"],[40,2,33,47],[40,3,33,48],[40,8,33,53],[41,4,34,4],[41,10,34,10,"obj"],[41,13,34,13],[41,16,34,16],[42,6,35,8,"type"],[42,10,35,12],[43,6,36,8,"id"],[43,8,36,10],[43,10,36,12,"String"],[43,16,36,18],[43,17,36,19],[43,19,36,21,"id"],[43,21,36,23],[43,22,36,24],[44,6,37,8,"date"],[44,10,37,12],[44,12,37,14],[44,16,37,18,"Date"],[44,20,37,22],[44,21,37,23],[45,4,38,4],[45,5,38,5],[46,4,39,4],[46,8,39,8,"message"],[46,15,39,15],[46,17,40,8,"obj"],[46,20,40,11],[46,21,40,12,"message"],[46,28,40,19],[46,31,40,22,"message"],[46,38,40,29],[47,4,41,4],[47,8,41,8,"data"],[47,12,41,12],[47,14,42,8,"obj"],[47,17,42,11],[47,18,42,12,"data"],[47,22,42,16],[47,25,42,19,"data"],[47,29,42,23],[48,4,43,4],[48,8,43,8,"context"],[48,15,43,15],[48,17,44,8,"obj"],[48,20,44,11],[48,21,44,12,"context"],[48,28,44,19],[48,31,44,22,"context"],[48,38,44,29],[49,4,45,4,"dispatch"],[49,12,45,12],[49,13,45,13,"obj"],[49,16,45,16],[49,17,45,17],[50,2,46,0],[50,3,46,1],[51,2,47,0,"exports"],[51,9,47,7],[51,10,47,8,"trace"],[51,15,47,13],[51,18,47,16,"trace"],[51,23,47,21],[52,2,48,0],[53,0,49,0],[54,0,50,0],[55,0,51,0],[56,0,52,0],[57,0,53,0],[58,0,54,0],[59,0,55,0],[60,0,56,0],[61,2,57,0],[61,8,57,6,"LocalTracer"],[61,19,57,17],[61,20,57,18],[62,4,60,4,"constructor"],[62,15,60,15,"constructor"],[62,16,60,16,"type"],[62,20,60,20],[62,22,60,22,"context"],[62,29,60,29],[62,31,60,31],[63,6,61,8],[63,10,61,12],[63,11,61,13,"type"],[63,15,61,17],[63,18,61,20,"type"],[63,22,61,24],[64,6,62,8],[64,10,62,12],[64,11,62,13,"context"],[64,18,62,20],[64,21,62,23,"context"],[64,28,62,30],[65,4,63,4],[66,4,64,4,"trace"],[66,9,64,9,"trace"],[66,10,64,10,"message"],[66,17,64,17],[66,19,64,19,"data"],[66,23,64,23],[66,25,64,25],[67,6,65,8],[67,7,65,9],[67,8,65,10],[67,10,65,12,"exports"],[67,17,65,19],[67,18,65,20,"trace"],[67,23,65,25],[67,25,65,27],[68,8,66,12,"type"],[68,12,66,16],[68,14,66,18],[68,18,66,22],[68,19,66,23,"type"],[68,23,66,27],[69,8,67,12,"message"],[69,15,67,19],[70,8,68,12,"data"],[70,12,68,16],[71,8,69,12,"context"],[71,15,69,19],[71,17,69,21],[71,21,69,25],[71,22,69,26,"context"],[72,6,70,8],[72,7,70,9],[72,8,70,10],[73,4,71,4],[74,4,72,4,"getContext"],[74,14,72,14,"getContext"],[74,15,72,14],[74,17,72,17],[75,6,73,8],[75,13,73,15],[75,17,73,19],[75,18,73,20,"context"],[75,25,73,27],[76,4,74,4],[77,4,75,4,"setContext"],[77,14,75,14,"setContext"],[77,15,75,15,"context"],[77,22,75,22],[77,24,75,24],[78,6,76,8],[78,10,76,12],[78,11,76,13,"context"],[78,18,76,20],[78,21,76,23,"context"],[78,28,76,30],[79,4,77,4],[80,4,78,4,"updateContext"],[80,17,78,17,"updateContext"],[80,18,78,18,"contextToAdd"],[80,30,78,30],[80,32,78,32],[81,6,79,8],[81,10,79,12],[81,11,79,13,"context"],[81,18,79,20],[81,21,79,23],[82,8,79,25],[82,11,79,28],[82,15,79,32],[82,16,79,33,"context"],[82,23,79,40],[83,8,79,42],[83,11,79,45,"contextToAdd"],[84,6,79,58],[84,7,79,59],[85,4,80,4],[86,4,81,4,"getType"],[86,11,81,11,"getType"],[86,12,81,11],[86,14,81,14],[87,6,82,8],[87,13,82,15],[87,17,82,19],[87,18,82,20,"type"],[87,22,82,24],[88,4,83,4],[89,4,84,4,"setType"],[89,11,84,11,"setType"],[89,12,84,12,"type"],[89,16,84,16],[89,18,84,18],[90,6,85,8],[90,10,85,12],[90,11,85,13,"type"],[90,15,85,17],[90,18,85,20,"type"],[90,22,85,24],[91,4,86,4],[92,4,87,4],[93,0,88,0],[94,0,89,0],[95,0,90,0],[96,0,91,0],[97,0,92,0],[98,4,93,4,"withType"],[98,12,93,12,"withType"],[98,13,93,13,"type"],[98,17,93,17],[98,19,93,19],[99,6,94,8],[99,13,94,15],[99,17,94,19,"LocalTracer"],[99,28,94,30],[99,29,94,31,"type"],[99,33,94,35],[99,35,94,37],[99,39,94,41],[99,40,94,42,"context"],[99,47,94,49],[99,48,94,50],[100,4,95,4],[101,4,96,4],[102,0,97,0],[103,0,98,0],[104,0,99,0],[105,0,100,0],[106,0,101,0],[107,0,102,0],[108,0,103,0],[109,4,104,4,"withContext"],[109,15,104,15,"withContext"],[109,16,104,16,"context"],[109,23,104,23],[109,25,104,25],[110,6,105,8],[110,13,105,15],[110,17,105,19,"LocalTracer"],[110,28,105,30],[110,29,105,31],[110,33,105,35],[110,34,105,36,"type"],[110,38,105,40],[110,40,105,42,"context"],[110,47,105,49],[110,48,105,50],[111,4,106,4],[112,4,107,4],[113,0,108,0],[114,0,109,0],[115,0,110,0],[116,0,111,0],[117,0,112,0],[118,0,113,0],[119,4,114,4,"withUpdatedContext"],[119,22,114,22,"withUpdatedContext"],[119,23,114,23,"contextToAdd"],[119,35,114,35],[119,37,114,37],[120,6,115,8],[120,13,115,15],[120,17,115,19,"LocalTracer"],[120,28,115,30],[120,29,115,31],[120,33,115,35],[120,34,115,36,"type"],[120,38,115,40],[120,40,115,42],[121,8,115,44],[121,11,115,47],[121,15,115,51],[121,16,115,52,"context"],[121,23,115,59],[122,8,115,61],[122,11,115,64,"contextToAdd"],[123,6,115,77],[123,7,115,78],[123,8,115,79],[124,4,116,4],[125,2,117,0],[126,2,118,0,"exports"],[126,9,118,7],[126,10,118,8,"LocalTracer"],[126,21,118,19],[126,24,118,22,"LocalTracer"],[126,35,118,33],[127,2,119,0],[128,0,120,0],[129,0,121,0],[130,0,122,0],[131,0,123,0],[132,0,124,0],[133,2,125,0],[133,8,125,6,"listen"],[133,14,125,12],[133,17,125,16,"cb"],[133,19,125,18],[133,23,125,23],[134,4,126,4,"subscribers"],[134,15,126,15],[134,16,126,16,"push"],[134,20,126,20],[134,21,126,21,"cb"],[134,23,126,23],[134,24,126,24],[135,4,127,4],[135,11,127,11],[135,17,127,17],[136,6,128,8],[136,12,128,14,"i"],[136,13,128,15],[136,16,128,18,"subscribers"],[136,27,128,29],[136,28,128,30,"indexOf"],[136,35,128,37],[136,36,128,38,"cb"],[136,38,128,40],[136,39,128,41],[137,6,129,8],[137,10,129,12,"i"],[137,11,129,13],[137,16,129,18],[137,17,129,19],[137,18,129,20],[137,20,129,22],[138,8,130,12],[139,8,131,12,"subscribers"],[139,19,131,23],[139,20,131,24,"i"],[139,21,131,25],[139,22,131,26],[139,25,131,29,"subscribers"],[139,36,131,40],[139,37,131,41,"subscribers"],[139,48,131,52],[139,49,131,53,"length"],[139,55,131,59],[139,58,131,62],[139,59,131,63],[139,60,131,64],[140,8,132,12,"subscribers"],[140,19,132,23],[140,20,132,24,"pop"],[140,23,132,27],[140,24,132,28],[140,25,132,29],[141,6,133,8],[142,4,134,4],[142,5,134,5],[143,2,135,0],[143,3,135,1],[144,2,136,0,"exports"],[144,9,136,7],[144,10,136,8,"listen"],[144,16,136,14],[144,19,136,17,"listen"],[144,25,136,23],[145,2,137,0],[145,11,137,9,"dispatch"],[145,19,137,17,"dispatch"],[145,20,137,18,"log"],[145,23,137,21],[145,25,137,23],[146,4,138,4],[146,9,138,9],[146,13,138,13,"i"],[146,14,138,14],[146,17,138,17],[146,18,138,18],[146,20,138,20,"i"],[146,21,138,21],[146,24,138,24,"subscribers"],[146,35,138,35],[146,36,138,36,"length"],[146,42,138,42],[146,44,138,44,"i"],[146,45,138,45],[146,47,138,47],[146,49,138,49],[147,6,139,8],[147,10,139,12],[148,8,140,12,"subscribers"],[148,19,140,23],[148,20,140,24,"i"],[148,21,140,25],[148,22,140,26],[148,23,140,27,"log"],[148,26,140,30],[148,27,140,31],[149,6,141,8],[149,7,141,9],[149,8,142,8],[149,15,142,15,"e"],[149,16,142,16],[149,18,142,18],[150,8,143,12,"console"],[150,15,143,19],[150,16,143,20,"error"],[150,21,143,25],[150,22,143,26,"e"],[150,23,143,27],[150,24,143,28],[151,6,144,8],[152,4,145,4],[153,2,146,0],[154,2,147,0],[154,13,147,35],[155,4,148,4,"window"],[155,10,148,10],[155,11,148,11,"__ledgerLogsListen"],[155,29,148,29],[155,32,148,32,"exports"],[155,39,148,39],[155,40,148,40,"listen"],[155,46,148,46],[156,2,149,0],[157,0,149,1],[157,3]],"functionMap":{"names":["<global>","log","trace","LocalTracer","LocalTracer#constructor","LocalTracer#trace","LocalTracer#getContext","LocalTracer#setContext","LocalTracer#updateContext","LocalTracer#getType","LocalTracer#setType","LocalTracer#withType","LocalTracer#withContext","LocalTracer#withUpdatedContext","listen","<anonymous>","dispatch"],"mappings":"AAA;YCW;CDW;cEU;CFa;AGW;ICG;KDG;IEC;KFO;IGC;KHE;IIC;KJE;IKC;KLE;IMC;KNE;IOC;KPE;IQO;KRE;ISS;KTE;IUQ;KVE;CHC;ecQ;WCE;KDO;CdC;AgBE;ChBS"},"hasCjsExports":true},"type":"js/module"}]}