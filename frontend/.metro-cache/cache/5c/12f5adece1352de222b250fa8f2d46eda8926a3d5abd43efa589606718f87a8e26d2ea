{"dependencies":[{"name":"./createDeferred","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":25,"index":134},"end":{"line":7,"column":52,"index":161}}],"key":"MmqwyK+20uZjfwDrSt8b4uz+17U=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.createLazy = void 0;\n  const createDeferred_1 = require(_dependencyMap[0], \"./createDeferred\");\n  const createLazy = (initLazy, disposeLazy) => {\n    let value;\n    let valuePromise;\n    const get = () => value;\n    const getPending = () => valuePromise?.promise;\n    const dispose = () => {\n      if (valuePromise) {\n        valuePromise.reject(new Error('Disposed during initialization'));\n        valuePromise = undefined;\n      }\n      if (value !== undefined) {\n        disposeLazy?.(value);\n        value = undefined;\n      }\n    };\n    const getOrInit = (...args) => {\n      if (value !== undefined) return Promise.resolve(value);\n      if (!valuePromise) {\n        const deferred = (0, createDeferred_1.createDeferred)();\n        valuePromise = deferred;\n        initLazy(...args).then(val => {\n          value = val;\n          valuePromise = undefined;\n          deferred.resolve(val);\n        }).catch(err => {\n          valuePromise = undefined;\n          deferred.reject(err);\n        });\n      }\n      return valuePromise.promise;\n    };\n    return {\n      get,\n      getPending,\n      getOrInit,\n      dispose\n    };\n  };\n  exports.createLazy = createLazy;\n});","lineCount":48,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"createLazy"],[7,20,6,18],[7,23,6,21],[7,28,6,26],[7,29,6,27],[8,2,7,0],[8,8,7,6,"createDeferred_1"],[8,24,7,22],[8,27,7,25,"require"],[8,34,7,32],[8,35,7,32,"_dependencyMap"],[8,49,7,32],[8,72,7,51],[8,73,7,52],[9,2,8,0],[9,8,8,6,"createLazy"],[9,18,8,16],[9,21,8,19,"createLazy"],[9,22,8,20,"initLazy"],[9,30,8,28],[9,32,8,30,"disposeLazy"],[9,43,8,41],[9,48,8,46],[10,4,9,2],[10,8,9,6,"value"],[10,13,9,11],[11,4,10,2],[11,8,10,6,"valuePromise"],[11,20,10,18],[12,4,11,2],[12,10,11,8,"get"],[12,13,11,11],[12,16,11,14,"get"],[12,17,11,14],[12,22,11,20,"value"],[12,27,11,25],[13,4,12,2],[13,10,12,8,"getPending"],[13,20,12,18],[13,23,12,21,"getPending"],[13,24,12,21],[13,29,12,27,"valuePromise"],[13,41,12,39],[13,43,12,41,"promise"],[13,50,12,48],[14,4,13,2],[14,10,13,8,"dispose"],[14,17,13,15],[14,20,13,18,"dispose"],[14,21,13,18],[14,26,13,24],[15,6,14,4],[15,10,14,8,"valuePromise"],[15,22,14,20],[15,24,14,22],[16,8,15,6,"valuePromise"],[16,20,15,18],[16,21,15,19,"reject"],[16,27,15,25],[16,28,15,26],[16,32,15,30,"Error"],[16,37,15,35],[16,38,15,36],[16,70,15,68],[16,71,15,69],[16,72,15,70],[17,8,16,6,"valuePromise"],[17,20,16,18],[17,23,16,21,"undefined"],[17,32,16,30],[18,6,17,4],[19,6,18,4],[19,10,18,8,"value"],[19,15,18,13],[19,20,18,18,"undefined"],[19,29,18,27],[19,31,18,29],[20,8,19,6,"disposeLazy"],[20,19,19,17],[20,22,19,20,"value"],[20,27,19,25],[20,28,19,26],[21,8,20,6,"value"],[21,13,20,11],[21,16,20,14,"undefined"],[21,25,20,23],[22,6,21,4],[23,4,22,2],[23,5,22,3],[24,4,23,2],[24,10,23,8,"getOrInit"],[24,19,23,17],[24,22,23,20,"getOrInit"],[24,23,23,21],[24,26,23,24,"args"],[24,30,23,28],[24,35,23,33],[25,6,24,4],[25,10,24,8,"value"],[25,15,24,13],[25,20,24,18,"undefined"],[25,29,24,27],[25,31,24,29],[25,38,24,36,"Promise"],[25,45,24,43],[25,46,24,44,"resolve"],[25,53,24,51],[25,54,24,52,"value"],[25,59,24,57],[25,60,24,58],[26,6,25,4],[26,10,25,8],[26,11,25,9,"valuePromise"],[26,23,25,21],[26,25,25,23],[27,8,26,6],[27,14,26,12,"deferred"],[27,22,26,20],[27,25,26,23],[27,26,26,24],[27,27,26,25],[27,29,26,27,"createDeferred_1"],[27,45,26,43],[27,46,26,44,"createDeferred"],[27,60,26,58],[27,62,26,60],[27,63,26,61],[28,8,27,6,"valuePromise"],[28,20,27,18],[28,23,27,21,"deferred"],[28,31,27,29],[29,8,28,6,"initLazy"],[29,16,28,14],[29,17,28,15],[29,20,28,18,"args"],[29,24,28,22],[29,25,28,23],[29,26,28,24,"then"],[29,30,28,28],[29,31,28,29,"val"],[29,34,28,32],[29,38,28,36],[30,10,29,8,"value"],[30,15,29,13],[30,18,29,16,"val"],[30,21,29,19],[31,10,30,8,"valuePromise"],[31,22,30,20],[31,25,30,23,"undefined"],[31,34,30,32],[32,10,31,8,"deferred"],[32,18,31,16],[32,19,31,17,"resolve"],[32,26,31,24],[32,27,31,25,"val"],[32,30,31,28],[32,31,31,29],[33,8,32,6],[33,9,32,7],[33,10,32,8],[33,11,32,9,"catch"],[33,16,32,14],[33,17,32,15,"err"],[33,20,32,18],[33,24,32,22],[34,10,33,8,"valuePromise"],[34,22,33,20],[34,25,33,23,"undefined"],[34,34,33,32],[35,10,34,8,"deferred"],[35,18,34,16],[35,19,34,17,"reject"],[35,25,34,23],[35,26,34,24,"err"],[35,29,34,27],[35,30,34,28],[36,8,35,6],[36,9,35,7],[36,10,35,8],[37,6,36,4],[38,6,37,4],[38,13,37,11,"valuePromise"],[38,25,37,23],[38,26,37,24,"promise"],[38,33,37,31],[39,4,38,2],[39,5,38,3],[40,4,39,2],[40,11,39,9],[41,6,40,4,"get"],[41,9,40,7],[42,6,41,4,"getPending"],[42,16,41,14],[43,6,42,4,"getOrInit"],[43,15,42,13],[44,6,43,4,"dispose"],[45,4,44,2],[45,5,44,3],[46,2,45,0],[46,3,45,1],[47,2,46,0,"exports"],[47,9,46,7],[47,10,46,8,"createLazy"],[47,20,46,18],[47,23,46,21,"createLazy"],[47,33,46,31],[48,0,46,32],[48,3]],"functionMap":{"names":["<global>","createLazy","get","getPending","dispose","getOrInit","initLazy.then$argument_0","initLazy.then._catch$argument_0"],"mappings":"AAA;mBCO;cCG,WD;qBEC,2BF;kBGC;GHS;oBIC;6BCK;ODI,QE;OFG;GJG;CDO"},"hasCjsExports":true},"type":"js/module"}]}