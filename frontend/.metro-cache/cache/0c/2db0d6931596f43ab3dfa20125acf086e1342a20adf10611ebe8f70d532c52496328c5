{"dependencies":[{"name":"./encodePacket.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":26,"index":350},"end":{"line":6,"column":54,"index":378}}],"key":"POxAYEaHubdwPacA5GZumZTdi38=","exportNames":["*"],"imports":1}},{"name":"./decodePacket.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":26,"index":537},"end":{"line":8,"column":54,"index":565}}],"key":"0yD+27N9K2+h+6fBL5tV5MSbuvM=","exportNames":["*"],"imports":1}},{"name":"./commons.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":21,"index":719},"end":{"line":10,"column":44,"index":742}}],"key":"BsP1rur2s8tExOXn4/1q3+2ZDEY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.decodePayload = exports.decodePacket = exports.encodePayload = exports.encodePacket = exports.protocol = void 0;\n  exports.createPacketEncoderStream = createPacketEncoderStream;\n  exports.createPacketDecoderStream = createPacketDecoderStream;\n  const encodePacket_js_1 = require(_dependencyMap[0], \"./encodePacket.js\");\n  Object.defineProperty(exports, \"encodePacket\", {\n    enumerable: true,\n    get: function () {\n      return encodePacket_js_1.encodePacket;\n    }\n  });\n  const decodePacket_js_1 = require(_dependencyMap[1], \"./decodePacket.js\");\n  Object.defineProperty(exports, \"decodePacket\", {\n    enumerable: true,\n    get: function () {\n      return decodePacket_js_1.decodePacket;\n    }\n  });\n  const commons_js_1 = require(_dependencyMap[2], \"./commons.js\");\n  const SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\n  const encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n      // force base64 encoding for binary packets\n      (0, encodePacket_js_1.encodePacket)(packet, false, encodedPacket => {\n        encodedPackets[i] = encodedPacket;\n        if (++count === length) {\n          callback(encodedPackets.join(SEPARATOR));\n        }\n      });\n    });\n  };\n  exports.encodePayload = encodePayload;\n  const decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n      const decodedPacket = (0, decodePacket_js_1.decodePacket)(encodedPackets[i], binaryType);\n      packets.push(decodedPacket);\n      if (decodedPacket.type === \"error\") {\n        break;\n      }\n    }\n    return packets;\n  };\n  exports.decodePayload = decodePayload;\n  function createPacketEncoderStream() {\n    return new TransformStream({\n      transform(packet, controller) {\n        (0, encodePacket_js_1.encodePacketToBinary)(packet, encodedPacket => {\n          const payloadLength = encodedPacket.length;\n          let header;\n          // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n          if (payloadLength < 126) {\n            header = new Uint8Array(1);\n            new DataView(header.buffer).setUint8(0, payloadLength);\n          } else if (payloadLength < 65536) {\n            header = new Uint8Array(3);\n            const view = new DataView(header.buffer);\n            view.setUint8(0, 126);\n            view.setUint16(1, payloadLength);\n          } else {\n            header = new Uint8Array(9);\n            const view = new DataView(header.buffer);\n            view.setUint8(0, 127);\n            view.setBigUint64(1, BigInt(payloadLength));\n          }\n          // first bit indicates whether the payload is plain text (0) or binary (1)\n          if (packet.data && typeof packet.data !== \"string\") {\n            header[0] |= 0x80;\n          }\n          controller.enqueue(header);\n          controller.enqueue(encodedPacket);\n        });\n      }\n    });\n  }\n  let TEXT_DECODER;\n  function totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n  }\n  function concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n      return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n      buffer[i] = chunks[0][j++];\n      if (j === chunks[0].length) {\n        chunks.shift();\n        j = 0;\n      }\n    }\n    if (chunks.length && j < chunks[0].length) {\n      chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n  }\n  function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n      TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n      transform(chunk, controller) {\n        chunks.push(chunk);\n        while (true) {\n          if (state === 0 /* State.READ_HEADER */) {\n            if (totalLength(chunks) < 1) {\n              break;\n            }\n            const header = concatChunks(chunks, 1);\n            isBinary = (header[0] & 0x80) === 0x80;\n            expectedLength = header[0] & 0x7f;\n            if (expectedLength < 126) {\n              state = 3 /* State.READ_PAYLOAD */;\n            } else if (expectedLength === 126) {\n              state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n            } else {\n              state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n            }\n          } else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n            if (totalLength(chunks) < 2) {\n              break;\n            }\n            const headerArray = concatChunks(chunks, 2);\n            expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n            state = 3 /* State.READ_PAYLOAD */;\n          } else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n            if (totalLength(chunks) < 8) {\n              break;\n            }\n            const headerArray = concatChunks(chunks, 8);\n            const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n            const n = view.getUint32(0);\n            if (n > Math.pow(2, 53 - 32) - 1) {\n              // the maximum safe integer in JavaScript is 2^53 - 1\n              controller.enqueue(commons_js_1.ERROR_PACKET);\n              break;\n            }\n            expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n            state = 3 /* State.READ_PAYLOAD */;\n          } else {\n            if (totalLength(chunks) < expectedLength) {\n              break;\n            }\n            const data = concatChunks(chunks, expectedLength);\n            controller.enqueue((0, decodePacket_js_1.decodePacket)(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n            state = 0 /* State.READ_HEADER */;\n          }\n          if (expectedLength === 0 || expectedLength > maxPayload) {\n            controller.enqueue(commons_js_1.ERROR_PACKET);\n            break;\n          }\n        }\n      }\n    });\n  }\n  exports.protocol = 4;\n});","lineCount":172,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"decodePayload"],[7,23,3,21],[7,26,3,24,"exports"],[7,33,3,31],[7,34,3,32,"decodePacket"],[7,46,3,44],[7,49,3,47,"exports"],[7,56,3,54],[7,57,3,55,"encodePayload"],[7,70,3,68],[7,73,3,71,"exports"],[7,80,3,78],[7,81,3,79,"encodePacket"],[7,93,3,91],[7,96,3,94,"exports"],[7,103,3,101],[7,104,3,102,"protocol"],[7,112,3,110],[7,115,3,113],[7,120,3,118],[7,121,3,119],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"createPacketEncoderStream"],[8,35,4,33],[8,38,4,36,"createPacketEncoderStream"],[8,63,4,61],[9,2,5,0,"exports"],[9,9,5,7],[9,10,5,8,"createPacketDecoderStream"],[9,35,5,33],[9,38,5,36,"createPacketDecoderStream"],[9,63,5,61],[10,2,6,0],[10,8,6,6,"encodePacket_js_1"],[10,25,6,23],[10,28,6,26,"require"],[10,35,6,33],[10,36,6,33,"_dependencyMap"],[10,50,6,33],[10,74,6,53],[10,75,6,54],[11,2,7,0,"Object"],[11,8,7,6],[11,9,7,7,"defineProperty"],[11,23,7,21],[11,24,7,22,"exports"],[11,31,7,29],[11,33,7,31],[11,47,7,45],[11,49,7,47],[12,4,7,49,"enumerable"],[12,14,7,59],[12,16,7,61],[12,20,7,65],[13,4,7,67,"get"],[13,7,7,70],[13,9,7,72],[13,18,7,72,"get"],[13,19,7,72],[13,21,7,84],[14,6,7,86],[14,13,7,93,"encodePacket_js_1"],[14,30,7,110],[14,31,7,111,"encodePacket"],[14,43,7,123],[15,4,7,125],[16,2,7,127],[16,3,7,128],[16,4,7,129],[17,2,8,0],[17,8,8,6,"decodePacket_js_1"],[17,25,8,23],[17,28,8,26,"require"],[17,35,8,33],[17,36,8,33,"_dependencyMap"],[17,50,8,33],[17,74,8,53],[17,75,8,54],[18,2,9,0,"Object"],[18,8,9,6],[18,9,9,7,"defineProperty"],[18,23,9,21],[18,24,9,22,"exports"],[18,31,9,29],[18,33,9,31],[18,47,9,45],[18,49,9,47],[19,4,9,49,"enumerable"],[19,14,9,59],[19,16,9,61],[19,20,9,65],[20,4,9,67,"get"],[20,7,9,70],[20,9,9,72],[20,18,9,72,"get"],[20,19,9,72],[20,21,9,84],[21,6,9,86],[21,13,9,93,"decodePacket_js_1"],[21,30,9,110],[21,31,9,111,"decodePacket"],[21,43,9,123],[22,4,9,125],[23,2,9,127],[23,3,9,128],[23,4,9,129],[24,2,10,0],[24,8,10,6,"commons_js_1"],[24,20,10,18],[24,23,10,21,"require"],[24,30,10,28],[24,31,10,28,"_dependencyMap"],[24,45,10,28],[24,64,10,43],[24,65,10,44],[25,2,11,0],[25,8,11,6,"SEPARATOR"],[25,17,11,15],[25,20,11,18,"String"],[25,26,11,24],[25,27,11,25,"fromCharCode"],[25,39,11,37],[25,40,11,38],[25,42,11,40],[25,43,11,41],[25,44,11,42],[25,45,11,43],[26,2,12,0],[26,8,12,6,"encodePayload"],[26,21,12,19],[26,24,12,22,"encodePayload"],[26,25,12,23,"packets"],[26,32,12,30],[26,34,12,32,"callback"],[26,42,12,40],[26,47,12,45],[27,4,13,4],[28,4,14,4],[28,10,14,10,"length"],[28,16,14,16],[28,19,14,19,"packets"],[28,26,14,26],[28,27,14,27,"length"],[28,33,14,33],[29,4,15,4],[29,10,15,10,"encodedPackets"],[29,24,15,24],[29,27,15,27],[29,31,15,31,"Array"],[29,36,15,36],[29,37,15,37,"length"],[29,43,15,43],[29,44,15,44],[30,4,16,4],[30,8,16,8,"count"],[30,13,16,13],[30,16,16,16],[30,17,16,17],[31,4,17,4,"packets"],[31,11,17,11],[31,12,17,12,"forEach"],[31,19,17,19],[31,20,17,20],[31,21,17,21,"packet"],[31,27,17,27],[31,29,17,29,"i"],[31,30,17,30],[31,35,17,35],[32,6,18,8],[33,6,19,8],[33,7,19,9],[33,8,19,10],[33,10,19,12,"encodePacket_js_1"],[33,27,19,29],[33,28,19,30,"encodePacket"],[33,40,19,42],[33,42,19,44,"packet"],[33,48,19,50],[33,50,19,52],[33,55,19,57],[33,57,19,60,"encodedPacket"],[33,70,19,73],[33,74,19,78],[34,8,20,12,"encodedPackets"],[34,22,20,26],[34,23,20,27,"i"],[34,24,20,28],[34,25,20,29],[34,28,20,32,"encodedPacket"],[34,41,20,45],[35,8,21,12],[35,12,21,16],[35,14,21,18,"count"],[35,19,21,23],[35,24,21,28,"length"],[35,30,21,34],[35,32,21,36],[36,10,22,16,"callback"],[36,18,22,24],[36,19,22,25,"encodedPackets"],[36,33,22,39],[36,34,22,40,"join"],[36,38,22,44],[36,39,22,45,"SEPARATOR"],[36,48,22,54],[36,49,22,55],[36,50,22,56],[37,8,23,12],[38,6,24,8],[38,7,24,9],[38,8,24,10],[39,4,25,4],[39,5,25,5],[39,6,25,6],[40,2,26,0],[40,3,26,1],[41,2,27,0,"exports"],[41,9,27,7],[41,10,27,8,"encodePayload"],[41,23,27,21],[41,26,27,24,"encodePayload"],[41,39,27,37],[42,2,28,0],[42,8,28,6,"decodePayload"],[42,21,28,19],[42,24,28,22,"decodePayload"],[42,25,28,23,"encodedPayload"],[42,39,28,37],[42,41,28,39,"binaryType"],[42,51,28,49],[42,56,28,54],[43,4,29,4],[43,10,29,10,"encodedPackets"],[43,24,29,24],[43,27,29,27,"encodedPayload"],[43,41,29,41],[43,42,29,42,"split"],[43,47,29,47],[43,48,29,48,"SEPARATOR"],[43,57,29,57],[43,58,29,58],[44,4,30,4],[44,10,30,10,"packets"],[44,17,30,17],[44,20,30,20],[44,22,30,22],[45,4,31,4],[45,9,31,9],[45,13,31,13,"i"],[45,14,31,14],[45,17,31,17],[45,18,31,18],[45,20,31,20,"i"],[45,21,31,21],[45,24,31,24,"encodedPackets"],[45,38,31,38],[45,39,31,39,"length"],[45,45,31,45],[45,47,31,47,"i"],[45,48,31,48],[45,50,31,50],[45,52,31,52],[46,6,32,8],[46,12,32,14,"decodedPacket"],[46,25,32,27],[46,28,32,30],[46,29,32,31],[46,30,32,32],[46,32,32,34,"decodePacket_js_1"],[46,49,32,51],[46,50,32,52,"decodePacket"],[46,62,32,64],[46,64,32,66,"encodedPackets"],[46,78,32,80],[46,79,32,81,"i"],[46,80,32,82],[46,81,32,83],[46,83,32,85,"binaryType"],[46,93,32,95],[46,94,32,96],[47,6,33,8,"packets"],[47,13,33,15],[47,14,33,16,"push"],[47,18,33,20],[47,19,33,21,"decodedPacket"],[47,32,33,34],[47,33,33,35],[48,6,34,8],[48,10,34,12,"decodedPacket"],[48,23,34,25],[48,24,34,26,"type"],[48,28,34,30],[48,33,34,35],[48,40,34,42],[48,42,34,44],[49,8,35,12],[50,6,36,8],[51,4,37,4],[52,4,38,4],[52,11,38,11,"packets"],[52,18,38,18],[53,2,39,0],[53,3,39,1],[54,2,40,0,"exports"],[54,9,40,7],[54,10,40,8,"decodePayload"],[54,23,40,21],[54,26,40,24,"decodePayload"],[54,39,40,37],[55,2,41,0],[55,11,41,9,"createPacketEncoderStream"],[55,36,41,34,"createPacketEncoderStream"],[55,37,41,34],[55,39,41,37],[56,4,42,4],[56,11,42,11],[56,15,42,15,"TransformStream"],[56,30,42,30],[56,31,42,31],[57,6,43,8,"transform"],[57,15,43,17,"transform"],[57,16,43,18,"packet"],[57,22,43,24],[57,24,43,26,"controller"],[57,34,43,36],[57,36,43,38],[58,8,44,12],[58,9,44,13],[58,10,44,14],[58,12,44,16,"encodePacket_js_1"],[58,29,44,33],[58,30,44,34,"encodePacketToBinary"],[58,50,44,54],[58,52,44,56,"packet"],[58,58,44,62],[58,60,44,65,"encodedPacket"],[58,73,44,78],[58,77,44,83],[59,10,45,16],[59,16,45,22,"payloadLength"],[59,29,45,35],[59,32,45,38,"encodedPacket"],[59,45,45,51],[59,46,45,52,"length"],[59,52,45,58],[60,10,46,16],[60,14,46,20,"header"],[60,20,46,26],[61,10,47,16],[62,10,48,16],[62,14,48,20,"payloadLength"],[62,27,48,33],[62,30,48,36],[62,33,48,39],[62,35,48,41],[63,12,49,20,"header"],[63,18,49,26],[63,21,49,29],[63,25,49,33,"Uint8Array"],[63,35,49,43],[63,36,49,44],[63,37,49,45],[63,38,49,46],[64,12,50,20],[64,16,50,24,"DataView"],[64,24,50,32],[64,25,50,33,"header"],[64,31,50,39],[64,32,50,40,"buffer"],[64,38,50,46],[64,39,50,47],[64,40,50,48,"setUint8"],[64,48,50,56],[64,49,50,57],[64,50,50,58],[64,52,50,60,"payloadLength"],[64,65,50,73],[64,66,50,74],[65,10,51,16],[65,11,51,17],[65,17,52,21],[65,21,52,25,"payloadLength"],[65,34,52,38],[65,37,52,41],[65,42,52,46],[65,44,52,48],[66,12,53,20,"header"],[66,18,53,26],[66,21,53,29],[66,25,53,33,"Uint8Array"],[66,35,53,43],[66,36,53,44],[66,37,53,45],[66,38,53,46],[67,12,54,20],[67,18,54,26,"view"],[67,22,54,30],[67,25,54,33],[67,29,54,37,"DataView"],[67,37,54,45],[67,38,54,46,"header"],[67,44,54,52],[67,45,54,53,"buffer"],[67,51,54,59],[67,52,54,60],[68,12,55,20,"view"],[68,16,55,24],[68,17,55,25,"setUint8"],[68,25,55,33],[68,26,55,34],[68,27,55,35],[68,29,55,37],[68,32,55,40],[68,33,55,41],[69,12,56,20,"view"],[69,16,56,24],[69,17,56,25,"setUint16"],[69,26,56,34],[69,27,56,35],[69,28,56,36],[69,30,56,38,"payloadLength"],[69,43,56,51],[69,44,56,52],[70,10,57,16],[70,11,57,17],[70,17,58,21],[71,12,59,20,"header"],[71,18,59,26],[71,21,59,29],[71,25,59,33,"Uint8Array"],[71,35,59,43],[71,36,59,44],[71,37,59,45],[71,38,59,46],[72,12,60,20],[72,18,60,26,"view"],[72,22,60,30],[72,25,60,33],[72,29,60,37,"DataView"],[72,37,60,45],[72,38,60,46,"header"],[72,44,60,52],[72,45,60,53,"buffer"],[72,51,60,59],[72,52,60,60],[73,12,61,20,"view"],[73,16,61,24],[73,17,61,25,"setUint8"],[73,25,61,33],[73,26,61,34],[73,27,61,35],[73,29,61,37],[73,32,61,40],[73,33,61,41],[74,12,62,20,"view"],[74,16,62,24],[74,17,62,25,"setBigUint64"],[74,29,62,37],[74,30,62,38],[74,31,62,39],[74,33,62,41,"BigInt"],[74,39,62,47],[74,40,62,48,"payloadLength"],[74,53,62,61],[74,54,62,62],[74,55,62,63],[75,10,63,16],[76,10,64,16],[77,10,65,16],[77,14,65,20,"packet"],[77,20,65,26],[77,21,65,27,"data"],[77,25,65,31],[77,29,65,35],[77,36,65,42,"packet"],[77,42,65,48],[77,43,65,49,"data"],[77,47,65,53],[77,52,65,58],[77,60,65,66],[77,62,65,68],[78,12,66,20,"header"],[78,18,66,26],[78,19,66,27],[78,20,66,28],[78,21,66,29],[78,25,66,33],[78,29,66,37],[79,10,67,16],[80,10,68,16,"controller"],[80,20,68,26],[80,21,68,27,"enqueue"],[80,28,68,34],[80,29,68,35,"header"],[80,35,68,41],[80,36,68,42],[81,10,69,16,"controller"],[81,20,69,26],[81,21,69,27,"enqueue"],[81,28,69,34],[81,29,69,35,"encodedPacket"],[81,42,69,48],[81,43,69,49],[82,8,70,12],[82,9,70,13],[82,10,70,14],[83,6,71,8],[84,4,72,4],[84,5,72,5],[84,6,72,6],[85,2,73,0],[86,2,74,0],[86,6,74,4,"TEXT_DECODER"],[86,18,74,16],[87,2,75,0],[87,11,75,9,"totalLength"],[87,22,75,20,"totalLength"],[87,23,75,21,"chunks"],[87,29,75,27],[87,31,75,29],[88,4,76,4],[88,11,76,11,"chunks"],[88,17,76,17],[88,18,76,18,"reduce"],[88,24,76,24],[88,25,76,25],[88,26,76,26,"acc"],[88,29,76,29],[88,31,76,31,"chunk"],[88,36,76,36],[88,41,76,41,"acc"],[88,44,76,44],[88,47,76,47,"chunk"],[88,52,76,52],[88,53,76,53,"length"],[88,59,76,59],[88,61,76,61],[88,62,76,62],[88,63,76,63],[89,2,77,0],[90,2,78,0],[90,11,78,9,"concatChunks"],[90,23,78,21,"concatChunks"],[90,24,78,22,"chunks"],[90,30,78,28],[90,32,78,30,"size"],[90,36,78,34],[90,38,78,36],[91,4,79,4],[91,8,79,8,"chunks"],[91,14,79,14],[91,15,79,15],[91,16,79,16],[91,17,79,17],[91,18,79,18,"length"],[91,24,79,24],[91,29,79,29,"size"],[91,33,79,33],[91,35,79,35],[92,6,80,8],[92,13,80,15,"chunks"],[92,19,80,21],[92,20,80,22,"shift"],[92,25,80,27],[92,26,80,28],[92,27,80,29],[93,4,81,4],[94,4,82,4],[94,10,82,10,"buffer"],[94,16,82,16],[94,19,82,19],[94,23,82,23,"Uint8Array"],[94,33,82,33],[94,34,82,34,"size"],[94,38,82,38],[94,39,82,39],[95,4,83,4],[95,8,83,8,"j"],[95,9,83,9],[95,12,83,12],[95,13,83,13],[96,4,84,4],[96,9,84,9],[96,13,84,13,"i"],[96,14,84,14],[96,17,84,17],[96,18,84,18],[96,20,84,20,"i"],[96,21,84,21],[96,24,84,24,"size"],[96,28,84,28],[96,30,84,30,"i"],[96,31,84,31],[96,33,84,33],[96,35,84,35],[97,6,85,8,"buffer"],[97,12,85,14],[97,13,85,15,"i"],[97,14,85,16],[97,15,85,17],[97,18,85,20,"chunks"],[97,24,85,26],[97,25,85,27],[97,26,85,28],[97,27,85,29],[97,28,85,30,"j"],[97,29,85,31],[97,31,85,33],[97,32,85,34],[98,6,86,8],[98,10,86,12,"j"],[98,11,86,13],[98,16,86,18,"chunks"],[98,22,86,24],[98,23,86,25],[98,24,86,26],[98,25,86,27],[98,26,86,28,"length"],[98,32,86,34],[98,34,86,36],[99,8,87,12,"chunks"],[99,14,87,18],[99,15,87,19,"shift"],[99,20,87,24],[99,21,87,25],[99,22,87,26],[100,8,88,12,"j"],[100,9,88,13],[100,12,88,16],[100,13,88,17],[101,6,89,8],[102,4,90,4],[103,4,91,4],[103,8,91,8,"chunks"],[103,14,91,14],[103,15,91,15,"length"],[103,21,91,21],[103,25,91,25,"j"],[103,26,91,26],[103,29,91,29,"chunks"],[103,35,91,35],[103,36,91,36],[103,37,91,37],[103,38,91,38],[103,39,91,39,"length"],[103,45,91,45],[103,47,91,47],[104,6,92,8,"chunks"],[104,12,92,14],[104,13,92,15],[104,14,92,16],[104,15,92,17],[104,18,92,20,"chunks"],[104,24,92,26],[104,25,92,27],[104,26,92,28],[104,27,92,29],[104,28,92,30,"slice"],[104,33,92,35],[104,34,92,36,"j"],[104,35,92,37],[104,36,92,38],[105,4,93,4],[106,4,94,4],[106,11,94,11,"buffer"],[106,17,94,17],[107,2,95,0],[108,2,96,0],[108,11,96,9,"createPacketDecoderStream"],[108,36,96,34,"createPacketDecoderStream"],[108,37,96,35,"maxPayload"],[108,47,96,45],[108,49,96,47,"binaryType"],[108,59,96,57],[108,61,96,59],[109,4,97,4],[109,8,97,8],[109,9,97,9,"TEXT_DECODER"],[109,21,97,21],[109,23,97,23],[110,6,98,8,"TEXT_DECODER"],[110,18,98,20],[110,21,98,23],[110,25,98,27,"TextDecoder"],[110,36,98,38],[110,37,98,39],[110,38,98,40],[111,4,99,4],[112,4,100,4],[112,10,100,10,"chunks"],[112,16,100,16],[112,19,100,19],[112,21,100,21],[113,4,101,4],[113,8,101,8,"state"],[113,13,101,13],[113,16,101,16],[113,17,101,17],[113,18,101,18],[114,4,102,4],[114,8,102,8,"expectedLength"],[114,22,102,22],[114,25,102,25],[114,26,102,26],[114,27,102,27],[115,4,103,4],[115,8,103,8,"isBinary"],[115,16,103,16],[115,19,103,19],[115,24,103,24],[116,4,104,4],[116,11,104,11],[116,15,104,15,"TransformStream"],[116,30,104,30],[116,31,104,31],[117,6,105,8,"transform"],[117,15,105,17,"transform"],[117,16,105,18,"chunk"],[117,21,105,23],[117,23,105,25,"controller"],[117,33,105,35],[117,35,105,37],[118,8,106,12,"chunks"],[118,14,106,18],[118,15,106,19,"push"],[118,19,106,23],[118,20,106,24,"chunk"],[118,25,106,29],[118,26,106,30],[119,8,107,12],[119,15,107,19],[119,19,107,23],[119,21,107,25],[120,10,108,16],[120,14,108,20,"state"],[120,19,108,25],[120,24,108,30],[120,25,108,31],[120,26,108,32],[120,51,108,57],[121,12,109,20],[121,16,109,24,"totalLength"],[121,27,109,35],[121,28,109,36,"chunks"],[121,34,109,42],[121,35,109,43],[121,38,109,46],[121,39,109,47],[121,41,109,49],[122,14,110,24],[123,12,111,20],[124,12,112,20],[124,18,112,26,"header"],[124,24,112,32],[124,27,112,35,"concatChunks"],[124,39,112,47],[124,40,112,48,"chunks"],[124,46,112,54],[124,48,112,56],[124,49,112,57],[124,50,112,58],[125,12,113,20,"isBinary"],[125,20,113,28],[125,23,113,31],[125,24,113,32,"header"],[125,30,113,38],[125,31,113,39],[125,32,113,40],[125,33,113,41],[125,36,113,44],[125,40,113,48],[125,46,113,54],[125,50,113,58],[126,12,114,20,"expectedLength"],[126,26,114,34],[126,29,114,37,"header"],[126,35,114,43],[126,36,114,44],[126,37,114,45],[126,38,114,46],[126,41,114,49],[126,45,114,53],[127,12,115,20],[127,16,115,24,"expectedLength"],[127,30,115,38],[127,33,115,41],[127,36,115,44],[127,38,115,46],[128,14,116,24,"state"],[128,19,116,29],[128,22,116,32],[128,23,116,33],[128,24,116,34],[129,12,117,20],[129,13,117,21],[129,19,118,25],[129,23,118,29,"expectedLength"],[129,37,118,43],[129,42,118,48],[129,45,118,51],[129,47,118,53],[130,14,119,24,"state"],[130,19,119,29],[130,22,119,32],[130,23,119,33],[130,24,119,34],[131,12,120,20],[131,13,120,21],[131,19,121,25],[132,14,122,24,"state"],[132,19,122,29],[132,22,122,32],[132,23,122,33],[132,24,122,34],[133,12,123,20],[134,10,124,16],[134,11,124,17],[134,17,125,21],[134,21,125,25,"state"],[134,26,125,30],[134,31,125,35],[134,32,125,36],[134,33,125,37],[134,70,125,74],[135,12,126,20],[135,16,126,24,"totalLength"],[135,27,126,35],[135,28,126,36,"chunks"],[135,34,126,42],[135,35,126,43],[135,38,126,46],[135,39,126,47],[135,41,126,49],[136,14,127,24],[137,12,128,20],[138,12,129,20],[138,18,129,26,"headerArray"],[138,29,129,37],[138,32,129,40,"concatChunks"],[138,44,129,52],[138,45,129,53,"chunks"],[138,51,129,59],[138,53,129,61],[138,54,129,62],[138,55,129,63],[139,12,130,20,"expectedLength"],[139,26,130,34],[139,29,130,37],[139,33,130,41,"DataView"],[139,41,130,49],[139,42,130,50,"headerArray"],[139,53,130,61],[139,54,130,62,"buffer"],[139,60,130,68],[139,62,130,70,"headerArray"],[139,73,130,81],[139,74,130,82,"byteOffset"],[139,84,130,92],[139,86,130,94,"headerArray"],[139,97,130,105],[139,98,130,106,"length"],[139,104,130,112],[139,105,130,113],[139,106,130,114,"getUint16"],[139,115,130,123],[139,116,130,124],[139,117,130,125],[139,118,130,126],[140,12,131,20,"state"],[140,17,131,25],[140,20,131,28],[140,21,131,29],[140,22,131,30],[141,10,132,16],[141,11,132,17],[141,17,133,21],[141,21,133,25,"state"],[141,26,133,30],[141,31,133,35],[141,32,133,36],[141,33,133,37],[141,70,133,74],[142,12,134,20],[142,16,134,24,"totalLength"],[142,27,134,35],[142,28,134,36,"chunks"],[142,34,134,42],[142,35,134,43],[142,38,134,46],[142,39,134,47],[142,41,134,49],[143,14,135,24],[144,12,136,20],[145,12,137,20],[145,18,137,26,"headerArray"],[145,29,137,37],[145,32,137,40,"concatChunks"],[145,44,137,52],[145,45,137,53,"chunks"],[145,51,137,59],[145,53,137,61],[145,54,137,62],[145,55,137,63],[146,12,138,20],[146,18,138,26,"view"],[146,22,138,30],[146,25,138,33],[146,29,138,37,"DataView"],[146,37,138,45],[146,38,138,46,"headerArray"],[146,49,138,57],[146,50,138,58,"buffer"],[146,56,138,64],[146,58,138,66,"headerArray"],[146,69,138,77],[146,70,138,78,"byteOffset"],[146,80,138,88],[146,82,138,90,"headerArray"],[146,93,138,101],[146,94,138,102,"length"],[146,100,138,108],[146,101,138,109],[147,12,139,20],[147,18,139,26,"n"],[147,19,139,27],[147,22,139,30,"view"],[147,26,139,34],[147,27,139,35,"getUint32"],[147,36,139,44],[147,37,139,45],[147,38,139,46],[147,39,139,47],[148,12,140,20],[148,16,140,24,"n"],[148,17,140,25],[148,20,140,28,"Math"],[148,24,140,32],[148,25,140,33,"pow"],[148,28,140,36],[148,29,140,37],[148,30,140,38],[148,32,140,40],[148,34,140,42],[148,37,140,45],[148,39,140,47],[148,40,140,48],[148,43,140,51],[148,44,140,52],[148,46,140,54],[149,14,141,24],[150,14,142,24,"controller"],[150,24,142,34],[150,25,142,35,"enqueue"],[150,32,142,42],[150,33,142,43,"commons_js_1"],[150,45,142,55],[150,46,142,56,"ERROR_PACKET"],[150,58,142,68],[150,59,142,69],[151,14,143,24],[152,12,144,20],[153,12,145,20,"expectedLength"],[153,26,145,34],[153,29,145,37,"n"],[153,30,145,38],[153,33,145,41,"Math"],[153,37,145,45],[153,38,145,46,"pow"],[153,41,145,49],[153,42,145,50],[153,43,145,51],[153,45,145,53],[153,47,145,55],[153,48,145,56],[153,51,145,59,"view"],[153,55,145,63],[153,56,145,64,"getUint32"],[153,65,145,73],[153,66,145,74],[153,67,145,75],[153,68,145,76],[154,12,146,20,"state"],[154,17,146,25],[154,20,146,28],[154,21,146,29],[154,22,146,30],[155,10,147,16],[155,11,147,17],[155,17,148,21],[156,12,149,20],[156,16,149,24,"totalLength"],[156,27,149,35],[156,28,149,36,"chunks"],[156,34,149,42],[156,35,149,43],[156,38,149,46,"expectedLength"],[156,52,149,60],[156,54,149,62],[157,14,150,24],[158,12,151,20],[159,12,152,20],[159,18,152,26,"data"],[159,22,152,30],[159,25,152,33,"concatChunks"],[159,37,152,45],[159,38,152,46,"chunks"],[159,44,152,52],[159,46,152,54,"expectedLength"],[159,60,152,68],[159,61,152,69],[160,12,153,20,"controller"],[160,22,153,30],[160,23,153,31,"enqueue"],[160,30,153,38],[160,31,153,39],[160,32,153,40],[160,33,153,41],[160,35,153,43,"decodePacket_js_1"],[160,52,153,60],[160,53,153,61,"decodePacket"],[160,65,153,73],[160,67,153,75,"isBinary"],[160,75,153,83],[160,78,153,86,"data"],[160,82,153,90],[160,85,153,93,"TEXT_DECODER"],[160,97,153,105],[160,98,153,106,"decode"],[160,104,153,112],[160,105,153,113,"data"],[160,109,153,117],[160,110,153,118],[160,112,153,120,"binaryType"],[160,122,153,130],[160,123,153,131],[160,124,153,132],[161,12,154,20,"state"],[161,17,154,25],[161,20,154,28],[161,21,154,29],[161,22,154,30],[162,10,155,16],[163,10,156,16],[163,14,156,20,"expectedLength"],[163,28,156,34],[163,33,156,39],[163,34,156,40],[163,38,156,44,"expectedLength"],[163,52,156,58],[163,55,156,61,"maxPayload"],[163,65,156,71],[163,67,156,73],[164,12,157,20,"controller"],[164,22,157,30],[164,23,157,31,"enqueue"],[164,30,157,38],[164,31,157,39,"commons_js_1"],[164,43,157,51],[164,44,157,52,"ERROR_PACKET"],[164,56,157,64],[164,57,157,65],[165,12,158,20],[166,10,159,16],[167,8,160,12],[168,6,161,8],[169,4,162,4],[169,5,162,5],[169,6,162,6],[170,2,163,0],[171,2,164,0,"exports"],[171,9,164,7],[171,10,164,8,"protocol"],[171,18,164,16],[171,21,164,19],[171,22,164,20],[172,0,164,21],[172,3]],"functionMap":{"names":["<global>","Object.defineProperty$argument_2.get","encodePayload","packets.forEach$argument_0","<anonymous>","decodePayload","createPacketEncoderStream","TransformStream$argument_0.transform","totalLength","chunks.reduce$argument_0","concatChunks","createPacketDecoderStream"],"mappings":"AAA;wECM,sDD;wECE,sDD;sBEG;oBCK;2DCE;SDK;KDC;CFC;sBKE;CLW;AME;QCE;gEHC;aG0B;SDC;CNE;AQE;yBCC,kCD;CRC;AUC;CViB;AWC;QJS;SIwD;CXE"},"hasCjsExports":true},"type":"js/module"}]}