{"dependencies":[{"name":"../../errors/fee.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":17,"index":250},"end":{"line":5,"column":47,"index":280}}],"key":"QDdJqUgF1pGl0s86wgFoZRlKBog=","exportNames":["*"],"imports":1}},{"name":"../../utils/encoding/fromHex.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":21,"index":303},"end":{"line":6,"column":63,"index":345}}],"key":"T6LoMSTzqzYJuDqc58ktEbJCK9Q=","exportNames":["*"],"imports":1}},{"name":"../../utils/getAction.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":23,"index":370},"end":{"line":7,"column":58,"index":405}}],"key":"d685V9n1u7O1oRJ2ZbnkuLpcslA=","exportNames":["*"],"imports":1}},{"name":"./getBlock.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":22,"index":429},"end":{"line":8,"column":46,"index":453}}],"key":"eVoWB1pNRHOKCD2KTTNcF/rQsNE=","exportNames":["*"],"imports":1}},{"name":"./getGasPrice.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":25,"index":480},"end":{"line":9,"column":52,"index":507}}],"key":"fctdSwT6aQtb8vFglTkkqoL8gC8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.estimateMaxPriorityFeePerGas = estimateMaxPriorityFeePerGas;\n  exports.internal_estimateMaxPriorityFeePerGas = internal_estimateMaxPriorityFeePerGas;\n  const fee_js_1 = require(_dependencyMap[0], \"../../errors/fee.js\");\n  const fromHex_js_1 = require(_dependencyMap[1], \"../../utils/encoding/fromHex.js\");\n  const getAction_js_1 = require(_dependencyMap[2], \"../../utils/getAction.js\");\n  const getBlock_js_1 = require(_dependencyMap[3], \"./getBlock.js\");\n  const getGasPrice_js_1 = require(_dependencyMap[4], \"./getGasPrice.js\");\n  async function estimateMaxPriorityFeePerGas(client, args) {\n    return internal_estimateMaxPriorityFeePerGas(client, args);\n  }\n  async function internal_estimateMaxPriorityFeePerGas(client, args) {\n    const {\n      block: block_,\n      chain = client.chain,\n      request\n    } = args || {};\n    try {\n      const maxPriorityFeePerGas = chain?.fees?.maxPriorityFeePerGas ?? chain?.fees?.defaultPriorityFee;\n      if (typeof maxPriorityFeePerGas === 'function') {\n        const block = block_ || (await (0, getAction_js_1.getAction)(client, getBlock_js_1.getBlock, 'getBlock')({}));\n        const maxPriorityFeePerGas_ = await maxPriorityFeePerGas({\n          block,\n          client,\n          request\n        });\n        if (maxPriorityFeePerGas_ === null) throw new Error();\n        return maxPriorityFeePerGas_;\n      }\n      if (typeof maxPriorityFeePerGas !== 'undefined') return maxPriorityFeePerGas;\n      const maxPriorityFeePerGasHex = await client.request({\n        method: 'eth_maxPriorityFeePerGas'\n      });\n      return (0, fromHex_js_1.hexToBigInt)(maxPriorityFeePerGasHex);\n    } catch {\n      const [block, gasPrice] = await Promise.all([block_ ? Promise.resolve(block_) : (0, getAction_js_1.getAction)(client, getBlock_js_1.getBlock, 'getBlock')({}), (0, getAction_js_1.getAction)(client, getGasPrice_js_1.getGasPrice, 'getGasPrice')({})]);\n      if (typeof block.baseFeePerGas !== 'bigint') throw new fee_js_1.Eip1559FeesNotSupportedError();\n      const maxPriorityFeePerGas = gasPrice - block.baseFeePerGas;\n      if (maxPriorityFeePerGas < 0n) return 0n;\n      return maxPriorityFeePerGas;\n    }\n  }\n});","lineCount":48,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"estimateMaxPriorityFeePerGas"],[7,38,3,36],[7,41,3,39,"estimateMaxPriorityFeePerGas"],[7,69,3,67],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"internal_estimateMaxPriorityFeePerGas"],[8,47,4,45],[8,50,4,48,"internal_estimateMaxPriorityFeePerGas"],[8,87,4,85],[9,2,5,0],[9,8,5,6,"fee_js_1"],[9,16,5,14],[9,19,5,17,"require"],[9,26,5,24],[9,27,5,24,"_dependencyMap"],[9,41,5,24],[9,67,5,46],[9,68,5,47],[10,2,6,0],[10,8,6,6,"fromHex_js_1"],[10,20,6,18],[10,23,6,21,"require"],[10,30,6,28],[10,31,6,28,"_dependencyMap"],[10,45,6,28],[10,83,6,62],[10,84,6,63],[11,2,7,0],[11,8,7,6,"getAction_js_1"],[11,22,7,20],[11,25,7,23,"require"],[11,32,7,30],[11,33,7,30,"_dependencyMap"],[11,47,7,30],[11,78,7,57],[11,79,7,58],[12,2,8,0],[12,8,8,6,"getBlock_js_1"],[12,21,8,19],[12,24,8,22,"require"],[12,31,8,29],[12,32,8,29,"_dependencyMap"],[12,46,8,29],[12,66,8,45],[12,67,8,46],[13,2,9,0],[13,8,9,6,"getGasPrice_js_1"],[13,24,9,22],[13,27,9,25,"require"],[13,34,9,32],[13,35,9,32,"_dependencyMap"],[13,49,9,32],[13,72,9,51],[13,73,9,52],[14,2,10,0],[14,17,10,15,"estimateMaxPriorityFeePerGas"],[14,45,10,43,"estimateMaxPriorityFeePerGas"],[14,46,10,44,"client"],[14,52,10,50],[14,54,10,52,"args"],[14,58,10,56],[14,60,10,58],[15,4,11,4],[15,11,11,11,"internal_estimateMaxPriorityFeePerGas"],[15,48,11,48],[15,49,11,49,"client"],[15,55,11,55],[15,57,11,57,"args"],[15,61,11,61],[15,62,11,62],[16,2,12,0],[17,2,13,0],[17,17,13,15,"internal_estimateMaxPriorityFeePerGas"],[17,54,13,52,"internal_estimateMaxPriorityFeePerGas"],[17,55,13,53,"client"],[17,61,13,59],[17,63,13,61,"args"],[17,67,13,65],[17,69,13,67],[18,4,14,4],[18,10,14,10],[19,6,14,12,"block"],[19,11,14,17],[19,13,14,19,"block_"],[19,19,14,25],[20,6,14,27,"chain"],[20,11,14,32],[20,14,14,35,"client"],[20,20,14,41],[20,21,14,42,"chain"],[20,26,14,47],[21,6,14,49,"request"],[22,4,14,57],[22,5,14,58],[22,8,14,61,"args"],[22,12,14,65],[22,16,14,69],[22,17,14,70],[22,18,14,71],[23,4,15,4],[23,8,15,8],[24,6,16,8],[24,12,16,14,"maxPriorityFeePerGas"],[24,32,16,34],[24,35,16,37,"chain"],[24,40,16,42],[24,42,16,44,"fees"],[24,46,16,48],[24,48,16,50,"maxPriorityFeePerGas"],[24,68,16,70],[24,72,16,74,"chain"],[24,77,16,79],[24,79,16,81,"fees"],[24,83,16,85],[24,85,16,87,"defaultPriorityFee"],[24,103,16,105],[25,6,17,8],[25,10,17,12],[25,17,17,19,"maxPriorityFeePerGas"],[25,37,17,39],[25,42,17,44],[25,52,17,54],[25,54,17,56],[26,8,18,12],[26,14,18,18,"block"],[26,19,18,23],[26,22,18,26,"block_"],[26,28,18,32],[26,33,18,37],[26,39,18,43],[26,40,18,44],[26,41,18,45],[26,43,18,47,"getAction_js_1"],[26,57,18,61],[26,58,18,62,"getAction"],[26,67,18,71],[26,69,18,73,"client"],[26,75,18,79],[26,77,18,81,"getBlock_js_1"],[26,90,18,94],[26,91,18,95,"getBlock"],[26,99,18,103],[26,101,18,105],[26,111,18,115],[26,112,18,116],[26,113,18,117],[26,114,18,118],[26,115,18,119],[26,116,18,120],[26,117,18,121],[27,8,19,12],[27,14,19,18,"maxPriorityFeePerGas_"],[27,35,19,39],[27,38,19,42],[27,44,19,48,"maxPriorityFeePerGas"],[27,64,19,68],[27,65,19,69],[28,10,20,16,"block"],[28,15,20,21],[29,10,21,16,"client"],[29,16,21,22],[30,10,22,16,"request"],[31,8,23,12],[31,9,23,13],[31,10,23,14],[32,8,24,12],[32,12,24,16,"maxPriorityFeePerGas_"],[32,33,24,37],[32,38,24,42],[32,42,24,46],[32,44,25,16],[32,50,25,22],[32,54,25,26,"Error"],[32,59,25,31],[32,60,25,32],[32,61,25,33],[33,8,26,12],[33,15,26,19,"maxPriorityFeePerGas_"],[33,36,26,40],[34,6,27,8],[35,6,28,8],[35,10,28,12],[35,17,28,19,"maxPriorityFeePerGas"],[35,37,28,39],[35,42,28,44],[35,53,28,55],[35,55,29,12],[35,62,29,19,"maxPriorityFeePerGas"],[35,82,29,39],[36,6,30,8],[36,12,30,14,"maxPriorityFeePerGasHex"],[36,35,30,37],[36,38,30,40],[36,44,30,46,"client"],[36,50,30,52],[36,51,30,53,"request"],[36,58,30,60],[36,59,30,61],[37,8,31,12,"method"],[37,14,31,18],[37,16,31,20],[38,6,32,8],[38,7,32,9],[38,8,32,10],[39,6,33,8],[39,13,33,15],[39,14,33,16],[39,15,33,17],[39,17,33,19,"fromHex_js_1"],[39,29,33,31],[39,30,33,32,"hexToBigInt"],[39,41,33,43],[39,43,33,45,"maxPriorityFeePerGasHex"],[39,66,33,68],[39,67,33,69],[40,4,34,4],[40,5,34,5],[40,6,35,4],[40,12,35,10],[41,6,36,8],[41,12,36,14],[41,13,36,15,"block"],[41,18,36,20],[41,20,36,22,"gasPrice"],[41,28,36,30],[41,29,36,31],[41,32,36,34],[41,38,36,40,"Promise"],[41,45,36,47],[41,46,36,48,"all"],[41,49,36,51],[41,50,36,52],[41,51,37,12,"block_"],[41,57,37,18],[41,60,38,18,"Promise"],[41,67,38,25],[41,68,38,26,"resolve"],[41,75,38,33],[41,76,38,34,"block_"],[41,82,38,40],[41,83,38,41],[41,86,39,18],[41,87,39,19],[41,88,39,20],[41,90,39,22,"getAction_js_1"],[41,104,39,36],[41,105,39,37,"getAction"],[41,114,39,46],[41,116,39,48,"client"],[41,122,39,54],[41,124,39,56,"getBlock_js_1"],[41,137,39,69],[41,138,39,70,"getBlock"],[41,146,39,78],[41,148,39,80],[41,158,39,90],[41,159,39,91],[41,160,39,92],[41,161,39,93],[41,162,39,94],[41,163,39,95],[41,165,40,12],[41,166,40,13],[41,167,40,14],[41,169,40,16,"getAction_js_1"],[41,183,40,30],[41,184,40,31,"getAction"],[41,193,40,40],[41,195,40,42,"client"],[41,201,40,48],[41,203,40,50,"getGasPrice_js_1"],[41,219,40,66],[41,220,40,67,"getGasPrice"],[41,231,40,78],[41,233,40,80],[41,246,40,93],[41,247,40,94],[41,248,40,95],[41,249,40,96],[41,250,40,97],[41,251,40,98],[41,252,41,9],[41,253,41,10],[42,6,42,8],[42,10,42,12],[42,17,42,19,"block"],[42,22,42,24],[42,23,42,25,"baseFeePerGas"],[42,36,42,38],[42,41,42,43],[42,49,42,51],[42,51,43,12],[42,57,43,18],[42,61,43,22,"fee_js_1"],[42,69,43,30],[42,70,43,31,"Eip1559FeesNotSupportedError"],[42,98,43,59],[42,99,43,60],[42,100,43,61],[43,6,44,8],[43,12,44,14,"maxPriorityFeePerGas"],[43,32,44,34],[43,35,44,37,"gasPrice"],[43,43,44,45],[43,46,44,48,"block"],[43,51,44,53],[43,52,44,54,"baseFeePerGas"],[43,65,44,67],[44,6,45,8],[44,10,45,12,"maxPriorityFeePerGas"],[44,30,45,32],[44,33,45,35],[44,35,45,37],[44,37,46,12],[44,44,46,19],[44,46,46,21],[45,6,47,8],[45,13,47,15,"maxPriorityFeePerGas"],[45,33,47,35],[46,4,48,4],[47,2,49,0],[48,0,49,1],[48,3]],"functionMap":{"names":["<global>","estimateMaxPriorityFeePerGas","internal_estimateMaxPriorityFeePerGas"],"mappings":"AAA;ACS;CDE;AEC;CFoC"},"hasCjsExports":true},"type":"js/module"}]}