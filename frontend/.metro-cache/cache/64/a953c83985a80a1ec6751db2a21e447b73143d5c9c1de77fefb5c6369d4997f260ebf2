{"dependencies":[{"name":"../../errors/fee.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":88,"index":88}}],"key":"L7vcI8VCPiRB8rGcOnkI/UQK4ik=","exportNames":["*"],"imports":1}},{"name":"../../utils/getAction.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":89},"end":{"line":2,"column":53,"index":142}}],"key":"vt4scbNyA2t/tyY0oQJI6AZPJS4=","exportNames":["*"],"imports":1}},{"name":"./estimateMaxPriorityFeePerGas.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":143},"end":{"line":3,"column":91,"index":234}}],"key":"FAPP8JFISFV88OFbqiO+0mTPj+4=","exportNames":["*"],"imports":1}},{"name":"./getBlock.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":235},"end":{"line":4,"column":41,"index":276}}],"key":"X3GxNlDfuk8KPunhMJ9QgQ9r0Yc=","exportNames":["*"],"imports":1}},{"name":"./getGasPrice.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":277},"end":{"line":5,"column":47,"index":324}}],"key":"BmeDHdsmgPcXs6OK2DMw7OIs3c4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.estimateFeesPerGas = estimateFeesPerGas;\n  exports.internal_estimateFeesPerGas = internal_estimateFeesPerGas;\n  var _errorsFeeJs = require(_dependencyMap[0], \"../../errors/fee.js\");\n  var _utilsGetActionJs = require(_dependencyMap[1], \"../../utils/getAction.js\");\n  var _estimateMaxPriorityFeePerGasJs = require(_dependencyMap[2], \"./estimateMaxPriorityFeePerGas.js\");\n  var _getBlockJs = require(_dependencyMap[3], \"./getBlock.js\");\n  var _getGasPriceJs = require(_dependencyMap[4], \"./getGasPrice.js\");\n  /**\n   * Returns an estimate for the fees per gas (in wei) for a\n   * transaction to be likely included in the next block.\n   * Defaults to [`chain.fees.estimateFeesPerGas`](/docs/clients/chains#fees-estimatefeespergas) if set.\n   *\n   * - Docs: https://viem.sh/docs/actions/public/estimateFeesPerGas\n   *\n   * @param client - Client to use\n   * @param parameters - {@link EstimateFeesPerGasParameters}\n   * @returns An estimate (in wei) for the fees per gas. {@link EstimateFeesPerGasReturnType}\n   *\n   * @example\n   * import { createPublicClient, http } from 'viem'\n   * import { mainnet } from 'viem/chains'\n   * import { estimateFeesPerGas } from 'viem/actions'\n   *\n   * const client = createPublicClient({\n   *   chain: mainnet,\n   *   transport: http(),\n   * })\n   * const maxPriorityFeePerGas = await estimateFeesPerGas(client)\n   * // { maxFeePerGas: ..., maxPriorityFeePerGas: ... }\n   */\n  async function estimateFeesPerGas(client, args) {\n    return internal_estimateFeesPerGas(client, args);\n  }\n  async function internal_estimateFeesPerGas(client, args) {\n    const {\n      block: block_,\n      chain = client.chain,\n      request,\n      type = 'eip1559'\n    } = args || {};\n    const baseFeeMultiplier = await (async () => {\n      if (typeof chain?.fees?.baseFeeMultiplier === 'function') return chain.fees.baseFeeMultiplier({\n        block: block_,\n        client,\n        request\n      });\n      return chain?.fees?.baseFeeMultiplier ?? 1.2;\n    })();\n    if (baseFeeMultiplier < 1) throw new _errorsFeeJs.BaseFeeScalarError();\n    const decimals = baseFeeMultiplier.toString().split('.')[1]?.length ?? 0;\n    const denominator = 10 ** decimals;\n    const multiply = base => base * BigInt(Math.ceil(baseFeeMultiplier * denominator)) / BigInt(denominator);\n    const block = block_ ? block_ : await (0, _utilsGetActionJs.getAction)(client, _getBlockJs.getBlock, 'getBlock')({});\n    if (typeof chain?.fees?.estimateFeesPerGas === 'function') {\n      const fees = await chain.fees.estimateFeesPerGas({\n        block: block_,\n        client,\n        multiply,\n        request,\n        type\n      });\n      if (fees !== null) return fees;\n    }\n    if (type === 'eip1559') {\n      if (typeof block.baseFeePerGas !== 'bigint') throw new _errorsFeeJs.Eip1559FeesNotSupportedError();\n      const maxPriorityFeePerGas = typeof request?.maxPriorityFeePerGas === 'bigint' ? request.maxPriorityFeePerGas : await (0, _estimateMaxPriorityFeePerGasJs.internal_estimateMaxPriorityFeePerGas)(client, {\n        block: block,\n        chain,\n        request\n      });\n      const baseFeePerGas = multiply(block.baseFeePerGas);\n      const maxFeePerGas = request?.maxFeePerGas ?? baseFeePerGas + maxPriorityFeePerGas;\n      return {\n        maxFeePerGas,\n        maxPriorityFeePerGas\n      };\n    }\n    const gasPrice = request?.gasPrice ?? multiply(await (0, _utilsGetActionJs.getAction)(client, _getGasPriceJs.getGasPrice, 'getGasPrice')({}));\n    return {\n      gasPrice\n    };\n  }\n});","lineCount":89,"map":[[7,2,29,0,"exports"],[7,9,29,0],[7,10,29,0,"estimateFeesPerGas"],[7,28,29,0],[7,31,29,0,"estimateFeesPerGas"],[7,49,29,0],[8,2,32,0,"exports"],[8,9,32,0],[8,10,32,0,"internal_estimateFeesPerGas"],[8,37,32,0],[8,40,32,0,"internal_estimateFeesPerGas"],[8,67,32,0],[9,2,1,0],[9,6,1,0,"_errorsFeeJs"],[9,18,1,0],[9,21,1,0,"require"],[9,28,1,0],[9,29,1,0,"_dependencyMap"],[9,43,1,0],[10,2,2,0],[10,6,2,0,"_utilsGetActionJs"],[10,23,2,0],[10,26,2,0,"require"],[10,33,2,0],[10,34,2,0,"_dependencyMap"],[10,48,2,0],[11,2,3,0],[11,6,3,0,"_estimateMaxPriorityFeePerGasJs"],[11,37,3,0],[11,40,3,0,"require"],[11,47,3,0],[11,48,3,0,"_dependencyMap"],[11,62,3,0],[12,2,4,0],[12,6,4,0,"_getBlockJs"],[12,17,4,0],[12,20,4,0,"require"],[12,27,4,0],[12,28,4,0,"_dependencyMap"],[12,42,4,0],[13,2,5,0],[13,6,5,0,"_getGasPriceJs"],[13,20,5,0],[13,23,5,0,"require"],[13,30,5,0],[13,31,5,0,"_dependencyMap"],[13,45,5,0],[14,2,6,0],[15,0,7,0],[16,0,8,0],[17,0,9,0],[18,0,10,0],[19,0,11,0],[20,0,12,0],[21,0,13,0],[22,0,14,0],[23,0,15,0],[24,0,16,0],[25,0,17,0],[26,0,18,0],[27,0,19,0],[28,0,20,0],[29,0,21,0],[30,0,22,0],[31,0,23,0],[32,0,24,0],[33,0,25,0],[34,0,26,0],[35,0,27,0],[36,0,28,0],[37,2,29,7],[37,17,29,22,"estimateFeesPerGas"],[37,35,29,40,"estimateFeesPerGas"],[37,36,29,41,"client"],[37,42,29,47],[37,44,29,49,"args"],[37,48,29,53],[37,50,29,55],[38,4,30,4],[38,11,30,11,"internal_estimateFeesPerGas"],[38,38,30,38],[38,39,30,39,"client"],[38,45,30,45],[38,47,30,47,"args"],[38,51,30,51],[38,52,30,52],[39,2,31,0],[40,2,32,7],[40,17,32,22,"internal_estimateFeesPerGas"],[40,44,32,49,"internal_estimateFeesPerGas"],[40,45,32,50,"client"],[40,51,32,56],[40,53,32,58,"args"],[40,57,32,62],[40,59,32,64],[41,4,33,4],[41,10,33,10],[42,6,33,12,"block"],[42,11,33,17],[42,13,33,19,"block_"],[42,19,33,25],[43,6,33,27,"chain"],[43,11,33,32],[43,14,33,35,"client"],[43,20,33,41],[43,21,33,42,"chain"],[43,26,33,47],[44,6,33,49,"request"],[44,13,33,56],[45,6,33,58,"type"],[45,10,33,62],[45,13,33,65],[46,4,33,76],[46,5,33,77],[46,8,33,80,"args"],[46,12,33,84],[46,16,33,88],[46,17,33,89],[46,18,33,90],[47,4,34,4],[47,10,34,10,"baseFeeMultiplier"],[47,27,34,27],[47,30,34,30],[47,36,34,36],[47,37,34,37],[47,49,34,49],[48,6,35,8],[48,10,35,12],[48,17,35,19,"chain"],[48,22,35,24],[48,24,35,26,"fees"],[48,28,35,30],[48,30,35,32,"baseFeeMultiplier"],[48,47,35,49],[48,52,35,54],[48,62,35,64],[48,64,36,12],[48,71,36,19,"chain"],[48,76,36,24],[48,77,36,25,"fees"],[48,81,36,29],[48,82,36,30,"baseFeeMultiplier"],[48,99,36,47],[48,100,36,48],[49,8,37,16,"block"],[49,13,37,21],[49,15,37,23,"block_"],[49,21,37,29],[50,8,38,16,"client"],[50,14,38,22],[51,8,39,16,"request"],[52,6,40,12],[52,7,40,13],[52,8,40,14],[53,6,41,8],[53,13,41,15,"chain"],[53,18,41,20],[53,20,41,22,"fees"],[53,24,41,26],[53,26,41,28,"baseFeeMultiplier"],[53,43,41,45],[53,47,41,49],[53,50,41,52],[54,4,42,4],[54,5,42,5],[54,7,42,7],[54,8,42,8],[55,4,43,4],[55,8,43,8,"baseFeeMultiplier"],[55,25,43,25],[55,28,43,28],[55,29,43,29],[55,31,44,8],[55,37,44,14],[55,41,44,18,"BaseFeeScalarError"],[55,53,44,36],[55,54,44,36,"BaseFeeScalarError"],[55,72,44,36],[55,73,44,37],[55,74,44,38],[56,4,45,4],[56,10,45,10,"decimals"],[56,18,45,18],[56,21,45,21,"baseFeeMultiplier"],[56,38,45,38],[56,39,45,39,"toString"],[56,47,45,47],[56,48,45,48],[56,49,45,49],[56,50,45,50,"split"],[56,55,45,55],[56,56,45,56],[56,59,45,59],[56,60,45,60],[56,61,45,61],[56,62,45,62],[56,63,45,63],[56,65,45,65,"length"],[56,71,45,71],[56,75,45,75],[56,76,45,76],[57,4,46,4],[57,10,46,10,"denominator"],[57,21,46,21],[57,24,46,24],[57,26,46,26],[57,30,46,30,"decimals"],[57,38,46,38],[58,4,47,4],[58,10,47,10,"multiply"],[58,18,47,18],[58,21,47,22,"base"],[58,25,47,26],[58,29,47,32,"base"],[58,33,47,36],[58,36,47,39,"BigInt"],[58,42,47,45],[58,43,47,46,"Math"],[58,47,47,50],[58,48,47,51,"ceil"],[58,52,47,55],[58,53,47,56,"baseFeeMultiplier"],[58,70,47,73],[58,73,47,76,"denominator"],[58,84,47,87],[58,85,47,88],[58,86,47,89],[58,89,48,8,"BigInt"],[58,95,48,14],[58,96,48,15,"denominator"],[58,107,48,26],[58,108,48,27],[59,4,49,4],[59,10,49,10,"block"],[59,15,49,15],[59,18,49,18,"block_"],[59,24,49,24],[59,27,50,10,"block_"],[59,33,50,16],[59,36,51,10],[59,42,51,16],[59,46,51,16,"getAction"],[59,63,51,25],[59,64,51,25,"getAction"],[59,73,51,25],[59,75,51,26,"client"],[59,81,51,32],[59,83,51,34,"getBlock"],[59,94,51,42],[59,95,51,42,"getBlock"],[59,103,51,42],[59,105,51,44],[59,115,51,54],[59,116,51,55],[59,117,51,56],[59,118,51,57],[59,119,51,58],[59,120,51,59],[60,4,52,4],[60,8,52,8],[60,15,52,15,"chain"],[60,20,52,20],[60,22,52,22,"fees"],[60,26,52,26],[60,28,52,28,"estimateFeesPerGas"],[60,46,52,46],[60,51,52,51],[60,61,52,61],[60,63,52,63],[61,6,53,8],[61,12,53,14,"fees"],[61,16,53,18],[61,19,53,22],[61,25,53,28,"chain"],[61,30,53,33],[61,31,53,34,"fees"],[61,35,53,38],[61,36,53,39,"estimateFeesPerGas"],[61,54,53,57],[61,55,53,58],[62,8,54,12,"block"],[62,13,54,17],[62,15,54,19,"block_"],[62,21,54,25],[63,8,55,12,"client"],[63,14,55,18],[64,8,56,12,"multiply"],[64,16,56,20],[65,8,57,12,"request"],[65,15,57,19],[66,8,58,12,"type"],[67,6,59,8],[67,7,59,9],[67,8,59,11],[68,6,60,8],[68,10,60,12,"fees"],[68,14,60,16],[68,19,60,21],[68,23,60,25],[68,25,61,12],[68,32,61,19,"fees"],[68,36,61,23],[69,4,62,4],[70,4,63,4],[70,8,63,8,"type"],[70,12,63,12],[70,17,63,17],[70,26,63,26],[70,28,63,28],[71,6,64,8],[71,10,64,12],[71,17,64,19,"block"],[71,22,64,24],[71,23,64,25,"baseFeePerGas"],[71,36,64,38],[71,41,64,43],[71,49,64,51],[71,51,65,12],[71,57,65,18],[71,61,65,22,"Eip1559FeesNotSupportedError"],[71,73,65,50],[71,74,65,50,"Eip1559FeesNotSupportedError"],[71,102,65,50],[71,103,65,51],[71,104,65,52],[72,6,66,8],[72,12,66,14,"maxPriorityFeePerGas"],[72,32,66,34],[72,35,66,37],[72,42,66,44,"request"],[72,49,66,51],[72,51,66,53,"maxPriorityFeePerGas"],[72,71,66,73],[72,76,66,78],[72,84,66,86],[72,87,67,14,"request"],[72,94,67,21],[72,95,67,22,"maxPriorityFeePerGas"],[72,115,67,42],[72,118,68,14],[72,124,68,20],[72,128,68,20,"internal_estimateMaxPriorityFeePerGas"],[72,159,68,57],[72,160,68,57,"internal_estimateMaxPriorityFeePerGas"],[72,197,68,57],[72,199,68,58,"client"],[72,205,68,64],[72,207,68,66],[73,8,69,16,"block"],[73,13,69,21],[73,15,69,23,"block"],[73,20,69,28],[74,8,70,16,"chain"],[74,13,70,21],[75,8,71,16,"request"],[76,6,72,12],[76,7,72,13],[76,8,72,14],[77,6,73,8],[77,12,73,14,"baseFeePerGas"],[77,25,73,27],[77,28,73,30,"multiply"],[77,36,73,38],[77,37,73,39,"block"],[77,42,73,44],[77,43,73,45,"baseFeePerGas"],[77,56,73,58],[77,57,73,59],[78,6,74,8],[78,12,74,14,"maxFeePerGas"],[78,24,74,26],[78,27,74,29,"request"],[78,34,74,36],[78,36,74,38,"maxFeePerGas"],[78,48,74,50],[78,52,74,54,"baseFeePerGas"],[78,65,74,67],[78,68,74,70,"maxPriorityFeePerGas"],[78,88,74,90],[79,6,75,8],[79,13,75,15],[80,8,76,12,"maxFeePerGas"],[80,20,76,24],[81,8,77,12,"maxPriorityFeePerGas"],[82,6,78,8],[82,7,78,9],[83,4,79,4],[84,4,80,4],[84,10,80,10,"gasPrice"],[84,18,80,18],[84,21,80,21,"request"],[84,28,80,28],[84,30,80,30,"gasPrice"],[84,38,80,38],[84,42,81,8,"multiply"],[84,50,81,16],[84,51,81,17],[84,57,81,23],[84,61,81,23,"getAction"],[84,78,81,32],[84,79,81,32,"getAction"],[84,88,81,32],[84,90,81,33,"client"],[84,96,81,39],[84,98,81,41,"getGasPrice"],[84,112,81,52],[84,113,81,52,"getGasPrice"],[84,124,81,52],[84,126,81,54],[84,139,81,67],[84,140,81,68],[84,141,81,69],[84,142,81,70],[84,143,81,71],[84,144,81,72],[84,145,81,73],[85,4,82,4],[85,11,82,11],[86,6,83,8,"gasPrice"],[87,4,84,4],[87,5,84,5],[88,2,85,0],[89,0,85,1],[89,3]],"functionMap":{"names":["<global>","estimateFeesPerGas","internal_estimateFeesPerGas","<anonymous>","multiply"],"mappings":"AAA;OC4B;CDE;OEC;qCCE;KDQ;qBEK;2BFC;CFqC"},"hasCjsExports":false},"type":"js/module"}]}