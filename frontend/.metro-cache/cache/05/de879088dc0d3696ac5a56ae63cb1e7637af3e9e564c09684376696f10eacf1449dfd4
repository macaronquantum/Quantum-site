{"dependencies":[{"name":"../../errors/request.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":58,"index":58}}],"key":"2pE/btc+6/9ceuRiPNwUYrtm86Y=","exportNames":["*"],"imports":1}},{"name":"../../errors/transport.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":59},"end":{"line":2,"column":62,"index":121}}],"key":"805IfQHE3SROi/84maXj3cvj+EI=","exportNames":["*"],"imports":1}},{"name":"../../utils/promise/createBatchScheduler.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":122},"end":{"line":3,"column":83,"index":205}}],"key":"/Yf25OoMeA3M6cndxs4LL4Yizt0=","exportNames":["*"],"imports":1}},{"name":"../../utils/rpc/http.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":206},"end":{"line":4,"column":60,"index":266}}],"key":"Pa6VDHrHANzzrWIx2Z/yQBDfvIk=","exportNames":["*"],"imports":1}},{"name":"./createTransport.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":267},"end":{"line":5,"column":56,"index":323}}],"key":"IMAs7VdCtDa1Nl7Tey+wGJLFCUk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.http = http;\n  var _errorsRequestJs = require(_dependencyMap[0], \"../../errors/request.js\");\n  var _errorsTransportJs = require(_dependencyMap[1], \"../../errors/transport.js\");\n  var _utilsPromiseCreateBatchSchedulerJs = require(_dependencyMap[2], \"../../utils/promise/createBatchScheduler.js\");\n  var _utilsRpcHttpJs = require(_dependencyMap[3], \"../../utils/rpc/http.js\");\n  var _createTransportJs = require(_dependencyMap[4], \"./createTransport.js\");\n  /**\n   * @description Creates a HTTP transport that connects to a JSON-RPC API.\n   */\n  function http(/** URL of the JSON-RPC API. Defaults to the chain's public RPC URL. */\n  url, config = {}) {\n    const {\n      batch,\n      fetchFn,\n      fetchOptions,\n      key = 'http',\n      methods,\n      name = 'HTTP JSON-RPC',\n      onFetchRequest,\n      onFetchResponse,\n      retryDelay,\n      raw\n    } = config;\n    return ({\n      chain,\n      retryCount: retryCount_,\n      timeout: timeout_\n    }) => {\n      const {\n        batchSize = 1000,\n        wait = 0\n      } = typeof batch === 'object' ? batch : {};\n      const retryCount = config.retryCount ?? retryCount_;\n      const timeout = timeout_ ?? config.timeout ?? 10_000;\n      const url_ = url || chain?.rpcUrls.default.http[0];\n      if (!url_) throw new _errorsTransportJs.UrlRequiredError();\n      const rpcClient = (0, _utilsRpcHttpJs.getHttpRpcClient)(url_, {\n        fetchFn,\n        fetchOptions,\n        onRequest: onFetchRequest,\n        onResponse: onFetchResponse,\n        timeout\n      });\n      return (0, _createTransportJs.createTransport)({\n        key,\n        methods,\n        name,\n        async request({\n          method,\n          params\n        }) {\n          const body = {\n            method,\n            params\n          };\n          const {\n            schedule\n          } = (0, _utilsPromiseCreateBatchSchedulerJs.createBatchScheduler)({\n            id: url_,\n            wait,\n            shouldSplitBatch(requests) {\n              return requests.length > batchSize;\n            },\n            fn: body => rpcClient.request({\n              body\n            }),\n            sort: (a, b) => a.id - b.id\n          });\n          const fn = async body => batch ? schedule(body) : [await rpcClient.request({\n            body\n          })];\n          const [{\n            error,\n            result\n          }] = await fn(body);\n          if (raw) return {\n            error,\n            result\n          };\n          if (error) throw new _errorsRequestJs.RpcRequestError({\n            body,\n            error,\n            url: url_\n          });\n          return result;\n        },\n        retryCount,\n        retryDelay,\n        timeout,\n        type: 'http'\n      }, {\n        fetchOptions,\n        url: url_\n      });\n    };\n  }\n});","lineCount":103,"map":[[7,2,9,0,"exports"],[7,9,9,0],[7,10,9,0,"http"],[7,14,9,0],[7,17,9,0,"http"],[7,21,9,0],[8,2,1,0],[8,6,1,0,"_errorsRequestJs"],[8,22,1,0],[8,25,1,0,"require"],[8,32,1,0],[8,33,1,0,"_dependencyMap"],[8,47,1,0],[9,2,2,0],[9,6,2,0,"_errorsTransportJs"],[9,24,2,0],[9,27,2,0,"require"],[9,34,2,0],[9,35,2,0,"_dependencyMap"],[9,49,2,0],[10,2,3,0],[10,6,3,0,"_utilsPromiseCreateBatchSchedulerJs"],[10,41,3,0],[10,44,3,0,"require"],[10,51,3,0],[10,52,3,0,"_dependencyMap"],[10,66,3,0],[11,2,4,0],[11,6,4,0,"_utilsRpcHttpJs"],[11,21,4,0],[11,24,4,0,"require"],[11,31,4,0],[11,32,4,0,"_dependencyMap"],[11,46,4,0],[12,2,5,0],[12,6,5,0,"_createTransportJs"],[12,24,5,0],[12,27,5,0,"require"],[12,34,5,0],[12,35,5,0,"_dependencyMap"],[12,49,5,0],[13,2,6,0],[14,0,7,0],[15,0,8,0],[16,2,9,7],[16,11,9,16,"http"],[16,15,9,20,"http"],[16,16,10,0],[17,2,11,0,"url"],[17,5,11,3],[17,7,11,5,"config"],[17,13,11,11],[17,16,11,14],[17,17,11,15],[17,18,11,16],[17,20,11,18],[18,4,12,4],[18,10,12,10],[19,6,12,12,"batch"],[19,11,12,17],[20,6,12,19,"fetchFn"],[20,13,12,26],[21,6,12,28,"fetchOptions"],[21,18,12,40],[22,6,12,42,"key"],[22,9,12,45],[22,12,12,48],[22,18,12,54],[23,6,12,56,"methods"],[23,13,12,63],[24,6,12,65,"name"],[24,10,12,69],[24,13,12,72],[24,28,12,87],[25,6,12,89,"onFetchRequest"],[25,20,12,103],[26,6,12,105,"onFetchResponse"],[26,21,12,120],[27,6,12,122,"retryDelay"],[27,16,12,132],[28,6,12,134,"raw"],[29,4,12,139],[29,5,12,140],[29,8,12,143,"config"],[29,14,12,149],[30,4,13,4],[30,11,13,11],[30,12,13,12],[31,6,13,14,"chain"],[31,11,13,19],[32,6,13,21,"retryCount"],[32,16,13,31],[32,18,13,33,"retryCount_"],[32,29,13,44],[33,6,13,46,"timeout"],[33,13,13,53],[33,15,13,55,"timeout_"],[34,4,13,64],[34,5,13,65],[34,10,13,70],[35,6,14,8],[35,12,14,14],[36,8,14,16,"batchSize"],[36,17,14,25],[36,20,14,28],[36,24,14,32],[37,8,14,34,"wait"],[37,12,14,38],[37,15,14,41],[38,6,14,43],[38,7,14,44],[38,10,14,47],[38,17,14,54,"batch"],[38,22,14,59],[38,27,14,64],[38,35,14,72],[38,38,14,75,"batch"],[38,43,14,80],[38,46,14,83],[38,47,14,84],[38,48,14,85],[39,6,15,8],[39,12,15,14,"retryCount"],[39,22,15,24],[39,25,15,27,"config"],[39,31,15,33],[39,32,15,34,"retryCount"],[39,42,15,44],[39,46,15,48,"retryCount_"],[39,57,15,59],[40,6,16,8],[40,12,16,14,"timeout"],[40,19,16,21],[40,22,16,24,"timeout_"],[40,30,16,32],[40,34,16,36,"config"],[40,40,16,42],[40,41,16,43,"timeout"],[40,48,16,50],[40,52,16,54],[40,58,16,60],[41,6,17,8],[41,12,17,14,"url_"],[41,16,17,18],[41,19,17,21,"url"],[41,22,17,24],[41,26,17,28,"chain"],[41,31,17,33],[41,33,17,35,"rpcUrls"],[41,40,17,42],[41,41,17,43,"default"],[41,48,17,50],[41,49,17,51,"http"],[41,53,17,55],[41,54,17,56],[41,55,17,57],[41,56,17,58],[42,6,18,8],[42,10,18,12],[42,11,18,13,"url_"],[42,15,18,17],[42,17,19,12],[42,23,19,18],[42,27,19,22,"UrlRequiredError"],[42,45,19,38],[42,46,19,38,"UrlRequiredError"],[42,62,19,38],[42,63,19,39],[42,64,19,40],[43,6,20,8],[43,12,20,14,"rpcClient"],[43,21,20,23],[43,24,20,26],[43,28,20,26,"getHttpRpcClient"],[43,43,20,42],[43,44,20,42,"getHttpRpcClient"],[43,60,20,42],[43,62,20,43,"url_"],[43,66,20,47],[43,68,20,49],[44,8,21,12,"fetchFn"],[44,15,21,19],[45,8,22,12,"fetchOptions"],[45,20,22,24],[46,8,23,12,"onRequest"],[46,17,23,21],[46,19,23,23,"onFetchRequest"],[46,33,23,37],[47,8,24,12,"onResponse"],[47,18,24,22],[47,20,24,24,"onFetchResponse"],[47,35,24,39],[48,8,25,12,"timeout"],[49,6,26,8],[49,7,26,9],[49,8,26,10],[50,6,27,8],[50,13,27,15],[50,17,27,15,"createTransport"],[50,35,27,30],[50,36,27,30,"createTransport"],[50,51,27,30],[50,53,27,31],[51,8,28,12,"key"],[51,11,28,15],[52,8,29,12,"methods"],[52,15,29,19],[53,8,30,12,"name"],[53,12,30,16],[54,8,31,12],[54,14,31,18,"request"],[54,21,31,25,"request"],[54,22,31,26],[55,10,31,28,"method"],[55,16,31,34],[56,10,31,36,"params"],[57,8,31,43],[57,9,31,44],[57,11,31,46],[58,10,32,16],[58,16,32,22,"body"],[58,20,32,26],[58,23,32,29],[59,12,32,31,"method"],[59,18,32,37],[60,12,32,39,"params"],[61,10,32,46],[61,11,32,47],[62,10,33,16],[62,16,33,22],[63,12,33,24,"schedule"],[64,10,33,33],[64,11,33,34],[64,14,33,37],[64,18,33,37,"createBatchScheduler"],[64,53,33,57],[64,54,33,57,"createBatchScheduler"],[64,74,33,57],[64,76,33,58],[65,12,34,20,"id"],[65,14,34,22],[65,16,34,24,"url_"],[65,20,34,28],[66,12,35,20,"wait"],[66,16,35,24],[67,12,36,20,"shouldSplitBatch"],[67,28,36,36,"shouldSplitBatch"],[67,29,36,37,"requests"],[67,37,36,45],[67,39,36,47],[68,14,37,24],[68,21,37,31,"requests"],[68,29,37,39],[68,30,37,40,"length"],[68,36,37,46],[68,39,37,49,"batchSize"],[68,48,37,58],[69,12,38,20],[69,13,38,21],[70,12,39,20,"fn"],[70,14,39,22],[70,16,39,25,"body"],[70,20,39,29],[70,24,39,34,"rpcClient"],[70,33,39,43],[70,34,39,44,"request"],[70,41,39,51],[70,42,39,52],[71,14,40,24,"body"],[72,12,41,20],[72,13,41,21],[72,14,41,22],[73,12,42,20,"sort"],[73,16,42,24],[73,18,42,26,"sort"],[73,19,42,27,"a"],[73,20,42,28],[73,22,42,30,"b"],[73,23,42,31],[73,28,42,36,"a"],[73,29,42,37],[73,30,42,38,"id"],[73,32,42,40],[73,35,42,43,"b"],[73,36,42,44],[73,37,42,45,"id"],[74,10,43,16],[74,11,43,17],[74,12,43,18],[75,10,44,16],[75,16,44,22,"fn"],[75,18,44,24],[75,21,44,27],[75,27,44,34,"body"],[75,31,44,38],[75,35,44,43,"batch"],[75,40,44,48],[75,43,45,22,"schedule"],[75,51,45,30],[75,52,45,31,"body"],[75,56,45,35],[75,57,45,36],[75,60,46,22],[75,61,47,24],[75,67,47,30,"rpcClient"],[75,76,47,39],[75,77,47,40,"request"],[75,84,47,47],[75,85,47,48],[76,12,48,28,"body"],[77,10,49,24],[77,11,49,25],[77,12,49,26],[77,13,50,21],[78,10,51,16],[78,16,51,22],[78,17,51,23],[79,12,51,25,"error"],[79,17,51,30],[80,12,51,32,"result"],[81,10,51,39],[81,11,51,40],[81,12,51,41],[81,15,51,44],[81,21,51,50,"fn"],[81,23,51,52],[81,24,51,53,"body"],[81,28,51,57],[81,29,51,58],[82,10,52,16],[82,14,52,20,"raw"],[82,17,52,23],[82,19,53,20],[82,26,53,27],[83,12,53,29,"error"],[83,17,53,34],[84,12,53,36,"result"],[85,10,53,43],[85,11,53,44],[86,10,54,16],[86,14,54,20,"error"],[86,19,54,25],[86,21,55,20],[86,27,55,26],[86,31,55,30,"RpcRequestError"],[86,47,55,45],[86,48,55,45,"RpcRequestError"],[86,63,55,45],[86,64,55,46],[87,12,56,24,"body"],[87,16,56,28],[88,12,57,24,"error"],[88,17,57,29],[89,12,58,24,"url"],[89,15,58,27],[89,17,58,29,"url_"],[90,10,59,20],[90,11,59,21],[90,12,59,22],[91,10,60,16],[91,17,60,23,"result"],[91,23,60,29],[92,8,61,12],[92,9,61,13],[93,8,62,12,"retryCount"],[93,18,62,22],[94,8,63,12,"retryDelay"],[94,18,63,22],[95,8,64,12,"timeout"],[95,15,64,19],[96,8,65,12,"type"],[96,12,65,16],[96,14,65,18],[97,6,66,8],[97,7,66,9],[97,9,66,11],[98,8,67,12,"fetchOptions"],[98,20,67,24],[99,8,68,12,"url"],[99,11,68,15],[99,13,68,17,"url_"],[100,6,69,8],[100,7,69,9],[100,8,69,10],[101,4,70,4],[101,5,70,5],[102,2,71,0],[103,0,71,1],[103,3]],"functionMap":{"names":["<global>","http","<anonymous>","createTransport$argument_0.request","createBatchScheduler$argument_0.shouldSplitBatch","createBatchScheduler$argument_0.fn","createBatchScheduler$argument_0.sort","fn"],"mappings":"AAA;OCQ;WCI;YCkB;oBCK;qBDE;wBEC;sBFE;0BGC,qBH;2BIE;qBJM;aDW;KDS;CDC"},"hasCjsExports":false},"type":"js/module"}]}