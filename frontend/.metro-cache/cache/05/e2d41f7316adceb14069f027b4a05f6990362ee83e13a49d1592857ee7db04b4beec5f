{"dependencies":[{"name":"once","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":11,"index":11},"end":{"line":1,"column":26,"index":26}}],"key":"aXrSj/VKaOyLpbwRVEdGWpeb9PQ=","exportNames":["*"],"imports":1}},{"name":"end-of-stream","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":2,"column":10,"index":37},"end":{"line":2,"column":34,"index":61}}],"key":"zJCvfLN7lQgOuZqBvUCEYwGAbhI=","exportNames":["*"],"imports":1}},{"name":"fs","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":7,"index":83},"end":{"line":6,"column":20,"index":96}}],"key":"/446D+0IZVMo9Qz4Ixqnyf8fty0=","exportNames":["*"],"imports":1,"isOptional":true}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var once = require(_dependencyMap[0], \"once\");\n  var eos = require(_dependencyMap[1], \"end-of-stream\");\n  var fs;\n  try {\n    fs = require(_dependencyMap[2], \"fs\"); // we only need fs to get the ReadStream and WriteStream prototypes\n  } catch (e) {}\n  var noop = function () {};\n  var ancient = typeof process === 'undefined' ? false : /^v?\\.0/.test(process.version);\n  var isFn = function (fn) {\n    return typeof fn === 'function';\n  };\n  var isFS = function (stream) {\n    if (!ancient) return false; // newer node version do not need to care about fs is a special way\n    if (!fs) return false; // browser\n    return (stream instanceof (fs.ReadStream || noop) || stream instanceof (fs.WriteStream || noop)) && isFn(stream.close);\n  };\n  var isRequest = function (stream) {\n    return stream.setHeader && isFn(stream.abort);\n  };\n  var destroyer = function (stream, reading, writing, callback) {\n    callback = once(callback);\n    var closed = false;\n    stream.on('close', function () {\n      closed = true;\n    });\n    eos(stream, {\n      readable: reading,\n      writable: writing\n    }, function (err) {\n      if (err) return callback(err);\n      closed = true;\n      callback();\n    });\n    var destroyed = false;\n    return function (err) {\n      if (closed) return;\n      if (destroyed) return;\n      destroyed = true;\n      if (isFS(stream)) return stream.close(noop); // use close for fs streams to avoid fd leaks\n      if (isRequest(stream)) return stream.abort(); // request.destroy just do .end - .abort is what we want\n\n      if (isFn(stream.destroy)) return stream.destroy();\n      callback(err || new Error('stream was destroyed'));\n    };\n  };\n  var call = function (fn) {\n    fn();\n  };\n  var pipe = function (from, to) {\n    return from.pipe(to);\n  };\n  var pump = function () {\n    var streams = Array.prototype.slice.call(arguments);\n    var callback = isFn(streams[streams.length - 1] || noop) && streams.pop() || noop;\n    if (Array.isArray(streams[0])) streams = streams[0];\n    if (streams.length < 2) throw new Error('pump requires two streams per minimum');\n    var error;\n    var destroys = streams.map(function (stream, i) {\n      var reading = i < streams.length - 1;\n      var writing = i > 0;\n      return destroyer(stream, reading, writing, function (err) {\n        if (!error) error = err;\n        if (err) destroys.forEach(call);\n        if (reading) return;\n        destroys.forEach(call);\n        callback(error);\n      });\n    });\n    return streams.reduce(pipe);\n  };\n  module.exports = pump;\n});","lineCount":73,"map":[[2,2,1,0],[2,6,1,4,"once"],[2,10,1,8],[2,13,1,11,"require"],[2,20,1,18],[2,21,1,18,"_dependencyMap"],[2,35,1,18],[2,46,1,25],[2,47,1,26],[3,2,2,0],[3,6,2,4,"eos"],[3,9,2,7],[3,12,2,10,"require"],[3,19,2,17],[3,20,2,17,"_dependencyMap"],[3,34,2,17],[3,54,2,33],[3,55,2,34],[4,2,3,0],[4,6,3,4,"fs"],[4,8,3,6],[5,2,5,0],[5,6,5,4],[6,4,6,2,"fs"],[6,6,6,4],[6,9,6,7,"require"],[6,16,6,14],[6,17,6,14,"_dependencyMap"],[6,31,6,14],[6,40,6,19],[6,41,6,20],[6,43,6,21],[7,2,7,0],[7,3,7,1],[7,4,7,2],[7,11,7,9,"e"],[7,12,7,10],[7,14,7,12],[7,15,7,13],[8,2,9,0],[8,6,9,4,"noop"],[8,10,9,8],[8,13,9,11],[8,22,9,11,"noop"],[8,23,9,11],[8,25,9,23],[8,26,9,24],[8,27,9,25],[9,2,10,0],[9,6,10,4,"ancient"],[9,13,10,11],[9,16,10,14],[9,23,10,21,"process"],[9,30,10,28],[9,35,10,33],[9,46,10,44],[9,49,10,47],[9,54,10,52],[9,57,10,55],[9,65,10,63],[9,66,10,64,"test"],[9,70,10,68],[9,71,10,69,"process"],[9,78,10,76],[9,79,10,77,"version"],[9,86,10,84],[9,87,10,85],[10,2,12,0],[10,6,12,4,"isFn"],[10,10,12,8],[10,13,12,11],[10,22,12,11,"isFn"],[10,23,12,21,"fn"],[10,25,12,23],[10,27,12,25],[11,4,13,2],[11,11,13,9],[11,18,13,16,"fn"],[11,20,13,18],[11,25,13,23],[11,35,13,33],[12,2,14,0],[12,3,14,1],[13,2,16,0],[13,6,16,4,"isFS"],[13,10,16,8],[13,13,16,11],[13,22,16,11,"isFS"],[13,23,16,21,"stream"],[13,29,16,27],[13,31,16,29],[14,4,17,2],[14,8,17,6],[14,9,17,7,"ancient"],[14,16,17,14],[14,18,17,16],[14,25,17,23],[14,30,17,28],[14,32,17,29],[15,4,18,2],[15,8,18,6],[15,9,18,7,"fs"],[15,11,18,9],[15,13,18,11],[15,20,18,18],[15,25,18,23],[15,27,18,24],[16,4,19,2],[16,11,19,9],[16,12,19,10,"stream"],[16,18,19,16],[16,31,19,29,"fs"],[16,33,19,31],[16,34,19,32,"ReadStream"],[16,44,19,42],[16,48,19,46,"noop"],[16,52,19,50],[16,53,19,51],[16,57,19,55,"stream"],[16,63,19,61],[16,76,19,74,"fs"],[16,78,19,76],[16,79,19,77,"WriteStream"],[16,90,19,88],[16,94,19,92,"noop"],[16,98,19,96],[16,99,19,97],[16,104,19,102,"isFn"],[16,108,19,106],[16,109,19,107,"stream"],[16,115,19,113],[16,116,19,114,"close"],[16,121,19,119],[16,122,19,120],[17,2,20,0],[17,3,20,1],[18,2,22,0],[18,6,22,4,"isRequest"],[18,15,22,13],[18,18,22,16],[18,27,22,16,"isRequest"],[18,28,22,26,"stream"],[18,34,22,32],[18,36,22,34],[19,4,23,2],[19,11,23,9,"stream"],[19,17,23,15],[19,18,23,16,"setHeader"],[19,27,23,25],[19,31,23,29,"isFn"],[19,35,23,33],[19,36,23,34,"stream"],[19,42,23,40],[19,43,23,41,"abort"],[19,48,23,46],[19,49,23,47],[20,2,24,0],[20,3,24,1],[21,2,26,0],[21,6,26,4,"destroyer"],[21,15,26,13],[21,18,26,16],[21,27,26,16,"destroyer"],[21,28,26,26,"stream"],[21,34,26,32],[21,36,26,34,"reading"],[21,43,26,41],[21,45,26,43,"writing"],[21,52,26,50],[21,54,26,52,"callback"],[21,62,26,60],[21,64,26,62],[22,4,27,2,"callback"],[22,12,27,10],[22,15,27,13,"once"],[22,19,27,17],[22,20,27,18,"callback"],[22,28,27,26],[22,29,27,27],[23,4,29,2],[23,8,29,6,"closed"],[23,14,29,12],[23,17,29,15],[23,22,29,20],[24,4,30,2,"stream"],[24,10,30,8],[24,11,30,9,"on"],[24,13,30,11],[24,14,30,12],[24,21,30,19],[24,23,30,21],[24,35,30,33],[25,6,31,4,"closed"],[25,12,31,10],[25,15,31,13],[25,19,31,17],[26,4,32,2],[26,5,32,3],[26,6,32,4],[27,4,34,2,"eos"],[27,7,34,5],[27,8,34,6,"stream"],[27,14,34,12],[27,16,34,14],[28,6,34,15,"readable"],[28,14,34,23],[28,16,34,25,"reading"],[28,23,34,32],[29,6,34,34,"writable"],[29,14,34,42],[29,16,34,44,"writing"],[30,4,34,51],[30,5,34,52],[30,7,34,54],[30,17,34,64,"err"],[30,20,34,67],[30,22,34,69],[31,6,35,4],[31,10,35,8,"err"],[31,13,35,11],[31,15,35,13],[31,22,35,20,"callback"],[31,30,35,28],[31,31,35,29,"err"],[31,34,35,32],[31,35,35,33],[32,6,36,4,"closed"],[32,12,36,10],[32,15,36,13],[32,19,36,17],[33,6,37,4,"callback"],[33,14,37,12],[33,15,37,13],[33,16,37,14],[34,4,38,2],[34,5,38,3],[34,6,38,4],[35,4,40,2],[35,8,40,6,"destroyed"],[35,17,40,15],[35,20,40,18],[35,25,40,23],[36,4,41,2],[36,11,41,9],[36,21,41,19,"err"],[36,24,41,22],[36,26,41,24],[37,6,42,4],[37,10,42,8,"closed"],[37,16,42,14],[37,18,42,16],[38,6,43,4],[38,10,43,8,"destroyed"],[38,19,43,17],[38,21,43,19],[39,6,44,4,"destroyed"],[39,15,44,13],[39,18,44,16],[39,22,44,20],[40,6,46,4],[40,10,46,8,"isFS"],[40,14,46,12],[40,15,46,13,"stream"],[40,21,46,19],[40,22,46,20],[40,24,46,22],[40,31,46,29,"stream"],[40,37,46,35],[40,38,46,36,"close"],[40,43,46,41],[40,44,46,42,"noop"],[40,48,46,46],[40,49,46,47],[40,51,46,48],[41,6,47,4],[41,10,47,8,"isRequest"],[41,19,47,17],[41,20,47,18,"stream"],[41,26,47,24],[41,27,47,25],[41,29,47,27],[41,36,47,34,"stream"],[41,42,47,40],[41,43,47,41,"abort"],[41,48,47,46],[41,49,47,47],[41,50,47,48],[41,52,47,49],[43,6,49,4],[43,10,49,8,"isFn"],[43,14,49,12],[43,15,49,13,"stream"],[43,21,49,19],[43,22,49,20,"destroy"],[43,29,49,27],[43,30,49,28],[43,32,49,30],[43,39,49,37,"stream"],[43,45,49,43],[43,46,49,44,"destroy"],[43,53,49,51],[43,54,49,52],[43,55,49,53],[44,6,51,4,"callback"],[44,14,51,12],[44,15,51,13,"err"],[44,18,51,16],[44,22,51,20],[44,26,51,24,"Error"],[44,31,51,29],[44,32,51,30],[44,54,51,52],[44,55,51,53],[44,56,51,54],[45,4,52,2],[45,5,52,3],[46,2,53,0],[46,3,53,1],[47,2,55,0],[47,6,55,4,"call"],[47,10,55,8],[47,13,55,11],[47,22,55,11,"call"],[47,23,55,21,"fn"],[47,25,55,23],[47,27,55,25],[48,4,56,2,"fn"],[48,6,56,4],[48,7,56,5],[48,8,56,6],[49,2,57,0],[49,3,57,1],[50,2,59,0],[50,6,59,4,"pipe"],[50,10,59,8],[50,13,59,11],[50,22,59,11,"pipe"],[50,23,59,21,"from"],[50,27,59,25],[50,29,59,27,"to"],[50,31,59,29],[50,33,59,31],[51,4,60,2],[51,11,60,9,"from"],[51,15,60,13],[51,16,60,14,"pipe"],[51,20,60,18],[51,21,60,19,"to"],[51,23,60,21],[51,24,60,22],[52,2,61,0],[52,3,61,1],[53,2,63,0],[53,6,63,4,"pump"],[53,10,63,8],[53,13,63,11],[53,22,63,11,"pump"],[53,23,63,11],[53,25,63,23],[54,4,64,2],[54,8,64,6,"streams"],[54,15,64,13],[54,18,64,16,"Array"],[54,23,64,21],[54,24,64,22,"prototype"],[54,33,64,31],[54,34,64,32,"slice"],[54,39,64,37],[54,40,64,38,"call"],[54,44,64,42],[54,45,64,43,"arguments"],[54,54,64,52],[54,55,64,53],[55,4,65,2],[55,8,65,6,"callback"],[55,16,65,14],[55,19,65,17,"isFn"],[55,23,65,21],[55,24,65,22,"streams"],[55,31,65,29],[55,32,65,30,"streams"],[55,39,65,37],[55,40,65,38,"length"],[55,46,65,44],[55,49,65,47],[55,50,65,48],[55,51,65,49],[55,55,65,53,"noop"],[55,59,65,57],[55,60,65,58],[55,64,65,62,"streams"],[55,71,65,69],[55,72,65,70,"pop"],[55,75,65,73],[55,76,65,74],[55,77,65,75],[55,81,65,79,"noop"],[55,85,65,83],[56,4,67,2],[56,8,67,6,"Array"],[56,13,67,11],[56,14,67,12,"isArray"],[56,21,67,19],[56,22,67,20,"streams"],[56,29,67,27],[56,30,67,28],[56,31,67,29],[56,32,67,30],[56,33,67,31],[56,35,67,33,"streams"],[56,42,67,40],[56,45,67,43,"streams"],[56,52,67,50],[56,53,67,51],[56,54,67,52],[56,55,67,53],[57,4,68,2],[57,8,68,6,"streams"],[57,15,68,13],[57,16,68,14,"length"],[57,22,68,20],[57,25,68,23],[57,26,68,24],[57,28,68,26],[57,34,68,32],[57,38,68,36,"Error"],[57,43,68,41],[57,44,68,42],[57,83,68,81],[57,84,68,82],[58,4,70,2],[58,8,70,6,"error"],[58,13,70,11],[59,4,71,2],[59,8,71,6,"destroys"],[59,16,71,14],[59,19,71,17,"streams"],[59,26,71,24],[59,27,71,25,"map"],[59,30,71,28],[59,31,71,29],[59,41,71,39,"stream"],[59,47,71,45],[59,49,71,47,"i"],[59,50,71,48],[59,52,71,50],[60,6,72,4],[60,10,72,8,"reading"],[60,17,72,15],[60,20,72,18,"i"],[60,21,72,19],[60,24,72,22,"streams"],[60,31,72,29],[60,32,72,30,"length"],[60,38,72,36],[60,41,72,39],[60,42,72,40],[61,6,73,4],[61,10,73,8,"writing"],[61,17,73,15],[61,20,73,18,"i"],[61,21,73,19],[61,24,73,22],[61,25,73,23],[62,6,74,4],[62,13,74,11,"destroyer"],[62,22,74,20],[62,23,74,21,"stream"],[62,29,74,27],[62,31,74,29,"reading"],[62,38,74,36],[62,40,74,38,"writing"],[62,47,74,45],[62,49,74,47],[62,59,74,57,"err"],[62,62,74,60],[62,64,74,62],[63,8,75,6],[63,12,75,10],[63,13,75,11,"error"],[63,18,75,16],[63,20,75,18,"error"],[63,25,75,23],[63,28,75,26,"err"],[63,31,75,29],[64,8,76,6],[64,12,76,10,"err"],[64,15,76,13],[64,17,76,15,"destroys"],[64,25,76,23],[64,26,76,24,"forEach"],[64,33,76,31],[64,34,76,32,"call"],[64,38,76,36],[64,39,76,37],[65,8,77,6],[65,12,77,10,"reading"],[65,19,77,17],[65,21,77,19],[66,8,78,6,"destroys"],[66,16,78,14],[66,17,78,15,"forEach"],[66,24,78,22],[66,25,78,23,"call"],[66,29,78,27],[66,30,78,28],[67,8,79,6,"callback"],[67,16,79,14],[67,17,79,15,"error"],[67,22,79,20],[67,23,79,21],[68,6,80,4],[68,7,80,5],[68,8,80,6],[69,4,81,2],[69,5,81,3],[69,6,81,4],[70,4,83,2],[70,11,83,9,"streams"],[70,18,83,16],[70,19,83,17,"reduce"],[70,25,83,23],[70,26,83,24,"pipe"],[70,30,83,28],[70,31,83,29],[71,2,84,0],[71,3,84,1],[72,2,86,0,"module"],[72,8,86,6],[72,9,86,7,"exports"],[72,16,86,14],[72,19,86,17,"pump"],[72,23,86,21],[73,0,86,21],[73,3]],"functionMap":{"names":["<global>","noop","isFn","isFS","isRequest","destroyer","stream.on$argument_1","eos$argument_2","<anonymous>","call","pipe","pump","streams.map$argument_0","destroyer$argument_3"],"mappings":"AAA;WCQ,cD;WEG;CFE;WGE;CHI;gBIE;CJE;gBKE;qBCI;GDE;sDEE;GFI;SGG;GHW;CLC;WSE;CTE;WUE;CVE;WWE;6BCQ;+CCG;KDM;GDC;CXG"},"hasCjsExports":true},"type":"js/module"}]}