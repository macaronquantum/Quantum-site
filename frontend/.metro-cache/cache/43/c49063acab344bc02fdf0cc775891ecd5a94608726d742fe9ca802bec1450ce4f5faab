{"dependencies":[{"name":"./utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":16,"index":145},"end":{"line":7,"column":34,"index":163}}],"key":"Arg6QRuIuy5D/jfcnxX1qJiHjX8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.decodeMessage = exports.decode = void 0;\n  const utils_1 = require(_dependencyMap[0], \"./utils\");\n  const transform = (field, value) => {\n    if ((0, utils_1.isPrimitiveField)(field.type)) {\n      if (field.optional && typeof value === 'undefined') {\n        return null;\n      }\n      if (field.type === 'bytes') {\n        return Buffer.from(value).toString('hex');\n      }\n      if (field.long) {\n        if (Number.isSafeInteger(value.toNumber())) {\n          return value.toNumber();\n        }\n        return value.toString();\n      }\n      return value;\n    }\n    if ('valuesById' in field.resolvedType) {\n      return field.resolvedType.valuesById[value];\n    }\n    if (field.resolvedType.fields) {\n      return messageToJSON(value, field.resolvedType.fields);\n    }\n    throw new Error(`transport: decode: case not handled: ${field}`);\n  };\n  function messageToJSON(MessageParam, fields) {\n    if (!MessageParam) {\n      return {};\n    }\n    const {\n      ...message\n    } = MessageParam;\n    const res = {};\n    Object.keys(fields).forEach(key => {\n      const field = fields[key];\n      const value = message[key];\n      if (field.repeated) {\n        res[key] = value.map(v => transform(field, v));\n      } else {\n        res[key] = transform(field, value);\n      }\n    });\n    return res;\n  }\n  const decode = (MessageParam, data) => {\n    const decoded = MessageParam.decode(new Uint8Array(data));\n    return messageToJSON(decoded, decoded.$type.fields);\n  };\n  exports.decode = decode;\n  const decodeMessage = (messages, messageType, data) => {\n    const {\n      Message,\n      messageName\n    } = (0, utils_1.createMessageFromType)(messages, messageType);\n    const message = (0, exports.decode)(Message, data);\n    return {\n      type: messageName,\n      message\n    };\n  };\n  exports.decodeMessage = decodeMessage;\n});","lineCount":69,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"decodeMessage"],[7,23,6,21],[7,26,6,24,"exports"],[7,33,6,31],[7,34,6,32,"decode"],[7,40,6,38],[7,43,6,41],[7,48,6,46],[7,49,6,47],[8,2,7,0],[8,8,7,6,"utils_1"],[8,15,7,13],[8,18,7,16,"require"],[8,25,7,23],[8,26,7,23,"_dependencyMap"],[8,40,7,23],[8,54,7,33],[8,55,7,34],[9,2,8,0],[9,8,8,6,"transform"],[9,17,8,15],[9,20,8,18,"transform"],[9,21,8,19,"field"],[9,26,8,24],[9,28,8,26,"value"],[9,33,8,31],[9,38,8,36],[10,4,9,2],[10,8,9,6],[10,9,9,7],[10,10,9,8],[10,12,9,10,"utils_1"],[10,19,9,17],[10,20,9,18,"isPrimitiveField"],[10,36,9,34],[10,38,9,36,"field"],[10,43,9,41],[10,44,9,42,"type"],[10,48,9,46],[10,49,9,47],[10,51,9,49],[11,6,10,4],[11,10,10,8,"field"],[11,15,10,13],[11,16,10,14,"optional"],[11,24,10,22],[11,28,10,26],[11,35,10,33,"value"],[11,40,10,38],[11,45,10,43],[11,56,10,54],[11,58,10,56],[12,8,11,6],[12,15,11,13],[12,19,11,17],[13,6,12,4],[14,6,13,4],[14,10,13,8,"field"],[14,15,13,13],[14,16,13,14,"type"],[14,20,13,18],[14,25,13,23],[14,32,13,30],[14,34,13,32],[15,8,14,6],[15,15,14,13,"Buffer"],[15,21,14,19],[15,22,14,20,"from"],[15,26,14,24],[15,27,14,25,"value"],[15,32,14,30],[15,33,14,31],[15,34,14,32,"toString"],[15,42,14,40],[15,43,14,41],[15,48,14,46],[15,49,14,47],[16,6,15,4],[17,6,16,4],[17,10,16,8,"field"],[17,15,16,13],[17,16,16,14,"long"],[17,20,16,18],[17,22,16,20],[18,8,17,6],[18,12,17,10,"Number"],[18,18,17,16],[18,19,17,17,"isSafeInteger"],[18,32,17,30],[18,33,17,31,"value"],[18,38,17,36],[18,39,17,37,"toNumber"],[18,47,17,45],[18,48,17,46],[18,49,17,47],[18,50,17,48],[18,52,17,50],[19,10,18,8],[19,17,18,15,"value"],[19,22,18,20],[19,23,18,21,"toNumber"],[19,31,18,29],[19,32,18,30],[19,33,18,31],[20,8,19,6],[21,8,20,6],[21,15,20,13,"value"],[21,20,20,18],[21,21,20,19,"toString"],[21,29,20,27],[21,30,20,28],[21,31,20,29],[22,6,21,4],[23,6,22,4],[23,13,22,11,"value"],[23,18,22,16],[24,4,23,2],[25,4,24,2],[25,8,24,6],[25,20,24,18],[25,24,24,22,"field"],[25,29,24,27],[25,30,24,28,"resolvedType"],[25,42,24,40],[25,44,24,42],[26,6,25,4],[26,13,25,11,"field"],[26,18,25,16],[26,19,25,17,"resolvedType"],[26,31,25,29],[26,32,25,30,"valuesById"],[26,42,25,40],[26,43,25,41,"value"],[26,48,25,46],[26,49,25,47],[27,4,26,2],[28,4,27,2],[28,8,27,6,"field"],[28,13,27,11],[28,14,27,12,"resolvedType"],[28,26,27,24],[28,27,27,25,"fields"],[28,33,27,31],[28,35,27,33],[29,6,28,4],[29,13,28,11,"messageToJSON"],[29,26,28,24],[29,27,28,25,"value"],[29,32,28,30],[29,34,28,32,"field"],[29,39,28,37],[29,40,28,38,"resolvedType"],[29,52,28,50],[29,53,28,51,"fields"],[29,59,28,57],[29,60,28,58],[30,4,29,2],[31,4,30,2],[31,10,30,8],[31,14,30,12,"Error"],[31,19,30,17],[31,20,30,18],[31,60,30,58,"field"],[31,65,30,63],[31,67,30,65],[31,68,30,66],[32,2,31,0],[32,3,31,1],[33,2,32,0],[33,11,32,9,"messageToJSON"],[33,24,32,22,"messageToJSON"],[33,25,32,23,"MessageParam"],[33,37,32,35],[33,39,32,37,"fields"],[33,45,32,43],[33,47,32,45],[34,4,33,2],[34,8,33,6],[34,9,33,7,"MessageParam"],[34,21,33,19],[34,23,33,21],[35,6,34,4],[35,13,34,11],[35,14,34,12],[35,15,34,13],[36,4,35,2],[37,4,36,2],[37,10,36,8],[38,6,37,4],[38,9,37,7,"message"],[39,4,38,2],[39,5,38,3],[39,8,38,6,"MessageParam"],[39,20,38,18],[40,4,39,2],[40,10,39,8,"res"],[40,13,39,11],[40,16,39,14],[40,17,39,15],[40,18,39,16],[41,4,40,2,"Object"],[41,10,40,8],[41,11,40,9,"keys"],[41,15,40,13],[41,16,40,14,"fields"],[41,22,40,20],[41,23,40,21],[41,24,40,22,"forEach"],[41,31,40,29],[41,32,40,30,"key"],[41,35,40,33],[41,39,40,37],[42,6,41,4],[42,12,41,10,"field"],[42,17,41,15],[42,20,41,18,"fields"],[42,26,41,24],[42,27,41,25,"key"],[42,30,41,28],[42,31,41,29],[43,6,42,4],[43,12,42,10,"value"],[43,17,42,15],[43,20,42,18,"message"],[43,27,42,25],[43,28,42,26,"key"],[43,31,42,29],[43,32,42,30],[44,6,43,4],[44,10,43,8,"field"],[44,15,43,13],[44,16,43,14,"repeated"],[44,24,43,22],[44,26,43,24],[45,8,44,6,"res"],[45,11,44,9],[45,12,44,10,"key"],[45,15,44,13],[45,16,44,14],[45,19,44,17,"value"],[45,24,44,22],[45,25,44,23,"map"],[45,28,44,26],[45,29,44,27,"v"],[45,30,44,28],[45,34,44,32,"transform"],[45,43,44,41],[45,44,44,42,"field"],[45,49,44,47],[45,51,44,49,"v"],[45,52,44,50],[45,53,44,51],[45,54,44,52],[46,6,45,4],[46,7,45,5],[46,13,45,11],[47,8,46,6,"res"],[47,11,46,9],[47,12,46,10,"key"],[47,15,46,13],[47,16,46,14],[47,19,46,17,"transform"],[47,28,46,26],[47,29,46,27,"field"],[47,34,46,32],[47,36,46,34,"value"],[47,41,46,39],[47,42,46,40],[48,6,47,4],[49,4,48,2],[49,5,48,3],[49,6,48,4],[50,4,49,2],[50,11,49,9,"res"],[50,14,49,12],[51,2,50,0],[52,2,51,0],[52,8,51,6,"decode"],[52,14,51,12],[52,17,51,15,"decode"],[52,18,51,16,"MessageParam"],[52,30,51,28],[52,32,51,30,"data"],[52,36,51,34],[52,41,51,39],[53,4,52,2],[53,10,52,8,"decoded"],[53,17,52,15],[53,20,52,18,"MessageParam"],[53,32,52,30],[53,33,52,31,"decode"],[53,39,52,37],[53,40,52,38],[53,44,52,42,"Uint8Array"],[53,54,52,52],[53,55,52,53,"data"],[53,59,52,57],[53,60,52,58],[53,61,52,59],[54,4,53,2],[54,11,53,9,"messageToJSON"],[54,24,53,22],[54,25,53,23,"decoded"],[54,32,53,30],[54,34,53,32,"decoded"],[54,41,53,39],[54,42,53,40,"$type"],[54,47,53,45],[54,48,53,46,"fields"],[54,54,53,52],[54,55,53,53],[55,2,54,0],[55,3,54,1],[56,2,55,0,"exports"],[56,9,55,7],[56,10,55,8,"decode"],[56,16,55,14],[56,19,55,17,"decode"],[56,25,55,23],[57,2,56,0],[57,8,56,6,"decodeMessage"],[57,21,56,19],[57,24,56,22,"decodeMessage"],[57,25,56,23,"messages"],[57,33,56,31],[57,35,56,33,"messageType"],[57,46,56,44],[57,48,56,46,"data"],[57,52,56,50],[57,57,56,55],[58,4,57,2],[58,10,57,8],[59,6,58,4,"Message"],[59,13,58,11],[60,6,59,4,"messageName"],[61,4,60,2],[61,5,60,3],[61,8,60,6],[61,9,60,7],[61,10,60,8],[61,12,60,10,"utils_1"],[61,19,60,17],[61,20,60,18,"createMessageFromType"],[61,41,60,39],[61,43,60,41,"messages"],[61,51,60,49],[61,53,60,51,"messageType"],[61,64,60,62],[61,65,60,63],[62,4,61,2],[62,10,61,8,"message"],[62,17,61,15],[62,20,61,18],[62,21,61,19],[62,22,61,20],[62,24,61,22,"exports"],[62,31,61,29],[62,32,61,30,"decode"],[62,38,61,36],[62,40,61,38,"Message"],[62,47,61,45],[62,49,61,47,"data"],[62,53,61,51],[62,54,61,52],[63,4,62,2],[63,11,62,9],[64,6,63,4,"type"],[64,10,63,8],[64,12,63,10,"messageName"],[64,23,63,21],[65,6,64,4,"message"],[66,4,65,2],[66,5,65,3],[67,2,66,0],[67,3,66,1],[68,2,67,0,"exports"],[68,9,67,7],[68,10,67,8,"decodeMessage"],[68,23,67,21],[68,26,67,24,"decodeMessage"],[68,39,67,37],[69,0,67,38],[69,3]],"functionMap":{"names":["<global>","transform","messageToJSON","Object.keys.forEach$argument_0","value.map$argument_0","decode","decodeMessage"],"mappings":"AAA;kBCO;CDuB;AEC;8BCQ;2BCI,wBD;GDI;CFE;eKC;CLG;sBME;CNU"},"hasCjsExports":true},"type":"js/module"}]}