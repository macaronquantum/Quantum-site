{"dependencies":[{"name":"node:fs","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":14,"index":95},"end":{"line":7,"column":32,"index":113}}],"key":"aUNIPCkst2s/O1ARjixwU5QYeac=","exportNames":["*"],"imports":1}},{"name":"node:path","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":16,"index":131},"end":{"line":8,"column":36,"index":151}}],"key":"LOMEAfWx58GtffyrsRJGFJ7GZm8=","exportNames":["*"],"imports":1}},{"name":"./utils/index.cjs","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":13,"index":166},"end":{"line":9,"column":41,"index":194}}],"key":"4KPhYeCfIRA7xtz5jKOsM7miiBk=","exportNames":["*"],"imports":1}},{"name":"./utils/node-fs.cjs","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":15,"index":211},"end":{"line":10,"column":45,"index":241}}],"key":"LG4ci9nHC4DMaRH3MqbkYZimizg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  var _nodeFs = require(_dependencyMap[0], \"node:fs\");\n  var _nodePath = require(_dependencyMap[1], \"node:path\");\n  var _utils = require(_dependencyMap[2], \"./utils/index.cjs\");\n  var _nodeFs2 = require(_dependencyMap[3], \"./utils/node-fs.cjs\");\n  const PATH_TRAVERSE_RE = /\\.\\.:|\\.\\.$/;\n  const DRIVER_NAME = \"fs-lite\";\n  module.exports = (0, _utils.defineDriver)((opts = {}) => {\n    if (!opts.base) {\n      throw (0, _utils.createRequiredError)(DRIVER_NAME, \"base\");\n    }\n    opts.base = (0, _nodePath.resolve)(opts.base);\n    const r = key => {\n      if (PATH_TRAVERSE_RE.test(key)) {\n        throw (0, _utils.createError)(DRIVER_NAME, `Invalid key: ${JSON.stringify(key)}. It should not contain .. segments`);\n      }\n      const resolved = (0, _nodePath.join)(opts.base, key.replace(/:/g, \"/\"));\n      return resolved;\n    };\n    return {\n      name: DRIVER_NAME,\n      options: opts,\n      flags: {\n        maxDepth: true\n      },\n      hasItem(key) {\n        return (0, _nodeFs.existsSync)(r(key));\n      },\n      getItem(key) {\n        return (0, _nodeFs2.readFile)(r(key), \"utf8\");\n      },\n      getItemRaw(key) {\n        return (0, _nodeFs2.readFile)(r(key));\n      },\n      async getMeta(key) {\n        const {\n          atime,\n          mtime,\n          size,\n          birthtime,\n          ctime\n        } = await _nodeFs.promises.stat(r(key)).catch(() => ({}));\n        return {\n          atime,\n          mtime,\n          size,\n          birthtime,\n          ctime\n        };\n      },\n      setItem(key, value) {\n        if (opts.readOnly) {\n          return;\n        }\n        return (0, _nodeFs2.writeFile)(r(key), value, \"utf8\");\n      },\n      setItemRaw(key, value) {\n        if (opts.readOnly) {\n          return;\n        }\n        return (0, _nodeFs2.writeFile)(r(key), value);\n      },\n      removeItem(key) {\n        if (opts.readOnly) {\n          return;\n        }\n        return (0, _nodeFs2.unlink)(r(key));\n      },\n      getKeys(_base, topts) {\n        return (0, _nodeFs2.readdirRecursive)(r(\".\"), opts.ignore, topts?.maxDepth);\n      },\n      async clear() {\n        if (opts.readOnly || opts.noClear) {\n          return;\n        }\n        await (0, _nodeFs2.rmRecursive)(r(\".\"));\n      }\n    };\n  });\n});","lineCount":85,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,7,0],[7,6,7,4,"_nodeFs"],[7,13,7,11],[7,16,7,14,"require"],[7,23,7,21],[7,24,7,21,"_dependencyMap"],[7,38,7,21],[7,52,7,31],[7,53,7,32],[8,2,8,0],[8,6,8,4,"_nodePath"],[8,15,8,13],[8,18,8,16,"require"],[8,25,8,23],[8,26,8,23,"_dependencyMap"],[8,40,8,23],[8,56,8,35],[8,57,8,36],[9,2,9,0],[9,6,9,4,"_utils"],[9,12,9,10],[9,15,9,13,"require"],[9,22,9,20],[9,23,9,20,"_dependencyMap"],[9,37,9,20],[9,61,9,40],[9,62,9,41],[10,2,10,0],[10,6,10,4,"_nodeFs2"],[10,14,10,12],[10,17,10,15,"require"],[10,24,10,22],[10,25,10,22,"_dependencyMap"],[10,39,10,22],[10,65,10,44],[10,66,10,45],[11,2,11,0],[11,8,11,6,"PATH_TRAVERSE_RE"],[11,24,11,22],[11,27,11,25],[11,40,11,38],[12,2,12,0],[12,8,12,6,"DRIVER_NAME"],[12,19,12,17],[12,22,12,20],[12,31,12,29],[13,2,13,0,"module"],[13,8,13,6],[13,9,13,7,"exports"],[13,16,13,14],[13,19,13,17],[13,20,13,18],[13,21,13,19],[13,23,13,21,"_utils"],[13,29,13,27],[13,30,13,28,"defineDriver"],[13,42,13,40],[13,44,13,42],[13,45,13,43,"opts"],[13,49,13,47],[13,52,13,50],[13,53,13,51],[13,54,13,52],[13,59,13,57],[14,4,14,2],[14,8,14,6],[14,9,14,7,"opts"],[14,13,14,11],[14,14,14,12,"base"],[14,18,14,16],[14,20,14,18],[15,6,15,4],[15,12,15,10],[15,13,15,11],[15,14,15,12],[15,16,15,14,"_utils"],[15,22,15,20],[15,23,15,21,"createRequiredError"],[15,42,15,40],[15,44,15,42,"DRIVER_NAME"],[15,55,15,53],[15,57,15,55],[15,63,15,61],[15,64,15,62],[16,4,16,2],[17,4,17,2,"opts"],[17,8,17,6],[17,9,17,7,"base"],[17,13,17,11],[17,16,17,14],[17,17,17,15],[17,18,17,16],[17,20,17,18,"_nodePath"],[17,29,17,27],[17,30,17,28,"resolve"],[17,37,17,35],[17,39,17,37,"opts"],[17,43,17,41],[17,44,17,42,"base"],[17,48,17,46],[17,49,17,47],[18,4,18,2],[18,10,18,8,"r"],[18,11,18,9],[18,14,18,12,"key"],[18,17,18,15],[18,21,18,19],[19,6,19,4],[19,10,19,8,"PATH_TRAVERSE_RE"],[19,26,19,24],[19,27,19,25,"test"],[19,31,19,29],[19,32,19,30,"key"],[19,35,19,33],[19,36,19,34],[19,38,19,36],[20,8,20,6],[20,14,20,12],[20,15,20,13],[20,16,20,14],[20,18,20,16,"_utils"],[20,24,20,22],[20,25,20,23,"createError"],[20,36,20,34],[20,38,20,36,"DRIVER_NAME"],[20,49,20,47],[20,51,20,49],[20,67,20,65,"JSON"],[20,71,20,69],[20,72,20,70,"stringify"],[20,81,20,79],[20,82,20,80,"key"],[20,85,20,83],[20,86,20,84],[20,123,20,121],[20,124,20,122],[21,6,21,4],[22,6,22,4],[22,12,22,10,"resolved"],[22,20,22,18],[22,23,22,21],[22,24,22,22],[22,25,22,23],[22,27,22,25,"_nodePath"],[22,36,22,34],[22,37,22,35,"join"],[22,41,22,39],[22,43,22,41,"opts"],[22,47,22,45],[22,48,22,46,"base"],[22,52,22,50],[22,54,22,52,"key"],[22,57,22,55],[22,58,22,56,"replace"],[22,65,22,63],[22,66,22,64],[22,70,22,68],[22,72,22,70],[22,75,22,73],[22,76,22,74],[22,77,22,75],[23,6,23,4],[23,13,23,11,"resolved"],[23,21,23,19],[24,4,24,2],[24,5,24,3],[25,4,25,2],[25,11,25,9],[26,6,26,4,"name"],[26,10,26,8],[26,12,26,10,"DRIVER_NAME"],[26,23,26,21],[27,6,27,4,"options"],[27,13,27,11],[27,15,27,13,"opts"],[27,19,27,17],[28,6,28,4,"flags"],[28,11,28,9],[28,13,28,11],[29,8,29,6,"maxDepth"],[29,16,29,14],[29,18,29,16],[30,6,30,4],[30,7,30,5],[31,6,31,4,"hasItem"],[31,13,31,11,"hasItem"],[31,14,31,12,"key"],[31,17,31,15],[31,19,31,17],[32,8,32,6],[32,15,32,13],[32,16,32,14],[32,17,32,15],[32,19,32,17,"_nodeFs"],[32,26,32,24],[32,27,32,25,"existsSync"],[32,37,32,35],[32,39,32,37,"r"],[32,40,32,38],[32,41,32,39,"key"],[32,44,32,42],[32,45,32,43],[32,46,32,44],[33,6,33,4],[33,7,33,5],[34,6,34,4,"getItem"],[34,13,34,11,"getItem"],[34,14,34,12,"key"],[34,17,34,15],[34,19,34,17],[35,8,35,6],[35,15,35,13],[35,16,35,14],[35,17,35,15],[35,19,35,17,"_nodeFs2"],[35,27,35,25],[35,28,35,26,"readFile"],[35,36,35,34],[35,38,35,36,"r"],[35,39,35,37],[35,40,35,38,"key"],[35,43,35,41],[35,44,35,42],[35,46,35,44],[35,52,35,50],[35,53,35,51],[36,6,36,4],[36,7,36,5],[37,6,37,4,"getItemRaw"],[37,16,37,14,"getItemRaw"],[37,17,37,15,"key"],[37,20,37,18],[37,22,37,20],[38,8,38,6],[38,15,38,13],[38,16,38,14],[38,17,38,15],[38,19,38,17,"_nodeFs2"],[38,27,38,25],[38,28,38,26,"readFile"],[38,36,38,34],[38,38,38,36,"r"],[38,39,38,37],[38,40,38,38,"key"],[38,43,38,41],[38,44,38,42],[38,45,38,43],[39,6,39,4],[39,7,39,5],[40,6,40,4],[40,12,40,10,"getMeta"],[40,19,40,17,"getMeta"],[40,20,40,18,"key"],[40,23,40,21],[40,25,40,23],[41,8,41,6],[41,14,41,12],[42,10,42,8,"atime"],[42,15,42,13],[43,10,43,8,"mtime"],[43,15,43,13],[44,10,44,8,"size"],[44,14,44,12],[45,10,45,8,"birthtime"],[45,19,45,17],[46,10,46,8,"ctime"],[47,8,47,6],[47,9,47,7],[47,12,47,10],[47,18,47,16,"_nodeFs"],[47,25,47,23],[47,26,47,24,"promises"],[47,34,47,32],[47,35,47,33,"stat"],[47,39,47,37],[47,40,47,38,"r"],[47,41,47,39],[47,42,47,40,"key"],[47,45,47,43],[47,46,47,44],[47,47,47,45],[47,48,47,46,"catch"],[47,53,47,51],[47,54,47,52],[47,61,47,59],[47,62,47,60],[47,63,47,61],[47,64,47,62],[47,65,47,63],[48,8,48,6],[48,15,48,13],[49,10,49,8,"atime"],[49,15,49,13],[50,10,50,8,"mtime"],[50,15,50,13],[51,10,51,8,"size"],[51,14,51,12],[52,10,52,8,"birthtime"],[52,19,52,17],[53,10,53,8,"ctime"],[54,8,54,6],[54,9,54,7],[55,6,55,4],[55,7,55,5],[56,6,56,4,"setItem"],[56,13,56,11,"setItem"],[56,14,56,12,"key"],[56,17,56,15],[56,19,56,17,"value"],[56,24,56,22],[56,26,56,24],[57,8,57,6],[57,12,57,10,"opts"],[57,16,57,14],[57,17,57,15,"readOnly"],[57,25,57,23],[57,27,57,25],[58,10,58,8],[59,8,59,6],[60,8,60,6],[60,15,60,13],[60,16,60,14],[60,17,60,15],[60,19,60,17,"_nodeFs2"],[60,27,60,25],[60,28,60,26,"writeFile"],[60,37,60,35],[60,39,60,37,"r"],[60,40,60,38],[60,41,60,39,"key"],[60,44,60,42],[60,45,60,43],[60,47,60,45,"value"],[60,52,60,50],[60,54,60,52],[60,60,60,58],[60,61,60,59],[61,6,61,4],[61,7,61,5],[62,6,62,4,"setItemRaw"],[62,16,62,14,"setItemRaw"],[62,17,62,15,"key"],[62,20,62,18],[62,22,62,20,"value"],[62,27,62,25],[62,29,62,27],[63,8,63,6],[63,12,63,10,"opts"],[63,16,63,14],[63,17,63,15,"readOnly"],[63,25,63,23],[63,27,63,25],[64,10,64,8],[65,8,65,6],[66,8,66,6],[66,15,66,13],[66,16,66,14],[66,17,66,15],[66,19,66,17,"_nodeFs2"],[66,27,66,25],[66,28,66,26,"writeFile"],[66,37,66,35],[66,39,66,37,"r"],[66,40,66,38],[66,41,66,39,"key"],[66,44,66,42],[66,45,66,43],[66,47,66,45,"value"],[66,52,66,50],[66,53,66,51],[67,6,67,4],[67,7,67,5],[68,6,68,4,"removeItem"],[68,16,68,14,"removeItem"],[68,17,68,15,"key"],[68,20,68,18],[68,22,68,20],[69,8,69,6],[69,12,69,10,"opts"],[69,16,69,14],[69,17,69,15,"readOnly"],[69,25,69,23],[69,27,69,25],[70,10,70,8],[71,8,71,6],[72,8,72,6],[72,15,72,13],[72,16,72,14],[72,17,72,15],[72,19,72,17,"_nodeFs2"],[72,27,72,25],[72,28,72,26,"unlink"],[72,34,72,32],[72,36,72,34,"r"],[72,37,72,35],[72,38,72,36,"key"],[72,41,72,39],[72,42,72,40],[72,43,72,41],[73,6,73,4],[73,7,73,5],[74,6,74,4,"getKeys"],[74,13,74,11,"getKeys"],[74,14,74,12,"_base"],[74,19,74,17],[74,21,74,19,"topts"],[74,26,74,24],[74,28,74,26],[75,8,75,6],[75,15,75,13],[75,16,75,14],[75,17,75,15],[75,19,75,17,"_nodeFs2"],[75,27,75,25],[75,28,75,26,"readdirRecursive"],[75,44,75,42],[75,46,75,44,"r"],[75,47,75,45],[75,48,75,46],[75,51,75,49],[75,52,75,50],[75,54,75,52,"opts"],[75,58,75,56],[75,59,75,57,"ignore"],[75,65,75,63],[75,67,75,65,"topts"],[75,72,75,70],[75,74,75,72,"maxDepth"],[75,82,75,80],[75,83,75,81],[76,6,76,4],[76,7,76,5],[77,6,77,4],[77,12,77,10,"clear"],[77,17,77,15,"clear"],[77,18,77,15],[77,20,77,18],[78,8,78,6],[78,12,78,10,"opts"],[78,16,78,14],[78,17,78,15,"readOnly"],[78,25,78,23],[78,29,78,27,"opts"],[78,33,78,31],[78,34,78,32,"noClear"],[78,41,78,39],[78,43,78,41],[79,10,79,8],[80,8,80,6],[81,8,81,6],[81,14,81,12],[81,15,81,13],[81,16,81,14],[81,18,81,16,"_nodeFs2"],[81,26,81,24],[81,27,81,25,"rmRecursive"],[81,38,81,36],[81,40,81,38,"r"],[81,41,81,39],[81,42,81,40],[81,45,81,43],[81,46,81,44],[81,47,81,45],[82,6,82,4],[83,4,83,2],[83,5,83,3],[84,2,84,0],[84,3,84,1],[84,4,84,2],[85,0,84,3],[85,3]],"functionMap":{"names":["<global>","<anonymous>","r","hasItem","getItem","getItemRaw","getMeta","_nodeFs.promises.stat._catch$argument_0","setItem","setItemRaw","removeItem","getKeys","clear"],"mappings":"AAA;0CCY;YCK;GDM;IEO;KFE;IGC;KHE;IIC;KJE;IKC;oDCO,UD;KLQ;IOC;KPK;IQC;KRK;ISC;KTK;IUC;KVE;IWC;KXK;CDE"},"hasCjsExports":true},"type":"js/module"}]}