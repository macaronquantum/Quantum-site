{"dependencies":[{"name":"ox/Hex","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":94},"end":{"line":2,"column":30,"index":124}}],"key":"12m2IiLiyIS64ihOCr/Gsho2SVQ=","exportNames":["*"],"imports":1}},{"name":"ox/tempo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":125},"end":{"line":3,"column":103,"index":228}}],"key":"qec4CfAum1L9krS3rQhIiaYgLv8=","exportNames":["*"],"imports":1}},{"name":"../accounts/utils/parseAccount.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":229},"end":{"line":4,"column":65,"index":294}}],"key":"k2EhIWeFagXooa0f2f9qgk4HRXw=","exportNames":["*"],"imports":1}},{"name":"../utils/formatters/transaction.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":295},"end":{"line":5,"column":97,"index":392}}],"key":"4c6IE1L8O5MfYLDPzewpscJEZE4=","exportNames":["*"],"imports":1}},{"name":"../utils/formatters/transactionReceipt.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":393},"end":{"line":6,"column":118,"index":511}}],"key":"yELcfKbE6aWC/7wP/O3XVtZIaAo=","exportNames":["*"],"imports":1}},{"name":"../utils/formatters/transactionRequest.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":512},"end":{"line":7,"column":118,"index":630}}],"key":"ZZdpIN4tbjNQBdCfY0/k6i04rfM=","exportNames":["*"],"imports":1}},{"name":"./Transaction.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":631},"end":{"line":8,"column":44,"index":675}}],"key":"Lu4+ZHRivJXs5rF/dusqCSvv/Ok=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.formatTransaction = formatTransaction;\n  exports.formatTransactionReceipt = formatTransactionReceipt;\n  exports.formatTransactionRequest = formatTransactionRequest;\n  var _oxHex = require(_dependencyMap[0], \"ox/Hex\");\n  var Hex = _interopNamespace(_oxHex);\n  var _oxTempo = require(_dependencyMap[1], \"ox/tempo\");\n  var _accountsUtilsParseAccountJs = require(_dependencyMap[2], \"../accounts/utils/parseAccount.js\");\n  var _utilsFormattersTransactionJs = require(_dependencyMap[3], \"../utils/formatters/transaction.js\");\n  var _utilsFormattersTransactionReceiptJs = require(_dependencyMap[4], \"../utils/formatters/transactionReceipt.js\");\n  var _utilsFormattersTransactionRequestJs = require(_dependencyMap[5], \"../utils/formatters/transactionRequest.js\");\n  var _TransactionJs = require(_dependencyMap[6], \"./Transaction.js\");\n  // TODO: Find opportunities to make this file less duplicated + more simplified with Viem v3.\n\n  function formatTransaction(transaction) {\n    if (!(0, _TransactionJs.isTempo)(transaction)) return (0, _utilsFormattersTransactionJs.formatTransaction)(transaction);\n    const {\n      feePayerSignature,\n      gasPrice: _,\n      nonce,\n      ...tx\n    } = _oxTempo.Transaction.fromRpc(transaction);\n    return {\n      ...tx,\n      accessList: tx.accessList,\n      feePayerSignature: feePayerSignature ? {\n        r: Hex.fromNumber(feePayerSignature.r, {\n          size: 32\n        }),\n        s: Hex.fromNumber(feePayerSignature.s, {\n          size: 32\n        }),\n        v: BigInt(feePayerSignature.v ?? 27),\n        yParity: feePayerSignature.yParity\n      } : undefined,\n      nonce: Number(nonce),\n      typeHex: _oxTempo.Transaction.toRpcType[tx.type],\n      type: tx.type\n    };\n  }\n  function formatTransactionReceipt(receipt) {\n    return (0, _utilsFormattersTransactionReceiptJs.formatTransactionReceipt)(receipt);\n  }\n  function formatTransactionRequest(r, action) {\n    const request = r;\n    const account = request.account ? (0, _accountsUtilsParseAccountJs.parseAccount)(request.account) : undefined;\n    // If the request is not a Tempo transaction, route to Viem formatter.\n    if (!(0, _TransactionJs.isTempo)(request)) return (0, _utilsFormattersTransactionRequestJs.formatTransactionRequest)(r, action);\n    if (action) request.calls = request.calls ?? [{\n      to: r.to || (!r.data || r.data === '0x' ? '0x0000000000000000000000000000000000000000' : undefined),\n      value: r.value,\n      data: r.data\n    }];\n    // If we have marked the transaction as intended to be paid\n    // by a fee payer (feePayer: true), we will not use the fee token\n    // as the fee payer will choose their fee token.\n    if (request.feePayer === true) delete request.feeToken;\n    const rpc = _oxTempo.TransactionRequest.toRpc({\n      ...request,\n      type: 'tempo'\n    });\n    if (action === 'estimateGas') {\n      rpc.maxFeePerGas = undefined;\n      rpc.maxPriorityFeePerGas = undefined;\n    }\n    rpc.to = undefined;\n    rpc.data = undefined;\n    rpc.value = undefined;\n    const [keyType, keyData] = (() => {\n      const type = account && 'keyType' in account ? account.keyType : account?.source;\n      if (!type) return [undefined, undefined];\n      if (type === 'webAuthn')\n        // TODO: derive correct bytes size of key data based on webauthn create metadata.\n        return ['webAuthn', `0x${'ff'.repeat(1400)}`];\n      if (['p256', 'secp256k1'].includes(type)) return [type, undefined];\n      return [undefined, undefined];\n    })();\n    const keyId = account && 'accessKeyAddress' in account ? account.accessKeyAddress : undefined;\n    return {\n      ...rpc,\n      ...(keyData ? {\n        keyData\n      } : {}),\n      ...(keyId ? {\n        keyId\n      } : {}),\n      ...(keyType ? {\n        keyType\n      } : {}),\n      ...(request.feePayer ? {\n        feePayer: typeof request.feePayer === 'object' ? (0, _accountsUtilsParseAccountJs.parseAccount)(request.feePayer) : request.feePayer\n      } : {})\n    };\n  }\n});","lineCount":115,"map":[[22,2,9,0,"exports"],[22,9,9,0],[22,10,9,0,"formatTransaction"],[22,27,9,0],[22,30,9,0,"formatTransaction"],[22,47,9,0],[23,2,29,0,"exports"],[23,9,29,0],[23,10,29,0,"formatTransactionReceipt"],[23,34,29,0],[23,37,29,0,"formatTransactionReceipt"],[23,61,29,0],[24,2,32,0,"exports"],[24,9,32,0],[24,10,32,0,"formatTransactionRequest"],[24,34,32,0],[24,37,32,0,"formatTransactionRequest"],[24,61,32,0],[25,2,2,0],[25,6,2,0,"_oxHex"],[25,12,2,0],[25,15,2,0,"require"],[25,22,2,0],[25,23,2,0,"_dependencyMap"],[25,37,2,0],[26,2,2,0],[26,6,2,0,"Hex"],[26,9,2,0],[26,12,2,0,"_interopNamespace"],[26,29,2,0],[26,30,2,0,"_oxHex"],[26,36,2,0],[27,2,3,0],[27,6,3,0,"_oxTempo"],[27,14,3,0],[27,17,3,0,"require"],[27,24,3,0],[27,25,3,0,"_dependencyMap"],[27,39,3,0],[28,2,4,0],[28,6,4,0,"_accountsUtilsParseAccountJs"],[28,34,4,0],[28,37,4,0,"require"],[28,44,4,0],[28,45,4,0,"_dependencyMap"],[28,59,4,0],[29,2,5,0],[29,6,5,0,"_utilsFormattersTransactionJs"],[29,35,5,0],[29,38,5,0,"require"],[29,45,5,0],[29,46,5,0,"_dependencyMap"],[29,60,5,0],[30,2,6,0],[30,6,6,0,"_utilsFormattersTransactionReceiptJs"],[30,42,6,0],[30,45,6,0,"require"],[30,52,6,0],[30,53,6,0,"_dependencyMap"],[30,67,6,0],[31,2,7,0],[31,6,7,0,"_utilsFormattersTransactionRequestJs"],[31,42,7,0],[31,45,7,0,"require"],[31,52,7,0],[31,53,7,0,"_dependencyMap"],[31,67,7,0],[32,2,8,0],[32,6,8,0,"_TransactionJs"],[32,20,8,0],[32,23,8,0,"require"],[32,30,8,0],[32,31,8,0,"_dependencyMap"],[32,45,8,0],[33,2,1,0],[35,2,9,7],[35,11,9,16,"formatTransaction"],[35,28,9,33,"formatTransaction"],[35,29,9,34,"transaction"],[35,40,9,45],[35,42,9,47],[36,4,10,4],[36,8,10,8],[36,9,10,9],[36,13,10,9,"isTempo"],[36,27,10,16],[36,28,10,16,"isTempo"],[36,35,10,16],[36,37,10,17,"transaction"],[36,48,10,28],[36,49,10,29],[36,51,11,8],[36,58,11,15],[36,62,11,15,"viem_formatTransaction"],[36,91,11,37],[36,92,11,37,"formatTransaction"],[36,109,11,37],[36,111,11,38,"transaction"],[36,122,11,49],[36,123,11,50],[37,4,12,4],[37,10,12,10],[38,6,12,12,"feePayerSignature"],[38,23,12,29],[39,6,12,31,"gasPrice"],[39,14,12,39],[39,16,12,41,"_"],[39,17,12,42],[40,6,12,44,"nonce"],[40,11,12,49],[41,6,12,51],[41,9,12,54,"tx"],[42,4,12,57],[42,5,12,58],[42,8,12,61,"ox_Transaction"],[42,16,12,75],[42,17,12,75,"Transaction"],[42,28,12,75],[42,29,12,76,"fromRpc"],[42,36,12,83],[42,37,12,84,"transaction"],[42,48,12,95],[42,49,12,96],[43,4,13,4],[43,11,13,11],[44,6,14,8],[44,9,14,11,"tx"],[44,11,14,13],[45,6,15,8,"accessList"],[45,16,15,18],[45,18,15,20,"tx"],[45,20,15,22],[45,21,15,23,"accessList"],[45,31,15,33],[46,6,16,8,"feePayerSignature"],[46,23,16,25],[46,25,16,27,"feePayerSignature"],[46,42,16,44],[46,45,17,14],[47,8,18,16,"r"],[47,9,18,17],[47,11,18,19,"Hex"],[47,14,18,22],[47,15,18,23,"fromNumber"],[47,25,18,33],[47,26,18,34,"feePayerSignature"],[47,43,18,51],[47,44,18,52,"r"],[47,45,18,53],[47,47,18,55],[48,10,18,57,"size"],[48,14,18,61],[48,16,18,63],[49,8,18,66],[49,9,18,67],[49,10,18,68],[50,8,19,16,"s"],[50,9,19,17],[50,11,19,19,"Hex"],[50,14,19,22],[50,15,19,23,"fromNumber"],[50,25,19,33],[50,26,19,34,"feePayerSignature"],[50,43,19,51],[50,44,19,52,"s"],[50,45,19,53],[50,47,19,55],[51,10,19,57,"size"],[51,14,19,61],[51,16,19,63],[52,8,19,66],[52,9,19,67],[52,10,19,68],[53,8,20,16,"v"],[53,9,20,17],[53,11,20,19,"BigInt"],[53,17,20,25],[53,18,20,26,"feePayerSignature"],[53,35,20,43],[53,36,20,44,"v"],[53,37,20,45],[53,41,20,49],[53,43,20,51],[53,44,20,52],[54,8,21,16,"yParity"],[54,15,21,23],[54,17,21,25,"feePayerSignature"],[54,34,21,42],[54,35,21,43,"yParity"],[55,6,22,12],[55,7,22,13],[55,10,23,14,"undefined"],[55,19,23,23],[56,6,24,8,"nonce"],[56,11,24,13],[56,13,24,15,"Number"],[56,19,24,21],[56,20,24,22,"nonce"],[56,25,24,27],[56,26,24,28],[57,6,25,8,"typeHex"],[57,13,25,15],[57,15,25,17,"ox_Transaction"],[57,23,25,31],[57,24,25,31,"Transaction"],[57,35,25,31],[57,36,25,32,"toRpcType"],[57,45,25,41],[57,46,25,42,"tx"],[57,48,25,44],[57,49,25,45,"type"],[57,53,25,49],[57,54,25,50],[58,6,26,8,"type"],[58,10,26,12],[58,12,26,14,"tx"],[58,14,26,16],[58,15,26,17,"type"],[59,4,27,4],[59,5,27,5],[60,2,28,0],[61,2,29,7],[61,11,29,16,"formatTransactionReceipt"],[61,35,29,40,"formatTransactionReceipt"],[61,36,29,41,"receipt"],[61,43,29,48],[61,45,29,50],[62,4,30,4],[62,11,30,11],[62,15,30,11,"viem_formatTransactionReceipt"],[62,51,30,40],[62,52,30,40,"formatTransactionReceipt"],[62,76,30,40],[62,78,30,41,"receipt"],[62,85,30,48],[62,86,30,49],[63,2,31,0],[64,2,32,7],[64,11,32,16,"formatTransactionRequest"],[64,35,32,40,"formatTransactionRequest"],[64,36,32,41,"r"],[64,37,32,42],[64,39,32,44,"action"],[64,45,32,50],[64,47,32,52],[65,4,33,4],[65,10,33,10,"request"],[65,17,33,17],[65,20,33,20,"r"],[65,21,33,21],[66,4,34,4],[66,10,34,10,"account"],[66,17,34,17],[66,20,34,20,"request"],[66,27,34,27],[66,28,34,28,"account"],[66,35,34,35],[66,38,35,10],[66,42,35,10,"parseAccount"],[66,70,35,22],[66,71,35,22,"parseAccount"],[66,83,35,22],[66,85,35,23,"request"],[66,92,35,30],[66,93,35,31,"account"],[66,100,35,38],[66,101,35,39],[66,104,36,10,"undefined"],[66,113,36,19],[67,4,37,4],[68,4,38,4],[68,8,38,8],[68,9,38,9],[68,13,38,9,"isTempo"],[68,27,38,16],[68,28,38,16,"isTempo"],[68,35,38,16],[68,37,38,17,"request"],[68,44,38,24],[68,45,38,25],[68,47,39,8],[68,54,39,15],[68,58,39,15,"viem_formatTransactionRequest"],[68,94,39,44],[68,95,39,44,"formatTransactionRequest"],[68,119,39,44],[68,121,39,45,"r"],[68,122,39,46],[68,124,39,48,"action"],[68,130,39,54],[68,131,39,55],[69,4,40,4],[69,8,40,8,"action"],[69,14,40,14],[69,16,41,8,"request"],[69,23,41,15],[69,24,41,16,"calls"],[69,29,41,21],[69,32,41,24,"request"],[69,39,41,31],[69,40,41,32,"calls"],[69,45,41,37],[69,49,41,41],[69,50,42,12],[70,6,43,16,"to"],[70,8,43,18],[70,10,43,20,"r"],[70,11,43,21],[70,12,43,22,"to"],[70,14,43,24],[70,19,44,21],[70,20,44,22,"r"],[70,21,44,23],[70,22,44,24,"data"],[70,26,44,28],[70,30,44,32,"r"],[70,31,44,33],[70,32,44,34,"data"],[70,36,44,38],[70,41,44,43],[70,45,44,47],[70,48,45,26],[70,92,45,70],[70,95,46,26,"undefined"],[70,104,46,35],[70,105,46,36],[71,6,47,16,"value"],[71,11,47,21],[71,13,47,23,"r"],[71,14,47,24],[71,15,47,25,"value"],[71,20,47,30],[72,6,48,16,"data"],[72,10,48,20],[72,12,48,22,"r"],[72,13,48,23],[72,14,48,24,"data"],[73,4,49,12],[73,5,49,13],[73,6,50,9],[74,4,51,4],[75,4,52,4],[76,4,53,4],[77,4,54,4],[77,8,54,8,"request"],[77,15,54,15],[77,16,54,16,"feePayer"],[77,24,54,24],[77,29,54,29],[77,33,54,33],[77,35,55,8],[77,42,55,15,"request"],[77,49,55,22],[77,50,55,23,"feeToken"],[77,58,55,31],[78,4,56,4],[78,10,56,10,"rpc"],[78,13,56,13],[78,16,56,16,"ox_TransactionRequest"],[78,24,56,37],[78,25,56,37,"TransactionRequest"],[78,43,56,37],[78,44,56,38,"toRpc"],[78,49,56,43],[78,50,56,44],[79,6,57,8],[79,9,57,11,"request"],[79,16,57,18],[80,6,58,8,"type"],[80,10,58,12],[80,12,58,14],[81,4,59,4],[81,5,59,5],[81,6,59,6],[82,4,60,4],[82,8,60,8,"action"],[82,14,60,14],[82,19,60,19],[82,32,60,32],[82,34,60,34],[83,6,61,8,"rpc"],[83,9,61,11],[83,10,61,12,"maxFeePerGas"],[83,22,61,24],[83,25,61,27,"undefined"],[83,34,61,36],[84,6,62,8,"rpc"],[84,9,62,11],[84,10,62,12,"maxPriorityFeePerGas"],[84,30,62,32],[84,33,62,35,"undefined"],[84,42,62,44],[85,4,63,4],[86,4,64,4,"rpc"],[86,7,64,7],[86,8,64,8,"to"],[86,10,64,10],[86,13,64,13,"undefined"],[86,22,64,22],[87,4,65,4,"rpc"],[87,7,65,7],[87,8,65,8,"data"],[87,12,65,12],[87,15,65,15,"undefined"],[87,24,65,24],[88,4,66,4,"rpc"],[88,7,66,7],[88,8,66,8,"value"],[88,13,66,13],[88,16,66,16,"undefined"],[88,25,66,25],[89,4,67,4],[89,10,67,10],[89,11,67,11,"keyType"],[89,18,67,18],[89,20,67,20,"keyData"],[89,27,67,27],[89,28,67,28],[89,31,67,31],[89,32,67,32],[89,38,67,38],[90,6,68,8],[90,12,68,14,"type"],[90,16,68,18],[90,19,68,21,"account"],[90,26,68,28],[90,30,68,32],[90,39,68,41],[90,43,68,45,"account"],[90,50,68,52],[90,53,68,55,"account"],[90,60,68,62],[90,61,68,63,"keyType"],[90,68,68,70],[90,71,68,73,"account"],[90,78,68,80],[90,80,68,82,"source"],[90,86,68,88],[91,6,69,8],[91,10,69,12],[91,11,69,13,"type"],[91,15,69,17],[91,17,70,12],[91,24,70,19],[91,25,70,20,"undefined"],[91,34,70,29],[91,36,70,31,"undefined"],[91,45,70,40],[91,46,70,41],[92,6,71,8],[92,10,71,12,"type"],[92,14,71,16],[92,19,71,21],[92,29,71,31],[93,8,72,12],[94,8,73,12],[94,15,73,19],[94,16,73,20],[94,26,73,30],[94,28,73,32],[94,33,73,37],[94,37,73,41],[94,38,73,42,"repeat"],[94,44,73,48],[94,45,73,49],[94,49,73,53],[94,50,73,54],[94,52,73,56],[94,53,73,57],[95,6,74,8],[95,10,74,12],[95,11,74,13],[95,17,74,19],[95,19,74,21],[95,30,74,32],[95,31,74,33],[95,32,74,34,"includes"],[95,40,74,42],[95,41,74,43,"type"],[95,45,74,47],[95,46,74,48],[95,48,75,12],[95,55,75,19],[95,56,75,20,"type"],[95,60,75,24],[95,62,75,26,"undefined"],[95,71,75,35],[95,72,75,36],[96,6,76,8],[96,13,76,15],[96,14,76,16,"undefined"],[96,23,76,25],[96,25,76,27,"undefined"],[96,34,76,36],[96,35,76,37],[97,4,77,4],[97,5,77,5],[97,7,77,7],[97,8,77,8],[98,4,78,4],[98,10,78,10,"keyId"],[98,15,78,15],[98,18,78,18,"account"],[98,25,78,25],[98,29,78,29],[98,47,78,47],[98,51,78,51,"account"],[98,58,78,58],[98,61,79,10,"account"],[98,68,79,17],[98,69,79,18,"accessKeyAddress"],[98,85,79,34],[98,88,80,10,"undefined"],[98,97,80,19],[99,4,81,4],[99,11,81,11],[100,6,82,8],[100,9,82,11,"rpc"],[100,12,82,14],[101,6,83,8],[101,10,83,12,"keyData"],[101,17,83,19],[101,20,83,22],[102,8,83,24,"keyData"],[103,6,83,32],[103,7,83,33],[103,10,83,36],[103,11,83,37],[103,12,83,38],[103,13,83,39],[104,6,84,8],[104,10,84,12,"keyId"],[104,15,84,17],[104,18,84,20],[105,8,84,22,"keyId"],[106,6,84,28],[106,7,84,29],[106,10,84,32],[106,11,84,33],[106,12,84,34],[106,13,84,35],[107,6,85,8],[107,10,85,12,"keyType"],[107,17,85,19],[107,20,85,22],[108,8,85,24,"keyType"],[109,6,85,32],[109,7,85,33],[109,10,85,36],[109,11,85,37],[109,12,85,38],[109,13,85,39],[110,6,86,8],[110,10,86,12,"request"],[110,17,86,19],[110,18,86,20,"feePayer"],[110,26,86,28],[110,29,87,14],[111,8,88,16,"feePayer"],[111,16,88,24],[111,18,88,26],[111,25,88,33,"request"],[111,32,88,40],[111,33,88,41,"feePayer"],[111,41,88,49],[111,46,88,54],[111,54,88,62],[111,57,89,22],[111,61,89,22,"parseAccount"],[111,89,89,34],[111,90,89,34,"parseAccount"],[111,102,89,34],[111,104,89,35,"request"],[111,111,89,42],[111,112,89,43,"feePayer"],[111,120,89,51],[111,121,89,52],[111,124,90,22,"request"],[111,131,90,29],[111,132,90,30,"feePayer"],[112,6,91,12],[112,7,91,13],[112,10,92,14],[112,11,92,15],[112,12,92,16],[113,4,93,4],[113,5,93,5],[114,2,94,0],[115,0,94,1],[115,3]],"functionMap":{"names":["<global>","formatTransaction","formatTransactionReceipt","formatTransactionRequest","<anonymous>"],"mappings":"AAA;OCQ;CDmB;OEC;CFE;OGC;gCCmC;KDU;CHiB"},"hasCjsExports":false},"type":"js/module"}]}