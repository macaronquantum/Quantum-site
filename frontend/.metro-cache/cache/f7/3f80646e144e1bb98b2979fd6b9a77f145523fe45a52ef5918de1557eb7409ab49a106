{"dependencies":[{"name":"../../errors/fee.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"L7vcI8VCPiRB8rGcOnkI/UQK4ik=","exportNames":["*"],"imports":1}},{"name":"../../utils/encoding/fromHex.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":63,"index":132}}],"key":"uknfOLKh4Zy1p0iweRTTuAj/fYc=","exportNames":["*"],"imports":1}},{"name":"../../utils/getAction.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":133},"end":{"line":3,"column":53,"index":186}}],"key":"vt4scbNyA2t/tyY0oQJI6AZPJS4=","exportNames":["*"],"imports":1}},{"name":"./getBlock.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":187},"end":{"line":4,"column":41,"index":228}}],"key":"X3GxNlDfuk8KPunhMJ9QgQ9r0Yc=","exportNames":["*"],"imports":1}},{"name":"./getGasPrice.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":229},"end":{"line":5,"column":47,"index":276}}],"key":"BmeDHdsmgPcXs6OK2DMw7OIs3c4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.estimateMaxPriorityFeePerGas = estimateMaxPriorityFeePerGas;\n  exports.internal_estimateMaxPriorityFeePerGas = internal_estimateMaxPriorityFeePerGas;\n  var _errorsFeeJs = require(_dependencyMap[0], \"../../errors/fee.js\");\n  var _utilsEncodingFromHexJs = require(_dependencyMap[1], \"../../utils/encoding/fromHex.js\");\n  var _utilsGetActionJs = require(_dependencyMap[2], \"../../utils/getAction.js\");\n  var _getBlockJs = require(_dependencyMap[3], \"./getBlock.js\");\n  var _getGasPriceJs = require(_dependencyMap[4], \"./getGasPrice.js\");\n  /**\n   * Returns an estimate for the max priority fee per gas (in wei) for a\n   * transaction to be likely included in the next block.\n   * Defaults to [`chain.fees.defaultPriorityFee`](/docs/clients/chains#fees-defaultpriorityfee) if set.\n   *\n   * - Docs: https://viem.sh/docs/actions/public/estimateMaxPriorityFeePerGas\n   *\n   * @param client - Client to use\n   * @returns An estimate (in wei) for the max priority fee per gas. {@link EstimateMaxPriorityFeePerGasReturnType}\n   *\n   * @example\n   * import { createPublicClient, http } from 'viem'\n   * import { mainnet } from 'viem/chains'\n   * import { estimateMaxPriorityFeePerGas } from 'viem/actions'\n   *\n   * const client = createPublicClient({\n   *   chain: mainnet,\n   *   transport: http(),\n   * })\n   * const maxPriorityFeePerGas = await estimateMaxPriorityFeePerGas(client)\n   * // 10000000n\n   */\n  async function estimateMaxPriorityFeePerGas(client, args) {\n    return internal_estimateMaxPriorityFeePerGas(client, args);\n  }\n  async function internal_estimateMaxPriorityFeePerGas(client, args) {\n    const {\n      block: block_,\n      chain = client.chain,\n      request\n    } = args || {};\n    try {\n      const maxPriorityFeePerGas = chain?.fees?.maxPriorityFeePerGas ?? chain?.fees?.defaultPriorityFee;\n      if (typeof maxPriorityFeePerGas === 'function') {\n        const block = block_ || (await (0, _utilsGetActionJs.getAction)(client, _getBlockJs.getBlock, 'getBlock')({}));\n        const maxPriorityFeePerGas_ = await maxPriorityFeePerGas({\n          block,\n          client,\n          request\n        });\n        if (maxPriorityFeePerGas_ === null) throw new Error();\n        return maxPriorityFeePerGas_;\n      }\n      if (typeof maxPriorityFeePerGas !== 'undefined') return maxPriorityFeePerGas;\n      const maxPriorityFeePerGasHex = await client.request({\n        method: 'eth_maxPriorityFeePerGas'\n      });\n      return (0, _utilsEncodingFromHexJs.hexToBigInt)(maxPriorityFeePerGasHex);\n    } catch {\n      // If the RPC Provider does not support `eth_maxPriorityFeePerGas`\n      // fall back to calculating it manually via `gasPrice - baseFeePerGas`.\n      // See: https://github.com/ethereum/pm/issues/328#:~:text=eth_maxPriorityFeePerGas%20after%20London%20will%20effectively%20return%20eth_gasPrice%20%2D%20baseFee\n      const [block, gasPrice] = await Promise.all([block_ ? Promise.resolve(block_) : (0, _utilsGetActionJs.getAction)(client, _getBlockJs.getBlock, 'getBlock')({}), (0, _utilsGetActionJs.getAction)(client, _getGasPriceJs.getGasPrice, 'getGasPrice')({})]);\n      if (typeof block.baseFeePerGas !== 'bigint') throw new _errorsFeeJs.Eip1559FeesNotSupportedError();\n      const maxPriorityFeePerGas = gasPrice - block.baseFeePerGas;\n      if (maxPriorityFeePerGas < 0n) return 0n;\n      return maxPriorityFeePerGas;\n    }\n  }\n});","lineCount":73,"map":[[7,2,28,0,"exports"],[7,9,28,0],[7,10,28,0,"estimateMaxPriorityFeePerGas"],[7,38,28,0],[7,41,28,0,"estimateMaxPriorityFeePerGas"],[7,69,28,0],[8,2,31,0,"exports"],[8,9,31,0],[8,10,31,0,"internal_estimateMaxPriorityFeePerGas"],[8,47,31,0],[8,50,31,0,"internal_estimateMaxPriorityFeePerGas"],[8,87,31,0],[9,2,1,0],[9,6,1,0,"_errorsFeeJs"],[9,18,1,0],[9,21,1,0,"require"],[9,28,1,0],[9,29,1,0,"_dependencyMap"],[9,43,1,0],[10,2,2,0],[10,6,2,0,"_utilsEncodingFromHexJs"],[10,29,2,0],[10,32,2,0,"require"],[10,39,2,0],[10,40,2,0,"_dependencyMap"],[10,54,2,0],[11,2,3,0],[11,6,3,0,"_utilsGetActionJs"],[11,23,3,0],[11,26,3,0,"require"],[11,33,3,0],[11,34,3,0,"_dependencyMap"],[11,48,3,0],[12,2,4,0],[12,6,4,0,"_getBlockJs"],[12,17,4,0],[12,20,4,0,"require"],[12,27,4,0],[12,28,4,0,"_dependencyMap"],[12,42,4,0],[13,2,5,0],[13,6,5,0,"_getGasPriceJs"],[13,20,5,0],[13,23,5,0,"require"],[13,30,5,0],[13,31,5,0,"_dependencyMap"],[13,45,5,0],[14,2,6,0],[15,0,7,0],[16,0,8,0],[17,0,9,0],[18,0,10,0],[19,0,11,0],[20,0,12,0],[21,0,13,0],[22,0,14,0],[23,0,15,0],[24,0,16,0],[25,0,17,0],[26,0,18,0],[27,0,19,0],[28,0,20,0],[29,0,21,0],[30,0,22,0],[31,0,23,0],[32,0,24,0],[33,0,25,0],[34,0,26,0],[35,0,27,0],[36,2,28,7],[36,17,28,22,"estimateMaxPriorityFeePerGas"],[36,45,28,50,"estimateMaxPriorityFeePerGas"],[36,46,28,51,"client"],[36,52,28,57],[36,54,28,59,"args"],[36,58,28,63],[36,60,28,65],[37,4,29,4],[37,11,29,11,"internal_estimateMaxPriorityFeePerGas"],[37,48,29,48],[37,49,29,49,"client"],[37,55,29,55],[37,57,29,57,"args"],[37,61,29,61],[37,62,29,62],[38,2,30,0],[39,2,31,7],[39,17,31,22,"internal_estimateMaxPriorityFeePerGas"],[39,54,31,59,"internal_estimateMaxPriorityFeePerGas"],[39,55,31,60,"client"],[39,61,31,66],[39,63,31,68,"args"],[39,67,31,72],[39,69,31,74],[40,4,32,4],[40,10,32,10],[41,6,32,12,"block"],[41,11,32,17],[41,13,32,19,"block_"],[41,19,32,25],[42,6,32,27,"chain"],[42,11,32,32],[42,14,32,35,"client"],[42,20,32,41],[42,21,32,42,"chain"],[42,26,32,47],[43,6,32,49,"request"],[44,4,32,57],[44,5,32,58],[44,8,32,61,"args"],[44,12,32,65],[44,16,32,69],[44,17,32,70],[44,18,32,71],[45,4,33,4],[45,8,33,8],[46,6,34,8],[46,12,34,14,"maxPriorityFeePerGas"],[46,32,34,34],[46,35,34,37,"chain"],[46,40,34,42],[46,42,34,44,"fees"],[46,46,34,48],[46,48,34,50,"maxPriorityFeePerGas"],[46,68,34,70],[46,72,34,74,"chain"],[46,77,34,79],[46,79,34,81,"fees"],[46,83,34,85],[46,85,34,87,"defaultPriorityFee"],[46,103,34,105],[47,6,35,8],[47,10,35,12],[47,17,35,19,"maxPriorityFeePerGas"],[47,37,35,39],[47,42,35,44],[47,52,35,54],[47,54,35,56],[48,8,36,12],[48,14,36,18,"block"],[48,19,36,23],[48,22,36,26,"block_"],[48,28,36,32],[48,33,36,37],[48,39,36,43],[48,43,36,43,"getAction"],[48,60,36,52],[48,61,36,52,"getAction"],[48,70,36,52],[48,72,36,53,"client"],[48,78,36,59],[48,80,36,61,"getBlock"],[48,91,36,69],[48,92,36,69,"getBlock"],[48,100,36,69],[48,102,36,71],[48,112,36,81],[48,113,36,82],[48,114,36,83],[48,115,36,84],[48,116,36,85],[48,117,36,86],[48,118,36,87],[49,8,37,12],[49,14,37,18,"maxPriorityFeePerGas_"],[49,35,37,39],[49,38,37,42],[49,44,37,48,"maxPriorityFeePerGas"],[49,64,37,68],[49,65,37,69],[50,10,38,16,"block"],[50,15,38,21],[51,10,39,16,"client"],[51,16,39,22],[52,10,40,16,"request"],[53,8,41,12],[53,9,41,13],[53,10,41,14],[54,8,42,12],[54,12,42,16,"maxPriorityFeePerGas_"],[54,33,42,37],[54,38,42,42],[54,42,42,46],[54,44,43,16],[54,50,43,22],[54,54,43,26,"Error"],[54,59,43,31],[54,60,43,32],[54,61,43,33],[55,8,44,12],[55,15,44,19,"maxPriorityFeePerGas_"],[55,36,44,40],[56,6,45,8],[57,6,46,8],[57,10,46,12],[57,17,46,19,"maxPriorityFeePerGas"],[57,37,46,39],[57,42,46,44],[57,53,46,55],[57,55,47,12],[57,62,47,19,"maxPriorityFeePerGas"],[57,82,47,39],[58,6,48,8],[58,12,48,14,"maxPriorityFeePerGasHex"],[58,35,48,37],[58,38,48,40],[58,44,48,46,"client"],[58,50,48,52],[58,51,48,53,"request"],[58,58,48,60],[58,59,48,61],[59,8,49,12,"method"],[59,14,49,18],[59,16,49,20],[60,6,50,8],[60,7,50,9],[60,8,50,10],[61,6,51,8],[61,13,51,15],[61,17,51,15,"hexToBigInt"],[61,40,51,26],[61,41,51,26,"hexToBigInt"],[61,52,51,26],[61,54,51,27,"maxPriorityFeePerGasHex"],[61,77,51,50],[61,78,51,51],[62,4,52,4],[62,5,52,5],[62,6,53,4],[62,12,53,10],[63,6,54,8],[64,6,55,8],[65,6,56,8],[66,6,57,8],[66,12,57,14],[66,13,57,15,"block"],[66,18,57,20],[66,20,57,22,"gasPrice"],[66,28,57,30],[66,29,57,31],[66,32,57,34],[66,38,57,40,"Promise"],[66,45,57,47],[66,46,57,48,"all"],[66,49,57,51],[66,50,57,52],[66,51,58,12,"block_"],[66,57,58,18],[66,60,59,18,"Promise"],[66,67,59,25],[66,68,59,26,"resolve"],[66,75,59,33],[66,76,59,34,"block_"],[66,82,59,40],[66,83,59,41],[66,86,60,18],[66,90,60,18,"getAction"],[66,107,60,27],[66,108,60,27,"getAction"],[66,117,60,27],[66,119,60,28,"client"],[66,125,60,34],[66,127,60,36,"getBlock"],[66,138,60,44],[66,139,60,44,"getBlock"],[66,147,60,44],[66,149,60,46],[66,159,60,56],[66,160,60,57],[66,161,60,58],[66,162,60,59],[66,163,60,60],[66,164,60,61],[66,166,61,12],[66,170,61,12,"getAction"],[66,187,61,21],[66,188,61,21,"getAction"],[66,197,61,21],[66,199,61,22,"client"],[66,205,61,28],[66,207,61,30,"getGasPrice"],[66,221,61,41],[66,222,61,41,"getGasPrice"],[66,233,61,41],[66,235,61,43],[66,248,61,56],[66,249,61,57],[66,250,61,58],[66,251,61,59],[66,252,61,60],[66,253,61,61],[66,254,62,9],[66,255,62,10],[67,6,63,8],[67,10,63,12],[67,17,63,19,"block"],[67,22,63,24],[67,23,63,25,"baseFeePerGas"],[67,36,63,38],[67,41,63,43],[67,49,63,51],[67,51,64,12],[67,57,64,18],[67,61,64,22,"Eip1559FeesNotSupportedError"],[67,73,64,50],[67,74,64,50,"Eip1559FeesNotSupportedError"],[67,102,64,50],[67,103,64,51],[67,104,64,52],[68,6,65,8],[68,12,65,14,"maxPriorityFeePerGas"],[68,32,65,34],[68,35,65,37,"gasPrice"],[68,43,65,45],[68,46,65,48,"block"],[68,51,65,53],[68,52,65,54,"baseFeePerGas"],[68,65,65,67],[69,6,66,8],[69,10,66,12,"maxPriorityFeePerGas"],[69,30,66,32],[69,33,66,35],[69,35,66,37],[69,37,67,12],[69,44,67,19],[69,46,67,21],[70,6,68,8],[70,13,68,15,"maxPriorityFeePerGas"],[70,33,68,35],[71,4,69,4],[72,2,70,0],[73,0,70,1],[73,3]],"functionMap":{"names":["<global>","estimateMaxPriorityFeePerGas","internal_estimateMaxPriorityFeePerGas"],"mappings":"AAA;OC2B;CDE;OEC;CFuC"},"hasCjsExports":false},"type":"js/module"}]}