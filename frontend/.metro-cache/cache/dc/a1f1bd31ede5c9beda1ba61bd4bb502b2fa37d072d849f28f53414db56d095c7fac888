{"dependencies":[{"name":"../../constants/abis.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":58,"index":58}}],"key":"LZvwvaZmwAX6SyAqVHRt5iP6qx8=","exportNames":["*"],"imports":1}},{"name":"../../constants/solidity.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":59},"end":{"line":2,"column":60,"index":119}}],"key":"vayO3TqlnMtVxvBJjwFsILD/Ucw=","exportNames":["*"],"imports":1}},{"name":"../abi/decodeFunctionData.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":120},"end":{"line":3,"column":66,"index":186}}],"key":"dO5ss/BNw700VkKczE1w5vSNzd0=","exportNames":["*"],"imports":1}},{"name":"../abi/encodeErrorResult.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":187},"end":{"line":4,"column":64,"index":251}}],"key":"gJdLJGW9ZzRMj40tWx8DbS8C/kc=","exportNames":["*"],"imports":1}},{"name":"../abi/encodeFunctionResult.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":252},"end":{"line":5,"column":70,"index":322}}],"key":"MPINbiXVOZXqMOf85w3gKCbelHQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"localBatchGatewayUrl\", {\n    enumerable: true,\n    get: function () {\n      return localBatchGatewayUrl;\n    }\n  });\n  exports.localBatchGatewayRequest = localBatchGatewayRequest;\n  var _constantsAbisJs = require(_dependencyMap[0], \"../../constants/abis.js\");\n  var _constantsSolidityJs = require(_dependencyMap[1], \"../../constants/solidity.js\");\n  var _abiDecodeFunctionDataJs = require(_dependencyMap[2], \"../abi/decodeFunctionData.js\");\n  var _abiEncodeErrorResultJs = require(_dependencyMap[3], \"../abi/encodeErrorResult.js\");\n  var _abiEncodeFunctionResultJs = require(_dependencyMap[4], \"../abi/encodeFunctionResult.js\");\n  const localBatchGatewayUrl = 'x-batch-gateway:true';\n  async function localBatchGatewayRequest(parameters) {\n    const {\n      data,\n      ccipRequest\n    } = parameters;\n    const {\n      args: [queries]\n    } = (0, _abiDecodeFunctionDataJs.decodeFunctionData)({\n      abi: _constantsAbisJs.batchGatewayAbi,\n      data\n    });\n    const failures = [];\n    const responses = [];\n    await Promise.all(queries.map(async (query, i) => {\n      try {\n        responses[i] = query.urls.includes(localBatchGatewayUrl) ? await localBatchGatewayRequest({\n          data: query.data,\n          ccipRequest\n        }) : await ccipRequest(query);\n        failures[i] = false;\n      } catch (err) {\n        failures[i] = true;\n        responses[i] = encodeError(err);\n      }\n    }));\n    return (0, _abiEncodeFunctionResultJs.encodeFunctionResult)({\n      abi: _constantsAbisJs.batchGatewayAbi,\n      functionName: 'query',\n      result: [failures, responses]\n    });\n  }\n  function encodeError(error) {\n    if (error.name === 'HttpRequestError' && error.status) return (0, _abiEncodeErrorResultJs.encodeErrorResult)({\n      abi: _constantsAbisJs.batchGatewayAbi,\n      errorName: 'HttpError',\n      args: [error.status, error.shortMessage]\n    });\n    return (0, _abiEncodeErrorResultJs.encodeErrorResult)({\n      abi: [_constantsSolidityJs.solidityError],\n      errorName: 'Error',\n      args: ['shortMessage' in error ? error.shortMessage : error.message]\n    });\n  }\n});","lineCount":63,"map":[[7,2,6,0,"Object"],[7,8,6,0],[7,9,6,0,"defineProperty"],[7,23,6,0],[7,24,6,0,"exports"],[7,31,6,0],[8,4,6,0,"enumerable"],[8,14,6,0],[9,4,6,0,"get"],[9,7,6,0],[9,18,6,0,"get"],[9,19,6,0],[10,6,6,0],[10,13,6,0,"localBatchGatewayUrl"],[10,33,6,0],[11,4,6,0],[12,2,6,0],[13,2,7,0,"exports"],[13,9,7,0],[13,10,7,0,"localBatchGatewayRequest"],[13,34,7,0],[13,37,7,0,"localBatchGatewayRequest"],[13,61,7,0],[14,2,1,0],[14,6,1,0,"_constantsAbisJs"],[14,22,1,0],[14,25,1,0,"require"],[14,32,1,0],[14,33,1,0,"_dependencyMap"],[14,47,1,0],[15,2,2,0],[15,6,2,0,"_constantsSolidityJs"],[15,26,2,0],[15,29,2,0,"require"],[15,36,2,0],[15,37,2,0,"_dependencyMap"],[15,51,2,0],[16,2,3,0],[16,6,3,0,"_abiDecodeFunctionDataJs"],[16,30,3,0],[16,33,3,0,"require"],[16,40,3,0],[16,41,3,0,"_dependencyMap"],[16,55,3,0],[17,2,4,0],[17,6,4,0,"_abiEncodeErrorResultJs"],[17,29,4,0],[17,32,4,0,"require"],[17,39,4,0],[17,40,4,0,"_dependencyMap"],[17,54,4,0],[18,2,5,0],[18,6,5,0,"_abiEncodeFunctionResultJs"],[18,32,5,0],[18,35,5,0,"require"],[18,42,5,0],[18,43,5,0,"_dependencyMap"],[18,57,5,0],[19,2,6,7],[19,8,6,13,"localBatchGatewayUrl"],[19,28,6,33],[19,31,6,36],[19,53,6,58],[20,2,7,7],[20,17,7,22,"localBatchGatewayRequest"],[20,41,7,46,"localBatchGatewayRequest"],[20,42,7,47,"parameters"],[20,52,7,57],[20,54,7,59],[21,4,8,4],[21,10,8,10],[22,6,8,12,"data"],[22,10,8,16],[23,6,8,18,"ccipRequest"],[24,4,8,30],[24,5,8,31],[24,8,8,34,"parameters"],[24,18,8,44],[25,4,9,4],[25,10,9,10],[26,6,9,12,"args"],[26,10,9,16],[26,12,9,18],[26,13,9,19,"queries"],[26,20,9,26],[27,4,9,29],[27,5,9,30],[27,8,9,33],[27,12,9,33,"decodeFunctionData"],[27,36,9,51],[27,37,9,51,"decodeFunctionData"],[27,55,9,51],[27,57,9,52],[28,6,9,54,"abi"],[28,9,9,57],[28,11,9,59,"batchGatewayAbi"],[28,27,9,74],[28,28,9,74,"batchGatewayAbi"],[28,43,9,74],[29,6,9,76,"data"],[30,4,9,81],[30,5,9,82],[30,6,9,83],[31,4,10,4],[31,10,10,10,"failures"],[31,18,10,18],[31,21,10,21],[31,23,10,23],[32,4,11,4],[32,10,11,10,"responses"],[32,19,11,19],[32,22,11,22],[32,24,11,24],[33,4,12,4],[33,10,12,10,"Promise"],[33,17,12,17],[33,18,12,18,"all"],[33,21,12,21],[33,22,12,22,"queries"],[33,29,12,29],[33,30,12,30,"map"],[33,33,12,33],[33,34,12,34],[33,41,12,41,"query"],[33,46,12,46],[33,48,12,48,"i"],[33,49,12,49],[33,54,12,54],[34,6,13,8],[34,10,13,12],[35,8,14,12,"responses"],[35,17,14,21],[35,18,14,22,"i"],[35,19,14,23],[35,20,14,24],[35,23,14,27,"query"],[35,28,14,32],[35,29,14,33,"urls"],[35,33,14,37],[35,34,14,38,"includes"],[35,42,14,46],[35,43,14,47,"localBatchGatewayUrl"],[35,63,14,67],[35,64,14,68],[35,67,15,18],[35,73,15,24,"localBatchGatewayRequest"],[35,97,15,48],[35,98,15,49],[36,10,15,51,"data"],[36,14,15,55],[36,16,15,57,"query"],[36,21,15,62],[36,22,15,63,"data"],[36,26,15,67],[37,10,15,69,"ccipRequest"],[38,8,15,81],[38,9,15,82],[38,10,15,83],[38,13,16,18],[38,19,16,24,"ccipRequest"],[38,30,16,35],[38,31,16,36,"query"],[38,36,16,41],[38,37,16,42],[39,8,17,12,"failures"],[39,16,17,20],[39,17,17,21,"i"],[39,18,17,22],[39,19,17,23],[39,22,17,26],[39,27,17,31],[40,6,18,8],[40,7,18,9],[40,8,19,8],[40,15,19,15,"err"],[40,18,19,18],[40,20,19,20],[41,8,20,12,"failures"],[41,16,20,20],[41,17,20,21,"i"],[41,18,20,22],[41,19,20,23],[41,22,20,26],[41,26,20,30],[42,8,21,12,"responses"],[42,17,21,21],[42,18,21,22,"i"],[42,19,21,23],[42,20,21,24],[42,23,21,27,"encodeError"],[42,34,21,38],[42,35,21,39,"err"],[42,38,21,42],[42,39,21,43],[43,6,22,8],[44,4,23,4],[44,5,23,5],[44,6,23,6],[44,7,23,7],[45,4,24,4],[45,11,24,11],[45,15,24,11,"encodeFunctionResult"],[45,41,24,31],[45,42,24,31,"encodeFunctionResult"],[45,62,24,31],[45,64,24,32],[46,6,25,8,"abi"],[46,9,25,11],[46,11,25,13,"batchGatewayAbi"],[46,27,25,28],[46,28,25,28,"batchGatewayAbi"],[46,43,25,28],[47,6,26,8,"functionName"],[47,18,26,20],[47,20,26,22],[47,27,26,29],[48,6,27,8,"result"],[48,12,27,14],[48,14,27,16],[48,15,27,17,"failures"],[48,23,27,25],[48,25,27,27,"responses"],[48,34,27,36],[49,4,28,4],[49,5,28,5],[49,6,28,6],[50,2,29,0],[51,2,30,0],[51,11,30,9,"encodeError"],[51,22,30,20,"encodeError"],[51,23,30,21,"error"],[51,28,30,26],[51,30,30,28],[52,4,31,4],[52,8,31,8,"error"],[52,13,31,13],[52,14,31,14,"name"],[52,18,31,18],[52,23,31,23],[52,41,31,41],[52,45,31,45,"error"],[52,50,31,50],[52,51,31,51,"status"],[52,57,31,57],[52,59,32,8],[52,66,32,15],[52,70,32,15,"encodeErrorResult"],[52,93,32,32],[52,94,32,32,"encodeErrorResult"],[52,111,32,32],[52,113,32,33],[53,6,33,12,"abi"],[53,9,33,15],[53,11,33,17,"batchGatewayAbi"],[53,27,33,32],[53,28,33,32,"batchGatewayAbi"],[53,43,33,32],[54,6,34,12,"errorName"],[54,15,34,21],[54,17,34,23],[54,28,34,34],[55,6,35,12,"args"],[55,10,35,16],[55,12,35,18],[55,13,35,19,"error"],[55,18,35,24],[55,19,35,25,"status"],[55,25,35,31],[55,27,35,33,"error"],[55,32,35,38],[55,33,35,39,"shortMessage"],[55,45,35,51],[56,4,36,8],[56,5,36,9],[56,6,36,10],[57,4,37,4],[57,11,37,11],[57,15,37,11,"encodeErrorResult"],[57,38,37,28],[57,39,37,28,"encodeErrorResult"],[57,56,37,28],[57,58,37,29],[58,6,38,8,"abi"],[58,9,38,11],[58,11,38,13],[58,12,38,14,"solidityError"],[58,32,38,27],[58,33,38,27,"solidityError"],[58,46,38,27],[58,47,38,28],[59,6,39,8,"errorName"],[59,15,39,17],[59,17,39,19],[59,24,39,26],[60,6,40,8,"args"],[60,10,40,12],[60,12,40,14],[60,13,40,15],[60,27,40,29],[60,31,40,33,"error"],[60,36,40,38],[60,39,40,41,"error"],[60,44,40,46],[60,45,40,47,"shortMessage"],[60,57,40,59],[60,60,40,62,"error"],[60,65,40,67],[60,66,40,68,"message"],[60,73,40,75],[61,4,41,4],[61,5,41,5],[61,6,41,6],[62,2,42,0],[63,0,42,1],[63,3]],"functionMap":{"names":["<global>","localBatchGatewayRequest","queries.map$argument_0","encodeError"],"mappings":"AAA;OCM;kCCK;KDW;CDM;AGC;CHY"},"hasCjsExports":false},"type":"js/module"}]}