{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":16,"index":150},"end":{"line":7,"column":32,"index":166}}],"key":"vm88vOsSPZItrLOmMEyUuGkd1y4=","exportNames":["*"],"imports":1}},{"name":"events","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":41,"index":209},"end":{"line":8,"column":58,"index":226}}],"key":"JsYPPZbiyTKGtgYi4nFi37XasmQ=","exportNames":["*"],"imports":1}},{"name":"@trezor/connect/lib/constants/errors","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":36,"index":265},"end":{"line":9,"column":83,"index":312}}],"key":"o/cd7Rvn4fjQHjf1LBjsISRjYyU=","exportNames":["*"],"imports":1}},{"name":"@trezor/connect/lib/events","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":17,"index":332},"end":{"line":10,"column":54,"index":369}}],"key":"RnfKUKOur2WPjDxwElWgS9j4kIA=","exportNames":["*"],"imports":1}},{"name":"@trezor/connect/lib/factory","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":18,"index":389},"end":{"line":11,"column":56,"index":427}}],"key":"17evyqA4QE1bc8rdfFo3dS6Kkdg=","exportNames":["*"],"imports":1}},{"name":"@trezor/connect/lib/utils/debug","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":16,"index":445},"end":{"line":12,"column":58,"index":487}}],"key":"giuQcDJgyVzPBC/IWn3CwLiIwxk=","exportNames":["*"],"imports":1}},{"name":"@trezor/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":13,"column":16,"index":505},"end":{"line":13,"column":40,"index":529}}],"key":"G7HknzTAEB2ojZW8P0CsMCjZ1DA=","exportNames":["*"],"imports":1}},{"name":"../connectSettings","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":14,"column":26,"index":557},"end":{"line":14,"column":55,"index":586}}],"key":"r/OQJFIVfYrwZxQJC0QRcYwQgKQ=","exportNames":["*"],"imports":1}},{"name":"../popup","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":15,"column":35,"index":623},"end":{"line":15,"column":54,"index":642}}],"key":"d7tcANQ1RhjSmHbBRjj7Z9W48PU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.TrezorConnect = exports.CoreInPopup = void 0;\n  const tslib_1 = require(_dependencyMap[0], \"tslib\");\n  const events_1 = tslib_1.__importDefault(require(_dependencyMap[1], \"events\"));\n  const ERRORS = tslib_1.__importStar(require(_dependencyMap[2], \"@trezor/connect/lib/constants/errors\"));\n  const events_2 = require(_dependencyMap[3], \"@trezor/connect/lib/events\");\n  const factory_1 = require(_dependencyMap[4], \"@trezor/connect/lib/factory\");\n  const debug_1 = require(_dependencyMap[5], \"@trezor/connect/lib/utils/debug\");\n  const utils_1 = require(_dependencyMap[6], \"@trezor/utils\");\n  const connectSettings_1 = require(_dependencyMap[7], \"../connectSettings\");\n  const popup = tslib_1.__importStar(require(_dependencyMap[8], \"../popup\"));\n  class CoreInPopup {\n    eventEmitter = new events_1.default();\n    constructor() {\n      this._settings = (0, connectSettings_1.parseConnectSettings)();\n      this.logger = (0, debug_1.initLog)('@trezor/connect-web');\n      this.popupManagerLogger = (0, debug_1.initLog)('@trezor/connect-web/popupManager');\n    }\n    logWriterFactory(popupManager) {\n      return {\n        add: message => {\n          popupManager.channel.postMessage({\n            event: events_2.UI_EVENT,\n            type: events_2.IFRAME.LOG,\n            payload: message\n          }, {\n            usePromise: false,\n            useQueue: true\n          });\n        }\n      };\n    }\n    manifest(data) {\n      this._settings = (0, connectSettings_1.parseConnectSettings)({\n        ...this._settings,\n        manifest: data\n      });\n    }\n    dispose() {\n      this.eventEmitter.removeAllListeners();\n      this._settings = (0, connectSettings_1.parseConnectSettings)();\n      if (this._popupManager) {\n        this._popupManager.close();\n      }\n      return Promise.resolve(undefined);\n    }\n    cancel(error) {\n      if (this._popupManager) {\n        this._popupManager.emit(events_2.POPUP.CLOSED, error);\n      }\n    }\n    init(settings) {\n      const oldSettings = (0, connectSettings_1.parseConnectSettings)({\n        ...this._settings\n      });\n      const newSettings = (0, connectSettings_1.parseConnectSettings)({\n        ...this._settings,\n        ...settings\n      });\n      if (!newSettings.transports?.length) {\n        newSettings.transports = ['BridgeTransport', 'WebUsbTransport'];\n      }\n      newSettings.useCoreInPopup = true;\n      if (false && window?.location?.origin) {\n        newSettings.origin = window.location.origin;\n      }\n      const equalSettings = JSON.stringify(oldSettings) === JSON.stringify(newSettings);\n      this._settings = newSettings;\n      if (!this._popupManager || !equalSettings) {\n        if (this._popupManager) this._popupManager.close();\n        this._popupManager = new popup.PopupManager(this._settings, {\n          logger: this.popupManagerLogger\n        });\n        this._popupManager.on(events_2.DEVICE_EVENT, event => {\n          this.eventEmitter.emit(events_2.DEVICE_EVENT, event);\n        });\n        (0, debug_1.setLogWriter)(() => this.logWriterFactory(this._popupManager));\n      }\n      this.logger.enabled = !!settings.debug;\n      if (!this._settings.manifest) {\n        throw ERRORS.TypedError('Init_ManifestMissing');\n      }\n      this.logger.debug('initiated');\n      return Promise.resolve();\n    }\n    setTransports() {\n      throw new Error('Unsupported right now');\n    }\n    async call(params) {\n      this.logger.debug('call', params);\n      if (!this._popupManager) {\n        return (0, events_2.createErrorMessage)(ERRORS.TypedError('Init_NotInitialized'));\n      }\n      if (this._settings.popup) {\n        await this._popupManager.request();\n      }\n      const popupClosed = (0, utils_1.createDeferred)();\n      const popupClosedHandler = () => {\n        this.logger.log('Popup closed during initialization');\n        popupClosed.reject(ERRORS.TypedError('Method_Interrupted'));\n      };\n      this._popupManager.once(events_2.POPUP.CLOSED, popupClosedHandler);\n      try {\n        this.logger.debug('call: popup initialing');\n        await Promise.race([popupClosed.promise, this.callInit()]);\n        this.logger.debug('call: popup initialized');\n        const response = await this._popupManager.channel.postMessage({\n          type: events_2.IFRAME.CALL,\n          payload: params\n        });\n        this.logger.debug('call: response: ', response);\n        if (response) {\n          if (this._popupManager && response.success) {\n            this._popupManager.clear();\n          }\n          return {\n            success: response.success,\n            payload: response.payload,\n            device: response.device\n          };\n        }\n        throw ERRORS.TypedError('Method_NoResponse');\n      } catch (error) {\n        this.logger.error('call: error', error);\n        this._popupManager.clear(false);\n        return (0, events_2.createErrorMessage)(error);\n      } finally {\n        this._popupManager.removeListener(events_2.POPUP.CLOSED, popupClosedHandler);\n      }\n    }\n    async callInit() {\n      if (!this._popupManager) {\n        throw ERRORS.TypedError('Init_NotInitialized');\n      }\n      await this._popupManager.channel.init();\n      if (this._settings.env === 'webextension') {\n        await this._popupManager.popupPromise?.promise;\n        this._popupManager.channel.postMessage({\n          type: events_2.POPUP.INIT,\n          payload: {\n            settings: this._settings,\n            useCore: true\n          }\n        });\n      }\n      await this._popupManager.handshakePromise?.promise;\n    }\n    uiResponse(response) {\n      const {\n        type,\n        payload\n      } = response;\n      this._popupManager?.channel?.postMessage({\n        event: events_2.UI_EVENT,\n        type,\n        payload\n      });\n    }\n    renderWebUSBButton() {}\n    disableWebUSB() {\n      throw ERRORS.TypedError('Method_InvalidPackage');\n    }\n    requestWebUSBDevice() {\n      throw ERRORS.TypedError('Method_InvalidPackage');\n    }\n  }\n  exports.CoreInPopup = CoreInPopup;\n  const impl = new CoreInPopup();\n  exports.TrezorConnect = (0, factory_1.factory)({\n    eventEmitter: impl.eventEmitter,\n    init: impl.init.bind(impl),\n    call: impl.call.bind(impl),\n    setTransports: impl.setTransports.bind(impl),\n    manifest: impl.manifest.bind(impl),\n    uiResponse: impl.uiResponse.bind(impl),\n    cancel: impl.cancel.bind(impl),\n    dispose: impl.dispose.bind(impl)\n  });\n});","lineCount":184,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"TrezorConnect"],[7,23,6,21],[7,26,6,24,"exports"],[7,33,6,31],[7,34,6,32,"CoreInPopup"],[7,45,6,43],[7,48,6,46],[7,53,6,51],[7,54,6,52],[8,2,7,0],[8,8,7,6,"tslib_1"],[8,15,7,13],[8,18,7,16,"require"],[8,25,7,23],[8,26,7,23,"_dependencyMap"],[8,40,7,23],[8,52,7,31],[8,53,7,32],[9,2,8,0],[9,8,8,6,"events_1"],[9,16,8,14],[9,19,8,17,"tslib_1"],[9,26,8,24],[9,27,8,25,"__importDefault"],[9,42,8,40],[9,43,8,41,"require"],[9,50,8,48],[9,51,8,48,"_dependencyMap"],[9,65,8,48],[9,78,8,57],[9,79,8,58],[9,80,8,59],[10,2,9,0],[10,8,9,6,"ERRORS"],[10,14,9,12],[10,17,9,15,"tslib_1"],[10,24,9,22],[10,25,9,23,"__importStar"],[10,37,9,35],[10,38,9,36,"require"],[10,45,9,43],[10,46,9,43,"_dependencyMap"],[10,60,9,43],[10,103,9,82],[10,104,9,83],[10,105,9,84],[11,2,10,0],[11,8,10,6,"events_2"],[11,16,10,14],[11,19,10,17,"require"],[11,26,10,24],[11,27,10,24,"_dependencyMap"],[11,41,10,24],[11,74,10,53],[11,75,10,54],[12,2,11,0],[12,8,11,6,"factory_1"],[12,17,11,15],[12,20,11,18,"require"],[12,27,11,25],[12,28,11,25,"_dependencyMap"],[12,42,11,25],[12,76,11,55],[12,77,11,56],[13,2,12,0],[13,8,12,6,"debug_1"],[13,15,12,13],[13,18,12,16,"require"],[13,25,12,23],[13,26,12,23,"_dependencyMap"],[13,40,12,23],[13,78,12,57],[13,79,12,58],[14,2,13,0],[14,8,13,6,"utils_1"],[14,15,13,13],[14,18,13,16,"require"],[14,25,13,23],[14,26,13,23,"_dependencyMap"],[14,40,13,23],[14,60,13,39],[14,61,13,40],[15,2,14,0],[15,8,14,6,"connectSettings_1"],[15,25,14,23],[15,28,14,26,"require"],[15,35,14,33],[15,36,14,33,"_dependencyMap"],[15,50,14,33],[15,75,14,54],[15,76,14,55],[16,2,15,0],[16,8,15,6,"popup"],[16,13,15,11],[16,16,15,14,"tslib_1"],[16,23,15,21],[16,24,15,22,"__importStar"],[16,36,15,34],[16,37,15,35,"require"],[16,44,15,42],[16,45,15,42,"_dependencyMap"],[16,59,15,42],[16,74,15,53],[16,75,15,54],[16,76,15,55],[17,2,16,0],[17,8,16,6,"CoreInPopup"],[17,19,16,17],[17,20,16,18],[18,4,17,2,"eventEmitter"],[18,16,17,14],[18,19,17,17],[18,23,17,21,"events_1"],[18,31,17,29],[18,32,17,30,"default"],[18,39,17,37],[18,40,17,38],[18,41,17,39],[19,4,22,2,"constructor"],[19,15,22,13,"constructor"],[19,16,22,13],[19,18,22,16],[20,6,23,4],[20,10,23,8],[20,11,23,9,"_settings"],[20,20,23,18],[20,23,23,21],[20,24,23,22],[20,25,23,23],[20,27,23,25,"connectSettings_1"],[20,44,23,42],[20,45,23,43,"parseConnectSettings"],[20,65,23,63],[20,67,23,65],[20,68,23,66],[21,6,24,4],[21,10,24,8],[21,11,24,9,"logger"],[21,17,24,15],[21,20,24,18],[21,21,24,19],[21,22,24,20],[21,24,24,22,"debug_1"],[21,31,24,29],[21,32,24,30,"initLog"],[21,39,24,37],[21,41,24,39],[21,62,24,60],[21,63,24,61],[22,6,25,4],[22,10,25,8],[22,11,25,9,"popupManagerLogger"],[22,29,25,27],[22,32,25,30],[22,33,25,31],[22,34,25,32],[22,36,25,34,"debug_1"],[22,43,25,41],[22,44,25,42,"initLog"],[22,51,25,49],[22,53,25,51],[22,87,25,85],[22,88,25,86],[23,4,26,2],[24,4,27,2,"logWriterFactory"],[24,20,27,18,"logWriterFactory"],[24,21,27,19,"popupManager"],[24,33,27,31],[24,35,27,33],[25,6,28,4],[25,13,28,11],[26,8,29,6,"add"],[26,11,29,9],[26,13,29,11,"message"],[26,20,29,18],[26,24,29,22],[27,10,30,8,"popupManager"],[27,22,30,20],[27,23,30,21,"channel"],[27,30,30,28],[27,31,30,29,"postMessage"],[27,42,30,40],[27,43,30,41],[28,12,31,10,"event"],[28,17,31,15],[28,19,31,17,"events_2"],[28,27,31,25],[28,28,31,26,"UI_EVENT"],[28,36,31,34],[29,12,32,10,"type"],[29,16,32,14],[29,18,32,16,"events_2"],[29,26,32,24],[29,27,32,25,"IFRAME"],[29,33,32,31],[29,34,32,32,"LOG"],[29,37,32,35],[30,12,33,10,"payload"],[30,19,33,17],[30,21,33,19,"message"],[31,10,34,8],[31,11,34,9],[31,13,34,11],[32,12,35,10,"usePromise"],[32,22,35,20],[32,24,35,22],[32,29,35,27],[33,12,36,10,"useQueue"],[33,20,36,18],[33,22,36,20],[34,10,37,8],[34,11,37,9],[34,12,37,10],[35,8,38,6],[36,6,39,4],[36,7,39,5],[37,4,40,2],[38,4,41,2,"manifest"],[38,12,41,10,"manifest"],[38,13,41,11,"data"],[38,17,41,15],[38,19,41,17],[39,6,42,4],[39,10,42,8],[39,11,42,9,"_settings"],[39,20,42,18],[39,23,42,21],[39,24,42,22],[39,25,42,23],[39,27,42,25,"connectSettings_1"],[39,44,42,42],[39,45,42,43,"parseConnectSettings"],[39,65,42,63],[39,67,42,65],[40,8,43,6],[40,11,43,9],[40,15,43,13],[40,16,43,14,"_settings"],[40,25,43,23],[41,8,44,6,"manifest"],[41,16,44,14],[41,18,44,16,"data"],[42,6,45,4],[42,7,45,5],[42,8,45,6],[43,4,46,2],[44,4,47,2,"dispose"],[44,11,47,9,"dispose"],[44,12,47,9],[44,14,47,12],[45,6,48,4],[45,10,48,8],[45,11,48,9,"eventEmitter"],[45,23,48,21],[45,24,48,22,"removeAllListeners"],[45,42,48,40],[45,43,48,41],[45,44,48,42],[46,6,49,4],[46,10,49,8],[46,11,49,9,"_settings"],[46,20,49,18],[46,23,49,21],[46,24,49,22],[46,25,49,23],[46,27,49,25,"connectSettings_1"],[46,44,49,42],[46,45,49,43,"parseConnectSettings"],[46,65,49,63],[46,67,49,65],[46,68,49,66],[47,6,50,4],[47,10,50,8],[47,14,50,12],[47,15,50,13,"_popupManager"],[47,28,50,26],[47,30,50,28],[48,8,51,6],[48,12,51,10],[48,13,51,11,"_popupManager"],[48,26,51,24],[48,27,51,25,"close"],[48,32,51,30],[48,33,51,31],[48,34,51,32],[49,6,52,4],[50,6,53,4],[50,13,53,11,"Promise"],[50,20,53,18],[50,21,53,19,"resolve"],[50,28,53,26],[50,29,53,27,"undefined"],[50,38,53,36],[50,39,53,37],[51,4,54,2],[52,4,55,2,"cancel"],[52,10,55,8,"cancel"],[52,11,55,9,"error"],[52,16,55,14],[52,18,55,16],[53,6,56,4],[53,10,56,8],[53,14,56,12],[53,15,56,13,"_popupManager"],[53,28,56,26],[53,30,56,28],[54,8,57,6],[54,12,57,10],[54,13,57,11,"_popupManager"],[54,26,57,24],[54,27,57,25,"emit"],[54,31,57,29],[54,32,57,30,"events_2"],[54,40,57,38],[54,41,57,39,"POPUP"],[54,46,57,44],[54,47,57,45,"CLOSED"],[54,53,57,51],[54,55,57,53,"error"],[54,60,57,58],[54,61,57,59],[55,6,58,4],[56,4,59,2],[57,4,60,2,"init"],[57,8,60,6,"init"],[57,9,60,7,"settings"],[57,17,60,15],[57,19,60,17],[58,6,61,4],[58,12,61,10,"oldSettings"],[58,23,61,21],[58,26,61,24],[58,27,61,25],[58,28,61,26],[58,30,61,28,"connectSettings_1"],[58,47,61,45],[58,48,61,46,"parseConnectSettings"],[58,68,61,66],[58,70,61,68],[59,8,62,6],[59,11,62,9],[59,15,62,13],[59,16,62,14,"_settings"],[60,6,63,4],[60,7,63,5],[60,8,63,6],[61,6,64,4],[61,12,64,10,"newSettings"],[61,23,64,21],[61,26,64,24],[61,27,64,25],[61,28,64,26],[61,30,64,28,"connectSettings_1"],[61,47,64,45],[61,48,64,46,"parseConnectSettings"],[61,68,64,66],[61,70,64,68],[62,8,65,6],[62,11,65,9],[62,15,65,13],[62,16,65,14,"_settings"],[62,25,65,23],[63,8,66,6],[63,11,66,9,"settings"],[64,6,67,4],[64,7,67,5],[64,8,67,6],[65,6,68,4],[65,10,68,8],[65,11,68,9,"newSettings"],[65,22,68,20],[65,23,68,21,"transports"],[65,33,68,31],[65,35,68,33,"length"],[65,41,68,39],[65,43,68,41],[66,8,69,6,"newSettings"],[66,19,69,17],[66,20,69,18,"transports"],[66,30,69,28],[66,33,69,31],[66,34,69,32],[66,51,69,49],[66,53,69,51],[66,70,69,68],[66,71,69,69],[67,6,70,4],[68,6,71,4,"newSettings"],[68,17,71,15],[68,18,71,16,"useCoreInPopup"],[68,32,71,30],[68,35,71,33],[68,39,71,37],[69,6,72,4],[69,10,72,8],[69,19,72,41,"window"],[69,25,72,47],[69,27,72,49,"location"],[69,35,72,57],[69,37,72,59,"origin"],[69,43,72,65],[69,45,72,67],[70,8,73,6,"newSettings"],[70,19,73,17],[70,20,73,18,"origin"],[70,26,73,24],[70,29,73,27,"window"],[70,35,73,33],[70,36,73,34,"location"],[70,44,73,42],[70,45,73,43,"origin"],[70,51,73,49],[71,6,74,4],[72,6,75,4],[72,12,75,10,"equalSettings"],[72,25,75,23],[72,28,75,26,"JSON"],[72,32,75,30],[72,33,75,31,"stringify"],[72,42,75,40],[72,43,75,41,"oldSettings"],[72,54,75,52],[72,55,75,53],[72,60,75,58,"JSON"],[72,64,75,62],[72,65,75,63,"stringify"],[72,74,75,72],[72,75,75,73,"newSettings"],[72,86,75,84],[72,87,75,85],[73,6,76,4],[73,10,76,8],[73,11,76,9,"_settings"],[73,20,76,18],[73,23,76,21,"newSettings"],[73,34,76,32],[74,6,77,4],[74,10,77,8],[74,11,77,9],[74,15,77,13],[74,16,77,14,"_popupManager"],[74,29,77,27],[74,33,77,31],[74,34,77,32,"equalSettings"],[74,47,77,45],[74,49,77,47],[75,8,78,6],[75,12,78,10],[75,16,78,14],[75,17,78,15,"_popupManager"],[75,30,78,28],[75,32,78,30],[75,36,78,34],[75,37,78,35,"_popupManager"],[75,50,78,48],[75,51,78,49,"close"],[75,56,78,54],[75,57,78,55],[75,58,78,56],[76,8,79,6],[76,12,79,10],[76,13,79,11,"_popupManager"],[76,26,79,24],[76,29,79,27],[76,33,79,31,"popup"],[76,38,79,36],[76,39,79,37,"PopupManager"],[76,51,79,49],[76,52,79,50],[76,56,79,54],[76,57,79,55,"_settings"],[76,66,79,64],[76,68,79,66],[77,10,80,8,"logger"],[77,16,80,14],[77,18,80,16],[77,22,80,20],[77,23,80,21,"popupManagerLogger"],[78,8,81,6],[78,9,81,7],[78,10,81,8],[79,8,82,6],[79,12,82,10],[79,13,82,11,"_popupManager"],[79,26,82,24],[79,27,82,25,"on"],[79,29,82,27],[79,30,82,28,"events_2"],[79,38,82,36],[79,39,82,37,"DEVICE_EVENT"],[79,51,82,49],[79,53,82,51,"event"],[79,58,82,56],[79,62,82,60],[80,10,83,8],[80,14,83,12],[80,15,83,13,"eventEmitter"],[80,27,83,25],[80,28,83,26,"emit"],[80,32,83,30],[80,33,83,31,"events_2"],[80,41,83,39],[80,42,83,40,"DEVICE_EVENT"],[80,54,83,52],[80,56,83,54,"event"],[80,61,83,59],[80,62,83,60],[81,8,84,6],[81,9,84,7],[81,10,84,8],[82,8,85,6],[82,9,85,7],[82,10,85,8],[82,12,85,10,"debug_1"],[82,19,85,17],[82,20,85,18,"setLogWriter"],[82,32,85,30],[82,34,85,32],[82,40,85,38],[82,44,85,42],[82,45,85,43,"logWriterFactory"],[82,61,85,59],[82,62,85,60],[82,66,85,64],[82,67,85,65,"_popupManager"],[82,80,85,78],[82,81,85,79],[82,82,85,80],[83,6,86,4],[84,6,87,4],[84,10,87,8],[84,11,87,9,"logger"],[84,17,87,15],[84,18,87,16,"enabled"],[84,25,87,23],[84,28,87,26],[84,29,87,27],[84,30,87,28,"settings"],[84,38,87,36],[84,39,87,37,"debug"],[84,44,87,42],[85,6,88,4],[85,10,88,8],[85,11,88,9],[85,15,88,13],[85,16,88,14,"_settings"],[85,25,88,23],[85,26,88,24,"manifest"],[85,34,88,32],[85,36,88,34],[86,8,89,6],[86,14,89,12,"ERRORS"],[86,20,89,18],[86,21,89,19,"TypedError"],[86,31,89,29],[86,32,89,30],[86,54,89,52],[86,55,89,53],[87,6,90,4],[88,6,91,4],[88,10,91,8],[88,11,91,9,"logger"],[88,17,91,15],[88,18,91,16,"debug"],[88,23,91,21],[88,24,91,22],[88,35,91,33],[88,36,91,34],[89,6,92,4],[89,13,92,11,"Promise"],[89,20,92,18],[89,21,92,19,"resolve"],[89,28,92,26],[89,29,92,27],[89,30,92,28],[90,4,93,2],[91,4,94,2,"setTransports"],[91,17,94,15,"setTransports"],[91,18,94,15],[91,20,94,18],[92,6,95,4],[92,12,95,10],[92,16,95,14,"Error"],[92,21,95,19],[92,22,95,20],[92,45,95,43],[92,46,95,44],[93,4,96,2],[94,4,97,2],[94,10,97,8,"call"],[94,14,97,12,"call"],[94,15,97,13,"params"],[94,21,97,19],[94,23,97,21],[95,6,98,4],[95,10,98,8],[95,11,98,9,"logger"],[95,17,98,15],[95,18,98,16,"debug"],[95,23,98,21],[95,24,98,22],[95,30,98,28],[95,32,98,30,"params"],[95,38,98,36],[95,39,98,37],[96,6,99,4],[96,10,99,8],[96,11,99,9],[96,15,99,13],[96,16,99,14,"_popupManager"],[96,29,99,27],[96,31,99,29],[97,8,100,6],[97,15,100,13],[97,16,100,14],[97,17,100,15],[97,19,100,17,"events_2"],[97,27,100,25],[97,28,100,26,"createErrorMessage"],[97,46,100,44],[97,48,100,46,"ERRORS"],[97,54,100,52],[97,55,100,53,"TypedError"],[97,65,100,63],[97,66,100,64],[97,87,100,85],[97,88,100,86],[97,89,100,87],[98,6,101,4],[99,6,102,4],[99,10,102,8],[99,14,102,12],[99,15,102,13,"_settings"],[99,24,102,22],[99,25,102,23,"popup"],[99,30,102,28],[99,32,102,30],[100,8,103,6],[100,14,103,12],[100,18,103,16],[100,19,103,17,"_popupManager"],[100,32,103,30],[100,33,103,31,"request"],[100,40,103,38],[100,41,103,39],[100,42,103,40],[101,6,104,4],[102,6,105,4],[102,12,105,10,"popupClosed"],[102,23,105,21],[102,26,105,24],[102,27,105,25],[102,28,105,26],[102,30,105,28,"utils_1"],[102,37,105,35],[102,38,105,36,"createDeferred"],[102,52,105,50],[102,54,105,52],[102,55,105,53],[103,6,106,4],[103,12,106,10,"popupClosedHandler"],[103,30,106,28],[103,33,106,31,"popupClosedHandler"],[103,34,106,31],[103,39,106,37],[104,8,107,6],[104,12,107,10],[104,13,107,11,"logger"],[104,19,107,17],[104,20,107,18,"log"],[104,23,107,21],[104,24,107,22],[104,60,107,58],[104,61,107,59],[105,8,108,6,"popupClosed"],[105,19,108,17],[105,20,108,18,"reject"],[105,26,108,24],[105,27,108,25,"ERRORS"],[105,33,108,31],[105,34,108,32,"TypedError"],[105,44,108,42],[105,45,108,43],[105,65,108,63],[105,66,108,64],[105,67,108,65],[106,6,109,4],[106,7,109,5],[107,6,110,4],[107,10,110,8],[107,11,110,9,"_popupManager"],[107,24,110,22],[107,25,110,23,"once"],[107,29,110,27],[107,30,110,28,"events_2"],[107,38,110,36],[107,39,110,37,"POPUP"],[107,44,110,42],[107,45,110,43,"CLOSED"],[107,51,110,49],[107,53,110,51,"popupClosedHandler"],[107,71,110,69],[107,72,110,70],[108,6,111,4],[108,10,111,8],[109,8,112,6],[109,12,112,10],[109,13,112,11,"logger"],[109,19,112,17],[109,20,112,18,"debug"],[109,25,112,23],[109,26,112,24],[109,50,112,48],[109,51,112,49],[110,8,113,6],[110,14,113,12,"Promise"],[110,21,113,19],[110,22,113,20,"race"],[110,26,113,24],[110,27,113,25],[110,28,113,26,"popupClosed"],[110,39,113,37],[110,40,113,38,"promise"],[110,47,113,45],[110,49,113,47],[110,53,113,51],[110,54,113,52,"callInit"],[110,62,113,60],[110,63,113,61],[110,64,113,62],[110,65,113,63],[110,66,113,64],[111,8,114,6],[111,12,114,10],[111,13,114,11,"logger"],[111,19,114,17],[111,20,114,18,"debug"],[111,25,114,23],[111,26,114,24],[111,51,114,49],[111,52,114,50],[112,8,115,6],[112,14,115,12,"response"],[112,22,115,20],[112,25,115,23],[112,31,115,29],[112,35,115,33],[112,36,115,34,"_popupManager"],[112,49,115,47],[112,50,115,48,"channel"],[112,57,115,55],[112,58,115,56,"postMessage"],[112,69,115,67],[112,70,115,68],[113,10,116,8,"type"],[113,14,116,12],[113,16,116,14,"events_2"],[113,24,116,22],[113,25,116,23,"IFRAME"],[113,31,116,29],[113,32,116,30,"CALL"],[113,36,116,34],[114,10,117,8,"payload"],[114,17,117,15],[114,19,117,17,"params"],[115,8,118,6],[115,9,118,7],[115,10,118,8],[116,8,119,6],[116,12,119,10],[116,13,119,11,"logger"],[116,19,119,17],[116,20,119,18,"debug"],[116,25,119,23],[116,26,119,24],[116,44,119,42],[116,46,119,44,"response"],[116,54,119,52],[116,55,119,53],[117,8,120,6],[117,12,120,10,"response"],[117,20,120,18],[117,22,120,20],[118,10,121,8],[118,14,121,12],[118,18,121,16],[118,19,121,17,"_popupManager"],[118,32,121,30],[118,36,121,34,"response"],[118,44,121,42],[118,45,121,43,"success"],[118,52,121,50],[118,54,121,52],[119,12,122,10],[119,16,122,14],[119,17,122,15,"_popupManager"],[119,30,122,28],[119,31,122,29,"clear"],[119,36,122,34],[119,37,122,35],[119,38,122,36],[120,10,123,8],[121,10,124,8],[121,17,124,15],[122,12,125,10,"success"],[122,19,125,17],[122,21,125,19,"response"],[122,29,125,27],[122,30,125,28,"success"],[122,37,125,35],[123,12,126,10,"payload"],[123,19,126,17],[123,21,126,19,"response"],[123,29,126,27],[123,30,126,28,"payload"],[123,37,126,35],[124,12,127,10,"device"],[124,18,127,16],[124,20,127,18,"response"],[124,28,127,26],[124,29,127,27,"device"],[125,10,128,8],[125,11,128,9],[126,8,129,6],[127,8,130,6],[127,14,130,12,"ERRORS"],[127,20,130,18],[127,21,130,19,"TypedError"],[127,31,130,29],[127,32,130,30],[127,51,130,49],[127,52,130,50],[128,6,131,4],[128,7,131,5],[128,8,131,6],[128,15,131,13,"error"],[128,20,131,18],[128,22,131,20],[129,8,132,6],[129,12,132,10],[129,13,132,11,"logger"],[129,19,132,17],[129,20,132,18,"error"],[129,25,132,23],[129,26,132,24],[129,39,132,37],[129,41,132,39,"error"],[129,46,132,44],[129,47,132,45],[130,8,133,6],[130,12,133,10],[130,13,133,11,"_popupManager"],[130,26,133,24],[130,27,133,25,"clear"],[130,32,133,30],[130,33,133,31],[130,38,133,36],[130,39,133,37],[131,8,134,6],[131,15,134,13],[131,16,134,14],[131,17,134,15],[131,19,134,17,"events_2"],[131,27,134,25],[131,28,134,26,"createErrorMessage"],[131,46,134,44],[131,48,134,46,"error"],[131,53,134,51],[131,54,134,52],[132,6,135,4],[132,7,135,5],[132,16,135,14],[133,8,136,6],[133,12,136,10],[133,13,136,11,"_popupManager"],[133,26,136,24],[133,27,136,25,"removeListener"],[133,41,136,39],[133,42,136,40,"events_2"],[133,50,136,48],[133,51,136,49,"POPUP"],[133,56,136,54],[133,57,136,55,"CLOSED"],[133,63,136,61],[133,65,136,63,"popupClosedHandler"],[133,83,136,81],[133,84,136,82],[134,6,137,4],[135,4,138,2],[136,4,139,2],[136,10,139,8,"callInit"],[136,18,139,16,"callInit"],[136,19,139,16],[136,21,139,19],[137,6,140,4],[137,10,140,8],[137,11,140,9],[137,15,140,13],[137,16,140,14,"_popupManager"],[137,29,140,27],[137,31,140,29],[138,8,141,6],[138,14,141,12,"ERRORS"],[138,20,141,18],[138,21,141,19,"TypedError"],[138,31,141,29],[138,32,141,30],[138,53,141,51],[138,54,141,52],[139,6,142,4],[140,6,143,4],[140,12,143,10],[140,16,143,14],[140,17,143,15,"_popupManager"],[140,30,143,28],[140,31,143,29,"channel"],[140,38,143,36],[140,39,143,37,"init"],[140,43,143,41],[140,44,143,42],[140,45,143,43],[141,6,144,4],[141,10,144,8],[141,14,144,12],[141,15,144,13,"_settings"],[141,24,144,22],[141,25,144,23,"env"],[141,28,144,26],[141,33,144,31],[141,47,144,45],[141,49,144,47],[142,8,145,6],[142,14,145,12],[142,18,145,16],[142,19,145,17,"_popupManager"],[142,32,145,30],[142,33,145,31,"popupPromise"],[142,45,145,43],[142,47,145,45,"promise"],[142,54,145,52],[143,8,146,6],[143,12,146,10],[143,13,146,11,"_popupManager"],[143,26,146,24],[143,27,146,25,"channel"],[143,34,146,32],[143,35,146,33,"postMessage"],[143,46,146,44],[143,47,146,45],[144,10,147,8,"type"],[144,14,147,12],[144,16,147,14,"events_2"],[144,24,147,22],[144,25,147,23,"POPUP"],[144,30,147,28],[144,31,147,29,"INIT"],[144,35,147,33],[145,10,148,8,"payload"],[145,17,148,15],[145,19,148,17],[146,12,149,10,"settings"],[146,20,149,18],[146,22,149,20],[146,26,149,24],[146,27,149,25,"_settings"],[146,36,149,34],[147,12,150,10,"useCore"],[147,19,150,17],[147,21,150,19],[148,10,151,8],[149,8,152,6],[149,9,152,7],[149,10,152,8],[150,6,153,4],[151,6,154,4],[151,12,154,10],[151,16,154,14],[151,17,154,15,"_popupManager"],[151,30,154,28],[151,31,154,29,"handshakePromise"],[151,47,154,45],[151,49,154,47,"promise"],[151,56,154,54],[152,4,155,2],[153,4,156,2,"uiResponse"],[153,14,156,12,"uiResponse"],[153,15,156,13,"response"],[153,23,156,21],[153,25,156,23],[154,6,157,4],[154,12,157,10],[155,8,158,6,"type"],[155,12,158,10],[156,8,159,6,"payload"],[157,6,160,4],[157,7,160,5],[157,10,160,8,"response"],[157,18,160,16],[158,6,161,4],[158,10,161,8],[158,11,161,9,"_popupManager"],[158,24,161,22],[158,26,161,24,"channel"],[158,33,161,31],[158,35,161,33,"postMessage"],[158,46,161,44],[158,47,161,45],[159,8,162,6,"event"],[159,13,162,11],[159,15,162,13,"events_2"],[159,23,162,21],[159,24,162,22,"UI_EVENT"],[159,32,162,30],[160,8,163,6,"type"],[160,12,163,10],[161,8,164,6,"payload"],[162,6,165,4],[162,7,165,5],[162,8,165,6],[163,4,166,2],[164,4,167,2,"renderWebUSBButton"],[164,22,167,20,"renderWebUSBButton"],[164,23,167,20],[164,25,167,23],[164,26,167,24],[165,4,168,2,"disableWebUSB"],[165,17,168,15,"disableWebUSB"],[165,18,168,15],[165,20,168,18],[166,6,169,4],[166,12,169,10,"ERRORS"],[166,18,169,16],[166,19,169,17,"TypedError"],[166,29,169,27],[166,30,169,28],[166,53,169,51],[166,54,169,52],[167,4,170,2],[168,4,171,2,"requestWebUSBDevice"],[168,23,171,21,"requestWebUSBDevice"],[168,24,171,21],[168,26,171,24],[169,6,172,4],[169,12,172,10,"ERRORS"],[169,18,172,16],[169,19,172,17,"TypedError"],[169,29,172,27],[169,30,172,28],[169,53,172,51],[169,54,172,52],[170,4,173,2],[171,2,174,0],[172,2,175,0,"exports"],[172,9,175,7],[172,10,175,8,"CoreInPopup"],[172,21,175,19],[172,24,175,22,"CoreInPopup"],[172,35,175,33],[173,2,176,0],[173,8,176,6,"impl"],[173,12,176,10],[173,15,176,13],[173,19,176,17,"CoreInPopup"],[173,30,176,28],[173,31,176,29],[173,32,176,30],[174,2,177,0,"exports"],[174,9,177,7],[174,10,177,8,"TrezorConnect"],[174,23,177,21],[174,26,177,24],[174,27,177,25],[174,28,177,26],[174,30,177,28,"factory_1"],[174,39,177,37],[174,40,177,38,"factory"],[174,47,177,45],[174,49,177,47],[175,4,178,2,"eventEmitter"],[175,16,178,14],[175,18,178,16,"impl"],[175,22,178,20],[175,23,178,21,"eventEmitter"],[175,35,178,33],[176,4,179,2,"init"],[176,8,179,6],[176,10,179,8,"impl"],[176,14,179,12],[176,15,179,13,"init"],[176,19,179,17],[176,20,179,18,"bind"],[176,24,179,22],[176,25,179,23,"impl"],[176,29,179,27],[176,30,179,28],[177,4,180,2,"call"],[177,8,180,6],[177,10,180,8,"impl"],[177,14,180,12],[177,15,180,13,"call"],[177,19,180,17],[177,20,180,18,"bind"],[177,24,180,22],[177,25,180,23,"impl"],[177,29,180,27],[177,30,180,28],[178,4,181,2,"setTransports"],[178,17,181,15],[178,19,181,17,"impl"],[178,23,181,21],[178,24,181,22,"setTransports"],[178,37,181,35],[178,38,181,36,"bind"],[178,42,181,40],[178,43,181,41,"impl"],[178,47,181,45],[178,48,181,46],[179,4,182,2,"manifest"],[179,12,182,10],[179,14,182,12,"impl"],[179,18,182,16],[179,19,182,17,"manifest"],[179,27,182,25],[179,28,182,26,"bind"],[179,32,182,30],[179,33,182,31,"impl"],[179,37,182,35],[179,38,182,36],[180,4,183,2,"uiResponse"],[180,14,183,12],[180,16,183,14,"impl"],[180,20,183,18],[180,21,183,19,"uiResponse"],[180,31,183,29],[180,32,183,30,"bind"],[180,36,183,34],[180,37,183,35,"impl"],[180,41,183,39],[180,42,183,40],[181,4,184,2,"cancel"],[181,10,184,8],[181,12,184,10,"impl"],[181,16,184,14],[181,17,184,15,"cancel"],[181,23,184,21],[181,24,184,22,"bind"],[181,28,184,26],[181,29,184,27,"impl"],[181,33,184,31],[181,34,184,32],[182,4,185,2,"dispose"],[182,11,185,9],[182,13,185,11,"impl"],[182,17,185,15],[182,18,185,16,"dispose"],[182,25,185,23],[182,26,185,24,"bind"],[182,30,185,28],[182,31,185,29,"impl"],[182,35,185,33],[183,2,186,0],[183,3,186,1],[183,4,186,2],[184,0,186,3],[184,3]],"functionMap":{"names":["<global>","CoreInPopup","CoreInPopup#constructor","CoreInPopup#logWriterFactory","add","CoreInPopup#manifest","CoreInPopup#dispose","CoreInPopup#cancel","CoreInPopup#init","_popupManager.on$argument_1","<anonymous>","CoreInPopup#setTransports","CoreInPopup#call","popupClosedHandler","CoreInPopup#callInit","CoreInPopup#uiResponse","CoreInPopup#renderWebUSBButton","CoreInPopup#disableWebUSB","CoreInPopup#requestWebUSBDevice"],"mappings":"AAA;ACe;ECM;GDI;EEC;WCE;ODS;GFE;EIC;GJK;EKC;GLO;EMC;GNI;EOC;mDCsB;ODE;gCEC,+CF;GPQ;EUC;GVE;EWC;+BCS;KDG;GX6B;EaC;GbgB;EcC;GdU;EeC,uBf;EgBC;GhBE;EiBC;GjBE;CDC"},"hasCjsExports":true},"type":"js/module"}]}