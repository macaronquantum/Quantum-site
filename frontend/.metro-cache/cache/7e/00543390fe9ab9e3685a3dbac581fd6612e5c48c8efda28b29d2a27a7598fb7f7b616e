{"dependencies":[{"name":"../lru.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}}],"key":"XXxf1f27fRBlavmTmJBOofiHWUg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"promiseCache\", {\n    enumerable: true,\n    get: function () {\n      return promiseCache;\n    }\n  });\n  exports.withDedupe = withDedupe;\n  var _lruJs = require(_dependencyMap[0], \"../lru.js\");\n  /** @internal */\n  const promiseCache = /*#__PURE__*/new _lruJs.LruMap(8192);\n  /** Deduplicates in-flight promises. */\n  function withDedupe(fn, {\n    enabled = true,\n    id\n  }) {\n    if (!enabled || !id) return fn();\n    if (promiseCache.get(id)) return promiseCache.get(id);\n    const promise = fn().finally(() => promiseCache.delete(id));\n    promiseCache.set(id, promise);\n    return promise;\n  }\n});","lineCount":28,"map":[[7,2,3,0,"Object"],[7,8,3,0],[7,9,3,0,"defineProperty"],[7,23,3,0],[7,24,3,0,"exports"],[7,31,3,0],[8,4,3,0,"enumerable"],[8,14,3,0],[9,4,3,0,"get"],[9,7,3,0],[9,18,3,0,"get"],[9,19,3,0],[10,6,3,0],[10,13,3,0,"promiseCache"],[10,25,3,0],[11,4,3,0],[12,2,3,0],[13,2,5,0,"exports"],[13,9,5,0],[13,10,5,0,"withDedupe"],[13,20,5,0],[13,23,5,0,"withDedupe"],[13,33,5,0],[14,2,1,0],[14,6,1,0,"_lruJs"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,2,0],[16,2,3,7],[16,8,3,13,"promiseCache"],[16,20,3,25],[16,23,3,28],[16,36,3,42],[16,40,3,46,"LruMap"],[16,46,3,52],[16,47,3,52,"LruMap"],[16,53,3,52],[16,54,3,53],[16,58,3,57],[16,59,3,58],[17,2,4,0],[18,2,5,7],[18,11,5,16,"withDedupe"],[18,21,5,26,"withDedupe"],[18,22,5,27,"fn"],[18,24,5,29],[18,26,5,31],[19,4,5,33,"enabled"],[19,11,5,40],[19,14,5,43],[19,18,5,47],[20,4,5,49,"id"],[21,2,5,52],[21,3,5,53],[21,5,5,55],[22,4,6,4],[22,8,6,8],[22,9,6,9,"enabled"],[22,16,6,16],[22,20,6,20],[22,21,6,21,"id"],[22,23,6,23],[22,25,7,8],[22,32,7,15,"fn"],[22,34,7,17],[22,35,7,18],[22,36,7,19],[23,4,8,4],[23,8,8,8,"promiseCache"],[23,20,8,20],[23,21,8,21,"get"],[23,24,8,24],[23,25,8,25,"id"],[23,27,8,27],[23,28,8,28],[23,30,9,8],[23,37,9,15,"promiseCache"],[23,49,9,27],[23,50,9,28,"get"],[23,53,9,31],[23,54,9,32,"id"],[23,56,9,34],[23,57,9,35],[24,4,10,4],[24,10,10,10,"promise"],[24,17,10,17],[24,20,10,20,"fn"],[24,22,10,22],[24,23,10,23],[24,24,10,24],[24,25,10,25,"finally"],[24,32,10,32],[24,33,10,33],[24,39,10,39,"promiseCache"],[24,51,10,51],[24,52,10,52,"delete"],[24,58,10,58],[24,59,10,59,"id"],[24,61,10,61],[24,62,10,62],[24,63,10,63],[25,4,11,4,"promiseCache"],[25,16,11,16],[25,17,11,17,"set"],[25,20,11,20],[25,21,11,21,"id"],[25,23,11,23],[25,25,11,25,"promise"],[25,32,11,32],[25,33,11,33],[26,4,12,4],[26,11,12,11,"promise"],[26,18,12,18],[27,2,13,0],[28,0,13,1],[28,3]],"functionMap":{"names":["<global>","withDedupe","fn._finally$argument_0"],"mappings":"AAA;OCI;iCCK,6BD;CDG"},"hasCjsExports":false},"type":"js/module"}]}