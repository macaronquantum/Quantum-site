{"dependencies":[{"name":"../../errors/request.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":58,"index":58}}],"key":"2pE/btc+6/9ceuRiPNwUYrtm86Y=","exportNames":["*"],"imports":1}},{"name":"../../errors/transport.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":59},"end":{"line":2,"column":62,"index":121}}],"key":"805IfQHE3SROi/84maXj3cvj+EI=","exportNames":["*"],"imports":1}},{"name":"../../utils/rpc/compat.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":122},"end":{"line":3,"column":54,"index":176}}],"key":"BqdFQYi/umte+F453mPIO84Ve40=","exportNames":["*"],"imports":1}},{"name":"../../utils/rpc/webSocket.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":177},"end":{"line":4,"column":70,"index":247}}],"key":"vu+4XtTqPv3WqBr4FAT9zJOP/mY=","exportNames":["*"],"imports":1}},{"name":"./createTransport.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":248},"end":{"line":5,"column":56,"index":304}}],"key":"IMAs7VdCtDa1Nl7Tey+wGJLFCUk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.webSocket = webSocket;\n  var _errorsRequestJs = require(_dependencyMap[0], \"../../errors/request.js\");\n  var _errorsTransportJs = require(_dependencyMap[1], \"../../errors/transport.js\");\n  var _utilsRpcCompatJs = require(_dependencyMap[2], \"../../utils/rpc/compat.js\");\n  var _utilsRpcWebSocketJs = require(_dependencyMap[3], \"../../utils/rpc/webSocket.js\");\n  var _createTransportJs = require(_dependencyMap[4], \"./createTransport.js\");\n  /**\n   * @description Creates a WebSocket transport that connects to a JSON-RPC API.\n   */\n  function webSocket(/** URL of the JSON-RPC API. Defaults to the chain's public RPC URL. */\n  url, config = {}) {\n    const {\n      keepAlive,\n      key = 'webSocket',\n      methods,\n      name = 'WebSocket JSON-RPC',\n      reconnect,\n      retryDelay\n    } = config;\n    return ({\n      chain,\n      retryCount: retryCount_,\n      timeout: timeout_\n    }) => {\n      const retryCount = config.retryCount ?? retryCount_;\n      const timeout = timeout_ ?? config.timeout ?? 10_000;\n      const url_ = url || chain?.rpcUrls.default.webSocket?.[0];\n      const wsRpcClientOpts = {\n        keepAlive,\n        reconnect\n      };\n      if (!url_) throw new _errorsTransportJs.UrlRequiredError();\n      return (0, _createTransportJs.createTransport)({\n        key,\n        methods,\n        name,\n        async request({\n          method,\n          params\n        }) {\n          const body = {\n            method,\n            params\n          };\n          const rpcClient = await (0, _utilsRpcWebSocketJs.getWebSocketRpcClient)(url_, wsRpcClientOpts);\n          const {\n            error,\n            result\n          } = await rpcClient.requestAsync({\n            body,\n            timeout\n          });\n          if (error) throw new _errorsRequestJs.RpcRequestError({\n            body,\n            error,\n            url: url_\n          });\n          return result;\n        },\n        retryCount,\n        retryDelay,\n        timeout,\n        type: 'webSocket'\n      }, {\n        getSocket() {\n          return (0, _utilsRpcCompatJs.getSocket)(url_);\n        },\n        getRpcClient() {\n          return (0, _utilsRpcWebSocketJs.getWebSocketRpcClient)(url_, wsRpcClientOpts);\n        },\n        async subscribe({\n          params,\n          onData,\n          onError\n        }) {\n          const rpcClient = await (0, _utilsRpcWebSocketJs.getWebSocketRpcClient)(url_, wsRpcClientOpts);\n          const {\n            result: subscriptionId\n          } = await new Promise((resolve, reject) => rpcClient.request({\n            body: {\n              method: 'eth_subscribe',\n              params\n            },\n            onError(error) {\n              reject(error);\n              onError?.(error);\n              return;\n            },\n            onResponse(response) {\n              if (response.error) {\n                reject(response.error);\n                onError?.(response.error);\n                return;\n              }\n              if (typeof response.id === 'number') {\n                resolve(response);\n                return;\n              }\n              if (response.method !== 'eth_subscription') return;\n              onData(response.params);\n            }\n          }));\n          return {\n            subscriptionId,\n            async unsubscribe() {\n              return new Promise(resolve => rpcClient.request({\n                body: {\n                  method: 'eth_unsubscribe',\n                  params: [subscriptionId]\n                },\n                onResponse: resolve\n              }));\n            }\n          };\n        }\n      });\n    };\n  }\n});","lineCount":125,"map":[[7,2,9,0,"exports"],[7,9,9,0],[7,10,9,0,"webSocket"],[7,19,9,0],[7,22,9,0,"webSocket"],[7,31,9,0],[8,2,1,0],[8,6,1,0,"_errorsRequestJs"],[8,22,1,0],[8,25,1,0,"require"],[8,32,1,0],[8,33,1,0,"_dependencyMap"],[8,47,1,0],[9,2,2,0],[9,6,2,0,"_errorsTransportJs"],[9,24,2,0],[9,27,2,0,"require"],[9,34,2,0],[9,35,2,0,"_dependencyMap"],[9,49,2,0],[10,2,3,0],[10,6,3,0,"_utilsRpcCompatJs"],[10,23,3,0],[10,26,3,0,"require"],[10,33,3,0],[10,34,3,0,"_dependencyMap"],[10,48,3,0],[11,2,4,0],[11,6,4,0,"_utilsRpcWebSocketJs"],[11,26,4,0],[11,29,4,0,"require"],[11,36,4,0],[11,37,4,0,"_dependencyMap"],[11,51,4,0],[12,2,5,0],[12,6,5,0,"_createTransportJs"],[12,24,5,0],[12,27,5,0,"require"],[12,34,5,0],[12,35,5,0,"_dependencyMap"],[12,49,5,0],[13,2,6,0],[14,0,7,0],[15,0,8,0],[16,2,9,7],[16,11,9,16,"webSocket"],[16,20,9,25,"webSocket"],[16,21,10,0],[17,2,11,0,"url"],[17,5,11,3],[17,7,11,5,"config"],[17,13,11,11],[17,16,11,14],[17,17,11,15],[17,18,11,16],[17,20,11,18],[18,4,12,4],[18,10,12,10],[19,6,12,12,"keepAlive"],[19,15,12,21],[20,6,12,23,"key"],[20,9,12,26],[20,12,12,29],[20,23,12,40],[21,6,12,42,"methods"],[21,13,12,49],[22,6,12,51,"name"],[22,10,12,55],[22,13,12,58],[22,33,12,78],[23,6,12,80,"reconnect"],[23,15,12,89],[24,6,12,91,"retryDelay"],[25,4,12,103],[25,5,12,104],[25,8,12,107,"config"],[25,14,12,113],[26,4,13,4],[26,11,13,11],[26,12,13,12],[27,6,13,14,"chain"],[27,11,13,19],[28,6,13,21,"retryCount"],[28,16,13,31],[28,18,13,33,"retryCount_"],[28,29,13,44],[29,6,13,46,"timeout"],[29,13,13,53],[29,15,13,55,"timeout_"],[30,4,13,64],[30,5,13,65],[30,10,13,70],[31,6,14,8],[31,12,14,14,"retryCount"],[31,22,14,24],[31,25,14,27,"config"],[31,31,14,33],[31,32,14,34,"retryCount"],[31,42,14,44],[31,46,14,48,"retryCount_"],[31,57,14,59],[32,6,15,8],[32,12,15,14,"timeout"],[32,19,15,21],[32,22,15,24,"timeout_"],[32,30,15,32],[32,34,15,36,"config"],[32,40,15,42],[32,41,15,43,"timeout"],[32,48,15,50],[32,52,15,54],[32,58,15,60],[33,6,16,8],[33,12,16,14,"url_"],[33,16,16,18],[33,19,16,21,"url"],[33,22,16,24],[33,26,16,28,"chain"],[33,31,16,33],[33,33,16,35,"rpcUrls"],[33,40,16,42],[33,41,16,43,"default"],[33,48,16,50],[33,49,16,51,"webSocket"],[33,58,16,60],[33,61,16,63],[33,62,16,64],[33,63,16,65],[34,6,17,8],[34,12,17,14,"wsRpcClientOpts"],[34,27,17,29],[34,30,17,32],[35,8,17,34,"keepAlive"],[35,17,17,43],[36,8,17,45,"reconnect"],[37,6,17,55],[37,7,17,56],[38,6,18,8],[38,10,18,12],[38,11,18,13,"url_"],[38,15,18,17],[38,17,19,12],[38,23,19,18],[38,27,19,22,"UrlRequiredError"],[38,45,19,38],[38,46,19,38,"UrlRequiredError"],[38,62,19,38],[38,63,19,39],[38,64,19,40],[39,6,20,8],[39,13,20,15],[39,17,20,15,"createTransport"],[39,35,20,30],[39,36,20,30,"createTransport"],[39,51,20,30],[39,53,20,31],[40,8,21,12,"key"],[40,11,21,15],[41,8,22,12,"methods"],[41,15,22,19],[42,8,23,12,"name"],[42,12,23,16],[43,8,24,12],[43,14,24,18,"request"],[43,21,24,25,"request"],[43,22,24,26],[44,10,24,28,"method"],[44,16,24,34],[45,10,24,36,"params"],[46,8,24,43],[46,9,24,44],[46,11,24,46],[47,10,25,16],[47,16,25,22,"body"],[47,20,25,26],[47,23,25,29],[48,12,25,31,"method"],[48,18,25,37],[49,12,25,39,"params"],[50,10,25,46],[50,11,25,47],[51,10,26,16],[51,16,26,22,"rpcClient"],[51,25,26,31],[51,28,26,34],[51,34,26,40],[51,38,26,40,"getWebSocketRpcClient"],[51,58,26,61],[51,59,26,61,"getWebSocketRpcClient"],[51,80,26,61],[51,82,26,62,"url_"],[51,86,26,66],[51,88,26,68,"wsRpcClientOpts"],[51,103,26,83],[51,104,26,84],[52,10,27,16],[52,16,27,22],[53,12,27,24,"error"],[53,17,27,29],[54,12,27,31,"result"],[55,10,27,38],[55,11,27,39],[55,14,27,42],[55,20,27,48,"rpcClient"],[55,29,27,57],[55,30,27,58,"requestAsync"],[55,42,27,70],[55,43,27,71],[56,12,28,20,"body"],[56,16,28,24],[57,12,29,20,"timeout"],[58,10,30,16],[58,11,30,17],[58,12,30,18],[59,10,31,16],[59,14,31,20,"error"],[59,19,31,25],[59,21,32,20],[59,27,32,26],[59,31,32,30,"RpcRequestError"],[59,47,32,45],[59,48,32,45,"RpcRequestError"],[59,63,32,45],[59,64,32,46],[60,12,33,24,"body"],[60,16,33,28],[61,12,34,24,"error"],[61,17,34,29],[62,12,35,24,"url"],[62,15,35,27],[62,17,35,29,"url_"],[63,10,36,20],[63,11,36,21],[63,12,36,22],[64,10,37,16],[64,17,37,23,"result"],[64,23,37,29],[65,8,38,12],[65,9,38,13],[66,8,39,12,"retryCount"],[66,18,39,22],[67,8,40,12,"retryDelay"],[67,18,40,22],[68,8,41,12,"timeout"],[68,15,41,19],[69,8,42,12,"type"],[69,12,42,16],[69,14,42,18],[70,6,43,8],[70,7,43,9],[70,9,43,11],[71,8,44,12,"getSocket"],[71,17,44,21,"getSocket"],[71,18,44,21],[71,20,44,24],[72,10,45,16],[72,17,45,23],[72,21,45,23,"getSocket"],[72,38,45,32],[72,39,45,32,"getSocket"],[72,48,45,32],[72,50,45,33,"url_"],[72,54,45,37],[72,55,45,38],[73,8,46,12],[73,9,46,13],[74,8,47,12,"getRpcClient"],[74,20,47,24,"getRpcClient"],[74,21,47,24],[74,23,47,27],[75,10,48,16],[75,17,48,23],[75,21,48,23,"getWebSocketRpcClient"],[75,41,48,44],[75,42,48,44,"getWebSocketRpcClient"],[75,63,48,44],[75,65,48,45,"url_"],[75,69,48,49],[75,71,48,51,"wsRpcClientOpts"],[75,86,48,66],[75,87,48,67],[76,8,49,12],[76,9,49,13],[77,8,50,12],[77,14,50,18,"subscribe"],[77,23,50,27,"subscribe"],[77,24,50,28],[78,10,50,30,"params"],[78,16,50,36],[79,10,50,38,"onData"],[79,16,50,44],[80,10,50,46,"onError"],[81,8,50,54],[81,9,50,55],[81,11,50,57],[82,10,51,16],[82,16,51,22,"rpcClient"],[82,25,51,31],[82,28,51,34],[82,34,51,40],[82,38,51,40,"getWebSocketRpcClient"],[82,58,51,61],[82,59,51,61,"getWebSocketRpcClient"],[82,80,51,61],[82,82,51,62,"url_"],[82,86,51,66],[82,88,51,68,"wsRpcClientOpts"],[82,103,51,83],[82,104,51,84],[83,10,52,16],[83,16,52,22],[84,12,52,24,"result"],[84,18,52,30],[84,20,52,32,"subscriptionId"],[85,10,52,47],[85,11,52,48],[85,14,52,51],[85,20,52,57],[85,24,52,61,"Promise"],[85,31,52,68],[85,32,52,69],[85,33,52,70,"resolve"],[85,40,52,77],[85,42,52,79,"reject"],[85,48,52,85],[85,53,52,90,"rpcClient"],[85,62,52,99],[85,63,52,100,"request"],[85,70,52,107],[85,71,52,108],[86,12,53,20,"body"],[86,16,53,24],[86,18,53,26],[87,14,54,24,"method"],[87,20,54,30],[87,22,54,32],[87,37,54,47],[88,14,55,24,"params"],[89,12,56,20],[89,13,56,21],[90,12,57,20,"onError"],[90,19,57,27,"onError"],[90,20,57,28,"error"],[90,25,57,33],[90,27,57,35],[91,14,58,24,"reject"],[91,20,58,30],[91,21,58,31,"error"],[91,26,58,36],[91,27,58,37],[92,14,59,24,"onError"],[92,21,59,31],[92,24,59,34,"error"],[92,29,59,39],[92,30,59,40],[93,14,60,24],[94,12,61,20],[94,13,61,21],[95,12,62,20,"onResponse"],[95,22,62,30,"onResponse"],[95,23,62,31,"response"],[95,31,62,39],[95,33,62,41],[96,14,63,24],[96,18,63,28,"response"],[96,26,63,36],[96,27,63,37,"error"],[96,32,63,42],[96,34,63,44],[97,16,64,28,"reject"],[97,22,64,34],[97,23,64,35,"response"],[97,31,64,43],[97,32,64,44,"error"],[97,37,64,49],[97,38,64,50],[98,16,65,28,"onError"],[98,23,65,35],[98,26,65,38,"response"],[98,34,65,46],[98,35,65,47,"error"],[98,40,65,52],[98,41,65,53],[99,16,66,28],[100,14,67,24],[101,14,68,24],[101,18,68,28],[101,25,68,35,"response"],[101,33,68,43],[101,34,68,44,"id"],[101,36,68,46],[101,41,68,51],[101,49,68,59],[101,51,68,61],[102,16,69,28,"resolve"],[102,23,69,35],[102,24,69,36,"response"],[102,32,69,44],[102,33,69,45],[103,16,70,28],[104,14,71,24],[105,14,72,24],[105,18,72,28,"response"],[105,26,72,36],[105,27,72,37,"method"],[105,33,72,43],[105,38,72,48],[105,56,72,66],[105,58,73,28],[106,14,74,24,"onData"],[106,20,74,30],[106,21,74,31,"response"],[106,29,74,39],[106,30,74,40,"params"],[106,36,74,46],[106,37,74,47],[107,12,75,20],[108,10,76,16],[108,11,76,17],[108,12,76,18],[108,13,76,19],[109,10,77,16],[109,17,77,23],[110,12,78,20,"subscriptionId"],[110,26,78,34],[111,12,79,20],[111,18,79,26,"unsubscribe"],[111,29,79,37,"unsubscribe"],[111,30,79,37],[111,32,79,40],[112,14,80,24],[112,21,80,31],[112,25,80,35,"Promise"],[112,32,80,42],[112,33,80,44,"resolve"],[112,40,80,51],[112,44,80,56,"rpcClient"],[112,53,80,65],[112,54,80,66,"request"],[112,61,80,73],[112,62,80,74],[113,16,81,28,"body"],[113,20,81,32],[113,22,81,34],[114,18,82,32,"method"],[114,24,82,38],[114,26,82,40],[114,43,82,57],[115,18,83,32,"params"],[115,24,83,38],[115,26,83,40],[115,27,83,41,"subscriptionId"],[115,41,83,55],[116,16,84,28],[116,17,84,29],[117,16,85,28,"onResponse"],[117,26,85,38],[117,28,85,40,"resolve"],[118,14,86,24],[118,15,86,25],[118,16,86,26],[118,17,86,27],[119,12,87,20],[120,10,88,16],[120,11,88,17],[121,8,89,12],[122,6,90,8],[122,7,90,9],[122,8,90,10],[123,4,91,4],[123,5,91,5],[124,2,92,0],[125,0,92,1],[125,3]],"functionMap":{"names":["<global>","webSocket","<anonymous>","createTransport$argument_0.request","createTransport$argument_1.getSocket","createTransport$argument_1.getRpcClient","createTransport$argument_1.subscribe","Promise$argument_0","rpcClient.request$argument_0.onError","rpcClient.request$argument_0.onResponse","unsubscribe"],"mappings":"AAA;OCQ;WCI;YCW;aDc;YEM;aFE;YGC;aHE;YIC;qECE;oBCK;qBDI;oBEC;qBFa;kBDC;oBIG;2CHC;0BGM;qBJC;aJE;KDE;CDC"},"hasCjsExports":false},"type":"js/module"}]}