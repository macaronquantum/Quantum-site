{"dependencies":[{"name":"../../utils/data/slice.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":53,"index":53}}],"key":"ggn5RSpoxdCBqYKMMVAHQVm5Iyk=","exportNames":["*"],"imports":1}},{"name":"../../utils/data/trim.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":54},"end":{"line":2,"column":48,"index":102}}],"key":"7bfEyUNAIOlzMN/tm0Ol8ZXCaIc=","exportNames":["*"],"imports":1}},{"name":"../../utils/encoding/fromHex.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":103},"end":{"line":3,"column":75,"index":178}}],"key":"uknfOLKh4Zy1p0iweRTTuAj/fYc=","exportNames":["*"],"imports":1}},{"name":"../../utils/formatters/transactionReceipt.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":179},"end":{"line":4,"column":79,"index":258}}],"key":"0jSiBqXZD2OBaO5Z37AJZpTC1Ao=","exportNames":["*"],"imports":1}},{"name":"./sendCalls.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":259},"end":{"line":5,"column":99,"index":358}}],"key":"xpqEgSLSliFvamOfZo+cyT1gP3w=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getCallsStatus = getCallsStatus;\n  var _utilsDataSliceJs = require(_dependencyMap[0], \"../../utils/data/slice.js\");\n  var _utilsDataTrimJs = require(_dependencyMap[1], \"../../utils/data/trim.js\");\n  var _utilsEncodingFromHexJs = require(_dependencyMap[2], \"../../utils/encoding/fromHex.js\");\n  var _utilsFormattersTransactionReceiptJs = require(_dependencyMap[3], \"../../utils/formatters/transactionReceipt.js\");\n  var _sendCallsJs = require(_dependencyMap[4], \"./sendCalls.js\");\n  /**\n   * Returns the status of a call batch that was sent via `sendCalls`.\n   *\n   * - Docs: https://viem.sh/docs/actions/wallet/getCallsStatus\n   * - JSON-RPC Methods: [`wallet_getCallsStatus`](https://eips.ethereum.org/EIPS/eip-5792)\n   *\n   * @param client - Client to use\n   * @returns Status of the calls. {@link GetCallsStatusReturnType}\n   *\n   * @example\n   * import { createWalletClient, custom } from 'viem'\n   * import { mainnet } from 'viem/chains'\n   * import { getCallsStatus } from 'viem/actions'\n   *\n   * const client = createWalletClient({\n   *   chain: mainnet,\n   *   transport: custom(window.ethereum),\n   * })\n   * const { receipts, status } = await getCallsStatus(client, { id: '0xdeadbeef' })\n   */\n  async function getCallsStatus(client, parameters) {\n    async function getStatus(id) {\n      const isTransactions = id.endsWith(_sendCallsJs.fallbackMagicIdentifier.slice(2));\n      if (isTransactions) {\n        const chainId = (0, _utilsDataTrimJs.trim)((0, _utilsDataSliceJs.sliceHex)(id, -64, -32));\n        const hashes = (0, _utilsDataSliceJs.sliceHex)(id, 0, -64).slice(2).match(/.{1,64}/g);\n        const receipts = await Promise.all(hashes.map(hash => _sendCallsJs.fallbackTransactionErrorMagicIdentifier.slice(2) !== hash ? client.request({\n          method: 'eth_getTransactionReceipt',\n          params: [`0x${hash}`]\n        }, {\n          dedupe: true\n        }) : undefined));\n        const status = (() => {\n          if (receipts.some(r => r === null)) return 100; // pending\n          if (receipts.every(r => r?.status === '0x1')) return 200; // success\n          if (receipts.every(r => r?.status === '0x0')) return 500; // complete failure\n          return 600; // partial failure\n        })();\n        return {\n          atomic: false,\n          chainId: (0, _utilsEncodingFromHexJs.hexToNumber)(chainId),\n          receipts: receipts.filter(Boolean),\n          status,\n          version: '2.0.0'\n        };\n      }\n      return client.request({\n        method: 'wallet_getCallsStatus',\n        params: [id]\n      });\n    }\n    const {\n      atomic = false,\n      chainId,\n      receipts,\n      version = '2.0.0',\n      ...response\n    } = await getStatus(parameters.id);\n    const [status, statusCode] = (() => {\n      const statusCode = response.status;\n      if (statusCode >= 100 && statusCode < 200) return ['pending', statusCode];\n      if (statusCode >= 200 && statusCode < 300) return ['success', statusCode];\n      if (statusCode >= 300 && statusCode < 700) return ['failure', statusCode];\n      // @ts-expect-error: for backwards compatibility\n      if (statusCode === 'CONFIRMED') return ['success', 200];\n      // @ts-expect-error: for backwards compatibility\n      if (statusCode === 'PENDING') return ['pending', 100];\n      return [undefined, statusCode];\n    })();\n    return {\n      ...response,\n      atomic,\n      // @ts-expect-error: for backwards compatibility\n      chainId: chainId ? (0, _utilsEncodingFromHexJs.hexToNumber)(chainId) : undefined,\n      receipts: receipts?.map(receipt => ({\n        ...receipt,\n        blockNumber: (0, _utilsEncodingFromHexJs.hexToBigInt)(receipt.blockNumber),\n        gasUsed: (0, _utilsEncodingFromHexJs.hexToBigInt)(receipt.gasUsed),\n        status: _utilsFormattersTransactionReceiptJs.receiptStatuses[receipt.status]\n      })) ?? [],\n      statusCode,\n      status,\n      version\n    };\n  }\n});","lineCount":98,"map":[[7,2,26,0,"exports"],[7,9,26,0],[7,10,26,0,"getCallsStatus"],[7,24,26,0],[7,27,26,0,"getCallsStatus"],[7,41,26,0],[8,2,1,0],[8,6,1,0,"_utilsDataSliceJs"],[8,23,1,0],[8,26,1,0,"require"],[8,33,1,0],[8,34,1,0,"_dependencyMap"],[8,48,1,0],[9,2,2,0],[9,6,2,0,"_utilsDataTrimJs"],[9,22,2,0],[9,25,2,0,"require"],[9,32,2,0],[9,33,2,0,"_dependencyMap"],[9,47,2,0],[10,2,3,0],[10,6,3,0,"_utilsEncodingFromHexJs"],[10,29,3,0],[10,32,3,0,"require"],[10,39,3,0],[10,40,3,0,"_dependencyMap"],[10,54,3,0],[11,2,4,0],[11,6,4,0,"_utilsFormattersTransactionReceiptJs"],[11,42,4,0],[11,45,4,0,"require"],[11,52,4,0],[11,53,4,0,"_dependencyMap"],[11,67,4,0],[12,2,5,0],[12,6,5,0,"_sendCallsJs"],[12,18,5,0],[12,21,5,0,"require"],[12,28,5,0],[12,29,5,0,"_dependencyMap"],[12,43,5,0],[13,2,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[17,0,10,0],[18,0,11,0],[19,0,12,0],[20,0,13,0],[21,0,14,0],[22,0,15,0],[23,0,16,0],[24,0,17,0],[25,0,18,0],[26,0,19,0],[27,0,20,0],[28,0,21,0],[29,0,22,0],[30,0,23,0],[31,0,24,0],[32,0,25,0],[33,2,26,7],[33,17,26,22,"getCallsStatus"],[33,31,26,36,"getCallsStatus"],[33,32,26,37,"client"],[33,38,26,43],[33,40,26,45,"parameters"],[33,50,26,55],[33,52,26,57],[34,4,27,4],[34,19,27,19,"getStatus"],[34,28,27,28,"getStatus"],[34,29,27,29,"id"],[34,31,27,31],[34,33,27,33],[35,6,28,8],[35,12,28,14,"isTransactions"],[35,26,28,28],[35,29,28,31,"id"],[35,31,28,33],[35,32,28,34,"endsWith"],[35,40,28,42],[35,41,28,43,"fallbackMagicIdentifier"],[35,53,28,66],[35,54,28,66,"fallbackMagicIdentifier"],[35,77,28,66],[35,78,28,67,"slice"],[35,83,28,72],[35,84,28,73],[35,85,28,74],[35,86,28,75],[35,87,28,76],[36,6,29,8],[36,10,29,12,"isTransactions"],[36,24,29,26],[36,26,29,28],[37,8,30,12],[37,14,30,18,"chainId"],[37,21,30,25],[37,24,30,28],[37,28,30,28,"trim"],[37,44,30,32],[37,45,30,32,"trim"],[37,49,30,32],[37,51,30,33],[37,55,30,33,"sliceHex"],[37,72,30,41],[37,73,30,41,"sliceHex"],[37,81,30,41],[37,83,30,42,"id"],[37,85,30,44],[37,87,30,46],[37,88,30,47],[37,90,30,49],[37,92,30,51],[37,93,30,52],[37,95,30,54],[37,96,30,55],[37,97,30,56],[38,8,31,12],[38,14,31,18,"hashes"],[38,20,31,24],[38,23,31,27],[38,27,31,27,"sliceHex"],[38,44,31,35],[38,45,31,35,"sliceHex"],[38,53,31,35],[38,55,31,36,"id"],[38,57,31,38],[38,59,31,40],[38,60,31,41],[38,62,31,43],[38,63,31,44],[38,65,31,46],[38,66,31,47],[38,67,32,17,"slice"],[38,72,32,22],[38,73,32,23],[38,74,32,24],[38,75,32,25],[38,76,33,17,"match"],[38,81,33,22],[38,82,33,23],[38,92,33,33],[38,93,33,34],[39,8,34,12],[39,14,34,18,"receipts"],[39,22,34,26],[39,25,34,29],[39,31,34,35,"Promise"],[39,38,34,42],[39,39,34,43,"all"],[39,42,34,46],[39,43,34,47,"hashes"],[39,49,34,53],[39,50,34,54,"map"],[39,53,34,57],[39,54,34,59,"hash"],[39,58,34,63],[39,62,34,68,"fallbackTransactionErrorMagicIdentifier"],[39,74,34,107],[39,75,34,107,"fallbackTransactionErrorMagicIdentifier"],[39,114,34,107],[39,115,34,108,"slice"],[39,120,34,113],[39,121,34,114],[39,122,34,115],[39,123,34,116],[39,128,34,121,"hash"],[39,132,34,125],[39,135,35,18,"client"],[39,141,35,24],[39,142,35,25,"request"],[39,149,35,32],[39,150,35,33],[40,10,36,20,"method"],[40,16,36,26],[40,18,36,28],[40,45,36,55],[41,10,37,20,"params"],[41,16,37,26],[41,18,37,28],[41,19,37,29],[41,24,37,34,"hash"],[41,28,37,38],[41,30,37,40],[42,8,38,16],[42,9,38,17],[42,11,38,19],[43,10,38,21,"dedupe"],[43,16,38,27],[43,18,38,29],[44,8,38,34],[44,9,38,35],[44,10,38,36],[44,13,39,18,"undefined"],[44,22,39,27],[44,23,39,28],[44,24,39,29],[45,8,40,12],[45,14,40,18,"status"],[45,20,40,24],[45,23,40,27],[45,24,40,28],[45,30,40,34],[46,10,41,16],[46,14,41,20,"receipts"],[46,22,41,28],[46,23,41,29,"some"],[46,27,41,33],[46,28,41,35,"r"],[46,29,41,36],[46,33,41,41,"r"],[46,34,41,42],[46,39,41,47],[46,43,41,51],[46,44,41,52],[46,46,42,20],[46,53,42,27],[46,56,42,30],[46,57,42,31],[46,58,42,32],[47,10,43,16],[47,14,43,20,"receipts"],[47,22,43,28],[47,23,43,29,"every"],[47,28,43,34],[47,29,43,36,"r"],[47,30,43,37],[47,34,43,42,"r"],[47,35,43,43],[47,37,43,45,"status"],[47,43,43,51],[47,48,43,56],[47,53,43,61],[47,54,43,62],[47,56,44,20],[47,63,44,27],[47,66,44,30],[47,67,44,31],[47,68,44,32],[48,10,45,16],[48,14,45,20,"receipts"],[48,22,45,28],[48,23,45,29,"every"],[48,28,45,34],[48,29,45,36,"r"],[48,30,45,37],[48,34,45,42,"r"],[48,35,45,43],[48,37,45,45,"status"],[48,43,45,51],[48,48,45,56],[48,53,45,61],[48,54,45,62],[48,56,46,20],[48,63,46,27],[48,66,46,30],[48,67,46,31],[48,68,46,32],[49,10,47,16],[49,17,47,23],[49,20,47,26],[49,21,47,27],[49,22,47,28],[50,8,48,12],[50,9,48,13],[50,11,48,15],[50,12,48,16],[51,8,49,12],[51,15,49,19],[52,10,50,16,"atomic"],[52,16,50,22],[52,18,50,24],[52,23,50,29],[53,10,51,16,"chainId"],[53,17,51,23],[53,19,51,25],[53,23,51,25,"hexToNumber"],[53,46,51,36],[53,47,51,36,"hexToNumber"],[53,58,51,36],[53,60,51,37,"chainId"],[53,67,51,44],[53,68,51,45],[54,10,52,16,"receipts"],[54,18,52,24],[54,20,52,26,"receipts"],[54,28,52,34],[54,29,52,35,"filter"],[54,35,52,41],[54,36,52,42,"Boolean"],[54,43,52,49],[54,44,52,50],[55,10,53,16,"status"],[55,16,53,22],[56,10,54,16,"version"],[56,17,54,23],[56,19,54,25],[57,8,55,12],[57,9,55,13],[58,6,56,8],[59,6,57,8],[59,13,57,15,"client"],[59,19,57,21],[59,20,57,22,"request"],[59,27,57,29],[59,28,57,30],[60,8,58,12,"method"],[60,14,58,18],[60,16,58,20],[60,39,58,43],[61,8,59,12,"params"],[61,14,59,18],[61,16,59,20],[61,17,59,21,"id"],[61,19,59,23],[62,6,60,8],[62,7,60,9],[62,8,60,10],[63,4,61,4],[64,4,62,4],[64,10,62,10],[65,6,62,12,"atomic"],[65,12,62,18],[65,15,62,21],[65,20,62,26],[66,6,62,28,"chainId"],[66,13,62,35],[67,6,62,37,"receipts"],[67,14,62,45],[68,6,62,47,"version"],[68,13,62,54],[68,16,62,57],[68,23,62,64],[69,6,62,66],[69,9,62,69,"response"],[70,4,62,78],[70,5,62,79],[70,8,62,82],[70,14,62,88,"getStatus"],[70,23,62,97],[70,24,62,98,"parameters"],[70,34,62,108],[70,35,62,109,"id"],[70,37,62,111],[70,38,62,112],[71,4,63,4],[71,10,63,10],[71,11,63,11,"status"],[71,17,63,17],[71,19,63,19,"statusCode"],[71,29,63,29],[71,30,63,30],[71,33,63,33],[71,34,63,34],[71,40,63,40],[72,6,64,8],[72,12,64,14,"statusCode"],[72,22,64,24],[72,25,64,27,"response"],[72,33,64,35],[72,34,64,36,"status"],[72,40,64,42],[73,6,65,8],[73,10,65,12,"statusCode"],[73,20,65,22],[73,24,65,26],[73,27,65,29],[73,31,65,33,"statusCode"],[73,41,65,43],[73,44,65,46],[73,47,65,49],[73,49,66,12],[73,56,66,19],[73,57,66,20],[73,66,66,29],[73,68,66,31,"statusCode"],[73,78,66,41],[73,79,66,42],[74,6,67,8],[74,10,67,12,"statusCode"],[74,20,67,22],[74,24,67,26],[74,27,67,29],[74,31,67,33,"statusCode"],[74,41,67,43],[74,44,67,46],[74,47,67,49],[74,49,68,12],[74,56,68,19],[74,57,68,20],[74,66,68,29],[74,68,68,31,"statusCode"],[74,78,68,41],[74,79,68,42],[75,6,69,8],[75,10,69,12,"statusCode"],[75,20,69,22],[75,24,69,26],[75,27,69,29],[75,31,69,33,"statusCode"],[75,41,69,43],[75,44,69,46],[75,47,69,49],[75,49,70,12],[75,56,70,19],[75,57,70,20],[75,66,70,29],[75,68,70,31,"statusCode"],[75,78,70,41],[75,79,70,42],[76,6,71,8],[77,6,72,8],[77,10,72,12,"statusCode"],[77,20,72,22],[77,25,72,27],[77,36,72,38],[77,38,73,12],[77,45,73,19],[77,46,73,20],[77,55,73,29],[77,57,73,31],[77,60,73,34],[77,61,73,35],[78,6,74,8],[79,6,75,8],[79,10,75,12,"statusCode"],[79,20,75,22],[79,25,75,27],[79,34,75,36],[79,36,76,12],[79,43,76,19],[79,44,76,20],[79,53,76,29],[79,55,76,31],[79,58,76,34],[79,59,76,35],[80,6,77,8],[80,13,77,15],[80,14,77,16,"undefined"],[80,23,77,25],[80,25,77,27,"statusCode"],[80,35,77,37],[80,36,77,38],[81,4,78,4],[81,5,78,5],[81,7,78,7],[81,8,78,8],[82,4,79,4],[82,11,79,11],[83,6,80,8],[83,9,80,11,"response"],[83,17,80,19],[84,6,81,8,"atomic"],[84,12,81,14],[85,6,82,8],[86,6,83,8,"chainId"],[86,13,83,15],[86,15,83,17,"chainId"],[86,22,83,24],[86,25,83,27],[86,29,83,27,"hexToNumber"],[86,52,83,38],[86,53,83,38,"hexToNumber"],[86,64,83,38],[86,66,83,39,"chainId"],[86,73,83,46],[86,74,83,47],[86,77,83,50,"undefined"],[86,86,83,59],[87,6,84,8,"receipts"],[87,14,84,16],[87,16,84,18,"receipts"],[87,24,84,26],[87,26,84,28,"map"],[87,29,84,31],[87,30,84,33,"receipt"],[87,37,84,40],[87,42,84,46],[88,8,85,12],[88,11,85,15,"receipt"],[88,18,85,22],[89,8,86,12,"blockNumber"],[89,19,86,23],[89,21,86,25],[89,25,86,25,"hexToBigInt"],[89,48,86,36],[89,49,86,36,"hexToBigInt"],[89,60,86,36],[89,62,86,37,"receipt"],[89,69,86,44],[89,70,86,45,"blockNumber"],[89,81,86,56],[89,82,86,57],[90,8,87,12,"gasUsed"],[90,15,87,19],[90,17,87,21],[90,21,87,21,"hexToBigInt"],[90,44,87,32],[90,45,87,32,"hexToBigInt"],[90,56,87,32],[90,58,87,33,"receipt"],[90,65,87,40],[90,66,87,41,"gasUsed"],[90,73,87,48],[90,74,87,49],[91,8,88,12,"status"],[91,14,88,18],[91,16,88,20,"receiptStatuses"],[91,52,88,35],[91,53,88,35,"receiptStatuses"],[91,68,88,35],[91,69,88,36,"receipt"],[91,76,88,43],[91,77,88,44,"status"],[91,83,88,50],[92,6,89,8],[92,7,89,9],[92,8,89,10],[92,9,89,11],[92,13,89,15],[92,15,89,17],[93,6,90,8,"statusCode"],[93,16,90,18],[94,6,91,8,"status"],[94,12,91,14],[95,6,92,8,"version"],[96,4,93,4],[96,5,93,5],[97,2,94,0],[98,0,94,1],[98,3]],"functionMap":{"names":["<global>","getCallsStatus","getStatus","hashes.map$argument_0","<anonymous>","receipts.some$argument_0","receipts.every$argument_0","receipts.map$argument_0"],"mappings":"AAA;OCyB;ICC;0DCO;2BDK;4BEC;kCCC,iBD;mCEE,0BF;mCEE,0BF;aFG;KDa;kCGE;KHe;gCMM;UNK;CDK"},"hasCjsExports":false},"type":"js/module"}]}