{"dependencies":[{"name":"../utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":16,"column":13,"index":384},"end":{"line":16,"column":32,"index":403}}],"key":"RFGtgFE/Tu4zdfnbMKbFHDM/T4I=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  /*\n   *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.filterIceServers = filterIceServers;\n  var _utils = require(_dependencyMap[0], \"../utils\");\n  var utils = _interopRequireWildcard(_utils);\n  function _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n      return obj;\n    } else {\n      var newObj = {};\n      if (obj != null) {\n        for (var key in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n        }\n      }\n      newObj.default = obj;\n      return newObj;\n    }\n  }\n\n  // Edge does not like\n  // 1) stun: filtered after 14393 unless ?transport=udp is present\n  // 2) turn: that does not have all of turn:host:port?transport=udp\n  // 3) turn: with ipv6 addresses\n  // 4) turn: occurring muliple times\n  function filterIceServers(iceServers, edgeVersion) {\n    var hasTurn = false;\n    iceServers = JSON.parse(JSON.stringify(iceServers));\n    return iceServers.filter(function (server) {\n      if (server && (server.urls || server.url)) {\n        var urls = server.urls || server.url;\n        if (server.url && !server.urls) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n        }\n        var isString = typeof urls === 'string';\n        if (isString) {\n          urls = [urls];\n        }\n        urls = urls.filter(function (url) {\n          // filter STUN unconditionally.\n          if (url.indexOf('stun:') === 0) {\n            return false;\n          }\n          var validTurn = url.startsWith('turn') && !url.startsWith('turn:[') && url.includes('transport=udp');\n          if (validTurn && !hasTurn) {\n            hasTurn = true;\n            return true;\n          }\n          return validTurn && !hasTurn;\n        });\n        delete server.url;\n        server.urls = isString ? urls[0] : urls;\n        return !!urls.length;\n      }\n    });\n  }\n});","lineCount":69,"map":[[2,2,1,0],[3,0,2,0],[4,0,3,0],[5,0,4,0],[6,0,5,0],[7,0,6,0],[8,0,7,0],[9,2,8,0],[10,2,9,0],[10,14,9,12],[12,2,11,0,"Object"],[12,8,11,6],[12,9,11,7,"defineProperty"],[12,23,11,21],[12,24,11,22,"exports"],[12,31,11,29],[12,33,11,31],[12,45,11,43],[12,47,11,45],[13,4,12,2,"value"],[13,9,12,7],[13,11,12,9],[14,2,13,0],[14,3,13,1],[14,4,13,2],[15,2,14,0,"exports"],[15,9,14,7],[15,10,14,8,"filterIceServers"],[15,26,14,24],[15,29,14,27,"filterIceServers"],[15,45,14,43],[16,2,16,0],[16,6,16,4,"_utils"],[16,12,16,10],[16,15,16,13,"require"],[16,22,16,20],[16,23,16,20,"_dependencyMap"],[16,37,16,20],[16,52,16,31],[16,53,16,32],[17,2,18,0],[17,6,18,4,"utils"],[17,11,18,9],[17,14,18,12,"_interopRequireWildcard"],[17,37,18,35],[17,38,18,36,"_utils"],[17,44,18,42],[17,45,18,43],[18,2,20,0],[18,11,20,9,"_interopRequireWildcard"],[18,34,20,32,"_interopRequireWildcard"],[18,35,20,33,"obj"],[18,38,20,36],[18,40,20,38],[19,4,20,40],[19,8,20,44,"obj"],[19,11,20,47],[19,15,20,51,"obj"],[19,18,20,54],[19,19,20,55,"__esModule"],[19,29,20,65],[19,31,20,67],[20,6,20,69],[20,13,20,76,"obj"],[20,16,20,79],[21,4,20,81],[21,5,20,82],[21,11,20,88],[22,6,20,90],[22,10,20,94,"newObj"],[22,16,20,100],[22,19,20,103],[22,20,20,104],[22,21,20,105],[23,6,20,107],[23,10,20,111,"obj"],[23,13,20,114],[23,17,20,118],[23,21,20,122],[23,23,20,124],[24,8,20,126],[24,13,20,131],[24,17,20,135,"key"],[24,20,20,138],[24,24,20,142,"obj"],[24,27,20,145],[24,29,20,147],[25,10,20,149],[25,14,20,153,"Object"],[25,20,20,159],[25,21,20,160,"prototype"],[25,30,20,169],[25,31,20,170,"hasOwnProperty"],[25,45,20,184],[25,46,20,185,"call"],[25,50,20,189],[25,51,20,190,"obj"],[25,54,20,193],[25,56,20,195,"key"],[25,59,20,198],[25,60,20,199],[25,62,20,201,"newObj"],[25,68,20,207],[25,69,20,208,"key"],[25,72,20,211],[25,73,20,212],[25,76,20,215,"obj"],[25,79,20,218],[25,80,20,219,"key"],[25,83,20,222],[25,84,20,223],[26,8,20,225],[27,6,20,227],[28,6,20,229,"newObj"],[28,12,20,235],[28,13,20,236,"default"],[28,20,20,243],[28,23,20,246,"obj"],[28,26,20,249],[29,6,20,251],[29,13,20,258,"newObj"],[29,19,20,264],[30,4,20,266],[31,2,20,268],[33,2,22,0],[34,2,23,0],[35,2,24,0],[36,2,25,0],[37,2,26,0],[38,2,27,0],[38,11,27,9,"filterIceServers"],[38,27,27,25,"filterIceServers"],[38,28,27,26,"iceServers"],[38,38,27,36],[38,40,27,38,"edgeVersion"],[38,51,27,49],[38,53,27,51],[39,4,28,2],[39,8,28,6,"hasTurn"],[39,15,28,13],[39,18,28,16],[39,23,28,21],[40,4,29,2,"iceServers"],[40,14,29,12],[40,17,29,15,"JSON"],[40,21,29,19],[40,22,29,20,"parse"],[40,27,29,25],[40,28,29,26,"JSON"],[40,32,29,30],[40,33,29,31,"stringify"],[40,42,29,40],[40,43,29,41,"iceServers"],[40,53,29,51],[40,54,29,52],[40,55,29,53],[41,4,30,2],[41,11,30,9,"iceServers"],[41,21,30,19],[41,22,30,20,"filter"],[41,28,30,26],[41,29,30,27],[41,39,30,37,"server"],[41,45,30,43],[41,47,30,45],[42,6,31,4],[42,10,31,8,"server"],[42,16,31,14],[42,21,31,19,"server"],[42,27,31,25],[42,28,31,26,"urls"],[42,32,31,30],[42,36,31,34,"server"],[42,42,31,40],[42,43,31,41,"url"],[42,46,31,44],[42,47,31,45],[42,49,31,47],[43,8,32,6],[43,12,32,10,"urls"],[43,16,32,14],[43,19,32,17,"server"],[43,25,32,23],[43,26,32,24,"urls"],[43,30,32,28],[43,34,32,32,"server"],[43,40,32,38],[43,41,32,39,"url"],[43,44,32,42],[44,8,33,6],[44,12,33,10,"server"],[44,18,33,16],[44,19,33,17,"url"],[44,22,33,20],[44,26,33,24],[44,27,33,25,"server"],[44,33,33,31],[44,34,33,32,"urls"],[44,38,33,36],[44,40,33,38],[45,10,34,8,"utils"],[45,15,34,13],[45,16,34,14,"deprecated"],[45,26,34,24],[45,27,34,25],[45,45,34,43],[45,47,34,45],[45,66,34,64],[45,67,34,65],[46,8,35,6],[47,8,36,6],[47,12,36,10,"isString"],[47,20,36,18],[47,23,36,21],[47,30,36,28,"urls"],[47,34,36,32],[47,39,36,37],[47,47,36,45],[48,8,37,6],[48,12,37,10,"isString"],[48,20,37,18],[48,22,37,20],[49,10,38,8,"urls"],[49,14,38,12],[49,17,38,15],[49,18,38,16,"urls"],[49,22,38,20],[49,23,38,21],[50,8,39,6],[51,8,40,6,"urls"],[51,12,40,10],[51,15,40,13,"urls"],[51,19,40,17],[51,20,40,18,"filter"],[51,26,40,24],[51,27,40,25],[51,37,40,35,"url"],[51,40,40,38],[51,42,40,40],[52,10,41,8],[53,10,42,8],[53,14,42,12,"url"],[53,17,42,15],[53,18,42,16,"indexOf"],[53,25,42,23],[53,26,42,24],[53,33,42,31],[53,34,42,32],[53,39,42,37],[53,40,42,38],[53,42,42,40],[54,12,43,10],[54,19,43,17],[54,24,43,22],[55,10,44,8],[56,10,46,8],[56,14,46,12,"validTurn"],[56,23,46,21],[56,26,46,24,"url"],[56,29,46,27],[56,30,46,28,"startsWith"],[56,40,46,38],[56,41,46,39],[56,47,46,45],[56,48,46,46],[56,52,46,50],[56,53,46,51,"url"],[56,56,46,54],[56,57,46,55,"startsWith"],[56,67,46,65],[56,68,46,66],[56,76,46,74],[56,77,46,75],[56,81,46,79,"url"],[56,84,46,82],[56,85,46,83,"includes"],[56,93,46,91],[56,94,46,92],[56,109,46,107],[56,110,46,108],[57,10,47,8],[57,14,47,12,"validTurn"],[57,23,47,21],[57,27,47,25],[57,28,47,26,"hasTurn"],[57,35,47,33],[57,37,47,35],[58,12,48,10,"hasTurn"],[58,19,48,17],[58,22,48,20],[58,26,48,24],[59,12,49,10],[59,19,49,17],[59,23,49,21],[60,10,50,8],[61,10,51,8],[61,17,51,15,"validTurn"],[61,26,51,24],[61,30,51,28],[61,31,51,29,"hasTurn"],[61,38,51,36],[62,8,52,6],[62,9,52,7],[62,10,52,8],[63,8,54,6],[63,15,54,13,"server"],[63,21,54,19],[63,22,54,20,"url"],[63,25,54,23],[64,8,55,6,"server"],[64,14,55,12],[64,15,55,13,"urls"],[64,19,55,17],[64,22,55,20,"isString"],[64,30,55,28],[64,33,55,31,"urls"],[64,37,55,35],[64,38,55,36],[64,39,55,37],[64,40,55,38],[64,43,55,41,"urls"],[64,47,55,45],[65,8,56,6],[65,15,56,13],[65,16,56,14],[65,17,56,15,"urls"],[65,21,56,19],[65,22,56,20,"length"],[65,28,56,26],[66,6,57,4],[67,4,58,2],[67,5,58,3],[67,6,58,4],[68,2,59,0],[69,0,59,1],[69,3]],"functionMap":{"names":["<global>","_interopRequireWildcard","filterIceServers","iceServers.filter$argument_0","urls.filter$argument_0"],"mappings":"AAA;ACmB,6QD;AEO;2BCG;yBCU;ODY;GDM;CFC"},"hasCjsExports":true},"type":"js/module"}]}