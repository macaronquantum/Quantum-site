{"dependencies":[{"name":"../../utils/chain/getChainContractAddress.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":88,"index":88}}],"key":"8qS5kCcV3GKt7vxDZBWLzJuplRM=","exportNames":["*"],"imports":1}},{"name":"../../utils/encoding/toHex.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":89},"end":{"line":2,"column":54,"index":143}}],"key":"U2IsyW1seIe5m4FUbe8axrr/0FQ=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/packetToBytes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":144},"end":{"line":3,"column":66,"index":210}}],"key":"vy6lnJxRhohVWN+VTecRsVVoAi0=","exportNames":["*"],"imports":1}},{"name":"../../utils/getAction.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":211},"end":{"line":4,"column":53,"index":264}}],"key":"vt4scbNyA2t/tyY0oQJI6AZPJS4=","exportNames":["*"],"imports":1}},{"name":"../public/readContract.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":265},"end":{"line":5,"column":58,"index":323}}],"key":"duxLiRpfja/POd/F8+OKH9hCagk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getEnsResolver = getEnsResolver;\n  var _utilsChainGetChainContractAddressJs = require(_dependencyMap[0], \"../../utils/chain/getChainContractAddress.js\");\n  var _utilsEncodingToHexJs = require(_dependencyMap[1], \"../../utils/encoding/toHex.js\");\n  var _utilsEnsPacketToBytesJs = require(_dependencyMap[2], \"../../utils/ens/packetToBytes.js\");\n  var _utilsGetActionJs = require(_dependencyMap[3], \"../../utils/getAction.js\");\n  var _publicReadContractJs = require(_dependencyMap[4], \"../public/readContract.js\");\n  /**\n   * Gets resolver for ENS name.\n   *\n   * - Docs: https://viem.sh/docs/ens/actions/getEnsResolver\n   * - Examples: https://stackblitz.com/github/wevm/viem/tree/main/examples/ens\n   *\n   * Calls `findResolver(bytes)` on ENS Universal Resolver Contract to retrieve the resolver of an ENS name.\n   *\n   * Since ENS names prohibit certain forbidden characters (e.g. underscore) and have other validation rules, you likely want to [normalize ENS names](https://docs.ens.domains/contract-api-reference/name-processing#normalising-names) with [UTS-46 normalization](https://unicode.org/reports/tr46) before passing them to `getEnsAddress`. You can use the built-in [`normalize`](https://viem.sh/docs/ens/utilities/normalize) function for this.\n   *\n   * @param client - Client to use\n   * @param parameters - {@link GetEnsResolverParameters}\n   * @returns Address for ENS resolver. {@link GetEnsResolverReturnType}\n   *\n   * @example\n   * import { createPublicClient, http } from 'viem'\n   * import { mainnet } from 'viem/chains'\n   * import { getEnsResolver, normalize } from 'viem/ens'\n   *\n   * const client = createPublicClient({\n   *   chain: mainnet,\n   *   transport: http(),\n   * })\n   * const resolverAddress = await getEnsResolver(client, {\n   *   name: normalize('wevm.eth'),\n   * })\n   * // '0x4976fb03C32e5B8cfe2b6cCB31c09Ba78EBaBa41'\n   */\n  async function getEnsResolver(client, parameters) {\n    const {\n      blockNumber,\n      blockTag,\n      name\n    } = parameters;\n    const {\n      chain\n    } = client;\n    const universalResolverAddress = (() => {\n      if (parameters.universalResolverAddress) return parameters.universalResolverAddress;\n      if (!chain) throw new Error('client chain not configured. universalResolverAddress is required.');\n      return (0, _utilsChainGetChainContractAddressJs.getChainContractAddress)({\n        blockNumber,\n        chain,\n        contract: 'ensUniversalResolver'\n      });\n    })();\n    const tlds = chain?.ensTlds;\n    if (tlds && !tlds.some(tld => name.endsWith(tld))) throw new Error(`${name} is not a valid ENS TLD (${tlds?.join(', ')}) for chain \"${chain.name}\" (id: ${chain.id}).`);\n    const [resolverAddress] = await (0, _utilsGetActionJs.getAction)(client, _publicReadContractJs.readContract, 'readContract')({\n      address: universalResolverAddress,\n      abi: [{\n        inputs: [{\n          type: 'bytes'\n        }],\n        name: 'findResolver',\n        outputs: [{\n          type: 'address'\n        }, {\n          type: 'bytes32'\n        }, {\n          type: 'uint256'\n        }],\n        stateMutability: 'view',\n        type: 'function'\n      }],\n      functionName: 'findResolver',\n      args: [(0, _utilsEncodingToHexJs.toHex)((0, _utilsEnsPacketToBytesJs.packetToBytes)(name))],\n      blockNumber,\n      blockTag\n    });\n    return resolverAddress;\n  }\n});","lineCount":85,"map":[[7,2,34,0,"exports"],[7,9,34,0],[7,10,34,0,"getEnsResolver"],[7,24,34,0],[7,27,34,0,"getEnsResolver"],[7,41,34,0],[8,2,1,0],[8,6,1,0,"_utilsChainGetChainContractAddressJs"],[8,42,1,0],[8,45,1,0,"require"],[8,52,1,0],[8,53,1,0,"_dependencyMap"],[8,67,1,0],[9,2,2,0],[9,6,2,0,"_utilsEncodingToHexJs"],[9,27,2,0],[9,30,2,0,"require"],[9,37,2,0],[9,38,2,0,"_dependencyMap"],[9,52,2,0],[10,2,3,0],[10,6,3,0,"_utilsEnsPacketToBytesJs"],[10,30,3,0],[10,33,3,0,"require"],[10,40,3,0],[10,41,3,0,"_dependencyMap"],[10,55,3,0],[11,2,4,0],[11,6,4,0,"_utilsGetActionJs"],[11,23,4,0],[11,26,4,0,"require"],[11,33,4,0],[11,34,4,0,"_dependencyMap"],[11,48,4,0],[12,2,5,0],[12,6,5,0,"_publicReadContractJs"],[12,27,5,0],[12,30,5,0,"require"],[12,37,5,0],[12,38,5,0,"_dependencyMap"],[12,52,5,0],[13,2,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[17,0,10,0],[18,0,11,0],[19,0,12,0],[20,0,13,0],[21,0,14,0],[22,0,15,0],[23,0,16,0],[24,0,17,0],[25,0,18,0],[26,0,19,0],[27,0,20,0],[28,0,21,0],[29,0,22,0],[30,0,23,0],[31,0,24,0],[32,0,25,0],[33,0,26,0],[34,0,27,0],[35,0,28,0],[36,0,29,0],[37,0,30,0],[38,0,31,0],[39,0,32,0],[40,0,33,0],[41,2,34,7],[41,17,34,22,"getEnsResolver"],[41,31,34,36,"getEnsResolver"],[41,32,34,37,"client"],[41,38,34,43],[41,40,34,45,"parameters"],[41,50,34,55],[41,52,34,57],[42,4,35,4],[42,10,35,10],[43,6,35,12,"blockNumber"],[43,17,35,23],[44,6,35,25,"blockTag"],[44,14,35,33],[45,6,35,35,"name"],[46,4,35,40],[46,5,35,41],[46,8,35,44,"parameters"],[46,18,35,54],[47,4,36,4],[47,10,36,10],[48,6,36,12,"chain"],[49,4,36,18],[49,5,36,19],[49,8,36,22,"client"],[49,14,36,28],[50,4,37,4],[50,10,37,10,"universalResolverAddress"],[50,34,37,34],[50,37,37,37],[50,38,37,38],[50,44,37,44],[51,6,38,8],[51,10,38,12,"parameters"],[51,20,38,22],[51,21,38,23,"universalResolverAddress"],[51,45,38,47],[51,47,39,12],[51,54,39,19,"parameters"],[51,64,39,29],[51,65,39,30,"universalResolverAddress"],[51,89,39,54],[52,6,40,8],[52,10,40,12],[52,11,40,13,"chain"],[52,16,40,18],[52,18,41,12],[52,24,41,18],[52,28,41,22,"Error"],[52,33,41,27],[52,34,41,28],[52,102,41,96],[52,103,41,97],[53,6,42,8],[53,13,42,15],[53,17,42,15,"getChainContractAddress"],[53,53,42,38],[53,54,42,38,"getChainContractAddress"],[53,77,42,38],[53,79,42,39],[54,8,43,12,"blockNumber"],[54,19,43,23],[55,8,44,12,"chain"],[55,13,44,17],[56,8,45,12,"contract"],[56,16,45,20],[56,18,45,22],[57,6,46,8],[57,7,46,9],[57,8,46,10],[58,4,47,4],[58,5,47,5],[58,7,47,7],[58,8,47,8],[59,4,48,4],[59,10,48,10,"tlds"],[59,14,48,14],[59,17,48,17,"chain"],[59,22,48,22],[59,24,48,24,"ensTlds"],[59,31,48,31],[60,4,49,4],[60,8,49,8,"tlds"],[60,12,49,12],[60,16,49,16],[60,17,49,17,"tlds"],[60,21,49,21],[60,22,49,22,"some"],[60,26,49,26],[60,27,49,28,"tld"],[60,30,49,31],[60,34,49,36,"name"],[60,38,49,40],[60,39,49,41,"endsWith"],[60,47,49,49],[60,48,49,50,"tld"],[60,51,49,53],[60,52,49,54],[60,53,49,55],[60,55,50,8],[60,61,50,14],[60,65,50,18,"Error"],[60,70,50,23],[60,71,50,24],[60,74,50,27,"name"],[60,78,50,31],[60,106,50,59,"tlds"],[60,110,50,63],[60,112,50,65,"join"],[60,116,50,69],[60,117,50,70],[60,121,50,74],[60,122,50,75],[60,138,50,91,"chain"],[60,143,50,96],[60,144,50,97,"name"],[60,148,50,101],[60,158,50,111,"chain"],[60,163,50,116],[60,164,50,117,"id"],[60,166,50,119],[60,170,50,123],[60,171,50,124],[61,4,51,4],[61,10,51,10],[61,11,51,11,"resolverAddress"],[61,26,51,26],[61,27,51,27],[61,30,51,30],[61,36,51,36],[61,40,51,36,"getAction"],[61,57,51,45],[61,58,51,45,"getAction"],[61,67,51,45],[61,69,51,46,"client"],[61,75,51,52],[61,77,51,54,"readContract"],[61,98,51,66],[61,99,51,66,"readContract"],[61,111,51,66],[61,113,51,68],[61,127,51,82],[61,128,51,83],[61,129,51,84],[62,6,52,8,"address"],[62,13,52,15],[62,15,52,17,"universalResolverAddress"],[62,39,52,41],[63,6,53,8,"abi"],[63,9,53,11],[63,11,53,13],[63,12,54,12],[64,8,55,16,"inputs"],[64,14,55,22],[64,16,55,24],[64,17,55,25],[65,10,55,27,"type"],[65,14,55,31],[65,16,55,33],[66,8,55,41],[66,9,55,42],[66,10,55,43],[67,8,56,16,"name"],[67,12,56,20],[67,14,56,22],[67,28,56,36],[68,8,57,16,"outputs"],[68,15,57,23],[68,17,57,25],[68,18,58,20],[69,10,58,22,"type"],[69,14,58,26],[69,16,58,28],[70,8,58,38],[70,9,58,39],[70,11,59,20],[71,10,59,22,"type"],[71,14,59,26],[71,16,59,28],[72,8,59,38],[72,9,59,39],[72,11,60,20],[73,10,60,22,"type"],[73,14,60,26],[73,16,60,28],[74,8,60,38],[74,9,60,39],[74,10,61,17],[75,8,62,16,"stateMutability"],[75,23,62,31],[75,25,62,33],[75,31,62,39],[76,8,63,16,"type"],[76,12,63,20],[76,14,63,22],[77,6,64,12],[77,7,64,13],[77,8,65,9],[78,6,66,8,"functionName"],[78,18,66,20],[78,20,66,22],[78,34,66,36],[79,6,67,8,"args"],[79,10,67,12],[79,12,67,14],[79,13,67,15],[79,17,67,15,"toHex"],[79,38,67,20],[79,39,67,20,"toHex"],[79,44,67,20],[79,46,67,21],[79,50,67,21,"packetToBytes"],[79,74,67,34],[79,75,67,34,"packetToBytes"],[79,88,67,34],[79,90,67,35,"name"],[79,94,67,39],[79,95,67,40],[79,96,67,41],[79,97,67,42],[80,6,68,8,"blockNumber"],[80,17,68,19],[81,6,69,8,"blockTag"],[82,4,70,4],[82,5,70,5],[82,6,70,6],[83,4,71,4],[83,11,71,11,"resolverAddress"],[83,26,71,26],[84,2,72,0],[85,0,72,1],[85,3]],"functionMap":{"names":["<global>","getEnsResolver","<anonymous>","tlds.some$argument_0"],"mappings":"AAA;OCiC;sCCG;KDU;2BEE,2BF;CDuB"},"hasCjsExports":false},"type":"js/module"}]}