{"dependencies":[{"name":"../../errors/fee.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":17,"index":210},"end":{"line":5,"column":47,"index":240}}],"key":"QDdJqUgF1pGl0s86wgFoZRlKBog=","exportNames":["*"],"imports":1}},{"name":"../../utils/getAction.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":23,"index":265},"end":{"line":6,"column":58,"index":300}}],"key":"d685V9n1u7O1oRJ2ZbnkuLpcslA=","exportNames":["*"],"imports":1}},{"name":"./estimateMaxPriorityFeePerGas.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":42,"index":344},"end":{"line":7,"column":86,"index":388}}],"key":"LF7RoI/BRljx488kBWqVYZh6myI=","exportNames":["*"],"imports":1}},{"name":"./getBlock.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":22,"index":412},"end":{"line":8,"column":46,"index":436}}],"key":"eVoWB1pNRHOKCD2KTTNcF/rQsNE=","exportNames":["*"],"imports":1}},{"name":"./getGasPrice.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":25,"index":463},"end":{"line":9,"column":52,"index":490}}],"key":"fctdSwT6aQtb8vFglTkkqoL8gC8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.estimateFeesPerGas = estimateFeesPerGas;\n  exports.internal_estimateFeesPerGas = internal_estimateFeesPerGas;\n  const fee_js_1 = require(_dependencyMap[0], \"../../errors/fee.js\");\n  const getAction_js_1 = require(_dependencyMap[1], \"../../utils/getAction.js\");\n  const estimateMaxPriorityFeePerGas_js_1 = require(_dependencyMap[2], \"./estimateMaxPriorityFeePerGas.js\");\n  const getBlock_js_1 = require(_dependencyMap[3], \"./getBlock.js\");\n  const getGasPrice_js_1 = require(_dependencyMap[4], \"./getGasPrice.js\");\n  async function estimateFeesPerGas(client, args) {\n    return internal_estimateFeesPerGas(client, args);\n  }\n  async function internal_estimateFeesPerGas(client, args) {\n    const {\n      block: block_,\n      chain = client.chain,\n      request,\n      type = 'eip1559'\n    } = args || {};\n    const baseFeeMultiplier = await (async () => {\n      if (typeof chain?.fees?.baseFeeMultiplier === 'function') return chain.fees.baseFeeMultiplier({\n        block: block_,\n        client,\n        request\n      });\n      return chain?.fees?.baseFeeMultiplier ?? 1.2;\n    })();\n    if (baseFeeMultiplier < 1) throw new fee_js_1.BaseFeeScalarError();\n    const decimals = baseFeeMultiplier.toString().split('.')[1]?.length ?? 0;\n    const denominator = 10 ** decimals;\n    const multiply = base => base * BigInt(Math.ceil(baseFeeMultiplier * denominator)) / BigInt(denominator);\n    const block = block_ ? block_ : await (0, getAction_js_1.getAction)(client, getBlock_js_1.getBlock, 'getBlock')({});\n    if (typeof chain?.fees?.estimateFeesPerGas === 'function') {\n      const fees = await chain.fees.estimateFeesPerGas({\n        block: block_,\n        client,\n        multiply,\n        request,\n        type\n      });\n      if (fees !== null) return fees;\n    }\n    if (type === 'eip1559') {\n      if (typeof block.baseFeePerGas !== 'bigint') throw new fee_js_1.Eip1559FeesNotSupportedError();\n      const maxPriorityFeePerGas = typeof request?.maxPriorityFeePerGas === 'bigint' ? request.maxPriorityFeePerGas : await (0, estimateMaxPriorityFeePerGas_js_1.internal_estimateMaxPriorityFeePerGas)(client, {\n        block: block,\n        chain,\n        request\n      });\n      const baseFeePerGas = multiply(block.baseFeePerGas);\n      const maxFeePerGas = request?.maxFeePerGas ?? baseFeePerGas + maxPriorityFeePerGas;\n      return {\n        maxFeePerGas,\n        maxPriorityFeePerGas\n      };\n    }\n    const gasPrice = request?.gasPrice ?? multiply(await (0, getAction_js_1.getAction)(client, getGasPrice_js_1.getGasPrice, 'getGasPrice')({}));\n    return {\n      gasPrice\n    };\n  }\n});","lineCount":66,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"estimateFeesPerGas"],[7,28,3,26],[7,31,3,29,"estimateFeesPerGas"],[7,49,3,47],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"internal_estimateFeesPerGas"],[8,37,4,35],[8,40,4,38,"internal_estimateFeesPerGas"],[8,67,4,65],[9,2,5,0],[9,8,5,6,"fee_js_1"],[9,16,5,14],[9,19,5,17,"require"],[9,26,5,24],[9,27,5,24,"_dependencyMap"],[9,41,5,24],[9,67,5,46],[9,68,5,47],[10,2,6,0],[10,8,6,6,"getAction_js_1"],[10,22,6,20],[10,25,6,23,"require"],[10,32,6,30],[10,33,6,30,"_dependencyMap"],[10,47,6,30],[10,78,6,57],[10,79,6,58],[11,2,7,0],[11,8,7,6,"estimateMaxPriorityFeePerGas_js_1"],[11,41,7,39],[11,44,7,42,"require"],[11,51,7,49],[11,52,7,49,"_dependencyMap"],[11,66,7,49],[11,106,7,85],[11,107,7,86],[12,2,8,0],[12,8,8,6,"getBlock_js_1"],[12,21,8,19],[12,24,8,22,"require"],[12,31,8,29],[12,32,8,29,"_dependencyMap"],[12,46,8,29],[12,66,8,45],[12,67,8,46],[13,2,9,0],[13,8,9,6,"getGasPrice_js_1"],[13,24,9,22],[13,27,9,25,"require"],[13,34,9,32],[13,35,9,32,"_dependencyMap"],[13,49,9,32],[13,72,9,51],[13,73,9,52],[14,2,10,0],[14,17,10,15,"estimateFeesPerGas"],[14,35,10,33,"estimateFeesPerGas"],[14,36,10,34,"client"],[14,42,10,40],[14,44,10,42,"args"],[14,48,10,46],[14,50,10,48],[15,4,11,4],[15,11,11,11,"internal_estimateFeesPerGas"],[15,38,11,38],[15,39,11,39,"client"],[15,45,11,45],[15,47,11,47,"args"],[15,51,11,51],[15,52,11,52],[16,2,12,0],[17,2,13,0],[17,17,13,15,"internal_estimateFeesPerGas"],[17,44,13,42,"internal_estimateFeesPerGas"],[17,45,13,43,"client"],[17,51,13,49],[17,53,13,51,"args"],[17,57,13,55],[17,59,13,57],[18,4,14,4],[18,10,14,10],[19,6,14,12,"block"],[19,11,14,17],[19,13,14,19,"block_"],[19,19,14,25],[20,6,14,27,"chain"],[20,11,14,32],[20,14,14,35,"client"],[20,20,14,41],[20,21,14,42,"chain"],[20,26,14,47],[21,6,14,49,"request"],[21,13,14,56],[22,6,14,58,"type"],[22,10,14,62],[22,13,14,65],[23,4,14,76],[23,5,14,77],[23,8,14,80,"args"],[23,12,14,84],[23,16,14,88],[23,17,14,89],[23,18,14,90],[24,4,15,4],[24,10,15,10,"baseFeeMultiplier"],[24,27,15,27],[24,30,15,30],[24,36,15,36],[24,37,15,37],[24,49,15,49],[25,6,16,8],[25,10,16,12],[25,17,16,19,"chain"],[25,22,16,24],[25,24,16,26,"fees"],[25,28,16,30],[25,30,16,32,"baseFeeMultiplier"],[25,47,16,49],[25,52,16,54],[25,62,16,64],[25,64,17,12],[25,71,17,19,"chain"],[25,76,17,24],[25,77,17,25,"fees"],[25,81,17,29],[25,82,17,30,"baseFeeMultiplier"],[25,99,17,47],[25,100,17,48],[26,8,18,16,"block"],[26,13,18,21],[26,15,18,23,"block_"],[26,21,18,29],[27,8,19,16,"client"],[27,14,19,22],[28,8,20,16,"request"],[29,6,21,12],[29,7,21,13],[29,8,21,14],[30,6,22,8],[30,13,22,15,"chain"],[30,18,22,20],[30,20,22,22,"fees"],[30,24,22,26],[30,26,22,28,"baseFeeMultiplier"],[30,43,22,45],[30,47,22,49],[30,50,22,52],[31,4,23,4],[31,5,23,5],[31,7,23,7],[31,8,23,8],[32,4,24,4],[32,8,24,8,"baseFeeMultiplier"],[32,25,24,25],[32,28,24,28],[32,29,24,29],[32,31,25,8],[32,37,25,14],[32,41,25,18,"fee_js_1"],[32,49,25,26],[32,50,25,27,"BaseFeeScalarError"],[32,68,25,45],[32,69,25,46],[32,70,25,47],[33,4,26,4],[33,10,26,10,"decimals"],[33,18,26,18],[33,21,26,21,"baseFeeMultiplier"],[33,38,26,38],[33,39,26,39,"toString"],[33,47,26,47],[33,48,26,48],[33,49,26,49],[33,50,26,50,"split"],[33,55,26,55],[33,56,26,56],[33,59,26,59],[33,60,26,60],[33,61,26,61],[33,62,26,62],[33,63,26,63],[33,65,26,65,"length"],[33,71,26,71],[33,75,26,75],[33,76,26,76],[34,4,27,4],[34,10,27,10,"denominator"],[34,21,27,21],[34,24,27,24],[34,26,27,26],[34,30,27,30,"decimals"],[34,38,27,38],[35,4,28,4],[35,10,28,10,"multiply"],[35,18,28,18],[35,21,28,22,"base"],[35,25,28,26],[35,29,28,32,"base"],[35,33,28,36],[35,36,28,39,"BigInt"],[35,42,28,45],[35,43,28,46,"Math"],[35,47,28,50],[35,48,28,51,"ceil"],[35,52,28,55],[35,53,28,56,"baseFeeMultiplier"],[35,70,28,73],[35,73,28,76,"denominator"],[35,84,28,87],[35,85,28,88],[35,86,28,89],[35,89,29,8,"BigInt"],[35,95,29,14],[35,96,29,15,"denominator"],[35,107,29,26],[35,108,29,27],[36,4,30,4],[36,10,30,10,"block"],[36,15,30,15],[36,18,30,18,"block_"],[36,24,30,24],[36,27,31,10,"block_"],[36,33,31,16],[36,36,32,10],[36,42,32,16],[36,43,32,17],[36,44,32,18],[36,46,32,20,"getAction_js_1"],[36,60,32,34],[36,61,32,35,"getAction"],[36,70,32,44],[36,72,32,46,"client"],[36,78,32,52],[36,80,32,54,"getBlock_js_1"],[36,93,32,67],[36,94,32,68,"getBlock"],[36,102,32,76],[36,104,32,78],[36,114,32,88],[36,115,32,89],[36,116,32,90],[36,117,32,91],[36,118,32,92],[36,119,32,93],[37,4,33,4],[37,8,33,8],[37,15,33,15,"chain"],[37,20,33,20],[37,22,33,22,"fees"],[37,26,33,26],[37,28,33,28,"estimateFeesPerGas"],[37,46,33,46],[37,51,33,51],[37,61,33,61],[37,63,33,63],[38,6,34,8],[38,12,34,14,"fees"],[38,16,34,18],[38,19,34,22],[38,25,34,28,"chain"],[38,30,34,33],[38,31,34,34,"fees"],[38,35,34,38],[38,36,34,39,"estimateFeesPerGas"],[38,54,34,57],[38,55,34,58],[39,8,35,12,"block"],[39,13,35,17],[39,15,35,19,"block_"],[39,21,35,25],[40,8,36,12,"client"],[40,14,36,18],[41,8,37,12,"multiply"],[41,16,37,20],[42,8,38,12,"request"],[42,15,38,19],[43,8,39,12,"type"],[44,6,40,8],[44,7,40,9],[44,8,40,11],[45,6,41,8],[45,10,41,12,"fees"],[45,14,41,16],[45,19,41,21],[45,23,41,25],[45,25,42,12],[45,32,42,19,"fees"],[45,36,42,23],[46,4,43,4],[47,4,44,4],[47,8,44,8,"type"],[47,12,44,12],[47,17,44,17],[47,26,44,26],[47,28,44,28],[48,6,45,8],[48,10,45,12],[48,17,45,19,"block"],[48,22,45,24],[48,23,45,25,"baseFeePerGas"],[48,36,45,38],[48,41,45,43],[48,49,45,51],[48,51,46,12],[48,57,46,18],[48,61,46,22,"fee_js_1"],[48,69,46,30],[48,70,46,31,"Eip1559FeesNotSupportedError"],[48,98,46,59],[48,99,46,60],[48,100,46,61],[49,6,47,8],[49,12,47,14,"maxPriorityFeePerGas"],[49,32,47,34],[49,35,47,37],[49,42,47,44,"request"],[49,49,47,51],[49,51,47,53,"maxPriorityFeePerGas"],[49,71,47,73],[49,76,47,78],[49,84,47,86],[49,87,48,14,"request"],[49,94,48,21],[49,95,48,22,"maxPriorityFeePerGas"],[49,115,48,42],[49,118,49,14],[49,124,49,20],[49,125,49,21],[49,126,49,22],[49,128,49,24,"estimateMaxPriorityFeePerGas_js_1"],[49,161,49,57],[49,162,49,58,"internal_estimateMaxPriorityFeePerGas"],[49,199,49,95],[49,201,49,97,"client"],[49,207,49,103],[49,209,49,105],[50,8,50,16,"block"],[50,13,50,21],[50,15,50,23,"block"],[50,20,50,28],[51,8,51,16,"chain"],[51,13,51,21],[52,8,52,16,"request"],[53,6,53,12],[53,7,53,13],[53,8,53,14],[54,6,54,8],[54,12,54,14,"baseFeePerGas"],[54,25,54,27],[54,28,54,30,"multiply"],[54,36,54,38],[54,37,54,39,"block"],[54,42,54,44],[54,43,54,45,"baseFeePerGas"],[54,56,54,58],[54,57,54,59],[55,6,55,8],[55,12,55,14,"maxFeePerGas"],[55,24,55,26],[55,27,55,29,"request"],[55,34,55,36],[55,36,55,38,"maxFeePerGas"],[55,48,55,50],[55,52,55,54,"baseFeePerGas"],[55,65,55,67],[55,68,55,70,"maxPriorityFeePerGas"],[55,88,55,90],[56,6,56,8],[56,13,56,15],[57,8,57,12,"maxFeePerGas"],[57,20,57,24],[58,8,58,12,"maxPriorityFeePerGas"],[59,6,59,8],[59,7,59,9],[60,4,60,4],[61,4,61,4],[61,10,61,10,"gasPrice"],[61,18,61,18],[61,21,61,21,"request"],[61,28,61,28],[61,30,61,30,"gasPrice"],[61,38,61,38],[61,42,62,8,"multiply"],[61,50,62,16],[61,51,62,17],[61,57,62,23],[61,58,62,24],[61,59,62,25],[61,61,62,27,"getAction_js_1"],[61,75,62,41],[61,76,62,42,"getAction"],[61,85,62,51],[61,87,62,53,"client"],[61,93,62,59],[61,95,62,61,"getGasPrice_js_1"],[61,111,62,77],[61,112,62,78,"getGasPrice"],[61,123,62,89],[61,125,62,91],[61,138,62,104],[61,139,62,105],[61,140,62,106],[61,141,62,107],[61,142,62,108],[61,143,62,109],[61,144,62,110],[62,4,63,4],[62,11,63,11],[63,6,64,8,"gasPrice"],[64,4,65,4],[64,5,65,5],[65,2,66,0],[66,0,66,1],[66,3]],"functionMap":{"names":["<global>","estimateFeesPerGas","internal_estimateFeesPerGas","<anonymous>","multiply"],"mappings":"AAA;ACS;CDE;AEC;qCCE;KDQ;qBEK;2BFC;CFqC"},"hasCjsExports":true},"type":"js/module"}]}