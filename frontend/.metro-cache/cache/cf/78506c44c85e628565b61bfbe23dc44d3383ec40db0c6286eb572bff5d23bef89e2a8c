{"dependencies":[{"name":"valtio/vanilla","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"tlag/MsaYf2kg1zwNazSfjYKwjI=","exportNames":["*"],"imports":1}},{"name":"@reown/appkit-common","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":61,"index":119}}],"key":"tGGAqs+Kmq4FPGRdYmE3fbQVe1Q=","exportNames":["*"],"imports":1}},{"name":"../utils/CoreHelperUtil.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":120},"end":{"line":3,"column":60,"index":180}}],"key":"t2il8JixUZGbsqLFJOI0L0rocYw=","exportNames":["*"],"imports":1}},{"name":"../utils/FetchUtil.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":181},"end":{"line":4,"column":50,"index":231}}],"key":"uIdqZyKbmlFb3VLmnJX+RP7kUKk=","exportNames":["*"],"imports":1}},{"name":"./AccountController.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":232},"end":{"line":5,"column":59,"index":291}}],"key":"+4PCAzzB6fyshWadj3ikSQifb4w=","exportNames":["*"],"imports":1}},{"name":"./AlertController.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":292},"end":{"line":6,"column":55,"index":347}}],"key":"K5liraf+iHab6YcASHldKaUDKzM=","exportNames":["*"],"imports":1}},{"name":"./OptionsController.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":348},"end":{"line":7,"column":59,"index":407}}],"key":"yJHi41ucnnYS/WpKI0YoyETdn6A=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"EventsController\", {\n    enumerable: true,\n    get: function () {\n      return EventsController;\n    }\n  });\n  var _valtioVanilla = require(_dependencyMap[0], \"valtio/vanilla\");\n  var _reownAppkitCommon = require(_dependencyMap[1], \"@reown/appkit-common\");\n  var _utilsCoreHelperUtilJs = require(_dependencyMap[2], \"../utils/CoreHelperUtil.js\");\n  var _utilsFetchUtilJs = require(_dependencyMap[3], \"../utils/FetchUtil.js\");\n  var _AccountControllerJs = require(_dependencyMap[4], \"./AccountController.js\");\n  var _AlertControllerJs = require(_dependencyMap[5], \"./AlertController.js\");\n  var _OptionsControllerJs = require(_dependencyMap[6], \"./OptionsController.js\");\n  // -- Helpers ------------------------------------------- //\n  const baseUrl = _utilsCoreHelperUtilJs.CoreHelperUtil.getAnalyticsUrl();\n  const api = new _utilsFetchUtilJs.FetchUtil({\n    baseUrl,\n    clientId: null\n  });\n  const excluded = ['MODAL_CREATED'];\n  // -- State --------------------------------------------- //\n  const state = (0, _valtioVanilla.proxy)({\n    timestamp: Date.now(),\n    reportedErrors: {},\n    data: {\n      type: 'track',\n      event: 'MODAL_CREATED'\n    }\n  });\n  // -- Controller ---------------------------------------- //\n  const EventsController = {\n    state,\n    subscribe(callback) {\n      return (0, _valtioVanilla.subscribe)(state, () => callback(state));\n    },\n    getSdkProperties() {\n      const {\n        projectId,\n        sdkType,\n        sdkVersion\n      } = _OptionsControllerJs.OptionsController.state;\n      return {\n        projectId,\n        st: sdkType,\n        sv: sdkVersion || 'html-wagmi-4.2.2'\n      };\n    },\n    async _sendAnalyticsEvent(payload) {\n      try {\n        const address = _AccountControllerJs.AccountController.state.address;\n        if (excluded.includes(payload.data.event) || true) {\n          return;\n        }\n        await api.post({\n          path: '/e',\n          params: EventsController.getSdkProperties(),\n          body: {\n            eventId: _utilsCoreHelperUtilJs.CoreHelperUtil.getUUID(),\n            url: window.location.href,\n            domain: window.location.hostname,\n            timestamp: payload.timestamp,\n            props: {\n              ...payload.data,\n              address\n            }\n          }\n        });\n        state.reportedErrors['FORBIDDEN'] = false;\n      } catch (err) {\n        const isForbiddenError = err instanceof Error && err.cause instanceof Response && err.cause.status === _reownAppkitCommon.ConstantsUtil.HTTP_STATUS_CODES.FORBIDDEN && !state.reportedErrors['FORBIDDEN'];\n        if (isForbiddenError) {\n          _AlertControllerJs.AlertController.open({\n            shortMessage: 'Invalid App Configuration',\n            longMessage: `Origin ${(0, _reownAppkitCommon.isSafe)() ? window.origin : 'uknown'} not found on Allowlist - update configuration on cloud.reown.com`\n          }, 'error');\n          state.reportedErrors['FORBIDDEN'] = true;\n        }\n      }\n    },\n    sendEvent(data) {\n      state.timestamp = Date.now();\n      state.data = data;\n      if (_OptionsControllerJs.OptionsController.state.features?.analytics) {\n        EventsController._sendAnalyticsEvent(state);\n      }\n    }\n  };\n});","lineCount":94,"map":[[7,2,22,0,"Object"],[7,8,22,0],[7,9,22,0,"defineProperty"],[7,23,22,0],[7,24,22,0,"exports"],[7,31,22,0],[8,4,22,0,"enumerable"],[8,14,22,0],[9,4,22,0,"get"],[9,7,22,0],[9,18,22,0,"get"],[9,19,22,0],[10,6,22,0],[10,13,22,0,"EventsController"],[10,29,22,0],[11,4,22,0],[12,2,22,0],[13,2,1,0],[13,6,1,0,"_valtioVanilla"],[13,20,1,0],[13,23,1,0,"require"],[13,30,1,0],[13,31,1,0,"_dependencyMap"],[13,45,1,0],[14,2,2,0],[14,6,2,0,"_reownAppkitCommon"],[14,24,2,0],[14,27,2,0,"require"],[14,34,2,0],[14,35,2,0,"_dependencyMap"],[14,49,2,0],[15,2,3,0],[15,6,3,0,"_utilsCoreHelperUtilJs"],[15,28,3,0],[15,31,3,0,"require"],[15,38,3,0],[15,39,3,0,"_dependencyMap"],[15,53,3,0],[16,2,4,0],[16,6,4,0,"_utilsFetchUtilJs"],[16,23,4,0],[16,26,4,0,"require"],[16,33,4,0],[16,34,4,0,"_dependencyMap"],[16,48,4,0],[17,2,5,0],[17,6,5,0,"_AccountControllerJs"],[17,26,5,0],[17,29,5,0,"require"],[17,36,5,0],[17,37,5,0,"_dependencyMap"],[17,51,5,0],[18,2,6,0],[18,6,6,0,"_AlertControllerJs"],[18,24,6,0],[18,27,6,0,"require"],[18,34,6,0],[18,35,6,0,"_dependencyMap"],[18,49,6,0],[19,2,7,0],[19,6,7,0,"_OptionsControllerJs"],[19,26,7,0],[19,29,7,0,"require"],[19,36,7,0],[19,37,7,0,"_dependencyMap"],[19,51,7,0],[20,2,8,0],[21,2,9,0],[21,8,9,6,"baseUrl"],[21,15,9,13],[21,18,9,16,"CoreHelperUtil"],[21,40,9,30],[21,41,9,30,"CoreHelperUtil"],[21,55,9,30],[21,56,9,31,"getAnalyticsUrl"],[21,71,9,46],[21,72,9,47],[21,73,9,48],[22,2,10,0],[22,8,10,6,"api"],[22,11,10,9],[22,14,10,12],[22,18,10,16,"FetchUtil"],[22,35,10,25],[22,36,10,25,"FetchUtil"],[22,45,10,25],[22,46,10,26],[23,4,10,28,"baseUrl"],[23,11,10,35],[24,4,10,37,"clientId"],[24,12,10,45],[24,14,10,47],[25,2,10,52],[25,3,10,53],[25,4,10,54],[26,2,11,0],[26,8,11,6,"excluded"],[26,16,11,14],[26,19,11,17],[26,20,11,18],[26,35,11,33],[26,36,11,34],[27,2,12,0],[28,2,13,0],[28,8,13,6,"state"],[28,13,13,11],[28,16,13,14],[28,20,13,14,"proxy"],[28,34,13,19],[28,35,13,19,"proxy"],[28,40,13,19],[28,42,13,20],[29,4,14,4,"timestamp"],[29,13,14,13],[29,15,14,15,"Date"],[29,19,14,19],[29,20,14,20,"now"],[29,23,14,23],[29,24,14,24],[29,25,14,25],[30,4,15,4,"reportedErrors"],[30,18,15,18],[30,20,15,20],[30,21,15,21],[30,22,15,22],[31,4,16,4,"data"],[31,8,16,8],[31,10,16,10],[32,6,17,8,"type"],[32,10,17,12],[32,12,17,14],[32,19,17,21],[33,6,18,8,"event"],[33,11,18,13],[33,13,18,15],[34,4,19,4],[35,2,20,0],[35,3,20,1],[35,4,20,2],[36,2,21,0],[37,2,22,7],[37,8,22,13,"EventsController"],[37,24,22,29],[37,27,22,32],[38,4,23,4,"state"],[38,9,23,9],[39,4,24,4,"subscribe"],[39,13,24,13,"subscribe"],[39,14,24,14,"callback"],[39,22,24,22],[39,24,24,24],[40,6,25,8],[40,13,25,15],[40,17,25,15,"sub"],[40,31,25,18],[40,32,25,18,"subscribe"],[40,41,25,18],[40,43,25,19,"state"],[40,48,25,24],[40,50,25,26],[40,56,25,32,"callback"],[40,64,25,40],[40,65,25,41,"state"],[40,70,25,46],[40,71,25,47],[40,72,25,48],[41,4,26,4],[41,5,26,5],[42,4,27,4,"getSdkProperties"],[42,20,27,20,"getSdkProperties"],[42,21,27,20],[42,23,27,23],[43,6,28,8],[43,12,28,14],[44,8,28,16,"projectId"],[44,17,28,25],[45,8,28,27,"sdkType"],[45,15,28,34],[46,8,28,36,"sdkVersion"],[47,6,28,47],[47,7,28,48],[47,10,28,51,"OptionsController"],[47,30,28,68],[47,31,28,68,"OptionsController"],[47,48,28,68],[47,49,28,69,"state"],[47,54,28,74],[48,6,29,8],[48,13,29,15],[49,8,30,12,"projectId"],[49,17,30,21],[50,8,31,12,"st"],[50,10,31,14],[50,12,31,16,"sdkType"],[50,19,31,23],[51,8,32,12,"sv"],[51,10,32,14],[51,12,32,16,"sdkVersion"],[51,22,32,26],[51,26,32,30],[52,6,33,8],[52,7,33,9],[53,4,34,4],[53,5,34,5],[54,4,35,4],[54,10,35,10,"_sendAnalyticsEvent"],[54,29,35,29,"_sendAnalyticsEvent"],[54,30,35,30,"payload"],[54,37,35,37],[54,39,35,39],[55,6,36,8],[55,10,36,12],[56,8,37,12],[56,14,37,18,"address"],[56,21,37,25],[56,24,37,28,"AccountController"],[56,44,37,45],[56,45,37,45,"AccountController"],[56,62,37,45],[56,63,37,46,"state"],[56,68,37,51],[56,69,37,52,"address"],[56,76,37,59],[57,8,38,12],[57,12,38,16,"excluded"],[57,20,38,24],[57,21,38,25,"includes"],[57,29,38,33],[57,30,38,34,"payload"],[57,37,38,41],[57,38,38,42,"data"],[57,42,38,46],[57,43,38,47,"event"],[57,48,38,52],[57,49,38,53],[57,57,38,86],[57,59,38,88],[58,10,39,16],[59,8,40,12],[60,8,41,12],[60,14,41,18,"api"],[60,17,41,21],[60,18,41,22,"post"],[60,22,41,26],[60,23,41,27],[61,10,42,16,"path"],[61,14,42,20],[61,16,42,22],[61,20,42,26],[62,10,43,16,"params"],[62,16,43,22],[62,18,43,24,"EventsController"],[62,34,43,40],[62,35,43,41,"getSdkProperties"],[62,51,43,57],[62,52,43,58],[62,53,43,59],[63,10,44,16,"body"],[63,14,44,20],[63,16,44,22],[64,12,45,20,"eventId"],[64,19,45,27],[64,21,45,29,"CoreHelperUtil"],[64,43,45,43],[64,44,45,43,"CoreHelperUtil"],[64,58,45,43],[64,59,45,44,"getUUID"],[64,66,45,51],[64,67,45,52],[64,68,45,53],[65,12,46,20,"url"],[65,15,46,23],[65,17,46,25,"window"],[65,23,46,31],[65,24,46,32,"location"],[65,32,46,40],[65,33,46,41,"href"],[65,37,46,45],[66,12,47,20,"domain"],[66,18,47,26],[66,20,47,28,"window"],[66,26,47,34],[66,27,47,35,"location"],[66,35,47,43],[66,36,47,44,"hostname"],[66,44,47,52],[67,12,48,20,"timestamp"],[67,21,48,29],[67,23,48,31,"payload"],[67,30,48,38],[67,31,48,39,"timestamp"],[67,40,48,48],[68,12,49,20,"props"],[68,17,49,25],[68,19,49,27],[69,14,49,29],[69,17,49,32,"payload"],[69,24,49,39],[69,25,49,40,"data"],[69,29,49,44],[70,14,49,46,"address"],[71,12,49,54],[72,10,50,16],[73,8,51,12],[73,9,51,13],[73,10,51,14],[74,8,52,12,"state"],[74,13,52,17],[74,14,52,18,"reportedErrors"],[74,28,52,32],[74,29,52,33],[74,40,52,44],[74,41,52,45],[74,44,52,48],[74,49,52,53],[75,6,53,8],[75,7,53,9],[75,8,54,8],[75,15,54,15,"err"],[75,18,54,18],[75,20,54,20],[76,8,55,12],[76,14,55,18,"isForbiddenError"],[76,30,55,34],[76,33,55,37,"err"],[76,36,55,40],[76,48,55,52,"Error"],[76,53,55,57],[76,57,56,16,"err"],[76,60,56,19],[76,61,56,20,"cause"],[76,66,56,25],[76,78,56,37,"Response"],[76,86,56,45],[76,90,57,16,"err"],[76,93,57,19],[76,94,57,20,"cause"],[76,99,57,25],[76,100,57,26,"status"],[76,106,57,32],[76,111,57,37,"ConstantsUtil"],[76,129,57,50],[76,130,57,50,"ConstantsUtil"],[76,143,57,50],[76,144,57,51,"HTTP_STATUS_CODES"],[76,161,57,68],[76,162,57,69,"FORBIDDEN"],[76,171,57,78],[76,175,58,16],[76,176,58,17,"state"],[76,181,58,22],[76,182,58,23,"reportedErrors"],[76,196,58,37],[76,197,58,38],[76,208,58,49],[76,209,58,50],[77,8,59,12],[77,12,59,16,"isForbiddenError"],[77,28,59,32],[77,30,59,34],[78,10,60,16,"AlertController"],[78,28,60,31],[78,29,60,31,"AlertController"],[78,44,60,31],[78,45,60,32,"open"],[78,49,60,36],[78,50,60,37],[79,12,61,20,"shortMessage"],[79,24,61,32],[79,26,61,34],[79,53,61,61],[80,12,62,20,"longMessage"],[80,23,62,31],[80,25,62,33],[80,35,62,43],[80,39,62,43,"isSafe"],[80,57,62,49],[80,58,62,49,"isSafe"],[80,64,62,49],[80,66,62,50],[80,67,62,51],[80,70,62,54,"window"],[80,76,62,60],[80,77,62,61,"origin"],[80,83,62,67],[80,86,62,70],[80,94,62,78],[81,10,63,16],[81,11,63,17],[81,13,63,19],[81,20,63,26],[81,21,63,27],[82,10,64,16,"state"],[82,15,64,21],[82,16,64,22,"reportedErrors"],[82,30,64,36],[82,31,64,37],[82,42,64,48],[82,43,64,49],[82,46,64,52],[82,50,64,56],[83,8,65,12],[84,6,66,8],[85,4,67,4],[85,5,67,5],[86,4,68,4,"sendEvent"],[86,13,68,13,"sendEvent"],[86,14,68,14,"data"],[86,18,68,18],[86,20,68,20],[87,6,69,8,"state"],[87,11,69,13],[87,12,69,14,"timestamp"],[87,21,69,23],[87,24,69,26,"Date"],[87,28,69,30],[87,29,69,31,"now"],[87,32,69,34],[87,33,69,35],[87,34,69,36],[88,6,70,8,"state"],[88,11,70,13],[88,12,70,14,"data"],[88,16,70,18],[88,19,70,21,"data"],[88,23,70,25],[89,6,71,8],[89,10,71,12,"OptionsController"],[89,30,71,29],[89,31,71,29,"OptionsController"],[89,48,71,29],[89,49,71,30,"state"],[89,54,71,35],[89,55,71,36,"features"],[89,63,71,44],[89,65,71,46,"analytics"],[89,74,71,55],[89,76,71,57],[90,8,72,12,"EventsController"],[90,24,72,28],[90,25,72,29,"_sendAnalyticsEvent"],[90,44,72,48],[90,45,72,49,"state"],[90,50,72,54],[90,51,72,55],[91,6,73,8],[92,4,74,4],[93,2,75,0],[93,3,75,1],[94,0,75,2],[94,3]],"functionMap":{"names":["<global>","subscribe","sub$argument_1","getSdkProperties","_sendAnalyticsEvent","sendEvent"],"mappings":"AAA;ICuB;0BCC,qBD;KDC;IGC;KHO;IIC;KJgC;IKC;KLM"},"hasCjsExports":false},"type":"js/module"}]}