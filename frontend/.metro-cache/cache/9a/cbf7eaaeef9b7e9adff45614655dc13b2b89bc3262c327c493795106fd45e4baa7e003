{"dependencies":[{"name":"./error-constants","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":26,"index":227},"end":{"line":4,"column":54,"index":255}}],"key":"iqfTSvKNhGnN/rOajzo8n+GZdxI=","exportNames":["*"],"imports":1}},{"name":"./classes","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":18,"index":275},"end":{"line":5,"column":38,"index":295}}],"key":"CW+ANeKnkKiMLeiGtIRvWnLGQ0g=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.serializeError = exports.isValidCode = exports.getMessageFromCode = exports.JSON_RPC_SERVER_ERROR_MESSAGE = void 0;\n  const error_constants_1 = require(_dependencyMap[0], \"./error-constants\");\n  const classes_1 = require(_dependencyMap[1], \"./classes\");\n  const FALLBACK_ERROR_CODE = error_constants_1.errorCodes.rpc.internal;\n  const FALLBACK_MESSAGE = 'Unspecified error message. This is a bug, please report it.';\n  const FALLBACK_ERROR = {\n    code: FALLBACK_ERROR_CODE,\n    message: getMessageFromCode(FALLBACK_ERROR_CODE)\n  };\n  exports.JSON_RPC_SERVER_ERROR_MESSAGE = 'Unspecified server error.';\n  /**\n   * Gets the message for a given code, or a fallback message if the code has\n   * no corresponding message.\n   */\n  function getMessageFromCode(code, fallbackMessage = FALLBACK_MESSAGE) {\n    if (Number.isInteger(code)) {\n      const codeString = code.toString();\n      if (hasKey(error_constants_1.errorValues, codeString)) {\n        return error_constants_1.errorValues[codeString].message;\n      }\n      if (isJsonRpcServerError(code)) {\n        return exports.JSON_RPC_SERVER_ERROR_MESSAGE;\n      }\n    }\n    return fallbackMessage;\n  }\n  exports.getMessageFromCode = getMessageFromCode;\n  /**\n   * Returns whether the given code is valid.\n   * A code is only valid if it has a message.\n   */\n  function isValidCode(code) {\n    if (!Number.isInteger(code)) {\n      return false;\n    }\n    const codeString = code.toString();\n    if (error_constants_1.errorValues[codeString]) {\n      return true;\n    }\n    if (isJsonRpcServerError(code)) {\n      return true;\n    }\n    return false;\n  }\n  exports.isValidCode = isValidCode;\n  /**\n   * Serializes the given error to an Ethereum JSON RPC-compatible error object.\n   * Merely copies the given error's values if it is already compatible.\n   * If the given error is not fully compatible, it will be preserved on the\n   * returned object's data.originalError property.\n   */\n  function serializeError(error, {\n    fallbackError = FALLBACK_ERROR,\n    shouldIncludeStack = false\n  } = {}) {\n    var _a, _b;\n    if (!fallbackError || !Number.isInteger(fallbackError.code) || typeof fallbackError.message !== 'string') {\n      throw new Error('Must provide fallback error with integer number code and string message.');\n    }\n    if (error instanceof classes_1.EthereumRpcError) {\n      return error.serialize();\n    }\n    const serialized = {};\n    if (error && typeof error === 'object' && !Array.isArray(error) && hasKey(error, 'code') && isValidCode(error.code)) {\n      const _error = error;\n      serialized.code = _error.code;\n      if (_error.message && typeof _error.message === 'string') {\n        serialized.message = _error.message;\n        if (hasKey(_error, 'data')) {\n          serialized.data = _error.data;\n        }\n      } else {\n        serialized.message = getMessageFromCode(serialized.code);\n        serialized.data = {\n          originalError: assignOriginalError(error)\n        };\n      }\n    } else {\n      serialized.code = fallbackError.code;\n      const message = (_a = error) === null || _a === void 0 ? void 0 : _a.message;\n      serialized.message = message && typeof message === 'string' ? message : fallbackError.message;\n      serialized.data = {\n        originalError: assignOriginalError(error)\n      };\n    }\n    const stack = (_b = error) === null || _b === void 0 ? void 0 : _b.stack;\n    if (shouldIncludeStack && error && stack && typeof stack === 'string') {\n      serialized.stack = stack;\n    }\n    return serialized;\n  }\n  exports.serializeError = serializeError;\n  // Internal\n  function isJsonRpcServerError(code) {\n    return code >= -32099 && code <= -32000;\n  }\n  function assignOriginalError(error) {\n    if (error && typeof error === 'object' && !Array.isArray(error)) {\n      return Object.assign({}, error);\n    }\n    return error;\n  }\n  function hasKey(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n  }\n});","lineCount":112,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"serializeError"],[7,24,3,22],[7,27,3,25,"exports"],[7,34,3,32],[7,35,3,33,"isValidCode"],[7,46,3,44],[7,49,3,47,"exports"],[7,56,3,54],[7,57,3,55,"getMessageFromCode"],[7,75,3,73],[7,78,3,76,"exports"],[7,85,3,83],[7,86,3,84,"JSON_RPC_SERVER_ERROR_MESSAGE"],[7,115,3,113],[7,118,3,116],[7,123,3,121],[7,124,3,122],[8,2,4,0],[8,8,4,6,"error_constants_1"],[8,25,4,23],[8,28,4,26,"require"],[8,35,4,33],[8,36,4,33,"_dependencyMap"],[8,50,4,33],[8,74,4,53],[8,75,4,54],[9,2,5,0],[9,8,5,6,"classes_1"],[9,17,5,15],[9,20,5,18,"require"],[9,27,5,25],[9,28,5,25,"_dependencyMap"],[9,42,5,25],[9,58,5,37],[9,59,5,38],[10,2,6,0],[10,8,6,6,"FALLBACK_ERROR_CODE"],[10,27,6,25],[10,30,6,28,"error_constants_1"],[10,47,6,45],[10,48,6,46,"errorCodes"],[10,58,6,56],[10,59,6,57,"rpc"],[10,62,6,60],[10,63,6,61,"internal"],[10,71,6,69],[11,2,7,0],[11,8,7,6,"FALLBACK_MESSAGE"],[11,24,7,22],[11,27,7,25],[11,88,7,86],[12,2,8,0],[12,8,8,6,"FALLBACK_ERROR"],[12,22,8,20],[12,25,8,23],[13,4,9,4,"code"],[13,8,9,8],[13,10,9,10,"FALLBACK_ERROR_CODE"],[13,29,9,29],[14,4,10,4,"message"],[14,11,10,11],[14,13,10,13,"getMessageFromCode"],[14,31,10,31],[14,32,10,32,"FALLBACK_ERROR_CODE"],[14,51,10,51],[15,2,11,0],[15,3,11,1],[16,2,12,0,"exports"],[16,9,12,7],[16,10,12,8,"JSON_RPC_SERVER_ERROR_MESSAGE"],[16,39,12,37],[16,42,12,40],[16,69,12,67],[17,2,13,0],[18,0,14,0],[19,0,15,0],[20,0,16,0],[21,2,17,0],[21,11,17,9,"getMessageFromCode"],[21,29,17,27,"getMessageFromCode"],[21,30,17,28,"code"],[21,34,17,32],[21,36,17,34,"fallbackMessage"],[21,51,17,49],[21,54,17,52,"FALLBACK_MESSAGE"],[21,70,17,68],[21,72,17,70],[22,4,18,4],[22,8,18,8,"Number"],[22,14,18,14],[22,15,18,15,"isInteger"],[22,24,18,24],[22,25,18,25,"code"],[22,29,18,29],[22,30,18,30],[22,32,18,32],[23,6,19,8],[23,12,19,14,"codeString"],[23,22,19,24],[23,25,19,27,"code"],[23,29,19,31],[23,30,19,32,"toString"],[23,38,19,40],[23,39,19,41],[23,40,19,42],[24,6,20,8],[24,10,20,12,"hasKey"],[24,16,20,18],[24,17,20,19,"error_constants_1"],[24,34,20,36],[24,35,20,37,"errorValues"],[24,46,20,48],[24,48,20,50,"codeString"],[24,58,20,60],[24,59,20,61],[24,61,20,63],[25,8,21,12],[25,15,21,19,"error_constants_1"],[25,32,21,36],[25,33,21,37,"errorValues"],[25,44,21,48],[25,45,21,49,"codeString"],[25,55,21,59],[25,56,21,60],[25,57,21,61,"message"],[25,64,21,68],[26,6,22,8],[27,6,23,8],[27,10,23,12,"isJsonRpcServerError"],[27,30,23,32],[27,31,23,33,"code"],[27,35,23,37],[27,36,23,38],[27,38,23,40],[28,8,24,12],[28,15,24,19,"exports"],[28,22,24,26],[28,23,24,27,"JSON_RPC_SERVER_ERROR_MESSAGE"],[28,52,24,56],[29,6,25,8],[30,4,26,4],[31,4,27,4],[31,11,27,11,"fallbackMessage"],[31,26,27,26],[32,2,28,0],[33,2,29,0,"exports"],[33,9,29,7],[33,10,29,8,"getMessageFromCode"],[33,28,29,26],[33,31,29,29,"getMessageFromCode"],[33,49,29,47],[34,2,30,0],[35,0,31,0],[36,0,32,0],[37,0,33,0],[38,2,34,0],[38,11,34,9,"isValidCode"],[38,22,34,20,"isValidCode"],[38,23,34,21,"code"],[38,27,34,25],[38,29,34,27],[39,4,35,4],[39,8,35,8],[39,9,35,9,"Number"],[39,15,35,15],[39,16,35,16,"isInteger"],[39,25,35,25],[39,26,35,26,"code"],[39,30,35,30],[39,31,35,31],[39,33,35,33],[40,6,36,8],[40,13,36,15],[40,18,36,20],[41,4,37,4],[42,4,38,4],[42,10,38,10,"codeString"],[42,20,38,20],[42,23,38,23,"code"],[42,27,38,27],[42,28,38,28,"toString"],[42,36,38,36],[42,37,38,37],[42,38,38,38],[43,4,39,4],[43,8,39,8,"error_constants_1"],[43,25,39,25],[43,26,39,26,"errorValues"],[43,37,39,37],[43,38,39,38,"codeString"],[43,48,39,48],[43,49,39,49],[43,51,39,51],[44,6,40,8],[44,13,40,15],[44,17,40,19],[45,4,41,4],[46,4,42,4],[46,8,42,8,"isJsonRpcServerError"],[46,28,42,28],[46,29,42,29,"code"],[46,33,42,33],[46,34,42,34],[46,36,42,36],[47,6,43,8],[47,13,43,15],[47,17,43,19],[48,4,44,4],[49,4,45,4],[49,11,45,11],[49,16,45,16],[50,2,46,0],[51,2,47,0,"exports"],[51,9,47,7],[51,10,47,8,"isValidCode"],[51,21,47,19],[51,24,47,22,"isValidCode"],[51,35,47,33],[52,2,48,0],[53,0,49,0],[54,0,50,0],[55,0,51,0],[56,0,52,0],[57,0,53,0],[58,2,54,0],[58,11,54,9,"serializeError"],[58,25,54,23,"serializeError"],[58,26,54,24,"error"],[58,31,54,29],[58,33,54,31],[59,4,54,33,"fallbackError"],[59,17,54,46],[59,20,54,49,"FALLBACK_ERROR"],[59,34,54,63],[60,4,54,65,"shouldIncludeStack"],[60,22,54,83],[60,25,54,86],[61,2,54,93],[61,3,54,94],[61,6,54,97],[61,7,54,98],[61,8,54,99],[61,10,54,101],[62,4,55,4],[62,8,55,8,"_a"],[62,10,55,10],[62,12,55,12,"_b"],[62,14,55,14],[63,4,56,4],[63,8,56,8],[63,9,56,9,"fallbackError"],[63,22,56,22],[63,26,57,8],[63,27,57,9,"Number"],[63,33,57,15],[63,34,57,16,"isInteger"],[63,43,57,25],[63,44,57,26,"fallbackError"],[63,57,57,39],[63,58,57,40,"code"],[63,62,57,44],[63,63,57,45],[63,67,58,8],[63,74,58,15,"fallbackError"],[63,87,58,28],[63,88,58,29,"message"],[63,95,58,36],[63,100,58,41],[63,108,58,49],[63,110,58,51],[64,6,59,8],[64,12,59,14],[64,16,59,18,"Error"],[64,21,59,23],[64,22,59,24],[64,96,59,98],[64,97,59,99],[65,4,60,4],[66,4,61,4],[66,8,61,8,"error"],[66,13,61,13],[66,25,61,25,"classes_1"],[66,34,61,34],[66,35,61,35,"EthereumRpcError"],[66,51,61,51],[66,53,61,53],[67,6,62,8],[67,13,62,15,"error"],[67,18,62,20],[67,19,62,21,"serialize"],[67,28,62,30],[67,29,62,31],[67,30,62,32],[68,4,63,4],[69,4,64,4],[69,10,64,10,"serialized"],[69,20,64,20],[69,23,64,23],[69,24,64,24],[69,25,64,25],[70,4,65,4],[70,8,65,8,"error"],[70,13,65,13],[70,17,66,8],[70,24,66,15,"error"],[70,29,66,20],[70,34,66,25],[70,42,66,33],[70,46,67,8],[70,47,67,9,"Array"],[70,52,67,14],[70,53,67,15,"isArray"],[70,60,67,22],[70,61,67,23,"error"],[70,66,67,28],[70,67,67,29],[70,71,68,8,"hasKey"],[70,77,68,14],[70,78,68,15,"error"],[70,83,68,20],[70,85,68,22],[70,91,68,28],[70,92,68,29],[70,96,69,8,"isValidCode"],[70,107,69,19],[70,108,69,20,"error"],[70,113,69,25],[70,114,69,26,"code"],[70,118,69,30],[70,119,69,31],[70,121,69,33],[71,6,70,8],[71,12,70,14,"_error"],[71,18,70,20],[71,21,70,23,"error"],[71,26,70,28],[72,6,71,8,"serialized"],[72,16,71,18],[72,17,71,19,"code"],[72,21,71,23],[72,24,71,26,"_error"],[72,30,71,32],[72,31,71,33,"code"],[72,35,71,37],[73,6,72,8],[73,10,72,12,"_error"],[73,16,72,18],[73,17,72,19,"message"],[73,24,72,26],[73,28,72,30],[73,35,72,37,"_error"],[73,41,72,43],[73,42,72,44,"message"],[73,49,72,51],[73,54,72,56],[73,62,72,64],[73,64,72,66],[74,8,73,12,"serialized"],[74,18,73,22],[74,19,73,23,"message"],[74,26,73,30],[74,29,73,33,"_error"],[74,35,73,39],[74,36,73,40,"message"],[74,43,73,47],[75,8,74,12],[75,12,74,16,"hasKey"],[75,18,74,22],[75,19,74,23,"_error"],[75,25,74,29],[75,27,74,31],[75,33,74,37],[75,34,74,38],[75,36,74,40],[76,10,75,16,"serialized"],[76,20,75,26],[76,21,75,27,"data"],[76,25,75,31],[76,28,75,34,"_error"],[76,34,75,40],[76,35,75,41,"data"],[76,39,75,45],[77,8,76,12],[78,6,77,8],[78,7,77,9],[78,13,78,13],[79,8,79,12,"serialized"],[79,18,79,22],[79,19,79,23,"message"],[79,26,79,30],[79,29,79,33,"getMessageFromCode"],[79,47,79,51],[79,48,79,52,"serialized"],[79,58,79,62],[79,59,79,63,"code"],[79,63,79,67],[79,64,79,68],[80,8,80,12,"serialized"],[80,18,80,22],[80,19,80,23,"data"],[80,23,80,27],[80,26,80,30],[81,10,80,32,"originalError"],[81,23,80,45],[81,25,80,47,"assignOriginalError"],[81,44,80,66],[81,45,80,67,"error"],[81,50,80,72],[82,8,80,74],[82,9,80,75],[83,6,81,8],[84,4,82,4],[84,5,82,5],[84,11,83,9],[85,6,84,8,"serialized"],[85,16,84,18],[85,17,84,19,"code"],[85,21,84,23],[85,24,84,26,"fallbackError"],[85,37,84,39],[85,38,84,40,"code"],[85,42,84,44],[86,6,85,8],[86,12,85,14,"message"],[86,19,85,21],[86,22,85,24],[86,23,85,25,"_a"],[86,25,85,27],[86,28,85,30,"error"],[86,33,85,35],[86,39,85,41],[86,43,85,45],[86,47,85,49,"_a"],[86,49,85,51],[86,54,85,56],[86,59,85,61],[86,60,85,62],[86,63,85,65],[86,68,85,70],[86,69,85,71],[86,72,85,74,"_a"],[86,74,85,76],[86,75,85,77,"message"],[86,82,85,84],[87,6,86,8,"serialized"],[87,16,86,18],[87,17,86,19,"message"],[87,24,86,26],[87,27,86,30,"message"],[87,34,86,37],[87,38,86,41],[87,45,86,48,"message"],[87,52,86,55],[87,57,86,60],[87,65,86,68],[87,68,87,14,"message"],[87,75,87,21],[87,78,88,14,"fallbackError"],[87,91,88,27],[87,92,88,28,"message"],[87,99,88,36],[88,6,89,8,"serialized"],[88,16,89,18],[88,17,89,19,"data"],[88,21,89,23],[88,24,89,26],[89,8,89,28,"originalError"],[89,21,89,41],[89,23,89,43,"assignOriginalError"],[89,42,89,62],[89,43,89,63,"error"],[89,48,89,68],[90,6,89,70],[90,7,89,71],[91,4,90,4],[92,4,91,4],[92,10,91,10,"stack"],[92,15,91,15],[92,18,91,18],[92,19,91,19,"_b"],[92,21,91,21],[92,24,91,24,"error"],[92,29,91,29],[92,35,91,35],[92,39,91,39],[92,43,91,43,"_b"],[92,45,91,45],[92,50,91,50],[92,55,91,55],[92,56,91,56],[92,59,91,59],[92,64,91,64],[92,65,91,65],[92,68,91,68,"_b"],[92,70,91,70],[92,71,91,71,"stack"],[92,76,91,76],[93,4,92,4],[93,8,92,8,"shouldIncludeStack"],[93,26,92,26],[93,30,92,30,"error"],[93,35,92,35],[93,39,92,39,"stack"],[93,44,92,44],[93,48,92,48],[93,55,92,55,"stack"],[93,60,92,60],[93,65,92,65],[93,73,92,73],[93,75,92,75],[94,6,93,8,"serialized"],[94,16,93,18],[94,17,93,19,"stack"],[94,22,93,24],[94,25,93,27,"stack"],[94,30,93,32],[95,4,94,4],[96,4,95,4],[96,11,95,11,"serialized"],[96,21,95,21],[97,2,96,0],[98,2,97,0,"exports"],[98,9,97,7],[98,10,97,8,"serializeError"],[98,24,97,22],[98,27,97,25,"serializeError"],[98,41,97,39],[99,2,98,0],[100,2,99,0],[100,11,99,9,"isJsonRpcServerError"],[100,31,99,29,"isJsonRpcServerError"],[100,32,99,30,"code"],[100,36,99,34],[100,38,99,36],[101,4,100,4],[101,11,100,11,"code"],[101,15,100,15],[101,19,100,19],[101,20,100,20],[101,25,100,25],[101,29,100,29,"code"],[101,33,100,33],[101,37,100,37],[101,38,100,38],[101,43,100,43],[102,2,101,0],[103,2,102,0],[103,11,102,9,"assignOriginalError"],[103,30,102,28,"assignOriginalError"],[103,31,102,29,"error"],[103,36,102,34],[103,38,102,36],[104,4,103,4],[104,8,103,8,"error"],[104,13,103,13],[104,17,103,17],[104,24,103,24,"error"],[104,29,103,29],[104,34,103,34],[104,42,103,42],[104,46,103,46],[104,47,103,47,"Array"],[104,52,103,52],[104,53,103,53,"isArray"],[104,60,103,60],[104,61,103,61,"error"],[104,66,103,66],[104,67,103,67],[104,69,103,69],[105,6,104,8],[105,13,104,15,"Object"],[105,19,104,21],[105,20,104,22,"assign"],[105,26,104,28],[105,27,104,29],[105,28,104,30],[105,29,104,31],[105,31,104,33,"error"],[105,36,104,38],[105,37,104,39],[106,4,105,4],[107,4,106,4],[107,11,106,11,"error"],[107,16,106,16],[108,2,107,0],[109,2,108,0],[109,11,108,9,"hasKey"],[109,17,108,15,"hasKey"],[109,18,108,16,"obj"],[109,21,108,19],[109,23,108,21,"key"],[109,26,108,24],[109,28,108,26],[110,4,109,4],[110,11,109,11,"Object"],[110,17,109,17],[110,18,109,18,"prototype"],[110,27,109,27],[110,28,109,28,"hasOwnProperty"],[110,42,109,42],[110,43,109,43,"call"],[110,47,109,47],[110,48,109,48,"obj"],[110,51,109,51],[110,53,109,53,"key"],[110,56,109,56],[110,57,109,57],[111,2,110,0],[112,0,110,1],[112,3]],"functionMap":{"names":["<global>","getMessageFromCode","isValidCode","serializeError","isJsonRpcServerError","assignOriginalError","hasKey"],"mappings":"AAA;ACgB;CDW;AEM;CFY;AGQ;CH0C;AIG;CJE;AKC;CLK;AMC;CNE"},"hasCjsExports":true},"type":"js/module"}]}