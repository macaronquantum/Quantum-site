{"dependencies":[{"name":"./commons.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":21,"index":182},"end":{"line":5,"column":44,"index":205}}],"key":"BsP1rur2s8tExOXn4/1q3+2ZDEY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.encodePacket = void 0;\n  exports.encodePacketToBinary = encodePacketToBinary;\n  const commons_js_1 = require(_dependencyMap[0], \"./commons.js\");\n  const encodePacket = ({\n    type,\n    data\n  }, supportsBinary, callback) => {\n    if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n      return callback(supportsBinary ? data : \"b\" + toBuffer(data, true).toString(\"base64\"));\n    }\n    // plain string\n    return callback(commons_js_1.PACKET_TYPES[type] + (data || \"\"));\n  };\n  exports.encodePacket = encodePacket;\n  const toBuffer = (data, forceBufferConversion) => {\n    if (Buffer.isBuffer(data) || data instanceof Uint8Array && !forceBufferConversion) {\n      return data;\n    } else if (data instanceof ArrayBuffer) {\n      return Buffer.from(data);\n    } else {\n      return Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n    }\n  };\n  let TEXT_ENCODER;\n  function encodePacketToBinary(packet, callback) {\n    if (packet.data instanceof ArrayBuffer || ArrayBuffer.isView(packet.data)) {\n      return callback(toBuffer(packet.data, false));\n    }\n    (0, exports.encodePacket)(packet, true, encoded => {\n      if (!TEXT_ENCODER) {\n        // lazily created for compatibility with Node.js 10\n        TEXT_ENCODER = new TextEncoder();\n      }\n      callback(TEXT_ENCODER.encode(encoded));\n    });\n  }\n});","lineCount":43,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"encodePacket"],[7,22,3,20],[7,25,3,23],[7,30,3,28],[7,31,3,29],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"encodePacketToBinary"],[8,30,4,28],[8,33,4,31,"encodePacketToBinary"],[8,53,4,51],[9,2,5,0],[9,8,5,6,"commons_js_1"],[9,20,5,18],[9,23,5,21,"require"],[9,30,5,28],[9,31,5,28,"_dependencyMap"],[9,45,5,28],[9,64,5,43],[9,65,5,44],[10,2,6,0],[10,8,6,6,"encodePacket"],[10,20,6,18],[10,23,6,21,"encodePacket"],[10,24,6,22],[11,4,6,24,"type"],[11,8,6,28],[12,4,6,30,"data"],[13,2,6,35],[13,3,6,36],[13,5,6,38,"supportsBinary"],[13,19,6,52],[13,21,6,54,"callback"],[13,29,6,62],[13,34,6,67],[14,4,7,4],[14,8,7,8,"data"],[14,12,7,12],[14,24,7,24,"ArrayBuffer"],[14,35,7,35],[14,39,7,39,"ArrayBuffer"],[14,50,7,50],[14,51,7,51,"isView"],[14,57,7,57],[14,58,7,58,"data"],[14,62,7,62],[14,63,7,63],[14,65,7,65],[15,6,8,8],[15,13,8,15,"callback"],[15,21,8,23],[15,22,8,24,"supportsBinary"],[15,36,8,38],[15,39,8,41,"data"],[15,43,8,45],[15,46,8,48],[15,49,8,51],[15,52,8,54,"toBuffer"],[15,60,8,62],[15,61,8,63,"data"],[15,65,8,67],[15,67,8,69],[15,71,8,73],[15,72,8,74],[15,73,8,75,"toString"],[15,81,8,83],[15,82,8,84],[15,90,8,92],[15,91,8,93],[15,92,8,94],[16,4,9,4],[17,4,10,4],[18,4,11,4],[18,11,11,11,"callback"],[18,19,11,19],[18,20,11,20,"commons_js_1"],[18,32,11,32],[18,33,11,33,"PACKET_TYPES"],[18,45,11,45],[18,46,11,46,"type"],[18,50,11,50],[18,51,11,51],[18,55,11,55,"data"],[18,59,11,59],[18,63,11,63],[18,65,11,65],[18,66,11,66],[18,67,11,67],[19,2,12,0],[19,3,12,1],[20,2,13,0,"exports"],[20,9,13,7],[20,10,13,8,"encodePacket"],[20,22,13,20],[20,25,13,23,"encodePacket"],[20,37,13,35],[21,2,14,0],[21,8,14,6,"toBuffer"],[21,16,14,14],[21,19,14,17,"toBuffer"],[21,20,14,18,"data"],[21,24,14,22],[21,26,14,24,"forceBufferConversion"],[21,47,14,45],[21,52,14,50],[22,4,15,4],[22,8,15,8,"Buffer"],[22,14,15,14],[22,15,15,15,"isBuffer"],[22,23,15,23],[22,24,15,24,"data"],[22,28,15,28],[22,29,15,29],[22,33,16,9,"data"],[22,37,16,13],[22,49,16,25,"Uint8Array"],[22,59,16,35],[22,63,16,39],[22,64,16,40,"forceBufferConversion"],[22,85,16,62],[22,87,16,64],[23,6,17,8],[23,13,17,15,"data"],[23,17,17,19],[24,4,18,4],[24,5,18,5],[24,11,19,9],[24,15,19,13,"data"],[24,19,19,17],[24,31,19,29,"ArrayBuffer"],[24,42,19,40],[24,44,19,42],[25,6,20,8],[25,13,20,15,"Buffer"],[25,19,20,21],[25,20,20,22,"from"],[25,24,20,26],[25,25,20,27,"data"],[25,29,20,31],[25,30,20,32],[26,4,21,4],[26,5,21,5],[26,11,22,9],[27,6,23,8],[27,13,23,15,"Buffer"],[27,19,23,21],[27,20,23,22,"from"],[27,24,23,26],[27,25,23,27,"data"],[27,29,23,31],[27,30,23,32,"buffer"],[27,36,23,38],[27,38,23,40,"data"],[27,42,23,44],[27,43,23,45,"byteOffset"],[27,53,23,55],[27,55,23,57,"data"],[27,59,23,61],[27,60,23,62,"byteLength"],[27,70,23,72],[27,71,23,73],[28,4,24,4],[29,2,25,0],[29,3,25,1],[30,2,26,0],[30,6,26,4,"TEXT_ENCODER"],[30,18,26,16],[31,2,27,0],[31,11,27,9,"encodePacketToBinary"],[31,31,27,29,"encodePacketToBinary"],[31,32,27,30,"packet"],[31,38,27,36],[31,40,27,38,"callback"],[31,48,27,46],[31,50,27,48],[32,4,28,4],[32,8,28,8,"packet"],[32,14,28,14],[32,15,28,15,"data"],[32,19,28,19],[32,31,28,31,"ArrayBuffer"],[32,42,28,42],[32,46,28,46,"ArrayBuffer"],[32,57,28,57],[32,58,28,58,"isView"],[32,64,28,64],[32,65,28,65,"packet"],[32,71,28,71],[32,72,28,72,"data"],[32,76,28,76],[32,77,28,77],[32,79,28,79],[33,6,29,8],[33,13,29,15,"callback"],[33,21,29,23],[33,22,29,24,"toBuffer"],[33,30,29,32],[33,31,29,33,"packet"],[33,37,29,39],[33,38,29,40,"data"],[33,42,29,44],[33,44,29,46],[33,49,29,51],[33,50,29,52],[33,51,29,53],[34,4,30,4],[35,4,31,4],[35,5,31,5],[35,6,31,6],[35,8,31,8,"exports"],[35,15,31,15],[35,16,31,16,"encodePacket"],[35,28,31,28],[35,30,31,30,"packet"],[35,36,31,36],[35,38,31,38],[35,42,31,42],[35,44,31,45,"encoded"],[35,51,31,52],[35,55,31,57],[36,6,32,8],[36,10,32,12],[36,11,32,13,"TEXT_ENCODER"],[36,23,32,25],[36,25,32,27],[37,8,33,12],[38,8,34,12,"TEXT_ENCODER"],[38,20,34,24],[38,23,34,27],[38,27,34,31,"TextEncoder"],[38,38,34,42],[38,39,34,43],[38,40,34,44],[39,6,35,8],[40,6,36,8,"callback"],[40,14,36,16],[40,15,36,17,"TEXT_ENCODER"],[40,27,36,29],[40,28,36,30,"encode"],[40,34,36,36],[40,35,36,37,"encoded"],[40,42,36,44],[40,43,36,45],[40,44,36,46],[41,4,37,4],[41,5,37,5],[41,6,37,6],[42,2,38,0],[43,0,38,1],[43,3]],"functionMap":{"names":["<global>","encodePacket","toBuffer","encodePacketToBinary","<anonymous>"],"mappings":"AAA;qBCK;CDM;iBEE;CFW;AGE;4CCI;KDM;CHC"},"hasCjsExports":true},"type":"js/module"}]}