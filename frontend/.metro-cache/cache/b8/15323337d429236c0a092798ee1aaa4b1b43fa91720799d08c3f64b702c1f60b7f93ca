{"dependencies":[{"name":"../Address.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":41,"index":41}}],"key":"vfqshztAmgwLyfTM52ayXSFF8zE=","exportNames":["*"],"imports":1}},{"name":"../Errors.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":42},"end":{"line":2,"column":39,"index":81}}],"key":"gW8bR5HYEFoN/XB5iaw4jVwouXk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.normalizeSignature = normalizeSignature;\n  exports.isArgOfType = isArgOfType;\n  exports.getAmbiguousTypes = getAmbiguousTypes;\n  var _AddressJs = require(_dependencyMap[0], \"../Address.js\");\n  var Address = _interopNamespace(_AddressJs);\n  var _ErrorsJs = require(_dependencyMap[1], \"../Errors.js\");\n  var Errors = _interopNamespace(_ErrorsJs);\n  /** @internal */\n  function normalizeSignature(signature) {\n    let active = true;\n    let current = '';\n    let level = 0;\n    let result = '';\n    let valid = false;\n    for (let i = 0; i < signature.length; i++) {\n      const char = signature[i];\n      // If the character is a separator, we want to reactivate.\n      if (['(', ')', ','].includes(char)) active = true;\n      // If the character is a \"level\" token, we want to increment/decrement.\n      if (char === '(') level++;\n      if (char === ')') level--;\n      // If we aren't active, we don't want to mutate the result.\n      if (!active) continue;\n      // If level === 0, we are at the definition level.\n      if (level === 0) {\n        if (char === ' ' && ['event', 'function', 'error', ''].includes(result)) result = '';else {\n          result += char;\n          // If we are at the end of the definition, we must be finished.\n          if (char === ')') {\n            valid = true;\n            break;\n          }\n        }\n        continue;\n      }\n      // Ignore spaces\n      if (char === ' ') {\n        // If the previous character is a separator, and the current section isn't empty, we want to deactivate.\n        if (signature[i - 1] !== ',' && current !== ',' && current !== ',(') {\n          current = '';\n          active = false;\n        }\n        continue;\n      }\n      result += char;\n      current += char;\n    }\n    if (!valid) throw new Errors.BaseError('Unable to normalize signature.');\n    return result;\n  }\n  /** @internal */\n  function isArgOfType(arg, abiParameter) {\n    const argType = typeof arg;\n    const abiParameterType = abiParameter.type;\n    switch (abiParameterType) {\n      case 'address':\n        return Address.validate(arg, {\n          strict: false\n        });\n      case 'bool':\n        return argType === 'boolean';\n      case 'function':\n        return argType === 'string';\n      case 'string':\n        return argType === 'string';\n      default:\n        {\n          if (abiParameterType === 'tuple' && 'components' in abiParameter) return Object.values(abiParameter.components).every((component, index) => {\n            return isArgOfType(Object.values(arg)[index], component);\n          });\n          // `(u)int<M>`: (un)signed integer type of `M` bits, `0 < M <= 256`, `M % 8 == 0`\n          // https://regexr.com/6v8hp\n          if (/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(abiParameterType)) return argType === 'number' || argType === 'bigint';\n          // `bytes<M>`: binary type of `M` bytes, `0 < M <= 32`\n          // https://regexr.com/6va55\n          if (/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(abiParameterType)) return argType === 'string' || arg instanceof Uint8Array;\n          // fixed-length (`<type>[M]`) and dynamic (`<type>[]`) arrays\n          // https://regexr.com/6va6i\n          if (/[a-z]+[1-9]{0,3}(\\[[0-9]{0,}\\])+$/.test(abiParameterType)) {\n            return Array.isArray(arg) && arg.every(x => isArgOfType(x, {\n              ...abiParameter,\n              // Pop off `[]` or `[M]` from end of type\n              type: abiParameterType.replace(/(\\[[0-9]{0,}\\])$/, '')\n            }));\n          }\n          return false;\n        }\n    }\n  }\n  /** @internal */\n  function getAmbiguousTypes(sourceParameters, targetParameters, args) {\n    for (const parameterIndex in sourceParameters) {\n      const sourceParameter = sourceParameters[parameterIndex];\n      const targetParameter = targetParameters[parameterIndex];\n      if (sourceParameter.type === 'tuple' && targetParameter.type === 'tuple' && 'components' in sourceParameter && 'components' in targetParameter) return getAmbiguousTypes(sourceParameter.components, targetParameter.components, args[parameterIndex]);\n      const types = [sourceParameter.type, targetParameter.type];\n      const ambiguous = (() => {\n        if (types.includes('address') && types.includes('bytes20')) return true;\n        if (types.includes('address') && types.includes('string')) return Address.validate(args[parameterIndex], {\n          strict: false\n        });\n        if (types.includes('address') && types.includes('bytes')) return Address.validate(args[parameterIndex], {\n          strict: false\n        });\n        return false;\n      })();\n      if (ambiguous) return types;\n    }\n    return;\n  }\n});","lineCount":132,"map":[[22,2,4,0,"exports"],[22,9,4,0],[22,10,4,0,"normalizeSignature"],[22,28,4,0],[22,31,4,0,"normalizeSignature"],[22,49,4,0],[23,2,54,0,"exports"],[23,9,54,0],[23,10,54,0,"isArgOfType"],[23,21,54,0],[23,24,54,0,"isArgOfType"],[23,35,54,0],[24,2,94,0,"exports"],[24,9,94,0],[24,10,94,0,"getAmbiguousTypes"],[24,27,94,0],[24,30,94,0,"getAmbiguousTypes"],[24,47,94,0],[25,2,1,0],[25,6,1,0,"_AddressJs"],[25,16,1,0],[25,19,1,0,"require"],[25,26,1,0],[25,27,1,0,"_dependencyMap"],[25,41,1,0],[26,2,1,0],[26,6,1,0,"Address"],[26,13,1,0],[26,16,1,0,"_interopNamespace"],[26,33,1,0],[26,34,1,0,"_AddressJs"],[26,44,1,0],[27,2,2,0],[27,6,2,0,"_ErrorsJs"],[27,15,2,0],[27,18,2,0,"require"],[27,25,2,0],[27,26,2,0,"_dependencyMap"],[27,40,2,0],[28,2,2,0],[28,6,2,0,"Errors"],[28,12,2,0],[28,15,2,0,"_interopNamespace"],[28,32,2,0],[28,33,2,0,"_ErrorsJs"],[28,42,2,0],[29,2,3,0],[30,2,4,7],[30,11,4,16,"normalizeSignature"],[30,29,4,34,"normalizeSignature"],[30,30,4,35,"signature"],[30,39,4,44],[30,41,4,46],[31,4,5,4],[31,8,5,8,"active"],[31,14,5,14],[31,17,5,17],[31,21,5,21],[32,4,6,4],[32,8,6,8,"current"],[32,15,6,15],[32,18,6,18],[32,20,6,20],[33,4,7,4],[33,8,7,8,"level"],[33,13,7,13],[33,16,7,16],[33,17,7,17],[34,4,8,4],[34,8,8,8,"result"],[34,14,8,14],[34,17,8,17],[34,19,8,19],[35,4,9,4],[35,8,9,8,"valid"],[35,13,9,13],[35,16,9,16],[35,21,9,21],[36,4,10,4],[36,9,10,9],[36,13,10,13,"i"],[36,14,10,14],[36,17,10,17],[36,18,10,18],[36,20,10,20,"i"],[36,21,10,21],[36,24,10,24,"signature"],[36,33,10,33],[36,34,10,34,"length"],[36,40,10,40],[36,42,10,42,"i"],[36,43,10,43],[36,45,10,45],[36,47,10,47],[37,6,11,8],[37,12,11,14,"char"],[37,16,11,18],[37,19,11,21,"signature"],[37,28,11,30],[37,29,11,31,"i"],[37,30,11,32],[37,31,11,33],[38,6,12,8],[39,6,13,8],[39,10,13,12],[39,11,13,13],[39,14,13,16],[39,16,13,18],[39,19,13,21],[39,21,13,23],[39,24,13,26],[39,25,13,27],[39,26,13,28,"includes"],[39,34,13,36],[39,35,13,37,"char"],[39,39,13,41],[39,40,13,42],[39,42,14,12,"active"],[39,48,14,18],[39,51,14,21],[39,55,14,25],[40,6,15,8],[41,6,16,8],[41,10,16,12,"char"],[41,14,16,16],[41,19,16,21],[41,22,16,24],[41,24,17,12,"level"],[41,29,17,17],[41,31,17,19],[42,6,18,8],[42,10,18,12,"char"],[42,14,18,16],[42,19,18,21],[42,22,18,24],[42,24,19,12,"level"],[42,29,19,17],[42,31,19,19],[43,6,20,8],[44,6,21,8],[44,10,21,12],[44,11,21,13,"active"],[44,17,21,19],[44,19,22,12],[45,6,23,8],[46,6,24,8],[46,10,24,12,"level"],[46,15,24,17],[46,20,24,22],[46,21,24,23],[46,23,24,25],[47,8,25,12],[47,12,25,16,"char"],[47,16,25,20],[47,21,25,25],[47,24,25,28],[47,28,25,32],[47,29,25,33],[47,36,25,40],[47,38,25,42],[47,48,25,52],[47,50,25,54],[47,57,25,61],[47,59,25,63],[47,61,25,65],[47,62,25,66],[47,63,25,67,"includes"],[47,71,25,75],[47,72,25,76,"result"],[47,78,25,82],[47,79,25,83],[47,81,26,16,"result"],[47,87,26,22],[47,90,26,25],[47,92,26,27],[47,93,26,28],[47,98,27,17],[48,10,28,16,"result"],[48,16,28,22],[48,20,28,26,"char"],[48,24,28,30],[49,10,29,16],[50,10,30,16],[50,14,30,20,"char"],[50,18,30,24],[50,23,30,29],[50,26,30,32],[50,28,30,34],[51,12,31,20,"valid"],[51,17,31,25],[51,20,31,28],[51,24,31,32],[52,12,32,20],[53,10,33,16],[54,8,34,12],[55,8,35,12],[56,6,36,8],[57,6,37,8],[58,6,38,8],[58,10,38,12,"char"],[58,14,38,16],[58,19,38,21],[58,22,38,24],[58,24,38,26],[59,8,39,12],[60,8,40,12],[60,12,40,16,"signature"],[60,21,40,25],[60,22,40,26,"i"],[60,23,40,27],[60,26,40,30],[60,27,40,31],[60,28,40,32],[60,33,40,37],[60,36,40,40],[60,40,40,44,"current"],[60,47,40,51],[60,52,40,56],[60,55,40,59],[60,59,40,63,"current"],[60,66,40,70],[60,71,40,75],[60,75,40,79],[60,77,40,81],[61,10,41,16,"current"],[61,17,41,23],[61,20,41,26],[61,22,41,28],[62,10,42,16,"active"],[62,16,42,22],[62,19,42,25],[62,24,42,30],[63,8,43,12],[64,8,44,12],[65,6,45,8],[66,6,46,8,"result"],[66,12,46,14],[66,16,46,18,"char"],[66,20,46,22],[67,6,47,8,"current"],[67,13,47,15],[67,17,47,19,"char"],[67,21,47,23],[68,4,48,4],[69,4,49,4],[69,8,49,8],[69,9,49,9,"valid"],[69,14,49,14],[69,16,50,8],[69,22,50,14],[69,26,50,18,"Errors"],[69,32,50,24],[69,33,50,25,"BaseError"],[69,42,50,34],[69,43,50,35],[69,75,50,67],[69,76,50,68],[70,4,51,4],[70,11,51,11,"result"],[70,17,51,17],[71,2,52,0],[72,2,53,0],[73,2,54,7],[73,11,54,16,"isArgOfType"],[73,22,54,27,"isArgOfType"],[73,23,54,28,"arg"],[73,26,54,31],[73,28,54,33,"abiParameter"],[73,40,54,45],[73,42,54,47],[74,4,55,4],[74,10,55,10,"argType"],[74,17,55,17],[74,20,55,20],[74,27,55,27,"arg"],[74,30,55,30],[75,4,56,4],[75,10,56,10,"abiParameterType"],[75,26,56,26],[75,29,56,29,"abiParameter"],[75,41,56,41],[75,42,56,42,"type"],[75,46,56,46],[76,4,57,4],[76,12,57,12,"abiParameterType"],[76,28,57,28],[77,6,58,8],[77,11,58,13],[77,20,58,22],[78,8,59,12],[78,15,59,19,"Address"],[78,22,59,26],[78,23,59,27,"validate"],[78,31,59,35],[78,32,59,36,"arg"],[78,35,59,39],[78,37,59,41],[79,10,59,43,"strict"],[79,16,59,49],[79,18,59,51],[80,8,59,57],[80,9,59,58],[80,10,59,59],[81,6,60,8],[81,11,60,13],[81,17,60,19],[82,8,61,12],[82,15,61,19,"argType"],[82,22,61,26],[82,27,61,31],[82,36,61,40],[83,6,62,8],[83,11,62,13],[83,21,62,23],[84,8,63,12],[84,15,63,19,"argType"],[84,22,63,26],[84,27,63,31],[84,35,63,39],[85,6,64,8],[85,11,64,13],[85,19,64,21],[86,8,65,12],[86,15,65,19,"argType"],[86,22,65,26],[86,27,65,31],[86,35,65,39],[87,6,66,8],[88,8,66,17],[89,10,67,12],[89,14,67,16,"abiParameterType"],[89,30,67,32],[89,35,67,37],[89,42,67,44],[89,46,67,48],[89,58,67,60],[89,62,67,64,"abiParameter"],[89,74,67,76],[89,76,68,16],[89,83,68,23,"Object"],[89,89,68,29],[89,90,68,30,"values"],[89,96,68,36],[89,97,68,37,"abiParameter"],[89,109,68,49],[89,110,68,50,"components"],[89,120,68,60],[89,121,68,61],[89,122,68,62,"every"],[89,127,68,67],[89,128,68,68],[89,129,68,69,"component"],[89,138,68,78],[89,140,68,80,"index"],[89,145,68,85],[89,150,68,90],[90,12,69,20],[90,19,69,27,"isArgOfType"],[90,30,69,38],[90,31,69,39,"Object"],[90,37,69,45],[90,38,69,46,"values"],[90,44,69,52],[90,45,69,53,"arg"],[90,48,69,56],[90,49,69,57],[90,50,69,58,"index"],[90,55,69,63],[90,56,69,64],[90,58,69,66,"component"],[90,67,69,75],[90,68,69,76],[91,10,70,16],[91,11,70,17],[91,12,70,18],[92,10,71,12],[93,10,72,12],[94,10,73,12],[94,14,73,16],[94,140,73,142],[94,141,73,143,"test"],[94,145,73,147],[94,146,73,148,"abiParameterType"],[94,162,73,164],[94,163,73,165],[94,165,74,16],[94,172,74,23,"argType"],[94,179,74,30],[94,184,74,35],[94,192,74,43],[94,196,74,47,"argType"],[94,203,74,54],[94,208,74,59],[94,216,74,67],[95,10,75,12],[96,10,76,12],[97,10,77,12],[97,14,77,16],[97,52,77,54],[97,53,77,55,"test"],[97,57,77,59],[97,58,77,60,"abiParameterType"],[97,74,77,76],[97,75,77,77],[97,77,78,16],[97,84,78,23,"argType"],[97,91,78,30],[97,96,78,35],[97,104,78,43],[97,108,78,47,"arg"],[97,111,78,50],[97,123,78,62,"Uint8Array"],[97,133,78,72],[98,10,79,12],[99,10,80,12],[100,10,81,12],[100,14,81,16],[100,49,81,51],[100,50,81,52,"test"],[100,54,81,56],[100,55,81,57,"abiParameterType"],[100,71,81,73],[100,72,81,74],[100,74,81,76],[101,12,82,16],[101,19,82,24,"Array"],[101,24,82,29],[101,25,82,30,"isArray"],[101,32,82,37],[101,33,82,38,"arg"],[101,36,82,41],[101,37,82,42],[101,41,83,20,"arg"],[101,44,83,23],[101,45,83,24,"every"],[101,50,83,29],[101,51,83,31,"x"],[101,52,83,32],[101,56,83,37,"isArgOfType"],[101,67,83,48],[101,68,83,49,"x"],[101,69,83,50],[101,71,83,52],[102,14,84,24],[102,17,84,27,"abiParameter"],[102,29,84,39],[103,14,85,24],[104,14,86,24,"type"],[104,18,86,28],[104,20,86,30,"abiParameterType"],[104,36,86,46],[104,37,86,47,"replace"],[104,44,86,54],[104,45,86,55],[104,63,86,73],[104,65,86,75],[104,67,86,77],[105,12,87,20],[105,13,87,21],[105,14,87,22],[105,15,87,23],[106,10,88,12],[107,10,89,12],[107,17,89,19],[107,22,89,24],[108,8,90,8],[109,4,91,4],[110,2,92,0],[111,2,93,0],[112,2,94,7],[112,11,94,16,"getAmbiguousTypes"],[112,28,94,33,"getAmbiguousTypes"],[112,29,94,34,"sourceParameters"],[112,45,94,50],[112,47,94,52,"targetParameters"],[112,63,94,68],[112,65,94,70,"args"],[112,69,94,74],[112,71,94,76],[113,4,95,4],[113,9,95,9],[113,15,95,15,"parameterIndex"],[113,29,95,29],[113,33,95,33,"sourceParameters"],[113,49,95,49],[113,51,95,51],[114,6,96,8],[114,12,96,14,"sourceParameter"],[114,27,96,29],[114,30,96,32,"sourceParameters"],[114,46,96,48],[114,47,96,49,"parameterIndex"],[114,61,96,63],[114,62,96,64],[115,6,97,8],[115,12,97,14,"targetParameter"],[115,27,97,29],[115,30,97,32,"targetParameters"],[115,46,97,48],[115,47,97,49,"parameterIndex"],[115,61,97,63],[115,62,97,64],[116,6,98,8],[116,10,98,12,"sourceParameter"],[116,25,98,27],[116,26,98,28,"type"],[116,30,98,32],[116,35,98,37],[116,42,98,44],[116,46,99,12,"targetParameter"],[116,61,99,27],[116,62,99,28,"type"],[116,66,99,32],[116,71,99,37],[116,78,99,44],[116,82,100,12],[116,94,100,24],[116,98,100,28,"sourceParameter"],[116,113,100,43],[116,117,101,12],[116,129,101,24],[116,133,101,28,"targetParameter"],[116,148,101,43],[116,150,102,12],[116,157,102,19,"getAmbiguousTypes"],[116,174,102,36],[116,175,102,37,"sourceParameter"],[116,190,102,52],[116,191,102,53,"components"],[116,201,102,63],[116,203,102,65,"targetParameter"],[116,218,102,80],[116,219,102,81,"components"],[116,229,102,91],[116,231,102,93,"args"],[116,235,102,97],[116,236,102,98,"parameterIndex"],[116,250,102,112],[116,251,102,113],[116,252,102,114],[117,6,103,8],[117,12,103,14,"types"],[117,17,103,19],[117,20,103,22],[117,21,103,23,"sourceParameter"],[117,36,103,38],[117,37,103,39,"type"],[117,41,103,43],[117,43,103,45,"targetParameter"],[117,58,103,60],[117,59,103,61,"type"],[117,63,103,65],[117,64,103,66],[118,6,104,8],[118,12,104,14,"ambiguous"],[118,21,104,23],[118,24,104,26],[118,25,104,27],[118,31,104,33],[119,8,105,12],[119,12,105,16,"types"],[119,17,105,21],[119,18,105,22,"includes"],[119,26,105,30],[119,27,105,31],[119,36,105,40],[119,37,105,41],[119,41,105,45,"types"],[119,46,105,50],[119,47,105,51,"includes"],[119,55,105,59],[119,56,105,60],[119,65,105,69],[119,66,105,70],[119,68,106,16],[119,75,106,23],[119,79,106,27],[120,8,107,12],[120,12,107,16,"types"],[120,17,107,21],[120,18,107,22,"includes"],[120,26,107,30],[120,27,107,31],[120,36,107,40],[120,37,107,41],[120,41,107,45,"types"],[120,46,107,50],[120,47,107,51,"includes"],[120,55,107,59],[120,56,107,60],[120,64,107,68],[120,65,107,69],[120,67,108,16],[120,74,108,23,"Address"],[120,81,108,30],[120,82,108,31,"validate"],[120,90,108,39],[120,91,108,40,"args"],[120,95,108,44],[120,96,108,45,"parameterIndex"],[120,110,108,59],[120,111,108,60],[120,113,108,62],[121,10,109,20,"strict"],[121,16,109,26],[121,18,109,28],[122,8,110,16],[122,9,110,17],[122,10,110,18],[123,8,111,12],[123,12,111,16,"types"],[123,17,111,21],[123,18,111,22,"includes"],[123,26,111,30],[123,27,111,31],[123,36,111,40],[123,37,111,41],[123,41,111,45,"types"],[123,46,111,50],[123,47,111,51,"includes"],[123,55,111,59],[123,56,111,60],[123,63,111,67],[123,64,111,68],[123,66,112,16],[123,73,112,23,"Address"],[123,80,112,30],[123,81,112,31,"validate"],[123,89,112,39],[123,90,112,40,"args"],[123,94,112,44],[123,95,112,45,"parameterIndex"],[123,109,112,59],[123,110,112,60],[123,112,112,62],[124,10,113,20,"strict"],[124,16,113,26],[124,18,113,28],[125,8,114,16],[125,9,114,17],[125,10,114,18],[126,8,115,12],[126,15,115,19],[126,20,115,24],[127,6,116,8],[127,7,116,9],[127,9,116,11],[127,10,116,12],[128,6,117,8],[128,10,117,12,"ambiguous"],[128,19,117,21],[128,21,118,12],[128,28,118,19,"types"],[128,33,118,24],[129,4,119,4],[130,4,120,4],[131,2,121,0],[132,0,121,1],[132,3]],"functionMap":{"names":["<global>","normalizeSignature","isArgOfType","Object.values.every$argument_0","arg.every$argument_0","getAmbiguousTypes","<anonymous>"],"mappings":"AAA;OCG;CDgD;OEE;oECc;iBDE;8BEa;sBFI;CFK;OKE;2BCU;SDY;CLK"},"hasCjsExports":false},"type":"js/module"}]}