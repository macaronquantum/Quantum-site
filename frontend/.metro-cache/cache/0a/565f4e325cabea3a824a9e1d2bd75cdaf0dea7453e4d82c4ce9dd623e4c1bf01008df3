{"dependencies":[{"name":"../helpers/tabbable","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":16,"column":16,"index":438},"end":{"line":16,"column":46,"index":468}}],"key":"2or9HGGa8gQmvt6WQ3sqQEXA7U4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.resetState = resetState;\n  exports.log = log;\n  exports.handleBlur = handleBlur;\n  exports.handleFocus = handleFocus;\n  exports.markForFocusLater = markForFocusLater;\n  exports.returnFocus = returnFocus;\n  exports.popWithoutFocus = popWithoutFocus;\n  exports.setupScopedFocus = setupScopedFocus;\n  exports.teardownScopedFocus = teardownScopedFocus;\n  var _tabbable = require(_dependencyMap[0], \"../helpers/tabbable\");\n  var _tabbable2 = _interopRequireDefault(_tabbable);\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n  var focusLaterElements = [];\n  var modalElement = null;\n  var needToFocus = false;\n\n  /* eslint-disable no-console */\n  /* istanbul ignore next */\n  function resetState() {\n    focusLaterElements = [];\n  }\n\n  /* istanbul ignore next */\n  function log() {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.log(\"focusManager ----------\");\n      focusLaterElements.forEach(function (f) {\n        var check = f || {};\n        console.log(check.nodeName, check.className, check.id);\n      });\n      console.log(\"end focusManager ----------\");\n    }\n  }\n  /* eslint-enable no-console */\n\n  function handleBlur() {\n    needToFocus = true;\n  }\n  function handleFocus() {\n    if (needToFocus) {\n      needToFocus = false;\n      if (!modalElement) {\n        return;\n      }\n      // need to see how jQuery shims document.on('focusin') so we don't need the\n      // setTimeout, firefox doesn't support focusin, if it did, we could focus\n      // the element outside of a setTimeout. Side-effect of this implementation\n      // is that the document.body gets focus, and then we focus our element right\n      // after, seems fine.\n      setTimeout(function () {\n        if (modalElement.contains(document.activeElement)) {\n          return;\n        }\n        var el = (0, _tabbable2.default)(modalElement)[0] || modalElement;\n        el.focus();\n      }, 0);\n    }\n  }\n  function markForFocusLater() {\n    focusLaterElements.push(document.activeElement);\n  }\n\n  /* eslint-disable no-console */\n  function returnFocus() {\n    var preventScroll = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var toFocus = null;\n    try {\n      if (focusLaterElements.length !== 0) {\n        toFocus = focusLaterElements.pop();\n        toFocus.focus({\n          preventScroll: preventScroll\n        });\n      }\n      return;\n    } catch (e) {\n      console.warn([\"You tried to return focus to\", toFocus, \"but it is not in the DOM anymore\"].join(\" \"));\n    }\n  }\n  /* eslint-enable no-console */\n\n  function popWithoutFocus() {\n    focusLaterElements.length > 0 && focusLaterElements.pop();\n  }\n  function setupScopedFocus(element) {\n    modalElement = element;\n    if (window.addEventListener) {\n      window.addEventListener(\"blur\", handleBlur, false);\n      document.addEventListener(\"focus\", handleFocus, true);\n    } else {\n      window.attachEvent(\"onBlur\", handleBlur);\n      document.attachEvent(\"onFocus\", handleFocus);\n    }\n  }\n  function teardownScopedFocus() {\n    modalElement = null;\n    if (window.addEventListener) {\n      window.removeEventListener(\"blur\", handleBlur);\n      document.removeEventListener(\"focus\", handleFocus);\n    } else {\n      window.detachEvent(\"onBlur\", handleBlur);\n      document.detachEvent(\"onFocus\", handleFocus);\n    }\n  }\n});","lineCount":114,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"resetState"],[7,20,6,18],[7,23,6,21,"resetState"],[7,33,6,31],[8,2,7,0,"exports"],[8,9,7,7],[8,10,7,8,"log"],[8,13,7,11],[8,16,7,14,"log"],[8,19,7,17],[9,2,8,0,"exports"],[9,9,8,7],[9,10,8,8,"handleBlur"],[9,20,8,18],[9,23,8,21,"handleBlur"],[9,33,8,31],[10,2,9,0,"exports"],[10,9,9,7],[10,10,9,8,"handleFocus"],[10,21,9,19],[10,24,9,22,"handleFocus"],[10,35,9,33],[11,2,10,0,"exports"],[11,9,10,7],[11,10,10,8,"markForFocusLater"],[11,27,10,25],[11,30,10,28,"markForFocusLater"],[11,47,10,45],[12,2,11,0,"exports"],[12,9,11,7],[12,10,11,8,"returnFocus"],[12,21,11,19],[12,24,11,22,"returnFocus"],[12,35,11,33],[13,2,12,0,"exports"],[13,9,12,7],[13,10,12,8,"popWithoutFocus"],[13,25,12,23],[13,28,12,26,"popWithoutFocus"],[13,43,12,41],[14,2,13,0,"exports"],[14,9,13,7],[14,10,13,8,"setupScopedFocus"],[14,26,13,24],[14,29,13,27,"setupScopedFocus"],[14,45,13,43],[15,2,14,0,"exports"],[15,9,14,7],[15,10,14,8,"teardownScopedFocus"],[15,29,14,27],[15,32,14,30,"teardownScopedFocus"],[15,51,14,49],[16,2,16,0],[16,6,16,4,"_tabbable"],[16,15,16,13],[16,18,16,16,"require"],[16,25,16,23],[16,26,16,23,"_dependencyMap"],[16,40,16,23],[16,66,16,45],[16,67,16,46],[17,2,18,0],[17,6,18,4,"_tabbable2"],[17,16,18,14],[17,19,18,17,"_interopRequireDefault"],[17,41,18,39],[17,42,18,40,"_tabbable"],[17,51,18,49],[17,52,18,50],[18,2,20,0],[18,11,20,9,"_interopRequireDefault"],[18,33,20,31,"_interopRequireDefault"],[18,34,20,32,"obj"],[18,37,20,35],[18,39,20,37],[19,4,20,39],[19,11,20,46,"obj"],[19,14,20,49],[19,18,20,53,"obj"],[19,21,20,56],[19,22,20,57,"__esModule"],[19,32,20,67],[19,35,20,70,"obj"],[19,38,20,73],[19,41,20,76],[20,6,20,78,"default"],[20,13,20,85],[20,15,20,87,"obj"],[21,4,20,91],[21,5,20,92],[22,2,20,94],[23,2,22,0],[23,6,22,4,"focusLaterElements"],[23,24,22,22],[23,27,22,25],[23,29,22,27],[24,2,23,0],[24,6,23,4,"modalElement"],[24,18,23,16],[24,21,23,19],[24,25,23,23],[25,2,24,0],[25,6,24,4,"needToFocus"],[25,17,24,15],[25,20,24,18],[25,25,24,23],[27,2,26,0],[28,2,27,0],[29,2,28,0],[29,11,28,9,"resetState"],[29,21,28,19,"resetState"],[29,22,28,19],[29,24,28,22],[30,4,29,2,"focusLaterElements"],[30,22,29,20],[30,25,29,23],[30,27,29,25],[31,2,30,0],[33,2,32,0],[34,2,33,0],[34,11,33,9,"log"],[34,14,33,12,"log"],[34,15,33,12],[34,17,33,15],[35,4,34,2],[35,8,34,6,"process"],[35,15,34,13],[35,16,34,14,"env"],[35,19,34,17],[35,20,34,18,"NODE_ENV"],[35,28,34,26],[35,33,34,31],[35,45,34,43],[35,47,34,45],[36,6,35,4,"console"],[36,13,35,11],[36,14,35,12,"log"],[36,17,35,15],[36,18,35,16],[36,43,35,41],[36,44,35,42],[37,6,36,4,"focusLaterElements"],[37,24,36,22],[37,25,36,23,"forEach"],[37,32,36,30],[37,33,36,31],[37,43,36,41,"f"],[37,44,36,42],[37,46,36,44],[38,8,37,6],[38,12,37,10,"check"],[38,17,37,15],[38,20,37,18,"f"],[38,21,37,19],[38,25,37,23],[38,26,37,24],[38,27,37,25],[39,8,38,6,"console"],[39,15,38,13],[39,16,38,14,"log"],[39,19,38,17],[39,20,38,18,"check"],[39,25,38,23],[39,26,38,24,"nodeName"],[39,34,38,32],[39,36,38,34,"check"],[39,41,38,39],[39,42,38,40,"className"],[39,51,38,49],[39,53,38,51,"check"],[39,58,38,56],[39,59,38,57,"id"],[39,61,38,59],[39,62,38,60],[40,6,39,4],[40,7,39,5],[40,8,39,6],[41,6,40,4,"console"],[41,13,40,11],[41,14,40,12,"log"],[41,17,40,15],[41,18,40,16],[41,47,40,45],[41,48,40,46],[42,4,41,2],[43,2,42,0],[44,2,43,0],[46,2,45,0],[46,11,45,9,"handleBlur"],[46,21,45,19,"handleBlur"],[46,22,45,19],[46,24,45,22],[47,4,46,2,"needToFocus"],[47,15,46,13],[47,18,46,16],[47,22,46,20],[48,2,47,0],[49,2,49,0],[49,11,49,9,"handleFocus"],[49,22,49,20,"handleFocus"],[49,23,49,20],[49,25,49,23],[50,4,50,2],[50,8,50,6,"needToFocus"],[50,19,50,17],[50,21,50,19],[51,6,51,4,"needToFocus"],[51,17,51,15],[51,20,51,18],[51,25,51,23],[52,6,52,4],[52,10,52,8],[52,11,52,9,"modalElement"],[52,23,52,21],[52,25,52,23],[53,8,53,6],[54,6,54,4],[55,6,55,4],[56,6,56,4],[57,6,57,4],[58,6,58,4],[59,6,59,4],[60,6,60,4,"setTimeout"],[60,16,60,14],[60,17,60,15],[60,29,60,27],[61,8,61,6],[61,12,61,10,"modalElement"],[61,24,61,22],[61,25,61,23,"contains"],[61,33,61,31],[61,34,61,32,"document"],[61,42,61,40],[61,43,61,41,"activeElement"],[61,56,61,54],[61,57,61,55],[61,59,61,57],[62,10,62,8],[63,8,63,6],[64,8,64,6],[64,12,64,10,"el"],[64,14,64,12],[64,17,64,15],[64,18,64,16],[64,19,64,17],[64,21,64,19,"_tabbable2"],[64,31,64,29],[64,32,64,30,"default"],[64,39,64,37],[64,41,64,39,"modalElement"],[64,53,64,51],[64,54,64,52],[64,55,64,53],[64,56,64,54],[64,57,64,55],[64,61,64,59,"modalElement"],[64,73,64,71],[65,8,65,6,"el"],[65,10,65,8],[65,11,65,9,"focus"],[65,16,65,14],[65,17,65,15],[65,18,65,16],[66,6,66,4],[66,7,66,5],[66,9,66,7],[66,10,66,8],[66,11,66,9],[67,4,67,2],[68,2,68,0],[69,2,70,0],[69,11,70,9,"markForFocusLater"],[69,28,70,26,"markForFocusLater"],[69,29,70,26],[69,31,70,29],[70,4,71,2,"focusLaterElements"],[70,22,71,20],[70,23,71,21,"push"],[70,27,71,25],[70,28,71,26,"document"],[70,36,71,34],[70,37,71,35,"activeElement"],[70,50,71,48],[70,51,71,49],[71,2,72,0],[73,2,74,0],[74,2,75,0],[74,11,75,9,"returnFocus"],[74,22,75,20,"returnFocus"],[74,23,75,20],[74,25,75,23],[75,4,76,2],[75,8,76,6,"preventScroll"],[75,21,76,19],[75,24,76,22,"arguments"],[75,33,76,31],[75,34,76,32,"length"],[75,40,76,38],[75,43,76,41],[75,44,76,42],[75,48,76,46,"arguments"],[75,57,76,55],[75,58,76,56],[75,59,76,57],[75,60,76,58],[75,65,76,63,"undefined"],[75,74,76,72],[75,77,76,75,"arguments"],[75,86,76,84],[75,87,76,85],[75,88,76,86],[75,89,76,87],[75,92,76,90],[75,97,76,95],[76,4,78,2],[76,8,78,6,"toFocus"],[76,15,78,13],[76,18,78,16],[76,22,78,20],[77,4,79,2],[77,8,79,6],[78,6,80,4],[78,10,80,8,"focusLaterElements"],[78,28,80,26],[78,29,80,27,"length"],[78,35,80,33],[78,40,80,38],[78,41,80,39],[78,43,80,41],[79,8,81,6,"toFocus"],[79,15,81,13],[79,18,81,16,"focusLaterElements"],[79,36,81,34],[79,37,81,35,"pop"],[79,40,81,38],[79,41,81,39],[79,42,81,40],[80,8,82,6,"toFocus"],[80,15,82,13],[80,16,82,14,"focus"],[80,21,82,19],[80,22,82,20],[81,10,82,22,"preventScroll"],[81,23,82,35],[81,25,82,37,"preventScroll"],[82,8,82,51],[82,9,82,52],[82,10,82,53],[83,6,83,4],[84,6,84,4],[85,4,85,2],[85,5,85,3],[85,6,85,4],[85,13,85,11,"e"],[85,14,85,12],[85,16,85,14],[86,6,86,4,"console"],[86,13,86,11],[86,14,86,12,"warn"],[86,18,86,16],[86,19,86,17],[86,20,86,18],[86,50,86,48],[86,52,86,50,"toFocus"],[86,59,86,57],[86,61,86,59],[86,95,86,93],[86,96,86,94],[86,97,86,95,"join"],[86,101,86,99],[86,102,86,100],[86,105,86,103],[86,106,86,104],[86,107,86,105],[87,4,87,2],[88,2,88,0],[89,2,89,0],[91,2,91,0],[91,11,91,9,"popWithoutFocus"],[91,26,91,24,"popWithoutFocus"],[91,27,91,24],[91,29,91,27],[92,4,92,2,"focusLaterElements"],[92,22,92,20],[92,23,92,21,"length"],[92,29,92,27],[92,32,92,30],[92,33,92,31],[92,37,92,35,"focusLaterElements"],[92,55,92,53],[92,56,92,54,"pop"],[92,59,92,57],[92,60,92,58],[92,61,92,59],[93,2,93,0],[94,2,95,0],[94,11,95,9,"setupScopedFocus"],[94,27,95,25,"setupScopedFocus"],[94,28,95,26,"element"],[94,35,95,33],[94,37,95,35],[95,4,96,2,"modalElement"],[95,16,96,14],[95,19,96,17,"element"],[95,26,96,24],[96,4,98,2],[96,8,98,6,"window"],[96,14,98,12],[96,15,98,13,"addEventListener"],[96,31,98,29],[96,33,98,31],[97,6,99,4,"window"],[97,12,99,10],[97,13,99,11,"addEventListener"],[97,29,99,27],[97,30,99,28],[97,36,99,34],[97,38,99,36,"handleBlur"],[97,48,99,46],[97,50,99,48],[97,55,99,53],[97,56,99,54],[98,6,100,4,"document"],[98,14,100,12],[98,15,100,13,"addEventListener"],[98,31,100,29],[98,32,100,30],[98,39,100,37],[98,41,100,39,"handleFocus"],[98,52,100,50],[98,54,100,52],[98,58,100,56],[98,59,100,57],[99,4,101,2],[99,5,101,3],[99,11,101,9],[100,6,102,4,"window"],[100,12,102,10],[100,13,102,11,"attachEvent"],[100,24,102,22],[100,25,102,23],[100,33,102,31],[100,35,102,33,"handleBlur"],[100,45,102,43],[100,46,102,44],[101,6,103,4,"document"],[101,14,103,12],[101,15,103,13,"attachEvent"],[101,26,103,24],[101,27,103,25],[101,36,103,34],[101,38,103,36,"handleFocus"],[101,49,103,47],[101,50,103,48],[102,4,104,2],[103,2,105,0],[104,2,107,0],[104,11,107,9,"teardownScopedFocus"],[104,30,107,28,"teardownScopedFocus"],[104,31,107,28],[104,33,107,31],[105,4,108,2,"modalElement"],[105,16,108,14],[105,19,108,17],[105,23,108,21],[106,4,110,2],[106,8,110,6,"window"],[106,14,110,12],[106,15,110,13,"addEventListener"],[106,31,110,29],[106,33,110,31],[107,6,111,4,"window"],[107,12,111,10],[107,13,111,11,"removeEventListener"],[107,32,111,30],[107,33,111,31],[107,39,111,37],[107,41,111,39,"handleBlur"],[107,51,111,49],[107,52,111,50],[108,6,112,4,"document"],[108,14,112,12],[108,15,112,13,"removeEventListener"],[108,34,112,32],[108,35,112,33],[108,42,112,40],[108,44,112,42,"handleFocus"],[108,55,112,53],[108,56,112,54],[109,4,113,2],[109,5,113,3],[109,11,113,9],[110,6,114,4,"window"],[110,12,114,10],[110,13,114,11,"detachEvent"],[110,24,114,22],[110,25,114,23],[110,33,114,31],[110,35,114,33,"handleBlur"],[110,45,114,43],[110,46,114,44],[111,6,115,4,"document"],[111,14,115,12],[111,15,115,13,"detachEvent"],[111,26,115,24],[111,27,115,25],[111,36,115,34],[111,38,115,36,"handleFocus"],[111,49,115,47],[111,50,115,48],[112,4,116,2],[113,2,117,0],[114,0,117,1],[114,3]],"functionMap":{"names":["<global>","_interopRequireDefault","resetState","log","focusLaterElements.forEach$argument_0","handleBlur","handleFocus","setTimeout$argument_0","markForFocusLater","returnFocus","popWithoutFocus","setupScopedFocus","teardownScopedFocus"],"mappings":"AAA;ACmB,+FD;AEQ;CFE;AGG;+BCG;KDG;CHG;AKG;CLE;AME;eCW;KDM;CNE;AQE;CRE;ASG;CTa;AUG;CVE;AWE;CXU;AYE"},"hasCjsExports":true},"type":"js/module"}]}