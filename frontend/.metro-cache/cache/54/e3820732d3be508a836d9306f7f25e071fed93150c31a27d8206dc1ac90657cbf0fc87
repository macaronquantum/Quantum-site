{"dependencies":[{"name":"engine.io-parser","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":27,"index":296},"end":{"line":7,"column":54,"index":323}}],"key":"ZdCLryCFqJSS+1R9t7L2i2r0/QM=","exportNames":["*"],"imports":1}},{"name":"@socket.io/component-emitter","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":28,"index":353},"end":{"line":8,"column":67,"index":392}}],"key":"IqDCjWLjphYtgCRiU+PLRXxkGeY=","exportNames":["*"],"imports":1}},{"name":"./util.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":18,"index":412},"end":{"line":9,"column":38,"index":432}}],"key":"RHtkf1pyimtRfZWAvWBZ833kE8E=","exportNames":["*"],"imports":1}},{"name":"./contrib/parseqs.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":21,"index":455},"end":{"line":10,"column":52,"index":486}}],"key":"Uo+5odXlqCaqayROFfX2JnCTeQ4=","exportNames":["*"],"imports":1}},{"name":"debug","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":32,"index":520},"end":{"line":11,"column":48,"index":536}}],"key":"iZ55sBoXw9WwOGuopuB9Sv3DBX8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var __importDefault = this && this.__importDefault || function (mod) {\n    return mod && mod.__esModule ? mod : {\n      \"default\": mod\n    };\n  };\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.Transport = exports.TransportError = void 0;\n  const engine_io_parser_1 = require(_dependencyMap[0], \"engine.io-parser\");\n  const component_emitter_1 = require(_dependencyMap[1], \"@socket.io/component-emitter\");\n  const util_js_1 = require(_dependencyMap[2], \"./util.js\");\n  const parseqs_js_1 = require(_dependencyMap[3], \"./contrib/parseqs.js\");\n  const debug_1 = __importDefault(require(_dependencyMap[4], \"debug\")); // debug()\n  const debug = (0, debug_1.default)(\"engine.io-client:transport\"); // debug()\n  class TransportError extends Error {\n    constructor(reason, description, context) {\n      super(reason);\n      this.description = description;\n      this.context = context;\n      this.type = \"TransportError\";\n    }\n  }\n  exports.TransportError = TransportError;\n  class Transport extends component_emitter_1.Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n      super();\n      this.writable = false;\n      (0, util_js_1.installTimerFunctions)(this, opts);\n      this.opts = opts;\n      this.query = opts.query;\n      this.socket = opts.socket;\n      this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n      super.emitReserved(\"error\", new TransportError(reason, description, context));\n      return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n      this.readyState = \"opening\";\n      this.doOpen();\n      return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n      if (this.readyState === \"opening\" || this.readyState === \"open\") {\n        this.doClose();\n        this.onClose();\n      }\n      return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n      if (this.readyState === \"open\") {\n        this.write(packets);\n      } else {\n        // this might happen if the transport was silently closed in the beforeunload event handler\n        debug(\"transport is not open, discarding packets\");\n      }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n      this.readyState = \"open\";\n      this.writable = true;\n      super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n      const packet = (0, engine_io_parser_1.decodePacket)(data, this.socket.binaryType);\n      this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n      super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n      this.readyState = \"closed\";\n      super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) {}\n    createUri(schema, query = {}) {\n      return schema + \"://\" + this._hostname() + this._port() + this.opts.path + this._query(query);\n    }\n    _hostname() {\n      const hostname = this.opts.hostname;\n      return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n      if (this.opts.port && (this.opts.secure && Number(this.opts.port) !== 443 || !this.opts.secure && Number(this.opts.port) !== 80)) {\n        return \":\" + this.opts.port;\n      } else {\n        return \"\";\n      }\n    }\n    _query(query) {\n      const encodedQuery = (0, parseqs_js_1.encode)(query);\n      return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n  }\n  exports.Transport = Transport;\n});","lineCount":151,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[4,6,2,4,"__importDefault"],[4,21,2,19],[4,24,2,23],[4,28,2,27],[4,32,2,31],[4,36,2,35],[4,37,2,36,"__importDefault"],[4,52,2,51],[4,56,2,56],[4,66,2,66,"mod"],[4,69,2,69],[4,71,2,71],[5,4,3,4],[5,11,3,12,"mod"],[5,14,3,15],[5,18,3,19,"mod"],[5,21,3,22],[5,22,3,23,"__esModule"],[5,32,3,33],[5,35,3,37,"mod"],[5,38,3,40],[5,41,3,43],[6,6,3,45],[6,15,3,54],[6,17,3,56,"mod"],[7,4,3,60],[7,5,3,61],[8,2,4,0],[8,3,4,1],[9,2,5,0,"Object"],[9,8,5,6],[9,9,5,7,"defineProperty"],[9,23,5,21],[9,24,5,22,"exports"],[9,31,5,29],[9,33,5,31],[9,45,5,43],[9,47,5,45],[10,4,5,47,"value"],[10,9,5,52],[10,11,5,54],[11,2,5,59],[11,3,5,60],[11,4,5,61],[12,2,6,0,"exports"],[12,9,6,7],[12,10,6,8,"Transport"],[12,19,6,17],[12,22,6,20,"exports"],[12,29,6,27],[12,30,6,28,"TransportError"],[12,44,6,42],[12,47,6,45],[12,52,6,50],[12,53,6,51],[13,2,7,0],[13,8,7,6,"engine_io_parser_1"],[13,26,7,24],[13,29,7,27,"require"],[13,36,7,34],[13,37,7,34,"_dependencyMap"],[13,51,7,34],[13,74,7,53],[13,75,7,54],[14,2,8,0],[14,8,8,6,"component_emitter_1"],[14,27,8,25],[14,30,8,28,"require"],[14,37,8,35],[14,38,8,35,"_dependencyMap"],[14,52,8,35],[14,87,8,66],[14,88,8,67],[15,2,9,0],[15,8,9,6,"util_js_1"],[15,17,9,15],[15,20,9,18,"require"],[15,27,9,25],[15,28,9,25,"_dependencyMap"],[15,42,9,25],[15,58,9,37],[15,59,9,38],[16,2,10,0],[16,8,10,6,"parseqs_js_1"],[16,20,10,18],[16,23,10,21,"require"],[16,30,10,28],[16,31,10,28,"_dependencyMap"],[16,45,10,28],[16,72,10,51],[16,73,10,52],[17,2,11,0],[17,8,11,6,"debug_1"],[17,15,11,13],[17,18,11,16,"__importDefault"],[17,33,11,31],[17,34,11,32,"require"],[17,41,11,39],[17,42,11,39,"_dependencyMap"],[17,56,11,39],[17,68,11,47],[17,69,11,48],[17,70,11,49],[17,71,11,50],[17,72,11,51],[18,2,12,0],[18,8,12,6,"debug"],[18,13,12,11],[18,16,12,14],[18,17,12,15],[18,18,12,16],[18,20,12,18,"debug_1"],[18,27,12,25],[18,28,12,26,"default"],[18,35,12,33],[18,37,12,35],[18,65,12,63],[18,66,12,64],[18,67,12,65],[18,68,12,66],[19,2,13,0],[19,8,13,6,"TransportError"],[19,22,13,20],[19,31,13,29,"Error"],[19,36,13,34],[19,37,13,35],[20,4,14,4,"constructor"],[20,15,14,15,"constructor"],[20,16,14,16,"reason"],[20,22,14,22],[20,24,14,24,"description"],[20,35,14,35],[20,37,14,37,"context"],[20,44,14,44],[20,46,14,46],[21,6,15,8],[21,11,15,13],[21,12,15,14,"reason"],[21,18,15,20],[21,19,15,21],[22,6,16,8],[22,10,16,12],[22,11,16,13,"description"],[22,22,16,24],[22,25,16,27,"description"],[22,36,16,38],[23,6,17,8],[23,10,17,12],[23,11,17,13,"context"],[23,18,17,20],[23,21,17,23,"context"],[23,28,17,30],[24,6,18,8],[24,10,18,12],[24,11,18,13,"type"],[24,15,18,17],[24,18,18,20],[24,34,18,36],[25,4,19,4],[26,2,20,0],[27,2,21,0,"exports"],[27,9,21,7],[27,10,21,8,"TransportError"],[27,24,21,22],[27,27,21,25,"TransportError"],[27,41,21,39],[28,2,22,0],[28,8,22,6,"Transport"],[28,17,22,15],[28,26,22,24,"component_emitter_1"],[28,45,22,43],[28,46,22,44,"Emitter"],[28,53,22,51],[28,54,22,52],[29,4,23,4],[30,0,24,0],[31,0,25,0],[32,0,26,0],[33,0,27,0],[34,0,28,0],[35,4,29,4,"constructor"],[35,15,29,15,"constructor"],[35,16,29,16,"opts"],[35,20,29,20],[35,22,29,22],[36,6,30,8],[36,11,30,13],[36,12,30,14],[36,13,30,15],[37,6,31,8],[37,10,31,12],[37,11,31,13,"writable"],[37,19,31,21],[37,22,31,24],[37,27,31,29],[38,6,32,8],[38,7,32,9],[38,8,32,10],[38,10,32,12,"util_js_1"],[38,19,32,21],[38,20,32,22,"installTimerFunctions"],[38,41,32,43],[38,43,32,45],[38,47,32,49],[38,49,32,51,"opts"],[38,53,32,55],[38,54,32,56],[39,6,33,8],[39,10,33,12],[39,11,33,13,"opts"],[39,15,33,17],[39,18,33,20,"opts"],[39,22,33,24],[40,6,34,8],[40,10,34,12],[40,11,34,13,"query"],[40,16,34,18],[40,19,34,21,"opts"],[40,23,34,25],[40,24,34,26,"query"],[40,29,34,31],[41,6,35,8],[41,10,35,12],[41,11,35,13,"socket"],[41,17,35,19],[41,20,35,22,"opts"],[41,24,35,26],[41,25,35,27,"socket"],[41,31,35,33],[42,6,36,8],[42,10,36,12],[42,11,36,13,"supportsBinary"],[42,25,36,27],[42,28,36,30],[42,29,36,31,"opts"],[42,33,36,35],[42,34,36,36,"forceBase64"],[42,45,36,47],[43,4,37,4],[44,4,38,4],[45,0,39,0],[46,0,40,0],[47,0,41,0],[48,0,42,0],[49,0,43,0],[50,0,44,0],[51,0,45,0],[52,0,46,0],[53,4,47,4,"onError"],[53,11,47,11,"onError"],[53,12,47,12,"reason"],[53,18,47,18],[53,20,47,20,"description"],[53,31,47,31],[53,33,47,33,"context"],[53,40,47,40],[53,42,47,42],[54,6,48,8],[54,11,48,13],[54,12,48,14,"emitReserved"],[54,24,48,26],[54,25,48,27],[54,32,48,34],[54,34,48,36],[54,38,48,40,"TransportError"],[54,52,48,54],[54,53,48,55,"reason"],[54,59,48,61],[54,61,48,63,"description"],[54,72,48,74],[54,74,48,76,"context"],[54,81,48,83],[54,82,48,84],[54,83,48,85],[55,6,49,8],[55,13,49,15],[55,17,49,19],[56,4,50,4],[57,4,51,4],[58,0,52,0],[59,0,53,0],[60,4,54,4,"open"],[60,8,54,8,"open"],[60,9,54,8],[60,11,54,11],[61,6,55,8],[61,10,55,12],[61,11,55,13,"readyState"],[61,21,55,23],[61,24,55,26],[61,33,55,35],[62,6,56,8],[62,10,56,12],[62,11,56,13,"doOpen"],[62,17,56,19],[62,18,56,20],[62,19,56,21],[63,6,57,8],[63,13,57,15],[63,17,57,19],[64,4,58,4],[65,4,59,4],[66,0,60,0],[67,0,61,0],[68,4,62,4,"close"],[68,9,62,9,"close"],[68,10,62,9],[68,12,62,12],[69,6,63,8],[69,10,63,12],[69,14,63,16],[69,15,63,17,"readyState"],[69,25,63,27],[69,30,63,32],[69,39,63,41],[69,43,63,45],[69,47,63,49],[69,48,63,50,"readyState"],[69,58,63,60],[69,63,63,65],[69,69,63,71],[69,71,63,73],[70,8,64,12],[70,12,64,16],[70,13,64,17,"doClose"],[70,20,64,24],[70,21,64,25],[70,22,64,26],[71,8,65,12],[71,12,65,16],[71,13,65,17,"onClose"],[71,20,65,24],[71,21,65,25],[71,22,65,26],[72,6,66,8],[73,6,67,8],[73,13,67,15],[73,17,67,19],[74,4,68,4],[75,4,69,4],[76,0,70,0],[77,0,71,0],[78,0,72,0],[79,0,73,0],[80,4,74,4,"send"],[80,8,74,8,"send"],[80,9,74,9,"packets"],[80,16,74,16],[80,18,74,18],[81,6,75,8],[81,10,75,12],[81,14,75,16],[81,15,75,17,"readyState"],[81,25,75,27],[81,30,75,32],[81,36,75,38],[81,38,75,40],[82,8,76,12],[82,12,76,16],[82,13,76,17,"write"],[82,18,76,22],[82,19,76,23,"packets"],[82,26,76,30],[82,27,76,31],[83,6,77,8],[83,7,77,9],[83,13,78,13],[84,8,79,12],[85,8,80,12,"debug"],[85,13,80,17],[85,14,80,18],[85,57,80,61],[85,58,80,62],[86,6,81,8],[87,4,82,4],[88,4,83,4],[89,0,84,0],[90,0,85,0],[91,0,86,0],[92,0,87,0],[93,4,88,4,"onOpen"],[93,10,88,10,"onOpen"],[93,11,88,10],[93,13,88,13],[94,6,89,8],[94,10,89,12],[94,11,89,13,"readyState"],[94,21,89,23],[94,24,89,26],[94,30,89,32],[95,6,90,8],[95,10,90,12],[95,11,90,13,"writable"],[95,19,90,21],[95,22,90,24],[95,26,90,28],[96,6,91,8],[96,11,91,13],[96,12,91,14,"emitReserved"],[96,24,91,26],[96,25,91,27],[96,31,91,33],[96,32,91,34],[97,4,92,4],[98,4,93,4],[99,0,94,0],[100,0,95,0],[101,0,96,0],[102,0,97,0],[103,0,98,0],[104,4,99,4,"onData"],[104,10,99,10,"onData"],[104,11,99,11,"data"],[104,15,99,15],[104,17,99,17],[105,6,100,8],[105,12,100,14,"packet"],[105,18,100,20],[105,21,100,23],[105,22,100,24],[105,23,100,25],[105,25,100,27,"engine_io_parser_1"],[105,43,100,45],[105,44,100,46,"decodePacket"],[105,56,100,58],[105,58,100,60,"data"],[105,62,100,64],[105,64,100,66],[105,68,100,70],[105,69,100,71,"socket"],[105,75,100,77],[105,76,100,78,"binaryType"],[105,86,100,88],[105,87,100,89],[106,6,101,8],[106,10,101,12],[106,11,101,13,"onPacket"],[106,19,101,21],[106,20,101,22,"packet"],[106,26,101,28],[106,27,101,29],[107,4,102,4],[108,4,103,4],[109,0,104,0],[110,0,105,0],[111,0,106,0],[112,0,107,0],[113,4,108,4,"onPacket"],[113,12,108,12,"onPacket"],[113,13,108,13,"packet"],[113,19,108,19],[113,21,108,21],[114,6,109,8],[114,11,109,13],[114,12,109,14,"emitReserved"],[114,24,109,26],[114,25,109,27],[114,33,109,35],[114,35,109,37,"packet"],[114,41,109,43],[114,42,109,44],[115,4,110,4],[116,4,111,4],[117,0,112,0],[118,0,113,0],[119,0,114,0],[120,0,115,0],[121,4,116,4,"onClose"],[121,11,116,11,"onClose"],[121,12,116,12,"details"],[121,19,116,19],[121,21,116,21],[122,6,117,8],[122,10,117,12],[122,11,117,13,"readyState"],[122,21,117,23],[122,24,117,26],[122,32,117,34],[123,6,118,8],[123,11,118,13],[123,12,118,14,"emitReserved"],[123,24,118,26],[123,25,118,27],[123,32,118,34],[123,34,118,36,"details"],[123,41,118,43],[123,42,118,44],[124,4,119,4],[125,4,120,4],[126,0,121,0],[127,0,122,0],[128,0,123,0],[129,0,124,0],[130,4,125,4,"pause"],[130,9,125,9,"pause"],[130,10,125,10,"onPause"],[130,17,125,17],[130,19,125,19],[130,20,125,21],[131,4,126,4,"createUri"],[131,13,126,13,"createUri"],[131,14,126,14,"schema"],[131,20,126,20],[131,22,126,22,"query"],[131,27,126,27],[131,30,126,30],[131,31,126,31],[131,32,126,32],[131,34,126,34],[132,6,127,8],[132,13,127,16,"schema"],[132,19,127,22],[132,22,128,12],[132,27,128,17],[132,30,129,12],[132,34,129,16],[132,35,129,17,"_hostname"],[132,44,129,26],[132,45,129,27],[132,46,129,28],[132,49,130,12],[132,53,130,16],[132,54,130,17,"_port"],[132,59,130,22],[132,60,130,23],[132,61,130,24],[132,64,131,12],[132,68,131,16],[132,69,131,17,"opts"],[132,73,131,21],[132,74,131,22,"path"],[132,78,131,26],[132,81,132,12],[132,85,132,16],[132,86,132,17,"_query"],[132,92,132,23],[132,93,132,24,"query"],[132,98,132,29],[132,99,132,30],[133,4,133,4],[134,4,134,4,"_hostname"],[134,13,134,13,"_hostname"],[134,14,134,13],[134,16,134,16],[135,6,135,8],[135,12,135,14,"hostname"],[135,20,135,22],[135,23,135,25],[135,27,135,29],[135,28,135,30,"opts"],[135,32,135,34],[135,33,135,35,"hostname"],[135,41,135,43],[136,6,136,8],[136,13,136,15,"hostname"],[136,21,136,23],[136,22,136,24,"indexOf"],[136,29,136,31],[136,30,136,32],[136,33,136,35],[136,34,136,36],[136,39,136,41],[136,40,136,42],[136,41,136,43],[136,44,136,46,"hostname"],[136,52,136,54],[136,55,136,57],[136,58,136,60],[136,61,136,63,"hostname"],[136,69,136,71],[136,72,136,74],[136,75,136,77],[137,4,137,4],[138,4,138,4,"_port"],[138,9,138,9,"_port"],[138,10,138,9],[138,12,138,12],[139,6,139,8],[139,10,139,12],[139,14,139,16],[139,15,139,17,"opts"],[139,19,139,21],[139,20,139,22,"port"],[139,24,139,26],[139,29,140,14],[139,33,140,18],[139,34,140,19,"opts"],[139,38,140,23],[139,39,140,24,"secure"],[139,45,140,30],[139,49,140,34,"Number"],[139,55,140,40],[139,56,140,41],[139,60,140,45],[139,61,140,46,"opts"],[139,65,140,50],[139,66,140,51,"port"],[139,70,140,55],[139,71,140,56],[139,76,140,61],[139,79,140,64],[139,83,141,17],[139,84,141,18],[139,88,141,22],[139,89,141,23,"opts"],[139,93,141,27],[139,94,141,28,"secure"],[139,100,141,34],[139,104,141,38,"Number"],[139,110,141,44],[139,111,141,45],[139,115,141,49],[139,116,141,50,"opts"],[139,120,141,54],[139,121,141,55,"port"],[139,125,141,59],[139,126,141,60],[139,131,141,65],[139,133,141,68],[139,134,141,69],[139,136,141,71],[140,8,142,12],[140,15,142,19],[140,18,142,22],[140,21,142,25],[140,25,142,29],[140,26,142,30,"opts"],[140,30,142,34],[140,31,142,35,"port"],[140,35,142,39],[141,6,143,8],[141,7,143,9],[141,13,144,13],[142,8,145,12],[142,15,145,19],[142,17,145,21],[143,6,146,8],[144,4,147,4],[145,4,148,4,"_query"],[145,10,148,10,"_query"],[145,11,148,11,"query"],[145,16,148,16],[145,18,148,18],[146,6,149,8],[146,12,149,14,"encodedQuery"],[146,24,149,26],[146,27,149,29],[146,28,149,30],[146,29,149,31],[146,31,149,33,"parseqs_js_1"],[146,43,149,45],[146,44,149,46,"encode"],[146,50,149,52],[146,52,149,54,"query"],[146,57,149,59],[146,58,149,60],[147,6,150,8],[147,13,150,15,"encodedQuery"],[147,25,150,27],[147,26,150,28,"length"],[147,32,150,34],[147,35,150,37],[147,38,150,40],[147,41,150,43,"encodedQuery"],[147,53,150,55],[147,56,150,58],[147,58,150,60],[148,4,151,4],[149,2,152,0],[150,2,153,0,"exports"],[150,9,153,7],[150,10,153,8,"Transport"],[150,19,153,17],[150,22,153,20,"Transport"],[150,31,153,29],[151,0,153,30],[151,3]],"functionMap":{"names":["<global>","<anonymous>","TransportError","TransportError#constructor","Transport","Transport#constructor","Transport#onError","Transport#open","Transport#close","Transport#send","Transport#onOpen","Transport#onData","Transport#onPacket","Transport#onClose","Transport#pause","Transport#createUri","Transport#_hostname","Transport#_port","Transport#_query"],"mappings":"AAA;wDCC;CDE;AES;ICC;KDK;CFC;AIE;ICO;KDQ;IEU;KFG;IGI;KHI;III;KJM;IKM;KLQ;IMM;KNI;IOO;KPG;IQM;KRE;ISM;KTG;IUM,kBV;IWC;KXO;IYC;KZG;IaC;KbS;IcC;KdG;CJC"},"hasCjsExports":true},"type":"js/module"}]}