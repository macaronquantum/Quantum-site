{"dependencies":[{"name":"process/","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":16,"index":55},"end":{"line":5,"column":35,"index":74}}],"key":"eT6o/4ZmQr7nyGJbEA2faX5TSyM=","exportNames":["*"],"imports":1}},{"name":"../../ours/primordials","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":70,"index":169},"end":{"line":9,"column":103,"index":202}}],"key":"NYjhRIk1YfVwfaQSeITMV+mboSc=","exportNames":["*"],"imports":1}},{"name":"buffer","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":19,"index":222},"end":{"line":10,"column":36,"index":239}}],"key":"kYC7RadcB7k9ZEYd5zOmBbv1F14=","exportNames":["*"],"imports":1}},{"name":"../../ours/errors","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":57,"index":297},"end":{"line":11,"column":85,"index":325}}],"key":"1gsl/vMwrKGa5aYfNtCHl6fAfek=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  /* replacement start */\n  const process = require(_dependencyMap[0], \"process/\");\n\n  /* replacement end */\n\n  const {\n    PromisePrototypeThen,\n    SymbolAsyncIterator,\n    SymbolIterator\n  } = require(_dependencyMap[1], \"../../ours/primordials\");\n  const {\n    Buffer\n  } = require(_dependencyMap[2], \"buffer\");\n  const {\n    ERR_INVALID_ARG_TYPE,\n    ERR_STREAM_NULL_VALUES\n  } = require(_dependencyMap[3], \"../../ours/errors\").codes;\n  function from(Readable, iterable, opts) {\n    let iterator;\n    if (typeof iterable === 'string' || iterable instanceof Buffer) {\n      return new Readable({\n        objectMode: true,\n        ...opts,\n        read() {\n          this.push(iterable);\n          this.push(null);\n        }\n      });\n    }\n    let isAsync;\n    if (iterable && iterable[SymbolAsyncIterator]) {\n      isAsync = true;\n      iterator = iterable[SymbolAsyncIterator]();\n    } else if (iterable && iterable[SymbolIterator]) {\n      isAsync = false;\n      iterator = iterable[SymbolIterator]();\n    } else {\n      throw new ERR_INVALID_ARG_TYPE('iterable', ['Iterable'], iterable);\n    }\n    const readable = new Readable({\n      objectMode: true,\n      highWaterMark: 1,\n      // TODO(ronag): What options should be allowed?\n      ...opts\n    });\n\n    // Flag to protect against _read\n    // being called before last iteration completion.\n    let reading = false;\n    readable._read = function () {\n      if (!reading) {\n        reading = true;\n        next();\n      }\n    };\n    readable._destroy = function (error, cb) {\n      PromisePrototypeThen(close(error), () => process.nextTick(cb, error),\n      // nextTick is here in case cb throws\n      e => process.nextTick(cb, e || error));\n    };\n    async function close(error) {\n      const hadError = error !== undefined && error !== null;\n      const hasThrow = typeof iterator.throw === 'function';\n      if (hadError && hasThrow) {\n        const {\n          value,\n          done\n        } = await iterator.throw(error);\n        await value;\n        if (done) {\n          return;\n        }\n      }\n      if (typeof iterator.return === 'function') {\n        const {\n          value\n        } = await iterator.return();\n        await value;\n      }\n    }\n    async function next() {\n      for (;;) {\n        try {\n          const {\n            value,\n            done\n          } = isAsync ? await iterator.next() : iterator.next();\n          if (done) {\n            readable.push(null);\n          } else {\n            const res = value && typeof value.then === 'function' ? await value : value;\n            if (res === null) {\n              reading = false;\n              throw new ERR_STREAM_NULL_VALUES();\n            } else if (readable.push(res)) {\n              continue;\n            } else {\n              reading = false;\n            }\n          }\n        } catch (err) {\n          readable.destroy(err);\n        }\n        break;\n      }\n    }\n    return readable;\n  }\n  module.exports = from;\n});","lineCount":113,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[5,2,5,0],[5,8,5,6,"process"],[5,15,5,13],[5,18,5,16,"require"],[5,25,5,23],[5,26,5,23,"_dependencyMap"],[5,40,5,23],[5,55,5,34],[5,56,5,35],[7,2,7,0],[9,2,9,0],[9,8,9,6],[10,4,9,8,"PromisePrototypeThen"],[10,24,9,28],[11,4,9,30,"SymbolAsyncIterator"],[11,23,9,49],[12,4,9,51,"SymbolIterator"],[13,2,9,66],[13,3,9,67],[13,6,9,70,"require"],[13,13,9,77],[13,14,9,77,"_dependencyMap"],[13,28,9,77],[13,57,9,102],[13,58,9,103],[14,2,10,0],[14,8,10,6],[15,4,10,8,"Buffer"],[16,2,10,15],[16,3,10,16],[16,6,10,19,"require"],[16,13,10,26],[16,14,10,26,"_dependencyMap"],[16,28,10,26],[16,41,10,35],[16,42,10,36],[17,2,11,0],[17,8,11,6],[18,4,11,8,"ERR_INVALID_ARG_TYPE"],[18,24,11,28],[19,4,11,30,"ERR_STREAM_NULL_VALUES"],[20,2,11,53],[20,3,11,54],[20,6,11,57,"require"],[20,13,11,64],[20,14,11,64,"_dependencyMap"],[20,28,11,64],[20,52,11,84],[20,53,11,85],[20,54,11,86,"codes"],[20,59,11,91],[21,2,12,0],[21,11,12,9,"from"],[21,15,12,13,"from"],[21,16,12,14,"Readable"],[21,24,12,22],[21,26,12,24,"iterable"],[21,34,12,32],[21,36,12,34,"opts"],[21,40,12,38],[21,42,12,40],[22,4,13,2],[22,8,13,6,"iterator"],[22,16,13,14],[23,4,14,2],[23,8,14,6],[23,15,14,13,"iterable"],[23,23,14,21],[23,28,14,26],[23,36,14,34],[23,40,14,38,"iterable"],[23,48,14,46],[23,60,14,58,"Buffer"],[23,66,14,64],[23,68,14,66],[24,6,15,4],[24,13,15,11],[24,17,15,15,"Readable"],[24,25,15,23],[24,26,15,24],[25,8,16,6,"objectMode"],[25,18,16,16],[25,20,16,18],[25,24,16,22],[26,8,17,6],[26,11,17,9,"opts"],[26,15,17,13],[27,8,18,6,"read"],[27,12,18,10,"read"],[27,13,18,10],[27,15,18,13],[28,10,19,8],[28,14,19,12],[28,15,19,13,"push"],[28,19,19,17],[28,20,19,18,"iterable"],[28,28,19,26],[28,29,19,27],[29,10,20,8],[29,14,20,12],[29,15,20,13,"push"],[29,19,20,17],[29,20,20,18],[29,24,20,22],[29,25,20,23],[30,8,21,6],[31,6,22,4],[31,7,22,5],[31,8,22,6],[32,4,23,2],[33,4,24,2],[33,8,24,6,"isAsync"],[33,15,24,13],[34,4,25,2],[34,8,25,6,"iterable"],[34,16,25,14],[34,20,25,18,"iterable"],[34,28,25,26],[34,29,25,27,"SymbolAsyncIterator"],[34,48,25,46],[34,49,25,47],[34,51,25,49],[35,6,26,4,"isAsync"],[35,13,26,11],[35,16,26,14],[35,20,26,18],[36,6,27,4,"iterator"],[36,14,27,12],[36,17,27,15,"iterable"],[36,25,27,23],[36,26,27,24,"SymbolAsyncIterator"],[36,45,27,43],[36,46,27,44],[36,47,27,45],[36,48,27,46],[37,4,28,2],[37,5,28,3],[37,11,28,9],[37,15,28,13,"iterable"],[37,23,28,21],[37,27,28,25,"iterable"],[37,35,28,33],[37,36,28,34,"SymbolIterator"],[37,50,28,48],[37,51,28,49],[37,53,28,51],[38,6,29,4,"isAsync"],[38,13,29,11],[38,16,29,14],[38,21,29,19],[39,6,30,4,"iterator"],[39,14,30,12],[39,17,30,15,"iterable"],[39,25,30,23],[39,26,30,24,"SymbolIterator"],[39,40,30,38],[39,41,30,39],[39,42,30,40],[39,43,30,41],[40,4,31,2],[40,5,31,3],[40,11,31,9],[41,6,32,4],[41,12,32,10],[41,16,32,14,"ERR_INVALID_ARG_TYPE"],[41,36,32,34],[41,37,32,35],[41,47,32,45],[41,49,32,47],[41,50,32,48],[41,60,32,58],[41,61,32,59],[41,63,32,61,"iterable"],[41,71,32,69],[41,72,32,70],[42,4,33,2],[43,4,34,2],[43,10,34,8,"readable"],[43,18,34,16],[43,21,34,19],[43,25,34,23,"Readable"],[43,33,34,31],[43,34,34,32],[44,6,35,4,"objectMode"],[44,16,35,14],[44,18,35,16],[44,22,35,20],[45,6,36,4,"highWaterMark"],[45,19,36,17],[45,21,36,19],[45,22,36,20],[46,6,37,4],[47,6,38,4],[47,9,38,7,"opts"],[48,4,39,2],[48,5,39,3],[48,6,39,4],[50,4,41,2],[51,4,42,2],[52,4,43,2],[52,8,43,6,"reading"],[52,15,43,13],[52,18,43,16],[52,23,43,21],[53,4,44,2,"readable"],[53,12,44,10],[53,13,44,11,"_read"],[53,18,44,16],[53,21,44,19],[53,33,44,31],[54,6,45,4],[54,10,45,8],[54,11,45,9,"reading"],[54,18,45,16],[54,20,45,18],[55,8,46,6,"reading"],[55,15,46,13],[55,18,46,16],[55,22,46,20],[56,8,47,6,"next"],[56,12,47,10],[56,13,47,11],[56,14,47,12],[57,6,48,4],[58,4,49,2],[58,5,49,3],[59,4,50,2,"readable"],[59,12,50,10],[59,13,50,11,"_destroy"],[59,21,50,19],[59,24,50,22],[59,34,50,32,"error"],[59,39,50,37],[59,41,50,39,"cb"],[59,43,50,41],[59,45,50,43],[60,6,51,4,"PromisePrototypeThen"],[60,26,51,24],[60,27,52,6,"close"],[60,32,52,11],[60,33,52,12,"error"],[60,38,52,17],[60,39,52,18],[60,41,53,6],[60,47,53,12,"process"],[60,54,53,19],[60,55,53,20,"nextTick"],[60,63,53,28],[60,64,53,29,"cb"],[60,66,53,31],[60,68,53,33,"error"],[60,73,53,38],[60,74,53,39],[61,6,54,6],[62,6,55,7,"e"],[62,7,55,8],[62,11,55,13,"process"],[62,18,55,20],[62,19,55,21,"nextTick"],[62,27,55,29],[62,28,55,30,"cb"],[62,30,55,32],[62,32,55,34,"e"],[62,33,55,35],[62,37,55,39,"error"],[62,42,55,44],[62,43,56,4],[62,44,56,5],[63,4,57,2],[63,5,57,3],[64,4,58,2],[64,19,58,17,"close"],[64,24,58,22,"close"],[64,25,58,23,"error"],[64,30,58,28],[64,32,58,30],[65,6,59,4],[65,12,59,10,"hadError"],[65,20,59,18],[65,23,59,21,"error"],[65,28,59,26],[65,33,59,31,"undefined"],[65,42,59,40],[65,46,59,44,"error"],[65,51,59,49],[65,56,59,54],[65,60,59,58],[66,6,60,4],[66,12,60,10,"hasThrow"],[66,20,60,18],[66,23,60,21],[66,30,60,28,"iterator"],[66,38,60,36],[66,39,60,37,"throw"],[66,44,60,42],[66,49,60,47],[66,59,60,57],[67,6,61,4],[67,10,61,8,"hadError"],[67,18,61,16],[67,22,61,20,"hasThrow"],[67,30,61,28],[67,32,61,30],[68,8,62,6],[68,14,62,12],[69,10,62,14,"value"],[69,15,62,19],[70,10,62,21,"done"],[71,8,62,26],[71,9,62,27],[71,12,62,30],[71,18,62,36,"iterator"],[71,26,62,44],[71,27,62,45,"throw"],[71,32,62,50],[71,33,62,51,"error"],[71,38,62,56],[71,39,62,57],[72,8,63,6],[72,14,63,12,"value"],[72,19,63,17],[73,8,64,6],[73,12,64,10,"done"],[73,16,64,14],[73,18,64,16],[74,10,65,8],[75,8,66,6],[76,6,67,4],[77,6,68,4],[77,10,68,8],[77,17,68,15,"iterator"],[77,25,68,23],[77,26,68,24,"return"],[77,32,68,30],[77,37,68,35],[77,47,68,45],[77,49,68,47],[78,8,69,6],[78,14,69,12],[79,10,69,14,"value"],[80,8,69,20],[80,9,69,21],[80,12,69,24],[80,18,69,30,"iterator"],[80,26,69,38],[80,27,69,39,"return"],[80,33,69,45],[80,34,69,46],[80,35,69,47],[81,8,70,6],[81,14,70,12,"value"],[81,19,70,17],[82,6,71,4],[83,4,72,2],[84,4,73,2],[84,19,73,17,"next"],[84,23,73,21,"next"],[84,24,73,21],[84,26,73,24],[85,6,74,4],[85,15,74,13],[86,8,75,6],[86,12,75,10],[87,10,76,8],[87,16,76,14],[88,12,76,16,"value"],[88,17,76,21],[89,12,76,23,"done"],[90,10,76,28],[90,11,76,29],[90,14,76,32,"isAsync"],[90,21,76,39],[90,24,76,42],[90,30,76,48,"iterator"],[90,38,76,56],[90,39,76,57,"next"],[90,43,76,61],[90,44,76,62],[90,45,76,63],[90,48,76,66,"iterator"],[90,56,76,74],[90,57,76,75,"next"],[90,61,76,79],[90,62,76,80],[90,63,76,81],[91,10,77,8],[91,14,77,12,"done"],[91,18,77,16],[91,20,77,18],[92,12,78,10,"readable"],[92,20,78,18],[92,21,78,19,"push"],[92,25,78,23],[92,26,78,24],[92,30,78,28],[92,31,78,29],[93,10,79,8],[93,11,79,9],[93,17,79,15],[94,12,80,10],[94,18,80,16,"res"],[94,21,80,19],[94,24,80,22,"value"],[94,29,80,27],[94,33,80,31],[94,40,80,38,"value"],[94,45,80,43],[94,46,80,44,"then"],[94,50,80,48],[94,55,80,53],[94,65,80,63],[94,68,80,66],[94,74,80,72,"value"],[94,79,80,77],[94,82,80,80,"value"],[94,87,80,85],[95,12,81,10],[95,16,81,14,"res"],[95,19,81,17],[95,24,81,22],[95,28,81,26],[95,30,81,28],[96,14,82,12,"reading"],[96,21,82,19],[96,24,82,22],[96,29,82,27],[97,14,83,12],[97,20,83,18],[97,24,83,22,"ERR_STREAM_NULL_VALUES"],[97,46,83,44],[97,47,83,45],[97,48,83,46],[98,12,84,10],[98,13,84,11],[98,19,84,17],[98,23,84,21,"readable"],[98,31,84,29],[98,32,84,30,"push"],[98,36,84,34],[98,37,84,35,"res"],[98,40,84,38],[98,41,84,39],[98,43,84,41],[99,14,85,12],[100,12,86,10],[100,13,86,11],[100,19,86,17],[101,14,87,12,"reading"],[101,21,87,19],[101,24,87,22],[101,29,87,27],[102,12,88,10],[103,10,89,8],[104,8,90,6],[104,9,90,7],[104,10,90,8],[104,17,90,15,"err"],[104,20,90,18],[104,22,90,20],[105,10,91,8,"readable"],[105,18,91,16],[105,19,91,17,"destroy"],[105,26,91,24],[105,27,91,25,"err"],[105,30,91,28],[105,31,91,29],[106,8,92,6],[107,8,93,6],[108,6,94,4],[109,4,95,2],[110,4,96,2],[110,11,96,9,"readable"],[110,19,96,17],[111,2,97,0],[112,2,98,0,"module"],[112,8,98,6],[112,9,98,7,"exports"],[112,16,98,14],[112,19,98,17,"from"],[112,23,98,21],[113,0,98,21],[113,3]],"functionMap":{"names":["<global>","from","Readable$argument_0.read","readable._read","readable._destroy","PromisePrototypeThen$argument_1","PromisePrototypeThen$argument_2","close","next"],"mappings":"AAA;ACW;MCM;ODG;mBEuB;GFK;sBGC;MCG,iCD;MEE,uCF;GHE;EMC;GNc;EOC;GPsB;CDE"},"hasCjsExports":true},"type":"js/module"}]}