{"dependencies":[{"name":"../../type/error/index","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":16,"index":183},"end":{"line":7,"column":49,"index":216}}],"key":"bcYzMiQ83yGDDwSgM2cneYevsOA=","exportNames":["*"],"imports":1}},{"name":"../../type/symbols/index","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":16,"index":234},"end":{"line":8,"column":51,"index":269}}],"key":"KqmR4W5Ngawst54HV4l2A4gGTig=","exportNames":["*"],"imports":1}},{"name":"../guard/guard","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":16,"index":287},"end":{"line":9,"column":41,"index":312}}],"key":"ZoWkZX0jrtvq/tQKHv6D/KdH0Cc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.TypeDereferenceError = void 0;\n  exports.Pushref = Pushref;\n  exports.Deref = Deref;\n  const index_1 = require(_dependencyMap[0], \"../../type/error/index\");\n  const index_2 = require(_dependencyMap[1], \"../../type/symbols/index\");\n  const guard_1 = require(_dependencyMap[2], \"../guard/guard\");\n  class TypeDereferenceError extends index_1.TypeBoxError {\n    constructor(schema) {\n      super(`Unable to dereference schema with $id '${schema.$ref}'`);\n      this.schema = schema;\n    }\n  }\n  exports.TypeDereferenceError = TypeDereferenceError;\n  function Resolve(schema, references) {\n    const target = references.find(target => target.$id === schema.$ref);\n    if (target === undefined) throw new TypeDereferenceError(schema);\n    return Deref(target, references);\n  }\n  /** `[Internal]` Pushes a schema onto references if the schema has an $id and does not exist on references */\n  function Pushref(schema, references) {\n    if (!(0, guard_1.IsString)(schema.$id) || references.some(target => target.$id === schema.$id)) return references;\n    references.push(schema);\n    return references;\n  }\n  /** `[Internal]` Dereferences a schema from the references array or throws if not found */\n  function Deref(schema, references) {\n    // prettier-ignore\n    return schema[index_2.Kind] === 'This' || schema[index_2.Kind] === 'Ref' ? Resolve(schema, references) : schema;\n  }\n});","lineCount":36,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,3,47,"value"],[5,9,3,52],[5,11,3,54],[6,2,3,59],[6,3,3,60],[6,4,3,61],[7,2,4,0,"exports"],[7,9,4,7],[7,10,4,8,"TypeDereferenceError"],[7,30,4,28],[7,33,4,31],[7,38,4,36],[7,39,4,37],[8,2,5,0,"exports"],[8,9,5,7],[8,10,5,8,"Pushref"],[8,17,5,15],[8,20,5,18,"Pushref"],[8,27,5,25],[9,2,6,0,"exports"],[9,9,6,7],[9,10,6,8,"Deref"],[9,15,6,13],[9,18,6,16,"Deref"],[9,23,6,21],[10,2,7,0],[10,8,7,6,"index_1"],[10,15,7,13],[10,18,7,16,"require"],[10,25,7,23],[10,26,7,23,"_dependencyMap"],[10,40,7,23],[10,69,7,48],[10,70,7,49],[11,2,8,0],[11,8,8,6,"index_2"],[11,15,8,13],[11,18,8,16,"require"],[11,25,8,23],[11,26,8,23,"_dependencyMap"],[11,40,8,23],[11,71,8,50],[11,72,8,51],[12,2,9,0],[12,8,9,6,"guard_1"],[12,15,9,13],[12,18,9,16,"require"],[12,25,9,23],[12,26,9,23,"_dependencyMap"],[12,40,9,23],[12,61,9,40],[12,62,9,41],[13,2,10,0],[13,8,10,6,"TypeDereferenceError"],[13,28,10,26],[13,37,10,35,"index_1"],[13,44,10,42],[13,45,10,43,"TypeBoxError"],[13,57,10,55],[13,58,10,56],[14,4,11,4,"constructor"],[14,15,11,15,"constructor"],[14,16,11,16,"schema"],[14,22,11,22],[14,24,11,24],[15,6,12,8],[15,11,12,13],[15,12,12,14],[15,54,12,56,"schema"],[15,60,12,62],[15,61,12,63,"$ref"],[15,65,12,67],[15,68,12,70],[15,69,12,71],[16,6,13,8],[16,10,13,12],[16,11,13,13,"schema"],[16,17,13,19],[16,20,13,22,"schema"],[16,26,13,28],[17,4,14,4],[18,2,15,0],[19,2,16,0,"exports"],[19,9,16,7],[19,10,16,8,"TypeDereferenceError"],[19,30,16,28],[19,33,16,31,"TypeDereferenceError"],[19,53,16,51],[20,2,17,0],[20,11,17,9,"Resolve"],[20,18,17,16,"Resolve"],[20,19,17,17,"schema"],[20,25,17,23],[20,27,17,25,"references"],[20,37,17,35],[20,39,17,37],[21,4,18,4],[21,10,18,10,"target"],[21,16,18,16],[21,19,18,19,"references"],[21,29,18,29],[21,30,18,30,"find"],[21,34,18,34],[21,35,18,36,"target"],[21,41,18,42],[21,45,18,47,"target"],[21,51,18,53],[21,52,18,54,"$id"],[21,55,18,57],[21,60,18,62,"schema"],[21,66,18,68],[21,67,18,69,"$ref"],[21,71,18,73],[21,72,18,74],[22,4,19,4],[22,8,19,8,"target"],[22,14,19,14],[22,19,19,19,"undefined"],[22,28,19,28],[22,30,20,8],[22,36,20,14],[22,40,20,18,"TypeDereferenceError"],[22,60,20,38],[22,61,20,39,"schema"],[22,67,20,45],[22,68,20,46],[23,4,21,4],[23,11,21,11,"Deref"],[23,16,21,16],[23,17,21,17,"target"],[23,23,21,23],[23,25,21,25,"references"],[23,35,21,35],[23,36,21,36],[24,2,22,0],[25,2,23,0],[26,2,24,0],[26,11,24,9,"Pushref"],[26,18,24,16,"Pushref"],[26,19,24,17,"schema"],[26,25,24,23],[26,27,24,25,"references"],[26,37,24,35],[26,39,24,37],[27,4,25,4],[27,8,25,8],[27,9,25,9],[27,10,25,10],[27,11,25,11],[27,13,25,13,"guard_1"],[27,20,25,20],[27,21,25,21,"IsString"],[27,29,25,29],[27,31,25,31,"schema"],[27,37,25,37],[27,38,25,38,"$id"],[27,41,25,41],[27,42,25,42],[27,46,25,46,"references"],[27,56,25,56],[27,57,25,57,"some"],[27,61,25,61],[27,62,25,63,"target"],[27,68,25,69],[27,72,25,74,"target"],[27,78,25,80],[27,79,25,81,"$id"],[27,82,25,84],[27,87,25,89,"schema"],[27,93,25,95],[27,94,25,96,"$id"],[27,97,25,99],[27,98,25,100],[27,100,26,8],[27,107,26,15,"references"],[27,117,26,25],[28,4,27,4,"references"],[28,14,27,14],[28,15,27,15,"push"],[28,19,27,19],[28,20,27,20,"schema"],[28,26,27,26],[28,27,27,27],[29,4,28,4],[29,11,28,11,"references"],[29,21,28,21],[30,2,29,0],[31,2,30,0],[32,2,31,0],[32,11,31,9,"Deref"],[32,16,31,14,"Deref"],[32,17,31,15,"schema"],[32,23,31,21],[32,25,31,23,"references"],[32,35,31,33],[32,37,31,35],[33,4,32,4],[34,4,33,4],[34,11,33,12,"schema"],[34,17,33,18],[34,18,33,19,"index_2"],[34,25,33,26],[34,26,33,27,"Kind"],[34,30,33,31],[34,31,33,32],[34,36,33,37],[34,42,33,43],[34,46,33,47,"schema"],[34,52,33,53],[34,53,33,54,"index_2"],[34,60,33,61],[34,61,33,62,"Kind"],[34,65,33,66],[34,66,33,67],[34,71,33,72],[34,76,33,77],[34,79,34,10,"Resolve"],[34,86,34,17],[34,87,34,18,"schema"],[34,93,34,24],[34,95,34,26,"references"],[34,105,34,36],[34,106,34,37],[34,109,35,10,"schema"],[34,115,35,16],[35,2,36,0],[36,0,36,1],[36,3]],"functionMap":{"names":["<global>","TypeDereferenceError","TypeDereferenceError#constructor","Resolve","references.find$argument_0","Pushref","references.some$argument_0","Deref"],"mappings":"AAA;ACS;ICC;KDG;CDC;AGE;mCCC,sCD;CHI;AKE;8DCC,qCD;CLI;AOE;CPK"},"hasCjsExports":true},"type":"js/module"}]}