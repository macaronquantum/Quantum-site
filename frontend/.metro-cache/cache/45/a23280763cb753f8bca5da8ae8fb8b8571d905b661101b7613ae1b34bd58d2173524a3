{"dependencies":[{"name":"../../ours/primordials","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":47,"index":61},"end":{"line":3,"column":80,"index":94}}],"key":"NYjhRIk1YfVwfaQSeITMV+mboSc=","exportNames":["*"],"imports":1}},{"name":"events","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":29,"index":124},"end":{"line":4,"column":46,"index":141}}],"key":"JsYPPZbiyTKGtgYi4nFi37XasmQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  const {\n    ArrayIsArray,\n    ObjectSetPrototypeOf\n  } = require(_dependencyMap[0], \"../../ours/primordials\");\n  const {\n    EventEmitter: EE\n  } = require(_dependencyMap[1], \"events\");\n  function Stream(opts) {\n    EE.call(this, opts);\n  }\n  ObjectSetPrototypeOf(Stream.prototype, EE.prototype);\n  ObjectSetPrototypeOf(Stream, EE);\n  Stream.prototype.pipe = function (dest, options) {\n    const source = this;\n    function ondata(chunk) {\n      if (dest.writable && dest.write(chunk) === false && source.pause) {\n        source.pause();\n      }\n    }\n    source.on('data', ondata);\n    function ondrain() {\n      if (source.readable && source.resume) {\n        source.resume();\n      }\n    }\n    dest.on('drain', ondrain);\n\n    // If the 'end' option is not supplied, dest.end() will be called when\n    // source gets the 'end' or 'close' events.  Only dest.end() once.\n    if (!dest._isStdio && (!options || options.end !== false)) {\n      source.on('end', onend);\n      source.on('close', onclose);\n    }\n    let didOnEnd = false;\n    function onend() {\n      if (didOnEnd) return;\n      didOnEnd = true;\n      dest.end();\n    }\n    function onclose() {\n      if (didOnEnd) return;\n      didOnEnd = true;\n      if (typeof dest.destroy === 'function') dest.destroy();\n    }\n\n    // Don't leave dangling pipes when there are errors.\n    function onerror(er) {\n      cleanup();\n      if (EE.listenerCount(this, 'error') === 0) {\n        this.emit('error', er);\n      }\n    }\n    prependListener(source, 'error', onerror);\n    prependListener(dest, 'error', onerror);\n\n    // Remove all the event listeners that were added.\n    function cleanup() {\n      source.removeListener('data', ondata);\n      dest.removeListener('drain', ondrain);\n      source.removeListener('end', onend);\n      source.removeListener('close', onclose);\n      source.removeListener('error', onerror);\n      dest.removeListener('error', onerror);\n      source.removeListener('end', cleanup);\n      source.removeListener('close', cleanup);\n      dest.removeListener('close', cleanup);\n    }\n    source.on('end', cleanup);\n    source.on('close', cleanup);\n    dest.on('close', cleanup);\n    dest.emit('pipe', source);\n\n    // Allow for unix-like usage: A.pipe(B).pipe(C)\n    return dest;\n  };\n  function prependListener(emitter, event, fn) {\n    // Sadly this is not cacheable as some libraries bundle their own\n    // event emitter implementation with them.\n    if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n    // This is a hack to make sure that our error handler is attached before any\n    // userland ones.  NEVER DO THIS. This is here only because this code needs\n    // to continue to work with older versions of Node.js that do not include\n    // the prependListener() method. The goal is to eventually remove this hack.\n    if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (ArrayIsArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n  }\n  module.exports = {\n    Stream,\n    prependListener\n  };\n});","lineCount":94,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,8,3,6],[5,4,3,8,"ArrayIsArray"],[5,16,3,20],[6,4,3,22,"ObjectSetPrototypeOf"],[7,2,3,43],[7,3,3,44],[7,6,3,47,"require"],[7,13,3,54],[7,14,3,54,"_dependencyMap"],[7,28,3,54],[7,57,3,79],[7,58,3,80],[8,2,4,0],[8,8,4,6],[9,4,4,8,"EventEmitter"],[9,16,4,20],[9,18,4,22,"EE"],[10,2,4,25],[10,3,4,26],[10,6,4,29,"require"],[10,13,4,36],[10,14,4,36,"_dependencyMap"],[10,28,4,36],[10,41,4,45],[10,42,4,46],[11,2,5,0],[11,11,5,9,"Stream"],[11,17,5,15,"Stream"],[11,18,5,16,"opts"],[11,22,5,20],[11,24,5,22],[12,4,6,2,"EE"],[12,6,6,4],[12,7,6,5,"call"],[12,11,6,9],[12,12,6,10],[12,16,6,14],[12,18,6,16,"opts"],[12,22,6,20],[12,23,6,21],[13,2,7,0],[14,2,8,0,"ObjectSetPrototypeOf"],[14,22,8,20],[14,23,8,21,"Stream"],[14,29,8,27],[14,30,8,28,"prototype"],[14,39,8,37],[14,41,8,39,"EE"],[14,43,8,41],[14,44,8,42,"prototype"],[14,53,8,51],[14,54,8,52],[15,2,9,0,"ObjectSetPrototypeOf"],[15,22,9,20],[15,23,9,21,"Stream"],[15,29,9,27],[15,31,9,29,"EE"],[15,33,9,31],[15,34,9,32],[16,2,10,0,"Stream"],[16,8,10,6],[16,9,10,7,"prototype"],[16,18,10,16],[16,19,10,17,"pipe"],[16,23,10,21],[16,26,10,24],[16,36,10,34,"dest"],[16,40,10,38],[16,42,10,40,"options"],[16,49,10,47],[16,51,10,49],[17,4,11,2],[17,10,11,8,"source"],[17,16,11,14],[17,19,11,17],[17,23,11,21],[18,4,12,2],[18,13,12,11,"ondata"],[18,19,12,17,"ondata"],[18,20,12,18,"chunk"],[18,25,12,23],[18,27,12,25],[19,6,13,4],[19,10,13,8,"dest"],[19,14,13,12],[19,15,13,13,"writable"],[19,23,13,21],[19,27,13,25,"dest"],[19,31,13,29],[19,32,13,30,"write"],[19,37,13,35],[19,38,13,36,"chunk"],[19,43,13,41],[19,44,13,42],[19,49,13,47],[19,54,13,52],[19,58,13,56,"source"],[19,64,13,62],[19,65,13,63,"pause"],[19,70,13,68],[19,72,13,70],[20,8,14,6,"source"],[20,14,14,12],[20,15,14,13,"pause"],[20,20,14,18],[20,21,14,19],[20,22,14,20],[21,6,15,4],[22,4,16,2],[23,4,17,2,"source"],[23,10,17,8],[23,11,17,9,"on"],[23,13,17,11],[23,14,17,12],[23,20,17,18],[23,22,17,20,"ondata"],[23,28,17,26],[23,29,17,27],[24,4,18,2],[24,13,18,11,"ondrain"],[24,20,18,18,"ondrain"],[24,21,18,18],[24,23,18,21],[25,6,19,4],[25,10,19,8,"source"],[25,16,19,14],[25,17,19,15,"readable"],[25,25,19,23],[25,29,19,27,"source"],[25,35,19,33],[25,36,19,34,"resume"],[25,42,19,40],[25,44,19,42],[26,8,20,6,"source"],[26,14,20,12],[26,15,20,13,"resume"],[26,21,20,19],[26,22,20,20],[26,23,20,21],[27,6,21,4],[28,4,22,2],[29,4,23,2,"dest"],[29,8,23,6],[29,9,23,7,"on"],[29,11,23,9],[29,12,23,10],[29,19,23,17],[29,21,23,19,"ondrain"],[29,28,23,26],[29,29,23,27],[31,4,25,2],[32,4,26,2],[33,4,27,2],[33,8,27,6],[33,9,27,7,"dest"],[33,13,27,11],[33,14,27,12,"_isStdio"],[33,22,27,20],[33,27,27,25],[33,28,27,26,"options"],[33,35,27,33],[33,39,27,37,"options"],[33,46,27,44],[33,47,27,45,"end"],[33,50,27,48],[33,55,27,53],[33,60,27,58],[33,61,27,59],[33,63,27,61],[34,6,28,4,"source"],[34,12,28,10],[34,13,28,11,"on"],[34,15,28,13],[34,16,28,14],[34,21,28,19],[34,23,28,21,"onend"],[34,28,28,26],[34,29,28,27],[35,6,29,4,"source"],[35,12,29,10],[35,13,29,11,"on"],[35,15,29,13],[35,16,29,14],[35,23,29,21],[35,25,29,23,"onclose"],[35,32,29,30],[35,33,29,31],[36,4,30,2],[37,4,31,2],[37,8,31,6,"didOnEnd"],[37,16,31,14],[37,19,31,17],[37,24,31,22],[38,4,32,2],[38,13,32,11,"onend"],[38,18,32,16,"onend"],[38,19,32,16],[38,21,32,19],[39,6,33,4],[39,10,33,8,"didOnEnd"],[39,18,33,16],[39,20,33,18],[40,6,34,4,"didOnEnd"],[40,14,34,12],[40,17,34,15],[40,21,34,19],[41,6,35,4,"dest"],[41,10,35,8],[41,11,35,9,"end"],[41,14,35,12],[41,15,35,13],[41,16,35,14],[42,4,36,2],[43,4,37,2],[43,13,37,11,"onclose"],[43,20,37,18,"onclose"],[43,21,37,18],[43,23,37,21],[44,6,38,4],[44,10,38,8,"didOnEnd"],[44,18,38,16],[44,20,38,18],[45,6,39,4,"didOnEnd"],[45,14,39,12],[45,17,39,15],[45,21,39,19],[46,6,40,4],[46,10,40,8],[46,17,40,15,"dest"],[46,21,40,19],[46,22,40,20,"destroy"],[46,29,40,27],[46,34,40,32],[46,44,40,42],[46,46,40,44,"dest"],[46,50,40,48],[46,51,40,49,"destroy"],[46,58,40,56],[46,59,40,57],[46,60,40,58],[47,4,41,2],[49,4,43,2],[50,4,44,2],[50,13,44,11,"onerror"],[50,20,44,18,"onerror"],[50,21,44,19,"er"],[50,23,44,21],[50,25,44,23],[51,6,45,4,"cleanup"],[51,13,45,11],[51,14,45,12],[51,15,45,13],[52,6,46,4],[52,10,46,8,"EE"],[52,12,46,10],[52,13,46,11,"listenerCount"],[52,26,46,24],[52,27,46,25],[52,31,46,29],[52,33,46,31],[52,40,46,38],[52,41,46,39],[52,46,46,44],[52,47,46,45],[52,49,46,47],[53,8,47,6],[53,12,47,10],[53,13,47,11,"emit"],[53,17,47,15],[53,18,47,16],[53,25,47,23],[53,27,47,25,"er"],[53,29,47,27],[53,30,47,28],[54,6,48,4],[55,4,49,2],[56,4,50,2,"prependListener"],[56,19,50,17],[56,20,50,18,"source"],[56,26,50,24],[56,28,50,26],[56,35,50,33],[56,37,50,35,"onerror"],[56,44,50,42],[56,45,50,43],[57,4,51,2,"prependListener"],[57,19,51,17],[57,20,51,18,"dest"],[57,24,51,22],[57,26,51,24],[57,33,51,31],[57,35,51,33,"onerror"],[57,42,51,40],[57,43,51,41],[59,4,53,2],[60,4,54,2],[60,13,54,11,"cleanup"],[60,20,54,18,"cleanup"],[60,21,54,18],[60,23,54,21],[61,6,55,4,"source"],[61,12,55,10],[61,13,55,11,"removeListener"],[61,27,55,25],[61,28,55,26],[61,34,55,32],[61,36,55,34,"ondata"],[61,42,55,40],[61,43,55,41],[62,6,56,4,"dest"],[62,10,56,8],[62,11,56,9,"removeListener"],[62,25,56,23],[62,26,56,24],[62,33,56,31],[62,35,56,33,"ondrain"],[62,42,56,40],[62,43,56,41],[63,6,57,4,"source"],[63,12,57,10],[63,13,57,11,"removeListener"],[63,27,57,25],[63,28,57,26],[63,33,57,31],[63,35,57,33,"onend"],[63,40,57,38],[63,41,57,39],[64,6,58,4,"source"],[64,12,58,10],[64,13,58,11,"removeListener"],[64,27,58,25],[64,28,58,26],[64,35,58,33],[64,37,58,35,"onclose"],[64,44,58,42],[64,45,58,43],[65,6,59,4,"source"],[65,12,59,10],[65,13,59,11,"removeListener"],[65,27,59,25],[65,28,59,26],[65,35,59,33],[65,37,59,35,"onerror"],[65,44,59,42],[65,45,59,43],[66,6,60,4,"dest"],[66,10,60,8],[66,11,60,9,"removeListener"],[66,25,60,23],[66,26,60,24],[66,33,60,31],[66,35,60,33,"onerror"],[66,42,60,40],[66,43,60,41],[67,6,61,4,"source"],[67,12,61,10],[67,13,61,11,"removeListener"],[67,27,61,25],[67,28,61,26],[67,33,61,31],[67,35,61,33,"cleanup"],[67,42,61,40],[67,43,61,41],[68,6,62,4,"source"],[68,12,62,10],[68,13,62,11,"removeListener"],[68,27,62,25],[68,28,62,26],[68,35,62,33],[68,37,62,35,"cleanup"],[68,44,62,42],[68,45,62,43],[69,6,63,4,"dest"],[69,10,63,8],[69,11,63,9,"removeListener"],[69,25,63,23],[69,26,63,24],[69,33,63,31],[69,35,63,33,"cleanup"],[69,42,63,40],[69,43,63,41],[70,4,64,2],[71,4,65,2,"source"],[71,10,65,8],[71,11,65,9,"on"],[71,13,65,11],[71,14,65,12],[71,19,65,17],[71,21,65,19,"cleanup"],[71,28,65,26],[71,29,65,27],[72,4,66,2,"source"],[72,10,66,8],[72,11,66,9,"on"],[72,13,66,11],[72,14,66,12],[72,21,66,19],[72,23,66,21,"cleanup"],[72,30,66,28],[72,31,66,29],[73,4,67,2,"dest"],[73,8,67,6],[73,9,67,7,"on"],[73,11,67,9],[73,12,67,10],[73,19,67,17],[73,21,67,19,"cleanup"],[73,28,67,26],[73,29,67,27],[74,4,68,2,"dest"],[74,8,68,6],[74,9,68,7,"emit"],[74,13,68,11],[74,14,68,12],[74,20,68,18],[74,22,68,20,"source"],[74,28,68,26],[74,29,68,27],[76,4,70,2],[77,4,71,2],[77,11,71,9,"dest"],[77,15,71,13],[78,2,72,0],[78,3,72,1],[79,2,73,0],[79,11,73,9,"prependListener"],[79,26,73,24,"prependListener"],[79,27,73,25,"emitter"],[79,34,73,32],[79,36,73,34,"event"],[79,41,73,39],[79,43,73,41,"fn"],[79,45,73,43],[79,47,73,45],[80,4,74,2],[81,4,75,2],[82,4,76,2],[82,8,76,6],[82,15,76,13,"emitter"],[82,22,76,20],[82,23,76,21,"prependListener"],[82,38,76,36],[82,43,76,41],[82,53,76,51],[82,55,76,53],[82,62,76,60,"emitter"],[82,69,76,67],[82,70,76,68,"prependListener"],[82,85,76,83],[82,86,76,84,"event"],[82,91,76,89],[82,93,76,91,"fn"],[82,95,76,93],[82,96,76,94],[84,4,78,2],[85,4,79,2],[86,4,80,2],[87,4,81,2],[88,4,82,2],[88,8,82,6],[88,9,82,7,"emitter"],[88,16,82,14],[88,17,82,15,"_events"],[88,24,82,22],[88,28,82,26],[88,29,82,27,"emitter"],[88,36,82,34],[88,37,82,35,"_events"],[88,44,82,42],[88,45,82,43,"event"],[88,50,82,48],[88,51,82,49],[88,53,82,51,"emitter"],[88,60,82,58],[88,61,82,59,"on"],[88,63,82,61],[88,64,82,62,"event"],[88,69,82,67],[88,71,82,69,"fn"],[88,73,82,71],[88,74,82,72],[88,80,83,7],[88,84,83,11,"ArrayIsArray"],[88,96,83,23],[88,97,83,24,"emitter"],[88,104,83,31],[88,105,83,32,"_events"],[88,112,83,39],[88,113,83,40,"event"],[88,118,83,45],[88,119,83,46],[88,120,83,47],[88,122,83,49,"emitter"],[88,129,83,56],[88,130,83,57,"_events"],[88,137,83,64],[88,138,83,65,"event"],[88,143,83,70],[88,144,83,71],[88,145,83,72,"unshift"],[88,152,83,79],[88,153,83,80,"fn"],[88,155,83,82],[88,156,83,83],[88,162,84,7,"emitter"],[88,169,84,14],[88,170,84,15,"_events"],[88,177,84,22],[88,178,84,23,"event"],[88,183,84,28],[88,184,84,29],[88,187,84,32],[88,188,84,33,"fn"],[88,190,84,35],[88,192,84,37,"emitter"],[88,199,84,44],[88,200,84,45,"_events"],[88,207,84,52],[88,208,84,53,"event"],[88,213,84,58],[88,214,84,59],[88,215,84,60],[89,2,85,0],[90,2,86,0,"module"],[90,8,86,6],[90,9,86,7,"exports"],[90,16,86,14],[90,19,86,17],[91,4,87,2,"Stream"],[91,10,87,8],[92,4,88,2,"prependListener"],[93,2,89,0],[93,3,89,1],[94,0,89,1],[94,3]],"functionMap":{"names":["<global>","Stream","Stream.prototype.pipe","ondata","ondrain","onend","onclose","onerror","cleanup","prependListener"],"mappings":"AAA;ACI;CDE;wBEG;ECE;GDI;EEE;GFI;EGU;GHI;EIC;GJI;EKG;GLK;EMK;GNU;CFQ;ASC;CTY"},"hasCjsExports":true},"type":"js/module"}]}