{"dependencies":[{"name":"../../constants/abis.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":88,"index":88}}],"key":"LZvwvaZmwAX6SyAqVHRt5iP6qx8=","exportNames":["*"],"imports":1}},{"name":"../../utils/abi/decodeFunctionResult.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":89},"end":{"line":2,"column":80,"index":169}}],"key":"kTyTrS0/fV5/YN79eeV1YCQApII=","exportNames":["*"],"imports":1}},{"name":"../../utils/abi/encodeFunctionData.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":170},"end":{"line":3,"column":76,"index":246}}],"key":"OuSySdoC0ezpBCAwaIZplowPkvk=","exportNames":["*"],"imports":1}},{"name":"../../utils/chain/getChainContractAddress.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":247},"end":{"line":4,"column":88,"index":335}}],"key":"8qS5kCcV3GKt7vxDZBWLzJuplRM=","exportNames":["*"],"imports":1}},{"name":"../../utils/encoding/toHex.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":336},"end":{"line":5,"column":54,"index":390}}],"key":"U2IsyW1seIe5m4FUbe8axrr/0FQ=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/errors.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":391},"end":{"line":6,"column":73,"index":464}}],"key":"PnlrScciUN4PT5dk7YYfSZS8dDA=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/localBatchGatewayRequest.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":465},"end":{"line":7,"column":83,"index":548}}],"key":"SupR2cuuwa1DBj8CyDwtc1ZTkCg=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/namehash.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":549},"end":{"line":8,"column":55,"index":604}}],"key":"LrLJ4tMmO+bDUw+6voQwj4+mN5E=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/packetToBytes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":605},"end":{"line":9,"column":66,"index":671}}],"key":"vy6lnJxRhohVWN+VTecRsVVoAi0=","exportNames":["*"],"imports":1}},{"name":"../../utils/getAction.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":672},"end":{"line":10,"column":53,"index":725}}],"key":"vt4scbNyA2t/tyY0oQJI6AZPJS4=","exportNames":["*"],"imports":1}},{"name":"../public/readContract.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":726},"end":{"line":11,"column":58,"index":784}}],"key":"duxLiRpfja/POd/F8+OKH9hCagk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getEnsText = getEnsText;\n  var _constantsAbisJs = require(_dependencyMap[0], \"../../constants/abis.js\");\n  var _utilsAbiDecodeFunctionResultJs = require(_dependencyMap[1], \"../../utils/abi/decodeFunctionResult.js\");\n  var _utilsAbiEncodeFunctionDataJs = require(_dependencyMap[2], \"../../utils/abi/encodeFunctionData.js\");\n  var _utilsChainGetChainContractAddressJs = require(_dependencyMap[3], \"../../utils/chain/getChainContractAddress.js\");\n  var _utilsEncodingToHexJs = require(_dependencyMap[4], \"../../utils/encoding/toHex.js\");\n  var _utilsEnsErrorsJs = require(_dependencyMap[5], \"../../utils/ens/errors.js\");\n  var _utilsEnsLocalBatchGatewayRequestJs = require(_dependencyMap[6], \"../../utils/ens/localBatchGatewayRequest.js\");\n  var _utilsEnsNamehashJs = require(_dependencyMap[7], \"../../utils/ens/namehash.js\");\n  var _utilsEnsPacketToBytesJs = require(_dependencyMap[8], \"../../utils/ens/packetToBytes.js\");\n  var _utilsGetActionJs = require(_dependencyMap[9], \"../../utils/getAction.js\");\n  var _publicReadContractJs = require(_dependencyMap[10], \"../public/readContract.js\");\n  /**\n   * Gets a text record for specified ENS name.\n   *\n   * - Docs: https://viem.sh/docs/ens/actions/getEnsResolver\n   * - Examples: https://stackblitz.com/github/wevm/viem/tree/main/examples/ens\n   *\n   * Calls `resolve(bytes, bytes)` on ENS Universal Resolver Contract.\n   *\n   * Since ENS names prohibit certain forbidden characters (e.g. underscore) and have other validation rules, you likely want to [normalize ENS names](https://docs.ens.domains/contract-api-reference/name-processing#normalising-names) with [UTS-46 normalization](https://unicode.org/reports/tr46) before passing them to `getEnsAddress`. You can use the built-in [`normalize`](https://viem.sh/docs/ens/utilities/normalize) function for this.\n   *\n   * @param client - Client to use\n   * @param parameters - {@link GetEnsTextParameters}\n   * @returns Address for ENS resolver. {@link GetEnsTextReturnType}\n   *\n   * @example\n   * import { createPublicClient, http } from 'viem'\n   * import { mainnet } from 'viem/chains'\n   * import { getEnsText, normalize } from 'viem/ens'\n   *\n   * const client = createPublicClient({\n   *   chain: mainnet,\n   *   transport: http(),\n   * })\n   * const twitterRecord = await getEnsText(client, {\n   *   name: normalize('wevm.eth'),\n   *   key: 'com.twitter',\n   * })\n   * // 'wevm_dev'\n   */\n  async function getEnsText(client, parameters) {\n    const {\n      blockNumber,\n      blockTag,\n      key,\n      name,\n      gatewayUrls,\n      strict\n    } = parameters;\n    const {\n      chain\n    } = client;\n    const universalResolverAddress = (() => {\n      if (parameters.universalResolverAddress) return parameters.universalResolverAddress;\n      if (!chain) throw new Error('client chain not configured. universalResolverAddress is required.');\n      return (0, _utilsChainGetChainContractAddressJs.getChainContractAddress)({\n        blockNumber,\n        chain,\n        contract: 'ensUniversalResolver'\n      });\n    })();\n    const tlds = chain?.ensTlds;\n    if (tlds && !tlds.some(tld => name.endsWith(tld))) return null;\n    try {\n      const readContractParameters = {\n        address: universalResolverAddress,\n        abi: _constantsAbisJs.universalResolverResolveAbi,\n        args: [(0, _utilsEncodingToHexJs.toHex)((0, _utilsEnsPacketToBytesJs.packetToBytes)(name)), (0, _utilsAbiEncodeFunctionDataJs.encodeFunctionData)({\n          abi: _constantsAbisJs.textResolverAbi,\n          functionName: 'text',\n          args: [(0, _utilsEnsNamehashJs.namehash)(name), key]\n        }), gatewayUrls ?? [_utilsEnsLocalBatchGatewayRequestJs.localBatchGatewayUrl]],\n        functionName: 'resolveWithGateways',\n        blockNumber,\n        blockTag\n      };\n      const readContractAction = (0, _utilsGetActionJs.getAction)(client, _publicReadContractJs.readContract, 'readContract');\n      const res = await readContractAction(readContractParameters);\n      if (res[0] === '0x') return null;\n      const record = (0, _utilsAbiDecodeFunctionResultJs.decodeFunctionResult)({\n        abi: _constantsAbisJs.textResolverAbi,\n        functionName: 'text',\n        data: res[0]\n      });\n      return record === '' ? null : record;\n    } catch (err) {\n      if (strict) throw err;\n      if ((0, _utilsEnsErrorsJs.isNullUniversalResolverError)(err)) return null;\n      throw err;\n    }\n  }\n});","lineCount":99,"map":[[7,2,41,0,"exports"],[7,9,41,0],[7,10,41,0,"getEnsText"],[7,20,41,0],[7,23,41,0,"getEnsText"],[7,33,41,0],[8,2,1,0],[8,6,1,0,"_constantsAbisJs"],[8,22,1,0],[8,25,1,0,"require"],[8,32,1,0],[8,33,1,0,"_dependencyMap"],[8,47,1,0],[9,2,2,0],[9,6,2,0,"_utilsAbiDecodeFunctionResultJs"],[9,37,2,0],[9,40,2,0,"require"],[9,47,2,0],[9,48,2,0,"_dependencyMap"],[9,62,2,0],[10,2,3,0],[10,6,3,0,"_utilsAbiEncodeFunctionDataJs"],[10,35,3,0],[10,38,3,0,"require"],[10,45,3,0],[10,46,3,0,"_dependencyMap"],[10,60,3,0],[11,2,4,0],[11,6,4,0,"_utilsChainGetChainContractAddressJs"],[11,42,4,0],[11,45,4,0,"require"],[11,52,4,0],[11,53,4,0,"_dependencyMap"],[11,67,4,0],[12,2,5,0],[12,6,5,0,"_utilsEncodingToHexJs"],[12,27,5,0],[12,30,5,0,"require"],[12,37,5,0],[12,38,5,0,"_dependencyMap"],[12,52,5,0],[13,2,6,0],[13,6,6,0,"_utilsEnsErrorsJs"],[13,23,6,0],[13,26,6,0,"require"],[13,33,6,0],[13,34,6,0,"_dependencyMap"],[13,48,6,0],[14,2,7,0],[14,6,7,0,"_utilsEnsLocalBatchGatewayRequestJs"],[14,41,7,0],[14,44,7,0,"require"],[14,51,7,0],[14,52,7,0,"_dependencyMap"],[14,66,7,0],[15,2,8,0],[15,6,8,0,"_utilsEnsNamehashJs"],[15,25,8,0],[15,28,8,0,"require"],[15,35,8,0],[15,36,8,0,"_dependencyMap"],[15,50,8,0],[16,2,9,0],[16,6,9,0,"_utilsEnsPacketToBytesJs"],[16,30,9,0],[16,33,9,0,"require"],[16,40,9,0],[16,41,9,0,"_dependencyMap"],[16,55,9,0],[17,2,10,0],[17,6,10,0,"_utilsGetActionJs"],[17,23,10,0],[17,26,10,0,"require"],[17,33,10,0],[17,34,10,0,"_dependencyMap"],[17,48,10,0],[18,2,11,0],[18,6,11,0,"_publicReadContractJs"],[18,27,11,0],[18,30,11,0,"require"],[18,37,11,0],[18,38,11,0,"_dependencyMap"],[18,52,11,0],[19,2,12,0],[20,0,13,0],[21,0,14,0],[22,0,15,0],[23,0,16,0],[24,0,17,0],[25,0,18,0],[26,0,19,0],[27,0,20,0],[28,0,21,0],[29,0,22,0],[30,0,23,0],[31,0,24,0],[32,0,25,0],[33,0,26,0],[34,0,27,0],[35,0,28,0],[36,0,29,0],[37,0,30,0],[38,0,31,0],[39,0,32,0],[40,0,33,0],[41,0,34,0],[42,0,35,0],[43,0,36,0],[44,0,37,0],[45,0,38,0],[46,0,39,0],[47,0,40,0],[48,2,41,7],[48,17,41,22,"getEnsText"],[48,27,41,32,"getEnsText"],[48,28,41,33,"client"],[48,34,41,39],[48,36,41,41,"parameters"],[48,46,41,51],[48,48,41,53],[49,4,42,4],[49,10,42,10],[50,6,42,12,"blockNumber"],[50,17,42,23],[51,6,42,25,"blockTag"],[51,14,42,33],[52,6,42,35,"key"],[52,9,42,38],[53,6,42,40,"name"],[53,10,42,44],[54,6,42,46,"gatewayUrls"],[54,17,42,57],[55,6,42,59,"strict"],[56,4,42,66],[56,5,42,67],[56,8,42,70,"parameters"],[56,18,42,80],[57,4,43,4],[57,10,43,10],[58,6,43,12,"chain"],[59,4,43,18],[59,5,43,19],[59,8,43,22,"client"],[59,14,43,28],[60,4,44,4],[60,10,44,10,"universalResolverAddress"],[60,34,44,34],[60,37,44,37],[60,38,44,38],[60,44,44,44],[61,6,45,8],[61,10,45,12,"parameters"],[61,20,45,22],[61,21,45,23,"universalResolverAddress"],[61,45,45,47],[61,47,46,12],[61,54,46,19,"parameters"],[61,64,46,29],[61,65,46,30,"universalResolverAddress"],[61,89,46,54],[62,6,47,8],[62,10,47,12],[62,11,47,13,"chain"],[62,16,47,18],[62,18,48,12],[62,24,48,18],[62,28,48,22,"Error"],[62,33,48,27],[62,34,48,28],[62,102,48,96],[62,103,48,97],[63,6,49,8],[63,13,49,15],[63,17,49,15,"getChainContractAddress"],[63,53,49,38],[63,54,49,38,"getChainContractAddress"],[63,77,49,38],[63,79,49,39],[64,8,50,12,"blockNumber"],[64,19,50,23],[65,8,51,12,"chain"],[65,13,51,17],[66,8,52,12,"contract"],[66,16,52,20],[66,18,52,22],[67,6,53,8],[67,7,53,9],[67,8,53,10],[68,4,54,4],[68,5,54,5],[68,7,54,7],[68,8,54,8],[69,4,55,4],[69,10,55,10,"tlds"],[69,14,55,14],[69,17,55,17,"chain"],[69,22,55,22],[69,24,55,24,"ensTlds"],[69,31,55,31],[70,4,56,4],[70,8,56,8,"tlds"],[70,12,56,12],[70,16,56,16],[70,17,56,17,"tlds"],[70,21,56,21],[70,22,56,22,"some"],[70,26,56,26],[70,27,56,28,"tld"],[70,30,56,31],[70,34,56,36,"name"],[70,38,56,40],[70,39,56,41,"endsWith"],[70,47,56,49],[70,48,56,50,"tld"],[70,51,56,53],[70,52,56,54],[70,53,56,55],[70,55,57,8],[70,62,57,15],[70,66,57,19],[71,4,58,4],[71,8,58,8],[72,6,59,8],[72,12,59,14,"readContractParameters"],[72,34,59,36],[72,37,59,39],[73,8,60,12,"address"],[73,15,60,19],[73,17,60,21,"universalResolverAddress"],[73,41,60,45],[74,8,61,12,"abi"],[74,11,61,15],[74,13,61,17,"universalResolverResolveAbi"],[74,29,61,44],[74,30,61,44,"universalResolverResolveAbi"],[74,57,61,44],[75,8,62,12,"args"],[75,12,62,16],[75,14,62,18],[75,15,63,16],[75,19,63,16,"toHex"],[75,40,63,21],[75,41,63,21,"toHex"],[75,46,63,21],[75,48,63,22],[75,52,63,22,"packetToBytes"],[75,76,63,35],[75,77,63,35,"packetToBytes"],[75,90,63,35],[75,92,63,36,"name"],[75,96,63,40],[75,97,63,41],[75,98,63,42],[75,100,64,16],[75,104,64,16,"encodeFunctionData"],[75,133,64,34],[75,134,64,34,"encodeFunctionData"],[75,152,64,34],[75,154,64,35],[76,10,65,20,"abi"],[76,13,65,23],[76,15,65,25,"textResolverAbi"],[76,31,65,40],[76,32,65,40,"textResolverAbi"],[76,47,65,40],[77,10,66,20,"functionName"],[77,22,66,32],[77,24,66,34],[77,30,66,40],[78,10,67,20,"args"],[78,14,67,24],[78,16,67,26],[78,17,67,27],[78,21,67,27,"namehash"],[78,40,67,35],[78,41,67,35,"namehash"],[78,49,67,35],[78,51,67,36,"name"],[78,55,67,40],[78,56,67,41],[78,58,67,43,"key"],[78,61,67,46],[79,8,68,16],[79,9,68,17],[79,10,68,18],[79,12,69,16,"gatewayUrls"],[79,23,69,27],[79,27,69,31],[79,28,69,32,"localBatchGatewayUrl"],[79,63,69,52],[79,64,69,52,"localBatchGatewayUrl"],[79,84,69,52],[79,85,69,53],[79,86,70,13],[80,8,71,12,"functionName"],[80,20,71,24],[80,22,71,26],[80,43,71,47],[81,8,72,12,"blockNumber"],[81,19,72,23],[82,8,73,12,"blockTag"],[83,6,74,8],[83,7,74,9],[84,6,75,8],[84,12,75,14,"readContractAction"],[84,30,75,32],[84,33,75,35],[84,37,75,35,"getAction"],[84,54,75,44],[84,55,75,44,"getAction"],[84,64,75,44],[84,66,75,45,"client"],[84,72,75,51],[84,74,75,53,"readContract"],[84,95,75,65],[84,96,75,65,"readContract"],[84,108,75,65],[84,110,75,67],[84,124,75,81],[84,125,75,82],[85,6,76,8],[85,12,76,14,"res"],[85,15,76,17],[85,18,76,20],[85,24,76,26,"readContractAction"],[85,42,76,44],[85,43,76,45,"readContractParameters"],[85,65,76,67],[85,66,76,68],[86,6,77,8],[86,10,77,12,"res"],[86,13,77,15],[86,14,77,16],[86,15,77,17],[86,16,77,18],[86,21,77,23],[86,25,77,27],[86,27,78,12],[86,34,78,19],[86,38,78,23],[87,6,79,8],[87,12,79,14,"record"],[87,18,79,20],[87,21,79,23],[87,25,79,23,"decodeFunctionResult"],[87,56,79,43],[87,57,79,43,"decodeFunctionResult"],[87,77,79,43],[87,79,79,44],[88,8,80,12,"abi"],[88,11,80,15],[88,13,80,17,"textResolverAbi"],[88,29,80,32],[88,30,80,32,"textResolverAbi"],[88,45,80,32],[89,8,81,12,"functionName"],[89,20,81,24],[89,22,81,26],[89,28,81,32],[90,8,82,12,"data"],[90,12,82,16],[90,14,82,18,"res"],[90,17,82,21],[90,18,82,22],[90,19,82,23],[91,6,83,8],[91,7,83,9],[91,8,83,10],[92,6,84,8],[92,13,84,15,"record"],[92,19,84,21],[92,24,84,26],[92,26,84,28],[92,29,84,31],[92,33,84,35],[92,36,84,38,"record"],[92,42,84,44],[93,4,85,4],[93,5,85,5],[93,6,86,4],[93,13,86,11,"err"],[93,16,86,14],[93,18,86,16],[94,6,87,8],[94,10,87,12,"strict"],[94,16,87,18],[94,18,88,12],[94,24,88,18,"err"],[94,27,88,21],[95,6,89,8],[95,10,89,12],[95,14,89,12,"isNullUniversalResolverError"],[95,31,89,40],[95,32,89,40,"isNullUniversalResolverError"],[95,60,89,40],[95,62,89,41,"err"],[95,65,89,44],[95,66,89,45],[95,68,90,12],[95,75,90,19],[95,79,90,23],[96,6,91,8],[96,12,91,14,"err"],[96,15,91,17],[97,4,92,4],[98,2,93,0],[99,0,93,1],[99,3]],"functionMap":{"names":["<global>","getEnsText","<anonymous>","tlds.some$argument_0"],"mappings":"AAA;OCwC;sCCG;KDU;2BEE,2BF;CDqC"},"hasCjsExports":false},"type":"js/module"}]}