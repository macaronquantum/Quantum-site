{"dependencies":[{"name":"../../accounts/utils/parseAccount.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":69,"index":69}}],"key":"/2Bvi5qErxbS6yBB5FzUPODHkYU=","exportNames":["*"],"imports":1}},{"name":"../../errors/base.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":70},"end":{"line":2,"column":49,"index":119}}],"key":"RZV6q4Ia6g2SthmhXKbx9xro+lE=","exportNames":["*"],"imports":1}},{"name":"../../utils/authorization/recoverAuthorizationAddress.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":120},"end":{"line":3,"column":104,"index":224}}],"key":"3iEWYm1Lnp73UlrHwGZzoX43G98=","exportNames":["*"],"imports":1}},{"name":"../../utils/encoding/toHex.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":225},"end":{"line":4,"column":61,"index":286}}],"key":"U2IsyW1seIe5m4FUbe8axrr/0FQ=","exportNames":["*"],"imports":1}},{"name":"../../utils/errors/getEstimateGasError.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":287},"end":{"line":5,"column":81,"index":368}}],"key":"TQmdM4/W/NaN8abtyXx3HuY67gg=","exportNames":["*"],"imports":1}},{"name":"../../utils/formatters/extract.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":369},"end":{"line":6,"column":60,"index":429}}],"key":"5lhu8Rnl9tf35HYXHvbPAR3ZbTs=","exportNames":["*"],"imports":1}},{"name":"../../utils/formatters/transactionRequest.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":430},"end":{"line":7,"column":89,"index":519}}],"key":"Jzx36iqW8zfAhEE1b9S1EhHG/+g=","exportNames":["*"],"imports":1}},{"name":"../../utils/stateOverride.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":520},"end":{"line":8,"column":70,"index":590}}],"key":"oDe30G1lx1PgB7FdvlbsVDDduYw=","exportNames":["*"],"imports":1}},{"name":"../../utils/transaction/assertRequest.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":591},"end":{"line":9,"column":74,"index":665}}],"key":"rGDxHuV30xCY59w2CnQoJPVAOg0=","exportNames":["*"],"imports":1}},{"name":"../wallet/prepareTransactionRequest.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":666},"end":{"line":10,"column":84,"index":750}}],"key":"09Wrx1MMxsSgCQcCsEa5xjxxIzc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.estimateGas = estimateGas;\n  var _accountsUtilsParseAccountJs = require(_dependencyMap[0], \"../../accounts/utils/parseAccount.js\");\n  var _errorsBaseJs = require(_dependencyMap[1], \"../../errors/base.js\");\n  var _utilsAuthorizationRecoverAuthorizationAddressJs = require(_dependencyMap[2], \"../../utils/authorization/recoverAuthorizationAddress.js\");\n  var _utilsEncodingToHexJs = require(_dependencyMap[3], \"../../utils/encoding/toHex.js\");\n  var _utilsErrorsGetEstimateGasErrorJs = require(_dependencyMap[4], \"../../utils/errors/getEstimateGasError.js\");\n  var _utilsFormattersExtractJs = require(_dependencyMap[5], \"../../utils/formatters/extract.js\");\n  var _utilsFormattersTransactionRequestJs = require(_dependencyMap[6], \"../../utils/formatters/transactionRequest.js\");\n  var _utilsStateOverrideJs = require(_dependencyMap[7], \"../../utils/stateOverride.js\");\n  var _utilsTransactionAssertRequestJs = require(_dependencyMap[8], \"../../utils/transaction/assertRequest.js\");\n  var _walletPrepareTransactionRequestJs = require(_dependencyMap[9], \"../wallet/prepareTransactionRequest.js\");\n  /**\n   * Estimates the gas necessary to complete a transaction without submitting it to the network.\n   *\n   * - Docs: https://viem.sh/docs/actions/public/estimateGas\n   * - JSON-RPC Methods: [`eth_estimateGas`](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_estimategas)\n   *\n   * @param client - Client to use\n   * @param parameters - {@link EstimateGasParameters}\n   * @returns The gas estimate (in gas units). {@link EstimateGasReturnType}\n   *\n   * @example\n   * import { createPublicClient, http, parseEther } from 'viem'\n   * import { mainnet } from 'viem/chains'\n   * import { estimateGas } from 'viem/public'\n   *\n   * const client = createPublicClient({\n   *   chain: mainnet,\n   *   transport: http(),\n   * })\n   * const gasEstimate = await estimateGas(client, {\n   *   account: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',\n   *   to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',\n   *   value: parseEther('1'),\n   * })\n   */\n  async function estimateGas(client, args) {\n    const {\n      account: account_ = client.account,\n      prepare = true\n    } = args;\n    const account = account_ ? (0, _accountsUtilsParseAccountJs.parseAccount)(account_) : undefined;\n    const parameters = (() => {\n      if (Array.isArray(prepare)) return prepare;\n      // Some RPC Providers do not compute versioned hashes from blobs. We will need\n      // to compute them.\n      if (account?.type !== 'local') return ['blobVersionedHashes'];\n      return undefined;\n    })();\n    try {\n      const to = await (async () => {\n        // If `to` exists on the parameters, use that.\n        if (args.to) return args.to;\n        // If no `to` exists, and we are sending a EIP-7702 transaction, use the\n        // address of the first authorization in the list.\n        if (args.authorizationList && args.authorizationList.length > 0) return await (0, _utilsAuthorizationRecoverAuthorizationAddressJs.recoverAuthorizationAddress)({\n          authorization: args.authorizationList[0]\n        }).catch(() => {\n          throw new _errorsBaseJs.BaseError('`to` is required. Could not infer from `authorizationList`');\n        });\n        // Otherwise, we are sending a deployment transaction.\n        return undefined;\n      })();\n      const {\n        accessList,\n        authorizationList,\n        blobs,\n        blobVersionedHashes,\n        blockNumber,\n        blockTag,\n        data,\n        gas,\n        gasPrice,\n        maxFeePerBlobGas,\n        maxFeePerGas,\n        maxPriorityFeePerGas,\n        nonce,\n        value,\n        stateOverride,\n        ...rest\n      } = prepare ? await (0, _walletPrepareTransactionRequestJs.prepareTransactionRequest)(client, {\n        ...args,\n        parameters,\n        to\n      }) : args;\n      // If we get `gas` back from the prepared transaction request, which is\n      // different from the `gas` we provided, it was likely filled by other means\n      // during request preparation (e.g. `eth_fillTransaction` or `chain.transactionRequest.prepare`).\n      // (e.g. `eth_fillTransaction` or `chain.transactionRequest.prepare`).\n      if (gas && args.gas !== gas) return gas;\n      const blockNumberHex = typeof blockNumber === 'bigint' ? (0, _utilsEncodingToHexJs.numberToHex)(blockNumber) : undefined;\n      const block = blockNumberHex || blockTag;\n      const rpcStateOverride = (0, _utilsStateOverrideJs.serializeStateOverride)(stateOverride);\n      (0, _utilsTransactionAssertRequestJs.assertRequest)(args);\n      const chainFormat = client.chain?.formatters?.transactionRequest?.format;\n      const format = chainFormat || _utilsFormattersTransactionRequestJs.formatTransactionRequest;\n      const request = format({\n        // Pick out extra data that might exist on the chain's transaction request type.\n        ...(0, _utilsFormattersExtractJs.extract)(rest, {\n          format: chainFormat\n        }),\n        account,\n        accessList,\n        authorizationList,\n        blobs,\n        blobVersionedHashes,\n        data,\n        gasPrice,\n        maxFeePerBlobGas,\n        maxFeePerGas,\n        maxPriorityFeePerGas,\n        nonce,\n        to,\n        value\n      }, 'estimateGas');\n      return BigInt(await client.request({\n        method: 'eth_estimateGas',\n        params: rpcStateOverride ? [request, block ?? client.experimental_blockTag ?? 'latest', rpcStateOverride] : block ? [request, block] : [request]\n      }));\n    } catch (err) {\n      throw (0, _utilsErrorsGetEstimateGasErrorJs.getEstimateGasError)(err, {\n        ...args,\n        account,\n        chain: client.chain\n      });\n    }\n  }\n});","lineCount":134,"map":[[7,2,36,0,"exports"],[7,9,36,0],[7,10,36,0,"estimateGas"],[7,21,36,0],[7,24,36,0,"estimateGas"],[7,35,36,0],[8,2,1,0],[8,6,1,0,"_accountsUtilsParseAccountJs"],[8,34,1,0],[8,37,1,0,"require"],[8,44,1,0],[8,45,1,0,"_dependencyMap"],[8,59,1,0],[9,2,2,0],[9,6,2,0,"_errorsBaseJs"],[9,19,2,0],[9,22,2,0,"require"],[9,29,2,0],[9,30,2,0,"_dependencyMap"],[9,44,2,0],[10,2,3,0],[10,6,3,0,"_utilsAuthorizationRecoverAuthorizationAddressJs"],[10,54,3,0],[10,57,3,0,"require"],[10,64,3,0],[10,65,3,0,"_dependencyMap"],[10,79,3,0],[11,2,4,0],[11,6,4,0,"_utilsEncodingToHexJs"],[11,27,4,0],[11,30,4,0,"require"],[11,37,4,0],[11,38,4,0,"_dependencyMap"],[11,52,4,0],[12,2,5,0],[12,6,5,0,"_utilsErrorsGetEstimateGasErrorJs"],[12,39,5,0],[12,42,5,0,"require"],[12,49,5,0],[12,50,5,0,"_dependencyMap"],[12,64,5,0],[13,2,6,0],[13,6,6,0,"_utilsFormattersExtractJs"],[13,31,6,0],[13,34,6,0,"require"],[13,41,6,0],[13,42,6,0,"_dependencyMap"],[13,56,6,0],[14,2,7,0],[14,6,7,0,"_utilsFormattersTransactionRequestJs"],[14,42,7,0],[14,45,7,0,"require"],[14,52,7,0],[14,53,7,0,"_dependencyMap"],[14,67,7,0],[15,2,8,0],[15,6,8,0,"_utilsStateOverrideJs"],[15,27,8,0],[15,30,8,0,"require"],[15,37,8,0],[15,38,8,0,"_dependencyMap"],[15,52,8,0],[16,2,9,0],[16,6,9,0,"_utilsTransactionAssertRequestJs"],[16,38,9,0],[16,41,9,0,"require"],[16,48,9,0],[16,49,9,0,"_dependencyMap"],[16,63,9,0],[17,2,10,0],[17,6,10,0,"_walletPrepareTransactionRequestJs"],[17,40,10,0],[17,43,10,0,"require"],[17,50,10,0],[17,51,10,0,"_dependencyMap"],[17,65,10,0],[18,2,11,0],[19,0,12,0],[20,0,13,0],[21,0,14,0],[22,0,15,0],[23,0,16,0],[24,0,17,0],[25,0,18,0],[26,0,19,0],[27,0,20,0],[28,0,21,0],[29,0,22,0],[30,0,23,0],[31,0,24,0],[32,0,25,0],[33,0,26,0],[34,0,27,0],[35,0,28,0],[36,0,29,0],[37,0,30,0],[38,0,31,0],[39,0,32,0],[40,0,33,0],[41,0,34,0],[42,0,35,0],[43,2,36,7],[43,17,36,22,"estimateGas"],[43,28,36,33,"estimateGas"],[43,29,36,34,"client"],[43,35,36,40],[43,37,36,42,"args"],[43,41,36,46],[43,43,36,48],[44,4,37,4],[44,10,37,10],[45,6,37,12,"account"],[45,13,37,19],[45,15,37,21,"account_"],[45,23,37,29],[45,26,37,32,"client"],[45,32,37,38],[45,33,37,39,"account"],[45,40,37,46],[46,6,37,48,"prepare"],[46,13,37,55],[46,16,37,58],[47,4,37,63],[47,5,37,64],[47,8,37,67,"args"],[47,12,37,71],[48,4,38,4],[48,10,38,10,"account"],[48,17,38,17],[48,20,38,20,"account_"],[48,28,38,28],[48,31,38,31],[48,35,38,31,"parseAccount"],[48,63,38,43],[48,64,38,43,"parseAccount"],[48,76,38,43],[48,78,38,44,"account_"],[48,86,38,52],[48,87,38,53],[48,90,38,56,"undefined"],[48,99,38,65],[49,4,39,4],[49,10,39,10,"parameters"],[49,20,39,20],[49,23,39,23],[49,24,39,24],[49,30,39,30],[50,6,40,8],[50,10,40,12,"Array"],[50,15,40,17],[50,16,40,18,"isArray"],[50,23,40,25],[50,24,40,26,"prepare"],[50,31,40,33],[50,32,40,34],[50,34,41,12],[50,41,41,19,"prepare"],[50,48,41,26],[51,6,42,8],[52,6,43,8],[53,6,44,8],[53,10,44,12,"account"],[53,17,44,19],[53,19,44,21,"type"],[53,23,44,25],[53,28,44,30],[53,35,44,37],[53,37,45,12],[53,44,45,19],[53,45,45,20],[53,66,45,41],[53,67,45,42],[54,6,46,8],[54,13,46,15,"undefined"],[54,22,46,24],[55,4,47,4],[55,5,47,5],[55,7,47,7],[55,8,47,8],[56,4,48,4],[56,8,48,8],[57,6,49,8],[57,12,49,14,"to"],[57,14,49,16],[57,17,49,19],[57,23,49,25],[57,24,49,26],[57,36,49,38],[58,8,50,12],[59,8,51,12],[59,12,51,16,"args"],[59,16,51,20],[59,17,51,21,"to"],[59,19,51,23],[59,21,52,16],[59,28,52,23,"args"],[59,32,52,27],[59,33,52,28,"to"],[59,35,52,30],[60,8,53,12],[61,8,54,12],[62,8,55,12],[62,12,55,16,"args"],[62,16,55,20],[62,17,55,21,"authorizationList"],[62,34,55,38],[62,38,55,42,"args"],[62,42,55,46],[62,43,55,47,"authorizationList"],[62,60,55,64],[62,61,55,65,"length"],[62,67,55,71],[62,70,55,74],[62,71,55,75],[62,73,56,16],[62,80,56,23],[62,86,56,29],[62,90,56,29,"recoverAuthorizationAddress"],[62,138,56,56],[62,139,56,56,"recoverAuthorizationAddress"],[62,166,56,56],[62,168,56,57],[63,10,57,20,"authorization"],[63,23,57,33],[63,25,57,35,"args"],[63,29,57,39],[63,30,57,40,"authorizationList"],[63,47,57,57],[63,48,57,58],[63,49,57,59],[64,8,58,16],[64,9,58,17],[64,10,58,18],[64,11,58,19,"catch"],[64,16,58,24],[64,17,58,25],[64,23,58,31],[65,10,59,20],[65,16,59,26],[65,20,59,30,"BaseError"],[65,33,59,39],[65,34,59,39,"BaseError"],[65,43,59,39],[65,44,59,40],[65,104,59,100],[65,105,59,101],[66,8,60,16],[66,9,60,17],[66,10,60,18],[67,8,61,12],[68,8,62,12],[68,15,62,19,"undefined"],[68,24,62,28],[69,6,63,8],[69,7,63,9],[69,9,63,11],[69,10,63,12],[70,6,64,8],[70,12,64,14],[71,8,64,16,"accessList"],[71,18,64,26],[72,8,64,28,"authorizationList"],[72,25,64,45],[73,8,64,47,"blobs"],[73,13,64,52],[74,8,64,54,"blobVersionedHashes"],[74,27,64,73],[75,8,64,75,"blockNumber"],[75,19,64,86],[76,8,64,88,"blockTag"],[76,16,64,96],[77,8,64,98,"data"],[77,12,64,102],[78,8,64,104,"gas"],[78,11,64,107],[79,8,64,109,"gasPrice"],[79,16,64,117],[80,8,64,119,"maxFeePerBlobGas"],[80,24,64,135],[81,8,64,137,"maxFeePerGas"],[81,20,64,149],[82,8,64,151,"maxPriorityFeePerGas"],[82,28,64,171],[83,8,64,173,"nonce"],[83,13,64,178],[84,8,64,180,"value"],[84,13,64,185],[85,8,64,187,"stateOverride"],[85,21,64,200],[86,8,64,202],[86,11,64,205,"rest"],[87,6,64,210],[87,7,64,211],[87,10,64,214,"prepare"],[87,17,64,221],[87,20,65,15],[87,26,65,21],[87,30,65,21,"prepareTransactionRequest"],[87,64,65,46],[87,65,65,46,"prepareTransactionRequest"],[87,90,65,46],[87,92,65,47,"client"],[87,98,65,53],[87,100,65,55],[88,8,66,16],[88,11,66,19,"args"],[88,15,66,23],[89,8,67,16,"parameters"],[89,18,67,26],[90,8,68,16,"to"],[91,6,69,12],[91,7,69,13],[91,8,69,14],[91,11,70,14,"args"],[91,15,70,18],[92,6,71,8],[93,6,72,8],[94,6,73,8],[95,6,74,8],[96,6,75,8],[96,10,75,12,"gas"],[96,13,75,15],[96,17,75,19,"args"],[96,21,75,23],[96,22,75,24,"gas"],[96,25,75,27],[96,30,75,32,"gas"],[96,33,75,35],[96,35,76,12],[96,42,76,19,"gas"],[96,45,76,22],[97,6,77,8],[97,12,77,14,"blockNumberHex"],[97,26,77,28],[97,29,77,31],[97,36,77,38,"blockNumber"],[97,47,77,49],[97,52,77,54],[97,60,77,62],[97,63,77,65],[97,67,77,65,"numberToHex"],[97,88,77,76],[97,89,77,76,"numberToHex"],[97,100,77,76],[97,102,77,77,"blockNumber"],[97,113,77,88],[97,114,77,89],[97,117,77,92,"undefined"],[97,126,77,101],[98,6,78,8],[98,12,78,14,"block"],[98,17,78,19],[98,20,78,22,"blockNumberHex"],[98,34,78,36],[98,38,78,40,"blockTag"],[98,46,78,48],[99,6,79,8],[99,12,79,14,"rpcStateOverride"],[99,28,79,30],[99,31,79,33],[99,35,79,33,"serializeStateOverride"],[99,56,79,55],[99,57,79,55,"serializeStateOverride"],[99,79,79,55],[99,81,79,56,"stateOverride"],[99,94,79,69],[99,95,79,70],[100,6,80,8],[100,10,80,8,"assertRequest"],[100,42,80,21],[100,43,80,21,"assertRequest"],[100,56,80,21],[100,58,80,22,"args"],[100,62,80,26],[100,63,80,27],[101,6,81,8],[101,12,81,14,"chainFormat"],[101,23,81,25],[101,26,81,28,"client"],[101,32,81,34],[101,33,81,35,"chain"],[101,38,81,40],[101,40,81,42,"formatters"],[101,50,81,52],[101,52,81,54,"transactionRequest"],[101,70,81,72],[101,72,81,74,"format"],[101,78,81,80],[102,6,82,8],[102,12,82,14,"format"],[102,18,82,20],[102,21,82,23,"chainFormat"],[102,32,82,34],[102,36,82,38,"formatTransactionRequest"],[102,72,82,62],[102,73,82,62,"formatTransactionRequest"],[102,97,82,62],[103,6,83,8],[103,12,83,14,"request"],[103,19,83,21],[103,22,83,24,"format"],[103,28,83,30],[103,29,83,31],[104,8,84,12],[105,8,85,12],[105,11,85,15],[105,15,85,15,"extract"],[105,40,85,22],[105,41,85,22,"extract"],[105,48,85,22],[105,50,85,23,"rest"],[105,54,85,27],[105,56,85,29],[106,10,85,31,"format"],[106,16,85,37],[106,18,85,39,"chainFormat"],[107,8,85,51],[107,9,85,52],[107,10,85,53],[108,8,86,12,"account"],[108,15,86,19],[109,8,87,12,"accessList"],[109,18,87,22],[110,8,88,12,"authorizationList"],[110,25,88,29],[111,8,89,12,"blobs"],[111,13,89,17],[112,8,90,12,"blobVersionedHashes"],[112,27,90,31],[113,8,91,12,"data"],[113,12,91,16],[114,8,92,12,"gasPrice"],[114,16,92,20],[115,8,93,12,"maxFeePerBlobGas"],[115,24,93,28],[116,8,94,12,"maxFeePerGas"],[116,20,94,24],[117,8,95,12,"maxPriorityFeePerGas"],[117,28,95,32],[118,8,96,12,"nonce"],[118,13,96,17],[119,8,97,12,"to"],[119,10,97,14],[120,8,98,12,"value"],[121,6,99,8],[121,7,99,9],[121,9,99,11],[121,22,99,24],[121,23,99,25],[122,6,100,8],[122,13,100,15,"BigInt"],[122,19,100,21],[122,20,100,22],[122,26,100,28,"client"],[122,32,100,34],[122,33,100,35,"request"],[122,40,100,42],[122,41,100,43],[123,8,101,12,"method"],[123,14,101,18],[123,16,101,20],[123,33,101,37],[124,8,102,12,"params"],[124,14,102,18],[124,16,102,20,"rpcStateOverride"],[124,32,102,36],[124,35,103,18],[124,36,104,20,"request"],[124,43,104,27],[124,45,105,20,"block"],[124,50,105,25],[124,54,105,29,"client"],[124,60,105,35],[124,61,105,36,"experimental_blockTag"],[124,82,105,57],[124,86,105,61],[124,94,105,69],[124,96,106,20,"rpcStateOverride"],[124,112,106,36],[124,113,107,17],[124,116,108,18,"block"],[124,121,108,23],[124,124,109,22],[124,125,109,23,"request"],[124,132,109,30],[124,134,109,32,"block"],[124,139,109,37],[124,140,109,38],[124,143,110,22],[124,144,110,23,"request"],[124,151,110,30],[125,6,111,8],[125,7,111,9],[125,8,111,10],[125,9,111,11],[126,4,112,4],[126,5,112,5],[126,6,113,4],[126,13,113,11,"err"],[126,16,113,14],[126,18,113,16],[127,6,114,8],[127,12,114,14],[127,16,114,14,"getEstimateGasError"],[127,49,114,33],[127,50,114,33,"getEstimateGasError"],[127,69,114,33],[127,71,114,34,"err"],[127,74,114,37],[127,76,114,39],[128,8,115,12],[128,11,115,15,"args"],[128,15,115,19],[129,8,116,12,"account"],[129,15,116,19],[130,8,117,12,"chain"],[130,13,117,17],[130,15,117,19,"client"],[130,21,117,25],[130,22,117,26,"chain"],[131,6,118,8],[131,7,118,9],[131,8,118,10],[132,4,119,4],[133,2,120,0],[134,0,120,1],[134,3]],"functionMap":{"names":["<global>","estimateGas","<anonymous>","recoverAuthorizationAddress._catch$argument_0"],"mappings":"AAA;OCmC;wBCG;KDQ;0BCE;yBCS;iBDE;SDG;CDyD"},"hasCjsExports":false},"type":"js/module"}]}