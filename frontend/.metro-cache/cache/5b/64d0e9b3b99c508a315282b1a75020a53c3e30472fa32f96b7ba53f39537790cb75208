{"dependencies":[{"name":"./_assert.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":21,"index":136},"end":{"line":4,"column":44,"index":159}}],"key":"GX2SXutm7bNXCGwOH6IeQtku3RY=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":19,"index":180},"end":{"line":5,"column":40,"index":201}}],"key":"v6h+l9IeOWbEcXdtKQqd2f4now4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.hmac = exports.HMAC = void 0;\n  const _assert_js_1 = require(_dependencyMap[0], \"./_assert.js\");\n  const utils_js_1 = require(_dependencyMap[1], \"./utils.js\");\n  // HMAC (RFC 2104)\n  class HMAC extends utils_js_1.Hash {\n    constructor(hash, _key) {\n      super();\n      this.finished = false;\n      this.destroyed = false;\n      (0, _assert_js_1.hash)(hash);\n      const key = (0, utils_js_1.toBytes)(_key);\n      this.iHash = hash.create();\n      if (typeof this.iHash.update !== 'function') throw new Error('Expected instance of class which extends utils.Hash');\n      this.blockLen = this.iHash.blockLen;\n      this.outputLen = this.iHash.outputLen;\n      const blockLen = this.blockLen;\n      const pad = new Uint8Array(blockLen);\n      // blockLen can be bigger than outputLen\n      pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n      for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36;\n      this.iHash.update(pad);\n      // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n      this.oHash = hash.create();\n      // Undo internal XOR && apply outer XOR\n      for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36 ^ 0x5c;\n      this.oHash.update(pad);\n      pad.fill(0);\n    }\n    update(buf) {\n      (0, _assert_js_1.exists)(this);\n      this.iHash.update(buf);\n      return this;\n    }\n    digestInto(out) {\n      (0, _assert_js_1.exists)(this);\n      (0, _assert_js_1.bytes)(out, this.outputLen);\n      this.finished = true;\n      this.iHash.digestInto(out);\n      this.oHash.update(out);\n      this.oHash.digestInto(out);\n      this.destroy();\n    }\n    digest() {\n      const out = new Uint8Array(this.oHash.outputLen);\n      this.digestInto(out);\n      return out;\n    }\n    _cloneInto(to) {\n      // Create new instance without calling constructor since key already in state and we don't know it.\n      to || (to = Object.create(Object.getPrototypeOf(this), {}));\n      const {\n        oHash,\n        iHash,\n        finished,\n        destroyed,\n        blockLen,\n        outputLen\n      } = this;\n      to = to;\n      to.finished = finished;\n      to.destroyed = destroyed;\n      to.blockLen = blockLen;\n      to.outputLen = outputLen;\n      to.oHash = oHash._cloneInto(to.oHash);\n      to.iHash = iHash._cloneInto(to.iHash);\n      return to;\n    }\n    destroy() {\n      this.destroyed = true;\n      this.oHash.destroy();\n      this.iHash.destroy();\n    }\n  }\n  exports.HMAC = HMAC;\n  /**\n   * HMAC: RFC2104 message authentication code.\n   * @param hash - function that would be used e.g. sha256\n   * @param key - message key\n   * @param message - message data\n   */\n  const hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\n  exports.hmac = hmac;\n  exports.hmac.create = (hash, key) => new HMAC(hash, key);\n});","lineCount":90,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"hmac"],[7,14,3,12],[7,17,3,15,"exports"],[7,24,3,22],[7,25,3,23,"HMAC"],[7,29,3,27],[7,32,3,30],[7,37,3,35],[7,38,3,36],[8,2,4,0],[8,8,4,6,"_assert_js_1"],[8,20,4,18],[8,23,4,21,"require"],[8,30,4,28],[8,31,4,28,"_dependencyMap"],[8,45,4,28],[8,64,4,43],[8,65,4,44],[9,2,5,0],[9,8,5,6,"utils_js_1"],[9,18,5,16],[9,21,5,19,"require"],[9,28,5,26],[9,29,5,26,"_dependencyMap"],[9,43,5,26],[9,60,5,39],[9,61,5,40],[10,2,6,0],[11,2,7,0],[11,8,7,6,"HMAC"],[11,12,7,10],[11,21,7,19,"utils_js_1"],[11,31,7,29],[11,32,7,30,"Hash"],[11,36,7,34],[11,37,7,35],[12,4,8,4,"constructor"],[12,15,8,15,"constructor"],[12,16,8,16,"hash"],[12,20,8,20],[12,22,8,22,"_key"],[12,26,8,26],[12,28,8,28],[13,6,9,8],[13,11,9,13],[13,12,9,14],[13,13,9,15],[14,6,10,8],[14,10,10,12],[14,11,10,13,"finished"],[14,19,10,21],[14,22,10,24],[14,27,10,29],[15,6,11,8],[15,10,11,12],[15,11,11,13,"destroyed"],[15,20,11,22],[15,23,11,25],[15,28,11,30],[16,6,12,8],[16,7,12,9],[16,8,12,10],[16,10,12,12,"_assert_js_1"],[16,22,12,24],[16,23,12,25,"hash"],[16,27,12,29],[16,29,12,31,"hash"],[16,33,12,35],[16,34,12,36],[17,6,13,8],[17,12,13,14,"key"],[17,15,13,17],[17,18,13,20],[17,19,13,21],[17,20,13,22],[17,22,13,24,"utils_js_1"],[17,32,13,34],[17,33,13,35,"toBytes"],[17,40,13,42],[17,42,13,44,"_key"],[17,46,13,48],[17,47,13,49],[18,6,14,8],[18,10,14,12],[18,11,14,13,"iHash"],[18,16,14,18],[18,19,14,21,"hash"],[18,23,14,25],[18,24,14,26,"create"],[18,30,14,32],[18,31,14,33],[18,32,14,34],[19,6,15,8],[19,10,15,12],[19,17,15,19],[19,21,15,23],[19,22,15,24,"iHash"],[19,27,15,29],[19,28,15,30,"update"],[19,34,15,36],[19,39,15,41],[19,49,15,51],[19,51,16,12],[19,57,16,18],[19,61,16,22,"Error"],[19,66,16,27],[19,67,16,28],[19,120,16,81],[19,121,16,82],[20,6,17,8],[20,10,17,12],[20,11,17,13,"blockLen"],[20,19,17,21],[20,22,17,24],[20,26,17,28],[20,27,17,29,"iHash"],[20,32,17,34],[20,33,17,35,"blockLen"],[20,41,17,43],[21,6,18,8],[21,10,18,12],[21,11,18,13,"outputLen"],[21,20,18,22],[21,23,18,25],[21,27,18,29],[21,28,18,30,"iHash"],[21,33,18,35],[21,34,18,36,"outputLen"],[21,43,18,45],[22,6,19,8],[22,12,19,14,"blockLen"],[22,20,19,22],[22,23,19,25],[22,27,19,29],[22,28,19,30,"blockLen"],[22,36,19,38],[23,6,20,8],[23,12,20,14,"pad"],[23,15,20,17],[23,18,20,20],[23,22,20,24,"Uint8Array"],[23,32,20,34],[23,33,20,35,"blockLen"],[23,41,20,43],[23,42,20,44],[24,6,21,8],[25,6,22,8,"pad"],[25,9,22,11],[25,10,22,12,"set"],[25,13,22,15],[25,14,22,16,"key"],[25,17,22,19],[25,18,22,20,"length"],[25,24,22,26],[25,27,22,29,"blockLen"],[25,35,22,37],[25,38,22,40,"hash"],[25,42,22,44],[25,43,22,45,"create"],[25,49,22,51],[25,50,22,52],[25,51,22,53],[25,52,22,54,"update"],[25,58,22,60],[25,59,22,61,"key"],[25,62,22,64],[25,63,22,65],[25,64,22,66,"digest"],[25,70,22,72],[25,71,22,73],[25,72,22,74],[25,75,22,77,"key"],[25,78,22,80],[25,79,22,81],[26,6,23,8],[26,11,23,13],[26,15,23,17,"i"],[26,16,23,18],[26,19,23,21],[26,20,23,22],[26,22,23,24,"i"],[26,23,23,25],[26,26,23,28,"pad"],[26,29,23,31],[26,30,23,32,"length"],[26,36,23,38],[26,38,23,40,"i"],[26,39,23,41],[26,41,23,43],[26,43,24,12,"pad"],[26,46,24,15],[26,47,24,16,"i"],[26,48,24,17],[26,49,24,18],[26,53,24,22],[26,57,24,26],[27,6,25,8],[27,10,25,12],[27,11,25,13,"iHash"],[27,16,25,18],[27,17,25,19,"update"],[27,23,25,25],[27,24,25,26,"pad"],[27,27,25,29],[27,28,25,30],[28,6,26,8],[29,6,27,8],[29,10,27,12],[29,11,27,13,"oHash"],[29,16,27,18],[29,19,27,21,"hash"],[29,23,27,25],[29,24,27,26,"create"],[29,30,27,32],[29,31,27,33],[29,32,27,34],[30,6,28,8],[31,6,29,8],[31,11,29,13],[31,15,29,17,"i"],[31,16,29,18],[31,19,29,21],[31,20,29,22],[31,22,29,24,"i"],[31,23,29,25],[31,26,29,28,"pad"],[31,29,29,31],[31,30,29,32,"length"],[31,36,29,38],[31,38,29,40,"i"],[31,39,29,41],[31,41,29,43],[31,43,30,12,"pad"],[31,46,30,15],[31,47,30,16,"i"],[31,48,30,17],[31,49,30,18],[31,53,30,22],[31,57,30,26],[31,60,30,29],[31,64,30,33],[32,6,31,8],[32,10,31,12],[32,11,31,13,"oHash"],[32,16,31,18],[32,17,31,19,"update"],[32,23,31,25],[32,24,31,26,"pad"],[32,27,31,29],[32,28,31,30],[33,6,32,8,"pad"],[33,9,32,11],[33,10,32,12,"fill"],[33,14,32,16],[33,15,32,17],[33,16,32,18],[33,17,32,19],[34,4,33,4],[35,4,34,4,"update"],[35,10,34,10,"update"],[35,11,34,11,"buf"],[35,14,34,14],[35,16,34,16],[36,6,35,8],[36,7,35,9],[36,8,35,10],[36,10,35,12,"_assert_js_1"],[36,22,35,24],[36,23,35,25,"exists"],[36,29,35,31],[36,31,35,33],[36,35,35,37],[36,36,35,38],[37,6,36,8],[37,10,36,12],[37,11,36,13,"iHash"],[37,16,36,18],[37,17,36,19,"update"],[37,23,36,25],[37,24,36,26,"buf"],[37,27,36,29],[37,28,36,30],[38,6,37,8],[38,13,37,15],[38,17,37,19],[39,4,38,4],[40,4,39,4,"digestInto"],[40,14,39,14,"digestInto"],[40,15,39,15,"out"],[40,18,39,18],[40,20,39,20],[41,6,40,8],[41,7,40,9],[41,8,40,10],[41,10,40,12,"_assert_js_1"],[41,22,40,24],[41,23,40,25,"exists"],[41,29,40,31],[41,31,40,33],[41,35,40,37],[41,36,40,38],[42,6,41,8],[42,7,41,9],[42,8,41,10],[42,10,41,12,"_assert_js_1"],[42,22,41,24],[42,23,41,25,"bytes"],[42,28,41,30],[42,30,41,32,"out"],[42,33,41,35],[42,35,41,37],[42,39,41,41],[42,40,41,42,"outputLen"],[42,49,41,51],[42,50,41,52],[43,6,42,8],[43,10,42,12],[43,11,42,13,"finished"],[43,19,42,21],[43,22,42,24],[43,26,42,28],[44,6,43,8],[44,10,43,12],[44,11,43,13,"iHash"],[44,16,43,18],[44,17,43,19,"digestInto"],[44,27,43,29],[44,28,43,30,"out"],[44,31,43,33],[44,32,43,34],[45,6,44,8],[45,10,44,12],[45,11,44,13,"oHash"],[45,16,44,18],[45,17,44,19,"update"],[45,23,44,25],[45,24,44,26,"out"],[45,27,44,29],[45,28,44,30],[46,6,45,8],[46,10,45,12],[46,11,45,13,"oHash"],[46,16,45,18],[46,17,45,19,"digestInto"],[46,27,45,29],[46,28,45,30,"out"],[46,31,45,33],[46,32,45,34],[47,6,46,8],[47,10,46,12],[47,11,46,13,"destroy"],[47,18,46,20],[47,19,46,21],[47,20,46,22],[48,4,47,4],[49,4,48,4,"digest"],[49,10,48,10,"digest"],[49,11,48,10],[49,13,48,13],[50,6,49,8],[50,12,49,14,"out"],[50,15,49,17],[50,18,49,20],[50,22,49,24,"Uint8Array"],[50,32,49,34],[50,33,49,35],[50,37,49,39],[50,38,49,40,"oHash"],[50,43,49,45],[50,44,49,46,"outputLen"],[50,53,49,55],[50,54,49,56],[51,6,50,8],[51,10,50,12],[51,11,50,13,"digestInto"],[51,21,50,23],[51,22,50,24,"out"],[51,25,50,27],[51,26,50,28],[52,6,51,8],[52,13,51,15,"out"],[52,16,51,18],[53,4,52,4],[54,4,53,4,"_cloneInto"],[54,14,53,14,"_cloneInto"],[54,15,53,15,"to"],[54,17,53,17],[54,19,53,19],[55,6,54,8],[56,6,55,8,"to"],[56,8,55,10],[56,13,55,15,"to"],[56,15,55,17],[56,18,55,20,"Object"],[56,24,55,26],[56,25,55,27,"create"],[56,31,55,33],[56,32,55,34,"Object"],[56,38,55,40],[56,39,55,41,"getPrototypeOf"],[56,53,55,55],[56,54,55,56],[56,58,55,60],[56,59,55,61],[56,61,55,63],[56,62,55,64],[56,63,55,65],[56,64,55,66],[56,65,55,67],[57,6,56,8],[57,12,56,14],[58,8,56,16,"oHash"],[58,13,56,21],[59,8,56,23,"iHash"],[59,13,56,28],[60,8,56,30,"finished"],[60,16,56,38],[61,8,56,40,"destroyed"],[61,17,56,49],[62,8,56,51,"blockLen"],[62,16,56,59],[63,8,56,61,"outputLen"],[64,6,56,71],[64,7,56,72],[64,10,56,75],[64,14,56,79],[65,6,57,8,"to"],[65,8,57,10],[65,11,57,13,"to"],[65,13,57,15],[66,6,58,8,"to"],[66,8,58,10],[66,9,58,11,"finished"],[66,17,58,19],[66,20,58,22,"finished"],[66,28,58,30],[67,6,59,8,"to"],[67,8,59,10],[67,9,59,11,"destroyed"],[67,18,59,20],[67,21,59,23,"destroyed"],[67,30,59,32],[68,6,60,8,"to"],[68,8,60,10],[68,9,60,11,"blockLen"],[68,17,60,19],[68,20,60,22,"blockLen"],[68,28,60,30],[69,6,61,8,"to"],[69,8,61,10],[69,9,61,11,"outputLen"],[69,18,61,20],[69,21,61,23,"outputLen"],[69,30,61,32],[70,6,62,8,"to"],[70,8,62,10],[70,9,62,11,"oHash"],[70,14,62,16],[70,17,62,19,"oHash"],[70,22,62,24],[70,23,62,25,"_cloneInto"],[70,33,62,35],[70,34,62,36,"to"],[70,36,62,38],[70,37,62,39,"oHash"],[70,42,62,44],[70,43,62,45],[71,6,63,8,"to"],[71,8,63,10],[71,9,63,11,"iHash"],[71,14,63,16],[71,17,63,19,"iHash"],[71,22,63,24],[71,23,63,25,"_cloneInto"],[71,33,63,35],[71,34,63,36,"to"],[71,36,63,38],[71,37,63,39,"iHash"],[71,42,63,44],[71,43,63,45],[72,6,64,8],[72,13,64,15,"to"],[72,15,64,17],[73,4,65,4],[74,4,66,4,"destroy"],[74,11,66,11,"destroy"],[74,12,66,11],[74,14,66,14],[75,6,67,8],[75,10,67,12],[75,11,67,13,"destroyed"],[75,20,67,22],[75,23,67,25],[75,27,67,29],[76,6,68,8],[76,10,68,12],[76,11,68,13,"oHash"],[76,16,68,18],[76,17,68,19,"destroy"],[76,24,68,26],[76,25,68,27],[76,26,68,28],[77,6,69,8],[77,10,69,12],[77,11,69,13,"iHash"],[77,16,69,18],[77,17,69,19,"destroy"],[77,24,69,26],[77,25,69,27],[77,26,69,28],[78,4,70,4],[79,2,71,0],[80,2,72,0,"exports"],[80,9,72,7],[80,10,72,8,"HMAC"],[80,14,72,12],[80,17,72,15,"HMAC"],[80,21,72,19],[81,2,73,0],[82,0,74,0],[83,0,75,0],[84,0,76,0],[85,0,77,0],[86,0,78,0],[87,2,79,0],[87,8,79,6,"hmac"],[87,12,79,10],[87,15,79,13,"hmac"],[87,16,79,14,"hash"],[87,20,79,18],[87,22,79,20,"key"],[87,25,79,23],[87,27,79,25,"message"],[87,34,79,32],[87,39,79,37],[87,43,79,41,"HMAC"],[87,47,79,45],[87,48,79,46,"hash"],[87,52,79,50],[87,54,79,52,"key"],[87,57,79,55],[87,58,79,56],[87,59,79,57,"update"],[87,65,79,63],[87,66,79,64,"message"],[87,73,79,71],[87,74,79,72],[87,75,79,73,"digest"],[87,81,79,79],[87,82,79,80],[87,83,79,81],[88,2,80,0,"exports"],[88,9,80,7],[88,10,80,8,"hmac"],[88,14,80,12],[88,17,80,15,"hmac"],[88,21,80,19],[89,2,81,0,"exports"],[89,9,81,7],[89,10,81,8,"hmac"],[89,14,81,12],[89,15,81,13,"create"],[89,21,81,19],[89,24,81,22],[89,25,81,23,"hash"],[89,29,81,27],[89,31,81,29,"key"],[89,34,81,32],[89,39,81,37],[89,43,81,41,"HMAC"],[89,47,81,45],[89,48,81,46,"hash"],[89,52,81,50],[89,54,81,52,"key"],[89,57,81,55],[89,58,81,56],[90,0,81,57],[90,3]],"functionMap":{"names":["<global>","HMAC","HMAC#constructor","HMAC#update","HMAC#digestInto","HMAC#digest","HMAC#_cloneInto","HMAC#destroy","hmac","exports.hmac.create"],"mappings":"AAA;ACM;ICC;KDyB;IEC;KFI;IGC;KHQ;IIC;KJI;IKC;KLY;IMC;KNI;CDC;aQQ,oER;sBSE,kCT"},"hasCjsExports":true},"type":"js/module"}]}