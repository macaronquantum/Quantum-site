{"dependencies":[{"name":"eventemitter3","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":41,"index":41}}],"key":"KCIqL5fIlk4FNNic7+TqcYLMlYo=","exportNames":["*"],"imports":1}},{"name":"./errors.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":42},"end":{"line":2,"column":54,"index":96}}],"key":"sBFAilsnlkNTfGhyvhhjLjsyBXM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"EventEmitter\", {\n    enumerable: true,\n    get: function () {\n      return EventEmitter.default;\n    }\n  });\n  Object.defineProperty(exports, \"WalletReadyState\", {\n    enumerable: true,\n    get: function () {\n      return WalletReadyState;\n    }\n  });\n  Object.defineProperty(exports, \"BaseWalletAdapter\", {\n    enumerable: true,\n    get: function () {\n      return BaseWalletAdapter;\n    }\n  });\n  exports.scopePollingDetectionStrategy = scopePollingDetectionStrategy;\n  exports.isIosAndRedirectable = isIosAndRedirectable;\n  var _eventemitter = require(_dependencyMap[0], \"eventemitter3\");\n  var EventEmitter = _interopDefault(_eventemitter);\n  var _errorsJs = require(_dependencyMap[1], \"./errors.js\");\n  /**\n   * A wallet's readiness describes a series of states that the wallet can be in,\n   * depending on what kind of wallet it is. An installable wallet (eg. a browser\n   * extension like Phantom) might be `Installed` if we've found the Phantom API\n   * in the global scope, or `NotDetected` otherwise. A loadable, zero-install\n   * runtime (eg. Torus Wallet) might simply signal that it's `Loadable`. Use this\n   * metadata to personalize the wallet list for each user (eg. to show their\n   * installed wallets first).\n   */\n  var WalletReadyState;\n  (function (WalletReadyState) {\n    /**\n     * User-installable wallets can typically be detected by scanning for an API\n     * that they've injected into the global context. If such an API is present,\n     * we consider the wallet to have been installed.\n     */\n    WalletReadyState[\"Installed\"] = \"Installed\";\n    WalletReadyState[\"NotDetected\"] = \"NotDetected\";\n    /**\n     * Loadable wallets are always available to you. Since you can load them at\n     * any time, it's meaningless to say that they have been detected.\n     */\n    WalletReadyState[\"Loadable\"] = \"Loadable\";\n    /**\n     * If a wallet is not supported on a given platform (eg. server-rendering, or\n     * mobile) then it will stay in the `Unsupported` state.\n     */\n    WalletReadyState[\"Unsupported\"] = \"Unsupported\";\n  })(WalletReadyState || (WalletReadyState = {}));\n  class BaseWalletAdapter extends EventEmitter.default {\n    get connected() {\n      return !!this.publicKey;\n    }\n    async autoConnect() {\n      await this.connect();\n    }\n    async prepareTransaction(transaction, connection, options = {}) {\n      const publicKey = this.publicKey;\n      if (!publicKey) throw new _errorsJs.WalletNotConnectedError();\n      transaction.feePayer = transaction.feePayer || publicKey;\n      transaction.recentBlockhash = transaction.recentBlockhash || (await connection.getLatestBlockhash({\n        commitment: options.preflightCommitment,\n        minContextSlot: options.minContextSlot\n      })).blockhash;\n      return transaction;\n    }\n  }\n  function scopePollingDetectionStrategy(detect) {\n    // Early return when server-side rendering\n    if (typeof window === 'undefined' || typeof document === 'undefined') return;\n    const disposers = [];\n    function detectAndDispose() {\n      const detected = detect();\n      if (detected) {\n        for (const dispose of disposers) {\n          dispose();\n        }\n      }\n    }\n    // Strategy #1: Try detecting every second.\n    const interval =\n    // TODO: #334 Replace with idle callback strategy.\n    setInterval(detectAndDispose, 1000);\n    disposers.push(() => clearInterval(interval));\n    // Strategy #2: Detect as soon as the DOM becomes 'ready'/'interactive'.\n    if (\n    // Implies that `DOMContentLoaded` has not yet fired.\n    document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', detectAndDispose, {\n        once: true\n      });\n      disposers.push(() => document.removeEventListener('DOMContentLoaded', detectAndDispose));\n    }\n    // Strategy #3: Detect after the `window` has fully loaded.\n    if (\n    // If the `complete` state has been reached, we're too late.\n    document.readyState !== 'complete') {\n      window.addEventListener('load', detectAndDispose, {\n        once: true\n      });\n      disposers.push(() => window.removeEventListener('load', detectAndDispose));\n    }\n    // Strategy #4: Detect synchronously, now.\n    detectAndDispose();\n  }\n  /**\n   * Users on iOS can be redirected into a wallet's in-app browser automatically,\n   * if that wallet has a universal link configured to do so\n   * But should not be redirected from within a webview, eg. if they're already\n   * inside a wallet's browser\n   * This function can be used to identify users who are on iOS and can be redirected\n   *\n   * @returns true if the user can be redirected\n   */\n  function isIosAndRedirectable() {\n    // SSR: return false\n    if (!navigator) return false;\n    const userAgent = navigator.userAgent.toLowerCase();\n    // if on iOS the user agent will contain either iPhone or iPad\n    // caveat: if requesting desktop site then this won't work\n    const isIos = userAgent.includes('iphone') || userAgent.includes('ipad');\n    // if in a webview then it will not include Safari\n    // note that other iOS browsers also include Safari\n    // so we will redirect only if Safari is also included\n    const isSafari = userAgent.includes('safari');\n    return isIos && isSafari;\n  }\n});","lineCount":142,"map":[[12,2,3,0,"Object"],[12,8,3,0],[12,9,3,0,"defineProperty"],[12,23,3,0],[12,24,3,0,"exports"],[12,31,3,0],[13,4,3,0,"enumerable"],[13,14,3,0],[14,4,3,0,"get"],[14,7,3,0],[14,18,3,0,"get"],[14,19,3,0],[15,6,3,0],[15,13,3,9,"EventEmitter"],[15,25,3,21],[15,26,3,21,"default"],[15,33,3,21],[16,4,3,21],[17,2,3,21],[18,2,13,0,"Object"],[18,8,13,0],[18,9,13,0,"defineProperty"],[18,23,13,0],[18,24,13,0,"exports"],[18,31,13,0],[19,4,13,0,"enumerable"],[19,14,13,0],[20,4,13,0,"get"],[20,7,13,0],[20,18,13,0,"get"],[20,19,13,0],[21,6,13,0],[21,13,13,0,"WalletReadyState"],[21,29,13,0],[22,4,13,0],[23,2,13,0],[24,2,33,0,"Object"],[24,8,33,0],[24,9,33,0,"defineProperty"],[24,23,33,0],[24,24,33,0,"exports"],[24,31,33,0],[25,4,33,0,"enumerable"],[25,14,33,0],[26,4,33,0,"get"],[26,7,33,0],[26,18,33,0,"get"],[26,19,33,0],[27,6,33,0],[27,13,33,0,"BaseWalletAdapter"],[27,30,33,0],[28,4,33,0],[29,2,33,0],[30,2,54,0,"exports"],[30,9,54,0],[30,10,54,0,"scopePollingDetectionStrategy"],[30,39,54,0],[30,42,54,0,"scopePollingDetectionStrategy"],[30,71,54,0],[31,2,98,0,"exports"],[31,9,98,0],[31,10,98,0,"isIosAndRedirectable"],[31,30,98,0],[31,33,98,0,"isIosAndRedirectable"],[31,53,98,0],[32,2,1,0],[32,6,1,0,"_eventemitter"],[32,19,1,0],[32,22,1,0,"require"],[32,29,1,0],[32,30,1,0,"_dependencyMap"],[32,44,1,0],[33,2,1,0],[33,6,1,0,"EventEmitter"],[33,18,1,0],[33,21,1,0,"_interopDefault"],[33,36,1,0],[33,37,1,0,"_eventemitter"],[33,50,1,0],[34,2,2,0],[34,6,2,0,"_errorsJs"],[34,15,2,0],[34,18,2,0,"require"],[34,25,2,0],[34,26,2,0,"_dependencyMap"],[34,40,2,0],[35,2,4,0],[36,0,5,0],[37,0,6,0],[38,0,7,0],[39,0,8,0],[40,0,9,0],[41,0,10,0],[42,0,11,0],[43,0,12,0],[44,2,13,7],[44,6,13,11,"WalletReadyState"],[44,22,13,27],[45,2,14,0],[45,3,14,1],[45,13,14,11,"WalletReadyState"],[45,29,14,27],[45,31,14,29],[46,4,15,4],[47,0,16,0],[48,0,17,0],[49,0,18,0],[50,0,19,0],[51,4,20,4,"WalletReadyState"],[51,20,20,20],[51,21,20,21],[51,32,20,32],[51,33,20,33],[51,36,20,36],[51,47,20,47],[52,4,21,4,"WalletReadyState"],[52,20,21,20],[52,21,21,21],[52,34,21,34],[52,35,21,35],[52,38,21,38],[52,51,21,51],[53,4,22,4],[54,0,23,0],[55,0,24,0],[56,0,25,0],[57,4,26,4,"WalletReadyState"],[57,20,26,20],[57,21,26,21],[57,31,26,31],[57,32,26,32],[57,35,26,35],[57,45,26,45],[58,4,27,4],[59,0,28,0],[60,0,29,0],[61,0,30,0],[62,4,31,4,"WalletReadyState"],[62,20,31,20],[62,21,31,21],[62,34,31,34],[62,35,31,35],[62,38,31,38],[62,51,31,51],[63,2,32,0],[63,3,32,1],[63,5,32,3,"WalletReadyState"],[63,21,32,19],[63,26,32,24,"WalletReadyState"],[63,42,32,40],[63,45,32,43],[63,46,32,44],[63,47,32,45],[63,48,32,46],[63,49,32,47],[64,2,33,7],[64,8,33,13,"BaseWalletAdapter"],[64,25,33,30],[64,34,33,39,"EventEmitter"],[64,46,33,51],[64,47,33,51,"default"],[64,54,33,51],[64,55,33,52],[65,4,34,4],[65,8,34,8,"connected"],[65,17,34,17,"connected"],[65,18,34,17],[65,20,34,20],[66,6,35,8],[66,13,35,15],[66,14,35,16],[66,15,35,17],[66,19,35,21],[66,20,35,22,"publicKey"],[66,29,35,31],[67,4,36,4],[68,4,37,4],[68,10,37,10,"autoConnect"],[68,21,37,21,"autoConnect"],[68,22,37,21],[68,24,37,24],[69,6,38,8],[69,12,38,14],[69,16,38,18],[69,17,38,19,"connect"],[69,24,38,26],[69,25,38,27],[69,26,38,28],[70,4,39,4],[71,4,40,4],[71,10,40,10,"prepareTransaction"],[71,28,40,28,"prepareTransaction"],[71,29,40,29,"transaction"],[71,40,40,40],[71,42,40,42,"connection"],[71,52,40,52],[71,54,40,54,"options"],[71,61,40,61],[71,64,40,64],[71,65,40,65],[71,66,40,66],[71,68,40,68],[72,6,41,8],[72,12,41,14,"publicKey"],[72,21,41,23],[72,24,41,26],[72,28,41,30],[72,29,41,31,"publicKey"],[72,38,41,40],[73,6,42,8],[73,10,42,12],[73,11,42,13,"publicKey"],[73,20,42,22],[73,22,43,12],[73,28,43,18],[73,32,43,22,"WalletNotConnectedError"],[73,41,43,45],[73,42,43,45,"WalletNotConnectedError"],[73,65,43,45],[73,66,43,46],[73,67,43,47],[74,6,44,8,"transaction"],[74,17,44,19],[74,18,44,20,"feePayer"],[74,26,44,28],[74,29,44,31,"transaction"],[74,40,44,42],[74,41,44,43,"feePayer"],[74,49,44,51],[74,53,44,55,"publicKey"],[74,62,44,64],[75,6,45,8,"transaction"],[75,17,45,19],[75,18,45,20,"recentBlockhash"],[75,33,45,35],[75,36,46,12,"transaction"],[75,47,46,23],[75,48,46,24,"recentBlockhash"],[75,63,46,39],[75,67,47,16],[75,68,47,17],[75,74,47,23,"connection"],[75,84,47,33],[75,85,47,34,"getLatestBlockhash"],[75,103,47,52],[75,104,47,53],[76,8,48,20,"commitment"],[76,18,48,30],[76,20,48,32,"options"],[76,27,48,39],[76,28,48,40,"preflightCommitment"],[76,47,48,59],[77,8,49,20,"minContextSlot"],[77,22,49,34],[77,24,49,36,"options"],[77,31,49,43],[77,32,49,44,"minContextSlot"],[78,6,50,16],[78,7,50,17],[78,8,50,18],[78,10,50,20,"blockhash"],[78,19,50,29],[79,6,51,8],[79,13,51,15,"transaction"],[79,24,51,26],[80,4,52,4],[81,2,53,0],[82,2,54,7],[82,11,54,16,"scopePollingDetectionStrategy"],[82,40,54,45,"scopePollingDetectionStrategy"],[82,41,54,46,"detect"],[82,47,54,52],[82,49,54,54],[83,4,55,4],[84,4,56,4],[84,8,56,8],[84,15,56,15,"window"],[84,21,56,21],[84,26,56,26],[84,37,56,37],[84,41,56,41],[84,48,56,48,"document"],[84,56,56,56],[84,61,56,61],[84,72,56,72],[84,74,57,8],[85,4,58,4],[85,10,58,10,"disposers"],[85,19,58,19],[85,22,58,22],[85,24,58,24],[86,4,59,4],[86,13,59,13,"detectAndDispose"],[86,29,59,29,"detectAndDispose"],[86,30,59,29],[86,32,59,32],[87,6,60,8],[87,12,60,14,"detected"],[87,20,60,22],[87,23,60,25,"detect"],[87,29,60,31],[87,30,60,32],[87,31,60,33],[88,6,61,8],[88,10,61,12,"detected"],[88,18,61,20],[88,20,61,22],[89,8,62,12],[89,13,62,17],[89,19,62,23,"dispose"],[89,26,62,30],[89,30,62,34,"disposers"],[89,39,62,43],[89,41,62,45],[90,10,63,16,"dispose"],[90,17,63,23],[90,18,63,24],[90,19,63,25],[91,8,64,12],[92,6,65,8],[93,4,66,4],[94,4,67,4],[95,4,68,4],[95,10,68,10,"interval"],[95,18,68,18],[96,4,69,4],[97,4,70,4,"setInterval"],[97,15,70,15],[97,16,70,16,"detectAndDispose"],[97,32,70,32],[97,34,70,34],[97,38,70,38],[97,39,70,39],[98,4,71,4,"disposers"],[98,13,71,13],[98,14,71,14,"push"],[98,18,71,18],[98,19,71,19],[98,25,71,25,"clearInterval"],[98,38,71,38],[98,39,71,39,"interval"],[98,47,71,47],[98,48,71,48],[98,49,71,49],[99,4,72,4],[100,4,73,4],[101,4,74,4],[102,4,75,4,"document"],[102,12,75,12],[102,13,75,13,"readyState"],[102,23,75,23],[102,28,75,28],[102,37,75,37],[102,39,75,39],[103,6,76,8,"document"],[103,14,76,16],[103,15,76,17,"addEventListener"],[103,31,76,33],[103,32,76,34],[103,50,76,52],[103,52,76,54,"detectAndDispose"],[103,68,76,70],[103,70,76,72],[104,8,76,74,"once"],[104,12,76,78],[104,14,76,80],[105,6,76,85],[105,7,76,86],[105,8,76,87],[106,6,77,8,"disposers"],[106,15,77,17],[106,16,77,18,"push"],[106,20,77,22],[106,21,77,23],[106,27,77,29,"document"],[106,35,77,37],[106,36,77,38,"removeEventListener"],[106,55,77,57],[106,56,77,58],[106,74,77,76],[106,76,77,78,"detectAndDispose"],[106,92,77,94],[106,93,77,95],[106,94,77,96],[107,4,78,4],[108,4,79,4],[109,4,80,4],[110,4,81,4],[111,4,82,4,"document"],[111,12,82,12],[111,13,82,13,"readyState"],[111,23,82,23],[111,28,82,28],[111,38,82,38],[111,40,82,40],[112,6,83,8,"window"],[112,12,83,14],[112,13,83,15,"addEventListener"],[112,29,83,31],[112,30,83,32],[112,36,83,38],[112,38,83,40,"detectAndDispose"],[112,54,83,56],[112,56,83,58],[113,8,83,60,"once"],[113,12,83,64],[113,14,83,66],[114,6,83,71],[114,7,83,72],[114,8,83,73],[115,6,84,8,"disposers"],[115,15,84,17],[115,16,84,18,"push"],[115,20,84,22],[115,21,84,23],[115,27,84,29,"window"],[115,33,84,35],[115,34,84,36,"removeEventListener"],[115,53,84,55],[115,54,84,56],[115,60,84,62],[115,62,84,64,"detectAndDispose"],[115,78,84,80],[115,79,84,81],[115,80,84,82],[116,4,85,4],[117,4,86,4],[118,4,87,4,"detectAndDispose"],[118,20,87,20],[118,21,87,21],[118,22,87,22],[119,2,88,0],[120,2,89,0],[121,0,90,0],[122,0,91,0],[123,0,92,0],[124,0,93,0],[125,0,94,0],[126,0,95,0],[127,0,96,0],[128,0,97,0],[129,2,98,7],[129,11,98,16,"isIosAndRedirectable"],[129,31,98,36,"isIosAndRedirectable"],[129,32,98,36],[129,34,98,39],[130,4,99,4],[131,4,100,4],[131,8,100,8],[131,9,100,9,"navigator"],[131,18,100,18],[131,20,101,8],[131,27,101,15],[131,32,101,20],[132,4,102,4],[132,10,102,10,"userAgent"],[132,19,102,19],[132,22,102,22,"navigator"],[132,31,102,31],[132,32,102,32,"userAgent"],[132,41,102,41],[132,42,102,42,"toLowerCase"],[132,53,102,53],[132,54,102,54],[132,55,102,55],[133,4,103,4],[134,4,104,4],[135,4,105,4],[135,10,105,10,"isIos"],[135,15,105,15],[135,18,105,18,"userAgent"],[135,27,105,27],[135,28,105,28,"includes"],[135,36,105,36],[135,37,105,37],[135,45,105,45],[135,46,105,46],[135,50,105,50,"userAgent"],[135,59,105,59],[135,60,105,60,"includes"],[135,68,105,68],[135,69,105,69],[135,75,105,75],[135,76,105,76],[136,4,106,4],[137,4,107,4],[138,4,108,4],[139,4,109,4],[139,10,109,10,"isSafari"],[139,18,109,18],[139,21,109,21,"userAgent"],[139,30,109,30],[139,31,109,31,"includes"],[139,39,109,39],[139,40,109,40],[139,48,109,48],[139,49,109,49],[140,4,110,4],[140,11,110,11,"isIos"],[140,16,110,16],[140,20,110,20,"isSafari"],[140,28,110,28],[141,2,111,0],[142,0,111,1],[142,3]],"functionMap":{"names":["<global>","<anonymous>","BaseWalletAdapter","BaseWalletAdapter#get__connected","BaseWalletAdapter#autoConnect","BaseWalletAdapter#prepareTransaction","scopePollingDetectionStrategy","detectAndDispose","disposers.push$argument_0","isIosAndRedirectable"],"mappings":"AAA;CCa;CDkB;OEC;ICC;KDE;IEC;KFE;IGC;KHY;CFC;OMC;ICK;KDO;mBEK,6BF;uBEM,wEF;uBEO,0DF;CNI;OSU;CTa"},"hasCjsExports":false},"type":"js/module"}]}