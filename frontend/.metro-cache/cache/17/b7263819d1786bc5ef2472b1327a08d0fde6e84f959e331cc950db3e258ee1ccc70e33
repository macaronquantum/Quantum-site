{"dependencies":[{"name":"protobufjs/light","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":16,"index":145},"end":{"line":7,"column":43,"index":172}}],"key":"MMrjC3jvbbGiYYLD1qIHCCw+VUI=","exportNames":["*"],"imports":1}},{"name":"./utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":16,"index":190},"end":{"line":8,"column":34,"index":208}}],"key":"Arg6QRuIuy5D/jfcnxX1qJiHjX8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.encodeMessage = exports.encode = void 0;\n  const light_1 = require(_dependencyMap[0], \"protobufjs/light\");\n  const utils_1 = require(_dependencyMap[1], \"./utils\");\n  const transform = (fieldType, value) => {\n    if (fieldType === 'bytes') {\n      if (typeof value === 'string' && !value) return value;\n      return Buffer.from(value, 'hex');\n    }\n    if (typeof value === 'number' && !Number.isSafeInteger(value)) {\n      throw new RangeError('field value is not within safe integer range');\n    }\n    if (fieldType === 'string' && typeof value === 'string') {\n      value = value.replace(/[’‘]/g, \"'\");\n    }\n    return value;\n  };\n  function patch(Message, payload) {\n    const patched = {};\n    if (!Message.fields) {\n      return patched;\n    }\n    Object.keys(Message.fields).forEach(key => {\n      const field = Message.fields[key];\n      const value = payload[key];\n      if (typeof value === 'undefined') {\n        return;\n      }\n      if ((0, utils_1.isPrimitiveField)(field.type)) {\n        if (field.repeated) {\n          patched[key] = value.map(v => transform(field.type, v));\n        } else {\n          patched[key] = transform(field.type, value);\n        }\n        return;\n      }\n      if (field.repeated) {\n        const fieldType = Message.lookupTypeOrEnum(field.type);\n        if (fieldType instanceof light_1.Enum) {\n          patched[key] = value;\n        } else {\n          patched[key] = value.map(v => patch(fieldType, v));\n        }\n      } else if (typeof value === 'object' && value !== null) {\n        const RefMessage = Message.lookupType(field.type);\n        patched[key] = patch(RefMessage, value);\n      } else if (typeof value === 'number') {\n        const RefMessage = Message.lookupEnum(field.type);\n        patched[key] = RefMessage.values[value];\n      } else {\n        patched[key] = value;\n      }\n    });\n    return patched;\n  }\n  const encode = (Message, data) => {\n    const payload = patch(Message, data);\n    const message = Message.fromObject(payload);\n    const bytes = Message.encode(message).finish();\n    return Buffer.from(bytes);\n  };\n  exports.encode = encode;\n  const encodeMessage = (messages, messageName, data) => {\n    const {\n      Message,\n      messageType\n    } = (0, utils_1.createMessageFromName)(messages, messageName);\n    const message = (0, exports.encode)(Message, data);\n    return {\n      messageType,\n      message\n    };\n  };\n  exports.encodeMessage = encodeMessage;\n});","lineCount":80,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"encodeMessage"],[7,23,6,21],[7,26,6,24,"exports"],[7,33,6,31],[7,34,6,32,"encode"],[7,40,6,38],[7,43,6,41],[7,48,6,46],[7,49,6,47],[8,2,7,0],[8,8,7,6,"light_1"],[8,15,7,13],[8,18,7,16,"require"],[8,25,7,23],[8,26,7,23,"_dependencyMap"],[8,40,7,23],[8,63,7,42],[8,64,7,43],[9,2,8,0],[9,8,8,6,"utils_1"],[9,15,8,13],[9,18,8,16,"require"],[9,25,8,23],[9,26,8,23,"_dependencyMap"],[9,40,8,23],[9,54,8,33],[9,55,8,34],[10,2,9,0],[10,8,9,6,"transform"],[10,17,9,15],[10,20,9,18,"transform"],[10,21,9,19,"fieldType"],[10,30,9,28],[10,32,9,30,"value"],[10,37,9,35],[10,42,9,40],[11,4,10,2],[11,8,10,6,"fieldType"],[11,17,10,15],[11,22,10,20],[11,29,10,27],[11,31,10,29],[12,6,11,4],[12,10,11,8],[12,17,11,15,"value"],[12,22,11,20],[12,27,11,25],[12,35,11,33],[12,39,11,37],[12,40,11,38,"value"],[12,45,11,43],[12,47,11,45],[12,54,11,52,"value"],[12,59,11,57],[13,6,12,4],[13,13,12,11,"Buffer"],[13,19,12,17],[13,20,12,18,"from"],[13,24,12,22],[13,25,12,23,"value"],[13,30,12,28],[13,32,12,30],[13,37,12,35],[13,38,12,36],[14,4,13,2],[15,4,14,2],[15,8,14,6],[15,15,14,13,"value"],[15,20,14,18],[15,25,14,23],[15,33,14,31],[15,37,14,35],[15,38,14,36,"Number"],[15,44,14,42],[15,45,14,43,"isSafeInteger"],[15,58,14,56],[15,59,14,57,"value"],[15,64,14,62],[15,65,14,63],[15,67,14,65],[16,6,15,4],[16,12,15,10],[16,16,15,14,"RangeError"],[16,26,15,24],[16,27,15,25],[16,73,15,71],[16,74,15,72],[17,4,16,2],[18,4,17,2],[18,8,17,6,"fieldType"],[18,17,17,15],[18,22,17,20],[18,30,17,28],[18,34,17,32],[18,41,17,39,"value"],[18,46,17,44],[18,51,17,49],[18,59,17,57],[18,61,17,59],[19,6,18,4,"value"],[19,11,18,9],[19,14,18,12,"value"],[19,19,18,17],[19,20,18,18,"replace"],[19,27,18,25],[19,28,18,26],[19,35,18,33],[19,37,18,35],[19,40,18,38],[19,41,18,39],[20,4,19,2],[21,4,20,2],[21,11,20,9,"value"],[21,16,20,14],[22,2,21,0],[22,3,21,1],[23,2,22,0],[23,11,22,9,"patch"],[23,16,22,14,"patch"],[23,17,22,15,"Message"],[23,24,22,22],[23,26,22,24,"payload"],[23,33,22,31],[23,35,22,33],[24,4,23,2],[24,10,23,8,"patched"],[24,17,23,15],[24,20,23,18],[24,21,23,19],[24,22,23,20],[25,4,24,2],[25,8,24,6],[25,9,24,7,"Message"],[25,16,24,14],[25,17,24,15,"fields"],[25,23,24,21],[25,25,24,23],[26,6,25,4],[26,13,25,11,"patched"],[26,20,25,18],[27,4,26,2],[28,4,27,2,"Object"],[28,10,27,8],[28,11,27,9,"keys"],[28,15,27,13],[28,16,27,14,"Message"],[28,23,27,21],[28,24,27,22,"fields"],[28,30,27,28],[28,31,27,29],[28,32,27,30,"forEach"],[28,39,27,37],[28,40,27,38,"key"],[28,43,27,41],[28,47,27,45],[29,6,28,4],[29,12,28,10,"field"],[29,17,28,15],[29,20,28,18,"Message"],[29,27,28,25],[29,28,28,26,"fields"],[29,34,28,32],[29,35,28,33,"key"],[29,38,28,36],[29,39,28,37],[30,6,29,4],[30,12,29,10,"value"],[30,17,29,15],[30,20,29,18,"payload"],[30,27,29,25],[30,28,29,26,"key"],[30,31,29,29],[30,32,29,30],[31,6,30,4],[31,10,30,8],[31,17,30,15,"value"],[31,22,30,20],[31,27,30,25],[31,38,30,36],[31,40,30,38],[32,8,31,6],[33,6,32,4],[34,6,33,4],[34,10,33,8],[34,11,33,9],[34,12,33,10],[34,14,33,12,"utils_1"],[34,21,33,19],[34,22,33,20,"isPrimitiveField"],[34,38,33,36],[34,40,33,38,"field"],[34,45,33,43],[34,46,33,44,"type"],[34,50,33,48],[34,51,33,49],[34,53,33,51],[35,8,34,6],[35,12,34,10,"field"],[35,17,34,15],[35,18,34,16,"repeated"],[35,26,34,24],[35,28,34,26],[36,10,35,8,"patched"],[36,17,35,15],[36,18,35,16,"key"],[36,21,35,19],[36,22,35,20],[36,25,35,23,"value"],[36,30,35,28],[36,31,35,29,"map"],[36,34,35,32],[36,35,35,33,"v"],[36,36,35,34],[36,40,35,38,"transform"],[36,49,35,47],[36,50,35,48,"field"],[36,55,35,53],[36,56,35,54,"type"],[36,60,35,58],[36,62,35,60,"v"],[36,63,35,61],[36,64,35,62],[36,65,35,63],[37,8,36,6],[37,9,36,7],[37,15,36,13],[38,10,37,8,"patched"],[38,17,37,15],[38,18,37,16,"key"],[38,21,37,19],[38,22,37,20],[38,25,37,23,"transform"],[38,34,37,32],[38,35,37,33,"field"],[38,40,37,38],[38,41,37,39,"type"],[38,45,37,43],[38,47,37,45,"value"],[38,52,37,50],[38,53,37,51],[39,8,38,6],[40,8,39,6],[41,6,40,4],[42,6,41,4],[42,10,41,8,"field"],[42,15,41,13],[42,16,41,14,"repeated"],[42,24,41,22],[42,26,41,24],[43,8,42,6],[43,14,42,12,"fieldType"],[43,23,42,21],[43,26,42,24,"Message"],[43,33,42,31],[43,34,42,32,"lookupTypeOrEnum"],[43,50,42,48],[43,51,42,49,"field"],[43,56,42,54],[43,57,42,55,"type"],[43,61,42,59],[43,62,42,60],[44,8,43,6],[44,12,43,10,"fieldType"],[44,21,43,19],[44,33,43,31,"light_1"],[44,40,43,38],[44,41,43,39,"Enum"],[44,45,43,43],[44,47,43,45],[45,10,44,8,"patched"],[45,17,44,15],[45,18,44,16,"key"],[45,21,44,19],[45,22,44,20],[45,25,44,23,"value"],[45,30,44,28],[46,8,45,6],[46,9,45,7],[46,15,45,13],[47,10,46,8,"patched"],[47,17,46,15],[47,18,46,16,"key"],[47,21,46,19],[47,22,46,20],[47,25,46,23,"value"],[47,30,46,28],[47,31,46,29,"map"],[47,34,46,32],[47,35,46,33,"v"],[47,36,46,34],[47,40,46,38,"patch"],[47,45,46,43],[47,46,46,44,"fieldType"],[47,55,46,53],[47,57,46,55,"v"],[47,58,46,56],[47,59,46,57],[47,60,46,58],[48,8,47,6],[49,6,48,4],[49,7,48,5],[49,13,48,11],[49,17,48,15],[49,24,48,22,"value"],[49,29,48,27],[49,34,48,32],[49,42,48,40],[49,46,48,44,"value"],[49,51,48,49],[49,56,48,54],[49,60,48,58],[49,62,48,60],[50,8,49,6],[50,14,49,12,"RefMessage"],[50,24,49,22],[50,27,49,25,"Message"],[50,34,49,32],[50,35,49,33,"lookupType"],[50,45,49,43],[50,46,49,44,"field"],[50,51,49,49],[50,52,49,50,"type"],[50,56,49,54],[50,57,49,55],[51,8,50,6,"patched"],[51,15,50,13],[51,16,50,14,"key"],[51,19,50,17],[51,20,50,18],[51,23,50,21,"patch"],[51,28,50,26],[51,29,50,27,"RefMessage"],[51,39,50,37],[51,41,50,39,"value"],[51,46,50,44],[51,47,50,45],[52,6,51,4],[52,7,51,5],[52,13,51,11],[52,17,51,15],[52,24,51,22,"value"],[52,29,51,27],[52,34,51,32],[52,42,51,40],[52,44,51,42],[53,8,52,6],[53,14,52,12,"RefMessage"],[53,24,52,22],[53,27,52,25,"Message"],[53,34,52,32],[53,35,52,33,"lookupEnum"],[53,45,52,43],[53,46,52,44,"field"],[53,51,52,49],[53,52,52,50,"type"],[53,56,52,54],[53,57,52,55],[54,8,53,6,"patched"],[54,15,53,13],[54,16,53,14,"key"],[54,19,53,17],[54,20,53,18],[54,23,53,21,"RefMessage"],[54,33,53,31],[54,34,53,32,"values"],[54,40,53,38],[54,41,53,39,"value"],[54,46,53,44],[54,47,53,45],[55,6,54,4],[55,7,54,5],[55,13,54,11],[56,8,55,6,"patched"],[56,15,55,13],[56,16,55,14,"key"],[56,19,55,17],[56,20,55,18],[56,23,55,21,"value"],[56,28,55,26],[57,6,56,4],[58,4,57,2],[58,5,57,3],[58,6,57,4],[59,4,58,2],[59,11,58,9,"patched"],[59,18,58,16],[60,2,59,0],[61,2,60,0],[61,8,60,6,"encode"],[61,14,60,12],[61,17,60,15,"encode"],[61,18,60,16,"Message"],[61,25,60,23],[61,27,60,25,"data"],[61,31,60,29],[61,36,60,34],[62,4,61,2],[62,10,61,8,"payload"],[62,17,61,15],[62,20,61,18,"patch"],[62,25,61,23],[62,26,61,24,"Message"],[62,33,61,31],[62,35,61,33,"data"],[62,39,61,37],[62,40,61,38],[63,4,62,2],[63,10,62,8,"message"],[63,17,62,15],[63,20,62,18,"Message"],[63,27,62,25],[63,28,62,26,"fromObject"],[63,38,62,36],[63,39,62,37,"payload"],[63,46,62,44],[63,47,62,45],[64,4,63,2],[64,10,63,8,"bytes"],[64,15,63,13],[64,18,63,16,"Message"],[64,25,63,23],[64,26,63,24,"encode"],[64,32,63,30],[64,33,63,31,"message"],[64,40,63,38],[64,41,63,39],[64,42,63,40,"finish"],[64,48,63,46],[64,49,63,47],[64,50,63,48],[65,4,64,2],[65,11,64,9,"Buffer"],[65,17,64,15],[65,18,64,16,"from"],[65,22,64,20],[65,23,64,21,"bytes"],[65,28,64,26],[65,29,64,27],[66,2,65,0],[66,3,65,1],[67,2,66,0,"exports"],[67,9,66,7],[67,10,66,8,"encode"],[67,16,66,14],[67,19,66,17,"encode"],[67,25,66,23],[68,2,67,0],[68,8,67,6,"encodeMessage"],[68,21,67,19],[68,24,67,22,"encodeMessage"],[68,25,67,23,"messages"],[68,33,67,31],[68,35,67,33,"messageName"],[68,46,67,44],[68,48,67,46,"data"],[68,52,67,50],[68,57,67,55],[69,4,68,2],[69,10,68,8],[70,6,69,4,"Message"],[70,13,69,11],[71,6,70,4,"messageType"],[72,4,71,2],[72,5,71,3],[72,8,71,6],[72,9,71,7],[72,10,71,8],[72,12,71,10,"utils_1"],[72,19,71,17],[72,20,71,18,"createMessageFromName"],[72,41,71,39],[72,43,71,41,"messages"],[72,51,71,49],[72,53,71,51,"messageName"],[72,64,71,62],[72,65,71,63],[73,4,72,2],[73,10,72,8,"message"],[73,17,72,15],[73,20,72,18],[73,21,72,19],[73,22,72,20],[73,24,72,22,"exports"],[73,31,72,29],[73,32,72,30,"encode"],[73,38,72,36],[73,40,72,38,"Message"],[73,47,72,45],[73,49,72,47,"data"],[73,53,72,51],[73,54,72,52],[74,4,73,2],[74,11,73,9],[75,6,74,4,"messageType"],[75,17,74,15],[76,6,75,4,"message"],[77,4,76,2],[77,5,76,3],[78,2,77,0],[78,3,77,1],[79,2,78,0,"exports"],[79,9,78,7],[79,10,78,8,"encodeMessage"],[79,23,78,21],[79,26,78,24,"encodeMessage"],[79,39,78,37],[80,0,78,38],[80,3]],"functionMap":{"names":["<global>","transform","patch","Object.keys.forEach$argument_0","value.map$argument_0","encode","encodeMessage"],"mappings":"AAA;kBCQ;CDY;AEC;sCCK;iCCQ,6BD;iCCW,wBD;GDW;CFE;eKC;CLK;sBME;CNU"},"hasCjsExports":true},"type":"js/module"}]}