{"dependencies":[{"name":"../../utils/abi/encodeEventTopics.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":74,"index":74}}],"key":"P+8SVHpUeBt2KPErjE+luxVr6HA=","exportNames":["*"],"imports":1}},{"name":"../../utils/encoding/toHex.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":75},"end":{"line":2,"column":61,"index":136}}],"key":"U2IsyW1seIe5m4FUbe8axrr/0FQ=","exportNames":["*"],"imports":1}},{"name":"../../utils/filters/createFilterRequestScope.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":137},"end":{"line":3,"column":91,"index":228}}],"key":"BKeyeFH1hvRK0pJp6JCAOZH2Cio=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.createEventFilter = createEventFilter;\n  var _utilsAbiEncodeEventTopicsJs = require(_dependencyMap[0], \"../../utils/abi/encodeEventTopics.js\");\n  var _utilsEncodingToHexJs = require(_dependencyMap[1], \"../../utils/encoding/toHex.js\");\n  var _utilsFiltersCreateFilterRequestScopeJs = require(_dependencyMap[2], \"../../utils/filters/createFilterRequestScope.js\");\n  /**\n   * Creates a [`Filter`](https://viem.sh/docs/glossary/types#filter) to listen for new events that can be used with [`getFilterChanges`](https://viem.sh/docs/actions/public/getFilterChanges).\n   *\n   * - Docs: https://viem.sh/docs/actions/public/createEventFilter\n   * - JSON-RPC Methods: [`eth_newFilter`](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_newfilter)\n   *\n   * @param client - Client to use\n   * @param parameters - {@link CreateEventFilterParameters}\n   * @returns [`Filter`](https://viem.sh/docs/glossary/types#filter). {@link CreateEventFilterReturnType}\n   *\n   * @example\n   * import { createPublicClient, http } from 'viem'\n   * import { mainnet } from 'viem/chains'\n   * import { createEventFilter } from 'viem/public'\n   *\n   * const client = createPublicClient({\n   *   chain: mainnet,\n   *   transport: http(),\n   * })\n   * const filter = await createEventFilter(client, {\n   *   address: '0xfba3912ca04dd458c843e2ee08967fc04f3579c2',\n   * })\n   */\n  async function createEventFilter(client, {\n    address,\n    args,\n    event,\n    events: events_,\n    fromBlock,\n    strict,\n    toBlock\n  } = {}) {\n    const events = events_ ?? (event ? [event] : undefined);\n    const getRequest = (0, _utilsFiltersCreateFilterRequestScopeJs.createFilterRequestScope)(client, {\n      method: 'eth_newFilter'\n    });\n    let topics = [];\n    if (events) {\n      const encoded = events.flatMap(event => (0, _utilsAbiEncodeEventTopicsJs.encodeEventTopics)({\n        abi: [event],\n        eventName: event.name,\n        args\n      }));\n      // TODO: Clean up type casting\n      topics = [encoded];\n      if (event) topics = topics[0];\n    }\n    const id = await client.request({\n      method: 'eth_newFilter',\n      params: [{\n        address,\n        fromBlock: typeof fromBlock === 'bigint' ? (0, _utilsEncodingToHexJs.numberToHex)(fromBlock) : fromBlock,\n        toBlock: typeof toBlock === 'bigint' ? (0, _utilsEncodingToHexJs.numberToHex)(toBlock) : toBlock,\n        ...(topics.length ? {\n          topics\n        } : {})\n      }]\n    });\n    return {\n      abi: events,\n      args,\n      eventName: event ? event.name : undefined,\n      fromBlock,\n      id,\n      request: getRequest(id),\n      strict: Boolean(strict),\n      toBlock,\n      type: 'event'\n    };\n  }\n});","lineCount":81,"map":[[7,2,27,0,"exports"],[7,9,27,0],[7,10,27,0,"createEventFilter"],[7,27,27,0],[7,30,27,0,"createEventFilter"],[7,47,27,0],[8,2,1,0],[8,6,1,0,"_utilsAbiEncodeEventTopicsJs"],[8,34,1,0],[8,37,1,0,"require"],[8,44,1,0],[8,45,1,0,"_dependencyMap"],[8,59,1,0],[9,2,2,0],[9,6,2,0,"_utilsEncodingToHexJs"],[9,27,2,0],[9,30,2,0,"require"],[9,37,2,0],[9,38,2,0,"_dependencyMap"],[9,52,2,0],[10,2,3,0],[10,6,3,0,"_utilsFiltersCreateFilterRequestScopeJs"],[10,45,3,0],[10,48,3,0,"require"],[10,55,3,0],[10,56,3,0,"_dependencyMap"],[10,70,3,0],[11,2,4,0],[12,0,5,0],[13,0,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[17,0,10,0],[18,0,11,0],[19,0,12,0],[20,0,13,0],[21,0,14,0],[22,0,15,0],[23,0,16,0],[24,0,17,0],[25,0,18,0],[26,0,19,0],[27,0,20,0],[28,0,21,0],[29,0,22,0],[30,0,23,0],[31,0,24,0],[32,0,25,0],[33,0,26,0],[34,2,27,7],[34,17,27,22,"createEventFilter"],[34,34,27,39,"createEventFilter"],[34,35,27,40,"client"],[34,41,27,46],[34,43,27,48],[35,4,27,50,"address"],[35,11,27,57],[36,4,27,59,"args"],[36,8,27,63],[37,4,27,65,"event"],[37,9,27,70],[38,4,27,72,"events"],[38,10,27,78],[38,12,27,80,"events_"],[38,19,27,87],[39,4,27,89,"fromBlock"],[39,13,27,98],[40,4,27,100,"strict"],[40,10,27,106],[41,4,27,108,"toBlock"],[42,2,27,117],[42,3,27,118],[42,6,27,121],[42,7,27,122],[42,8,27,123],[42,10,27,125],[43,4,28,4],[43,10,28,10,"events"],[43,16,28,16],[43,19,28,19,"events_"],[43,26,28,26],[43,31,28,31,"event"],[43,36,28,36],[43,39,28,39],[43,40,28,40,"event"],[43,45,28,45],[43,46,28,46],[43,49,28,49,"undefined"],[43,58,28,58],[43,59,28,59],[44,4,29,4],[44,10,29,10,"getRequest"],[44,20,29,20],[44,23,29,23],[44,27,29,23,"createFilterRequestScope"],[44,66,29,47],[44,67,29,47,"createFilterRequestScope"],[44,91,29,47],[44,93,29,48,"client"],[44,99,29,54],[44,101,29,56],[45,6,30,8,"method"],[45,12,30,14],[45,14,30,16],[46,4,31,4],[46,5,31,5],[46,6,31,6],[47,4,32,4],[47,8,32,8,"topics"],[47,14,32,14],[47,17,32,17],[47,19,32,19],[48,4,33,4],[48,8,33,8,"events"],[48,14,33,14],[48,16,33,16],[49,6,34,8],[49,12,34,14,"encoded"],[49,19,34,21],[49,22,34,24,"events"],[49,28,34,30],[49,29,34,31,"flatMap"],[49,36,34,38],[49,37,34,40,"event"],[49,42,34,45],[49,46,34,50],[49,50,34,50,"encodeEventTopics"],[49,78,34,67],[49,79,34,67,"encodeEventTopics"],[49,96,34,67],[49,98,34,68],[50,8,35,12,"abi"],[50,11,35,15],[50,13,35,17],[50,14,35,18,"event"],[50,19,35,23],[50,20,35,24],[51,8,36,12,"eventName"],[51,17,36,21],[51,19,36,23,"event"],[51,24,36,28],[51,25,36,29,"name"],[51,29,36,33],[52,8,37,12,"args"],[53,6,38,8],[53,7,38,9],[53,8,38,10],[53,9,38,11],[54,6,39,8],[55,6,40,8,"topics"],[55,12,40,14],[55,15,40,17],[55,16,40,18,"encoded"],[55,23,40,25],[55,24,40,26],[56,6,41,8],[56,10,41,12,"event"],[56,15,41,17],[56,17,42,12,"topics"],[56,23,42,18],[56,26,42,21,"topics"],[56,32,42,27],[56,33,42,28],[56,34,42,29],[56,35,42,30],[57,4,43,4],[58,4,44,4],[58,10,44,10,"id"],[58,12,44,12],[58,15,44,15],[58,21,44,21,"client"],[58,27,44,27],[58,28,44,28,"request"],[58,35,44,35],[58,36,44,36],[59,6,45,8,"method"],[59,12,45,14],[59,14,45,16],[59,29,45,31],[60,6,46,8,"params"],[60,12,46,14],[60,14,46,16],[60,15,47,12],[61,8,48,16,"address"],[61,15,48,23],[62,8,49,16,"fromBlock"],[62,17,49,25],[62,19,49,27],[62,26,49,34,"fromBlock"],[62,35,49,43],[62,40,49,48],[62,48,49,56],[62,51,49,59],[62,55,49,59,"numberToHex"],[62,76,49,70],[62,77,49,70,"numberToHex"],[62,88,49,70],[62,90,49,71,"fromBlock"],[62,99,49,80],[62,100,49,81],[62,103,49,84,"fromBlock"],[62,112,49,93],[63,8,50,16,"toBlock"],[63,15,50,23],[63,17,50,25],[63,24,50,32,"toBlock"],[63,31,50,39],[63,36,50,44],[63,44,50,52],[63,47,50,55],[63,51,50,55,"numberToHex"],[63,72,50,66],[63,73,50,66,"numberToHex"],[63,84,50,66],[63,86,50,67,"toBlock"],[63,93,50,74],[63,94,50,75],[63,97,50,78,"toBlock"],[63,104,50,85],[64,8,51,16],[64,12,51,20,"topics"],[64,18,51,26],[64,19,51,27,"length"],[64,25,51,33],[64,28,51,36],[65,10,51,38,"topics"],[66,8,51,45],[66,9,51,46],[66,12,51,49],[66,13,51,50],[66,14,51,51],[67,6,52,12],[67,7,52,13],[68,4,54,4],[68,5,54,5],[68,6,54,6],[69,4,55,4],[69,11,55,11],[70,6,56,8,"abi"],[70,9,56,11],[70,11,56,13,"events"],[70,17,56,19],[71,6,57,8,"args"],[71,10,57,12],[72,6,58,8,"eventName"],[72,15,58,17],[72,17,58,19,"event"],[72,22,58,24],[72,25,58,27,"event"],[72,30,58,32],[72,31,58,33,"name"],[72,35,58,37],[72,38,58,40,"undefined"],[72,47,58,49],[73,6,59,8,"fromBlock"],[73,15,59,17],[74,6,60,8,"id"],[74,8,60,10],[75,6,61,8,"request"],[75,13,61,15],[75,15,61,17,"getRequest"],[75,25,61,27],[75,26,61,28,"id"],[75,28,61,30],[75,29,61,31],[76,6,62,8,"strict"],[76,12,62,14],[76,14,62,16,"Boolean"],[76,21,62,23],[76,22,62,24,"strict"],[76,28,62,30],[76,29,62,31],[77,6,63,8,"toBlock"],[77,13,63,15],[78,6,64,8,"type"],[78,10,64,12],[78,12,64,14],[79,4,65,4],[79,5,65,5],[80,2,66,0],[81,0,66,1],[81,3]],"functionMap":{"names":["<global>","createEventFilter","events.flatMap$argument_0"],"mappings":"AAA;OC0B;uCCO;UDI;CD4B"},"hasCjsExports":false},"type":"js/module"}]}