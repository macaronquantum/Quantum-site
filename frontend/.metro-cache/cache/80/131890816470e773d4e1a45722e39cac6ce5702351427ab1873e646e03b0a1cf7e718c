{"dependencies":[{"name":"ws","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":27,"column":24,"index":1149},"end":{"line":27,"column":37,"index":1162}}],"key":"BZg7ddMu2AkBE4wk9dCTuNZ34RA=","exportNames":["*"],"imports":1}},{"name":"./websocket.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":28,"column":23,"index":1188},"end":{"line":28,"column":48,"index":1213}}],"key":"4sF/18goNiDR5N2S/kkxqUwi1b0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = {\n        enumerable: true,\n        get: function () {\n          return m[k];\n        }\n      };\n    }\n    Object.defineProperty(o, k2, desc);\n  } : function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n  });\n  var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n    Object.defineProperty(o, \"default\", {\n      enumerable: true,\n      value: v\n    });\n  } : function (o, v) {\n    o[\"default\"] = v;\n  });\n  var __importStar = this && this.__importStar || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n  };\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WS = void 0;\n  const ws = __importStar(require(_dependencyMap[0], \"ws\"));\n  const websocket_js_1 = require(_dependencyMap[1], \"./websocket.js\");\n  /**\n   * WebSocket transport based on the `WebSocket` object provided by the `ws` package.\n   *\n   * Usage: Node.js, Deno (compat), Bun (compat)\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n   * @see https://caniuse.com/mdn-api_websocket\n   */\n  class WS extends websocket_js_1.BaseWS {\n    createSocket(uri, protocols, opts) {\n      var _a;\n      if ((_a = this.socket) === null || _a === void 0 ? void 0 : _a._cookieJar) {\n        opts.headers = opts.headers || {};\n        opts.headers.cookie = typeof opts.headers.cookie === \"string\" ? [opts.headers.cookie] : opts.headers.cookie || [];\n        for (const [name, cookie] of this.socket._cookieJar.cookies) {\n          opts.headers.cookie.push(`${name}=${cookie.value}`);\n        }\n      }\n      return new ws.WebSocket(uri, protocols, opts);\n    }\n    doWrite(packet, data) {\n      const opts = {};\n      if (packet.options) {\n        opts.compress = packet.options.compress;\n      }\n      if (this.opts.perMessageDeflate) {\n        const len =\n        // @ts-ignore\n        \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n        if (len < this.opts.perMessageDeflate.threshold) {\n          opts.compress = false;\n        }\n      }\n      this.ws.send(data, opts);\n    }\n  }\n  exports.WS = WS;\n});","lineCount":78,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[4,6,2,4,"__createBinding"],[4,21,2,19],[4,24,2,23],[4,28,2,27],[4,32,2,31],[4,36,2,35],[4,37,2,36,"__createBinding"],[4,52,2,51],[4,57,2,57,"Object"],[4,63,2,63],[4,64,2,64,"create"],[4,70,2,70],[4,73,2,74],[4,83,2,83,"o"],[4,84,2,84],[4,86,2,86,"m"],[4,87,2,87],[4,89,2,89,"k"],[4,90,2,90],[4,92,2,92,"k2"],[4,94,2,94],[4,96,2,96],[5,4,3,4],[5,8,3,8,"k2"],[5,10,3,10],[5,15,3,15,"undefined"],[5,24,3,24],[5,26,3,26,"k2"],[5,28,3,28],[5,31,3,31,"k"],[5,32,3,32],[6,4,4,4],[6,8,4,8,"desc"],[6,12,4,12],[6,15,4,15,"Object"],[6,21,4,21],[6,22,4,22,"getOwnPropertyDescriptor"],[6,46,4,46],[6,47,4,47,"m"],[6,48,4,48],[6,50,4,50,"k"],[6,51,4,51],[6,52,4,52],[7,4,5,4],[7,8,5,8],[7,9,5,9,"desc"],[7,13,5,13],[7,18,5,18],[7,23,5,23],[7,27,5,27,"desc"],[7,31,5,31],[7,34,5,34],[7,35,5,35,"m"],[7,36,5,36],[7,37,5,37,"__esModule"],[7,47,5,47],[7,50,5,50,"desc"],[7,54,5,54],[7,55,5,55,"writable"],[7,63,5,63],[7,67,5,67,"desc"],[7,71,5,71],[7,72,5,72,"configurable"],[7,84,5,84],[7,85,5,85],[7,87,5,87],[8,6,6,6,"desc"],[8,10,6,10],[8,13,6,13],[9,8,6,15,"enumerable"],[9,18,6,25],[9,20,6,27],[9,24,6,31],[10,8,6,33,"get"],[10,11,6,36],[10,13,6,38],[10,22,6,38,"get"],[10,23,6,38],[10,25,6,49],[11,10,6,51],[11,17,6,58,"m"],[11,18,6,59],[11,19,6,60,"k"],[11,20,6,61],[11,21,6,62],[12,8,6,64],[13,6,6,66],[13,7,6,67],[14,4,7,4],[15,4,8,4,"Object"],[15,10,8,10],[15,11,8,11,"defineProperty"],[15,25,8,25],[15,26,8,26,"o"],[15,27,8,27],[15,29,8,29,"k2"],[15,31,8,31],[15,33,8,33,"desc"],[15,37,8,37],[15,38,8,38],[16,2,9,0],[16,3,9,1],[16,6,9,6],[16,16,9,15,"o"],[16,17,9,16],[16,19,9,18,"m"],[16,20,9,19],[16,22,9,21,"k"],[16,23,9,22],[16,25,9,24,"k2"],[16,27,9,26],[16,29,9,28],[17,4,10,4],[17,8,10,8,"k2"],[17,10,10,10],[17,15,10,15,"undefined"],[17,24,10,24],[17,26,10,26,"k2"],[17,28,10,28],[17,31,10,31,"k"],[17,32,10,32],[18,4,11,4,"o"],[18,5,11,5],[18,6,11,6,"k2"],[18,8,11,8],[18,9,11,9],[18,12,11,12,"m"],[18,13,11,13],[18,14,11,14,"k"],[18,15,11,15],[18,16,11,16],[19,2,12,0],[19,3,12,2],[19,4,12,3],[20,2,13,0],[20,6,13,4,"__setModuleDefault"],[20,24,13,22],[20,27,13,26],[20,31,13,30],[20,35,13,34],[20,39,13,38],[20,40,13,39,"__setModuleDefault"],[20,58,13,57],[20,63,13,63,"Object"],[20,69,13,69],[20,70,13,70,"create"],[20,76,13,76],[20,79,13,80],[20,89,13,89,"o"],[20,90,13,90],[20,92,13,92,"v"],[20,93,13,93],[20,95,13,95],[21,4,14,4,"Object"],[21,10,14,10],[21,11,14,11,"defineProperty"],[21,25,14,25],[21,26,14,26,"o"],[21,27,14,27],[21,29,14,29],[21,38,14,38],[21,40,14,40],[22,6,14,42,"enumerable"],[22,16,14,52],[22,18,14,54],[22,22,14,58],[23,6,14,60,"value"],[23,11,14,65],[23,13,14,67,"v"],[24,4,14,69],[24,5,14,70],[24,6,14,71],[25,2,15,0],[25,3,15,1],[25,6,15,5],[25,16,15,14,"o"],[25,17,15,15],[25,19,15,17,"v"],[25,20,15,18],[25,22,15,20],[26,4,16,4,"o"],[26,5,16,5],[26,6,16,6],[26,15,16,15],[26,16,16,16],[26,19,16,19,"v"],[26,20,16,20],[27,2,17,0],[27,3,17,1],[27,4,17,2],[28,2,18,0],[28,6,18,4,"__importStar"],[28,18,18,16],[28,21,18,20],[28,25,18,24],[28,29,18,28],[28,33,18,32],[28,34,18,33,"__importStar"],[28,46,18,45],[28,50,18,50],[28,60,18,60,"mod"],[28,63,18,63],[28,65,18,65],[29,4,19,4],[29,8,19,8,"mod"],[29,11,19,11],[29,15,19,15,"mod"],[29,18,19,18],[29,19,19,19,"__esModule"],[29,29,19,29],[29,31,19,31],[29,38,19,38,"mod"],[29,41,19,41],[30,4,20,4],[30,8,20,8,"result"],[30,14,20,14],[30,17,20,17],[30,18,20,18],[30,19,20,19],[31,4,21,4],[31,8,21,8,"mod"],[31,11,21,11],[31,15,21,15],[31,19,21,19],[31,21,21,21],[31,26,21,26],[31,30,21,30,"k"],[31,31,21,31],[31,35,21,35,"mod"],[31,38,21,38],[31,40,21,40],[31,44,21,44,"k"],[31,45,21,45],[31,50,21,50],[31,59,21,59],[31,63,21,63,"Object"],[31,69,21,69],[31,70,21,70,"prototype"],[31,79,21,79],[31,80,21,80,"hasOwnProperty"],[31,94,21,94],[31,95,21,95,"call"],[31,99,21,99],[31,100,21,100,"mod"],[31,103,21,103],[31,105,21,105,"k"],[31,106,21,106],[31,107,21,107],[31,109,21,109,"__createBinding"],[31,124,21,124],[31,125,21,125,"result"],[31,131,21,131],[31,133,21,133,"mod"],[31,136,21,136],[31,138,21,138,"k"],[31,139,21,139],[31,140,21,140],[32,4,22,4,"__setModuleDefault"],[32,22,22,22],[32,23,22,23,"result"],[32,29,22,29],[32,31,22,31,"mod"],[32,34,22,34],[32,35,22,35],[33,4,23,4],[33,11,23,11,"result"],[33,17,23,17],[34,2,24,0],[34,3,24,1],[35,2,25,0,"Object"],[35,8,25,6],[35,9,25,7,"defineProperty"],[35,23,25,21],[35,24,25,22,"exports"],[35,31,25,29],[35,33,25,31],[35,45,25,43],[35,47,25,45],[36,4,25,47,"value"],[36,9,25,52],[36,11,25,54],[37,2,25,59],[37,3,25,60],[37,4,25,61],[38,2,26,0,"exports"],[38,9,26,7],[38,10,26,8,"WS"],[38,12,26,10],[38,15,26,13],[38,20,26,18],[38,21,26,19],[39,2,27,0],[39,8,27,6,"ws"],[39,10,27,8],[39,13,27,11,"__importStar"],[39,25,27,23],[39,26,27,24,"require"],[39,33,27,31],[39,34,27,31,"_dependencyMap"],[39,48,27,31],[39,57,27,36],[39,58,27,37],[39,59,27,38],[40,2,28,0],[40,8,28,6,"websocket_js_1"],[40,22,28,20],[40,25,28,23,"require"],[40,32,28,30],[40,33,28,30,"_dependencyMap"],[40,47,28,30],[40,68,28,47],[40,69,28,48],[41,2,29,0],[42,0,30,0],[43,0,31,0],[44,0,32,0],[45,0,33,0],[46,0,34,0],[47,0,35,0],[48,0,36,0],[49,2,37,0],[49,8,37,6,"WS"],[49,10,37,8],[49,19,37,17,"websocket_js_1"],[49,33,37,31],[49,34,37,32,"BaseWS"],[49,40,37,38],[49,41,37,39],[50,4,38,4,"createSocket"],[50,16,38,16,"createSocket"],[50,17,38,17,"uri"],[50,20,38,20],[50,22,38,22,"protocols"],[50,31,38,31],[50,33,38,33,"opts"],[50,37,38,37],[50,39,38,39],[51,6,39,8],[51,10,39,12,"_a"],[51,12,39,14],[52,6,40,8],[52,10,40,12],[52,11,40,13,"_a"],[52,13,40,15],[52,16,40,18],[52,20,40,22],[52,21,40,23,"socket"],[52,27,40,29],[52,33,40,35],[52,37,40,39],[52,41,40,43,"_a"],[52,43,40,45],[52,48,40,50],[52,53,40,55],[52,54,40,56],[52,57,40,59],[52,62,40,64],[52,63,40,65],[52,66,40,68,"_a"],[52,68,40,70],[52,69,40,71,"_cookieJar"],[52,79,40,81],[52,81,40,83],[53,8,41,12,"opts"],[53,12,41,16],[53,13,41,17,"headers"],[53,20,41,24],[53,23,41,27,"opts"],[53,27,41,31],[53,28,41,32,"headers"],[53,35,41,39],[53,39,41,43],[53,40,41,44],[53,41,41,45],[54,8,42,12,"opts"],[54,12,42,16],[54,13,42,17,"headers"],[54,20,42,24],[54,21,42,25,"cookie"],[54,27,42,31],[54,30,43,16],[54,37,43,23,"opts"],[54,41,43,27],[54,42,43,28,"headers"],[54,49,43,35],[54,50,43,36,"cookie"],[54,56,43,42],[54,61,43,47],[54,69,43,55],[54,72,44,22],[54,73,44,23,"opts"],[54,77,44,27],[54,78,44,28,"headers"],[54,85,44,35],[54,86,44,36,"cookie"],[54,92,44,42],[54,93,44,43],[54,96,45,22,"opts"],[54,100,45,26],[54,101,45,27,"headers"],[54,108,45,34],[54,109,45,35,"cookie"],[54,115,45,41],[54,119,45,45],[54,121,45,47],[55,8,46,12],[55,13,46,17],[55,19,46,23],[55,20,46,24,"name"],[55,24,46,28],[55,26,46,30,"cookie"],[55,32,46,36],[55,33,46,37],[55,37,46,41],[55,41,46,45],[55,42,46,46,"socket"],[55,48,46,52],[55,49,46,53,"_cookieJar"],[55,59,46,63],[55,60,46,64,"cookies"],[55,67,46,71],[55,69,46,73],[56,10,47,16,"opts"],[56,14,47,20],[56,15,47,21,"headers"],[56,22,47,28],[56,23,47,29,"cookie"],[56,29,47,35],[56,30,47,36,"push"],[56,34,47,40],[56,35,47,41],[56,38,47,44,"name"],[56,42,47,48],[56,46,47,52,"cookie"],[56,52,47,58],[56,53,47,59,"value"],[56,58,47,64],[56,60,47,66],[56,61,47,67],[57,8,48,12],[58,6,49,8],[59,6,50,8],[59,13,50,15],[59,17,50,19,"ws"],[59,19,50,21],[59,20,50,22,"WebSocket"],[59,29,50,31],[59,30,50,32,"uri"],[59,33,50,35],[59,35,50,37,"protocols"],[59,44,50,46],[59,46,50,48,"opts"],[59,50,50,52],[59,51,50,53],[60,4,51,4],[61,4,52,4,"doWrite"],[61,11,52,11,"doWrite"],[61,12,52,12,"packet"],[61,18,52,18],[61,20,52,20,"data"],[61,24,52,24],[61,26,52,26],[62,6,53,8],[62,12,53,14,"opts"],[62,16,53,18],[62,19,53,21],[62,20,53,22],[62,21,53,23],[63,6,54,8],[63,10,54,12,"packet"],[63,16,54,18],[63,17,54,19,"options"],[63,24,54,26],[63,26,54,28],[64,8,55,12,"opts"],[64,12,55,16],[64,13,55,17,"compress"],[64,21,55,25],[64,24,55,28,"packet"],[64,30,55,34],[64,31,55,35,"options"],[64,38,55,42],[64,39,55,43,"compress"],[64,47,55,51],[65,6,56,8],[66,6,57,8],[66,10,57,12],[66,14,57,16],[66,15,57,17,"opts"],[66,19,57,21],[66,20,57,22,"perMessageDeflate"],[66,37,57,39],[66,39,57,41],[67,8,58,12],[67,14,58,18,"len"],[67,17,58,21],[68,8,59,12],[69,8,60,12],[69,16,60,20],[69,21,60,25],[69,28,60,32,"data"],[69,32,60,36],[69,35,60,39,"Buffer"],[69,41,60,45],[69,42,60,46,"byteLength"],[69,52,60,56],[69,53,60,57,"data"],[69,57,60,61],[69,58,60,62],[69,61,60,65,"data"],[69,65,60,69],[69,66,60,70,"length"],[69,72,60,76],[70,8,61,12],[70,12,61,16,"len"],[70,15,61,19],[70,18,61,22],[70,22,61,26],[70,23,61,27,"opts"],[70,27,61,31],[70,28,61,32,"perMessageDeflate"],[70,45,61,49],[70,46,61,50,"threshold"],[70,55,61,59],[70,57,61,61],[71,10,62,16,"opts"],[71,14,62,20],[71,15,62,21,"compress"],[71,23,62,29],[71,26,62,32],[71,31,62,37],[72,8,63,12],[73,6,64,8],[74,6,65,8],[74,10,65,12],[74,11,65,13,"ws"],[74,13,65,15],[74,14,65,16,"send"],[74,18,65,20],[74,19,65,21,"data"],[74,23,65,25],[74,25,65,27,"opts"],[74,29,65,31],[74,30,65,32],[75,4,66,4],[76,2,67,0],[77,2,68,0,"exports"],[77,9,68,7],[77,10,68,8,"WS"],[77,12,68,10],[77,15,68,13,"WS"],[77,17,68,15],[78,0,68,16],[78,3]],"functionMap":{"names":["<global>","<anonymous>","desc.get","WS","WS#createSocket","WS#doWrite"],"mappings":"AAA;0ECC;sCCI,2BD;CDG,KC;CDG;gFCC;CDE,IC;CDE;kDCC;CDM;AGa;ICC;KDa;IEC;KFc;CHC"},"hasCjsExports":true},"type":"js/module"}]}