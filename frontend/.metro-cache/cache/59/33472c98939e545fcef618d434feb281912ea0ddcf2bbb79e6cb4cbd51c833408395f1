{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":16,"index":155},"end":{"line":7,"column":32,"index":171}}],"key":"vm88vOsSPZItrLOmMEyUuGkd1y4=","exportNames":["*"],"imports":1}},{"name":"ws","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":37,"index":210},"end":{"line":8,"column":50,"index":223}}],"key":"BZg7ddMu2AkBE4wk9dCTuNZ34RA=","exportNames":["*"],"imports":1}},{"name":"@trezor/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":16,"index":242},"end":{"line":9,"column":40,"index":266}}],"key":"G7HknzTAEB2ojZW8P0CsMCjZ1DA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WebsocketClient = exports.WebsocketError = void 0;\n  const tslib_1 = require(_dependencyMap[0], \"tslib\");\n  const ws_1 = tslib_1.__importDefault(require(_dependencyMap[1], \"ws\"));\n  const utils_1 = require(_dependencyMap[2], \"@trezor/utils\");\n  const DEFAULT_TIMEOUT = 20 * 1000;\n  const DEFAULT_PING_TIMEOUT = 50 * 1000;\n  class WebsocketError extends Error {}\n  exports.WebsocketError = WebsocketError;\n  class WebsocketClient extends utils_1.TypedEmitter {\n    emitter = this;\n    ping() {\n      return this.sendMessage({\n        type: 'ping'\n      });\n    }\n    constructor(options) {\n      super();\n      this.options = options;\n      this.messages = (0, utils_1.createDeferredManager)({\n        timeout: this.options.timeout || DEFAULT_TIMEOUT,\n        onTimeout: promiseId => this.onMessageTimeout(promiseId)\n      });\n    }\n    initWebsocket({\n      url,\n      timeout,\n      headers,\n      agent\n    }) {\n      if (typeof url !== 'string') {\n        throw new WebsocketError('websocket_no_url');\n      }\n      if (url.startsWith('http')) {\n        url = url.replace('http', 'ws');\n      }\n      return new ws_1.default(url, {\n        timeout,\n        headers: {\n          Origin: 'https://node.trezor.io',\n          ...headers\n        },\n        agent\n      });\n    }\n    setPingTimeout() {\n      clearTimeout(this.pingTimeout);\n      const doPing = () => {\n        if (this.isConnected()) {\n          return this.onPing().catch(() => {});\n        }\n      };\n      this.pingTimeout = this.isConnected() ? setTimeout(doPing, this.options.pingTimeout || DEFAULT_PING_TIMEOUT) : undefined;\n    }\n    onPing() {\n      return this.ping();\n    }\n    onMessageTimeout(_promiseId) {\n      const {\n        ws\n      } = this;\n      if (!ws) return;\n      this.messages.rejectAll(new WebsocketError('websocket_timeout'));\n      ws.close();\n    }\n    onError() {\n      this.onClose();\n    }\n    sendMessage(message, {\n      timeout\n    } = {}) {\n      const {\n        ws\n      } = this;\n      if (!ws || !this.isConnected()) throw new WebsocketError('websocket_not_initialized');\n      const {\n        promiseId,\n        promise\n      } = this.messages.create(timeout);\n      const req = {\n        id: promiseId.toString(),\n        ...message\n      };\n      this.setPingTimeout();\n      this.options.onSending?.(message);\n      ws.send(JSON.stringify(req));\n      return promise;\n    }\n    sendRawMessage(message) {\n      const {\n        ws\n      } = this;\n      if (!ws || !this.isConnected()) throw new WebsocketError('websocket_not_initialized');\n      ws.send(message, {\n        binary: typeof message !== 'string'\n      });\n      this.setPingTimeout();\n    }\n    onMessage(message, messageValidation) {\n      try {\n        const data = JSON.parse(message.toString());\n        const messageId = Number(data.id);\n        try {\n          const payload = messageValidation ? messageValidation(data) : data;\n          if (payload) {\n            this.messages.resolve(messageId, payload);\n          }\n        } catch (error) {\n          this.messages.reject(messageId, error);\n        }\n      } catch {} finally {\n        this.setPingTimeout();\n      }\n    }\n    async connect() {\n      if (this.connectPromise) {\n        return this.connectPromise;\n      }\n      if (this.isConnected()) return Promise.resolve();\n      if (this.ws?.readyState === ws_1.default.CLOSING) {\n        await new Promise(resolve => this.emitter.once('disconnected', resolve));\n      }\n      const dfd = (0, utils_1.createDeferred)();\n      this.connectPromise = dfd.promise;\n      const ws = this.createWebsocket ? this.createWebsocket() : this.initWebsocket(this.options);\n      const connectionTimeout = setTimeout(() => {\n        this.onClose();\n        dfd.reject(new WebsocketError('websocket_timeout'));\n        try {\n          ws.close();\n        } catch {}\n      }, this.options.connectionTimeout || this.options.timeout || DEFAULT_TIMEOUT);\n      ws.once('error', error => {\n        clearTimeout(connectionTimeout);\n        this.onClose();\n        dfd.reject(new WebsocketError(error.message));\n      });\n      ws.on('open', () => {\n        clearTimeout(connectionTimeout);\n        this.init();\n        dfd.resolve();\n      });\n      this.ws = ws;\n      return dfd.promise.finally(() => {\n        this.connectPromise = undefined;\n      });\n    }\n    init() {\n      const {\n        ws\n      } = this;\n      if (!ws || !this.isConnected()) {\n        throw Error('Websocket init cannot be called');\n      }\n      ws.removeAllListeners();\n      ws.on('error', _error => this.onError());\n      ws.on('message', message => this.onMessage(message));\n      ws.on('close', () => {\n        this.emitter.emit('disconnected');\n        this.onClose();\n      });\n    }\n    disconnect() {\n      if (this.isConnected()) {\n        const disconnectPromise = new Promise(resolve => {\n          this.ws?.once('close', resolve);\n        });\n        this.ws?.close();\n        return disconnectPromise;\n      }\n      return Promise.resolve();\n    }\n    isConnected() {\n      return this.ws?.readyState === ws_1.default.OPEN;\n    }\n    onClose() {\n      clearTimeout(this.pingTimeout);\n      this.ws?.removeAllListeners();\n      this.ws?.on('error', () => {});\n      this.messages.rejectAll(new WebsocketError('Websocket closed unexpectedly'));\n    }\n    dispose() {\n      this.removeAllListeners();\n      this.disconnect();\n      this.onClose();\n    }\n  }\n  exports.WebsocketClient = WebsocketClient;\n});","lineCount":194,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"WebsocketClient"],[7,25,6,23],[7,28,6,26,"exports"],[7,35,6,33],[7,36,6,34,"WebsocketError"],[7,50,6,48],[7,53,6,51],[7,58,6,56],[7,59,6,57],[8,2,7,0],[8,8,7,6,"tslib_1"],[8,15,7,13],[8,18,7,16,"require"],[8,25,7,23],[8,26,7,23,"_dependencyMap"],[8,40,7,23],[8,52,7,31],[8,53,7,32],[9,2,8,0],[9,8,8,6,"ws_1"],[9,12,8,10],[9,15,8,13,"tslib_1"],[9,22,8,20],[9,23,8,21,"__importDefault"],[9,38,8,36],[9,39,8,37,"require"],[9,46,8,44],[9,47,8,44,"_dependencyMap"],[9,61,8,44],[9,70,8,49],[9,71,8,50],[9,72,8,51],[10,2,9,0],[10,8,9,6,"utils_1"],[10,15,9,13],[10,18,9,16,"require"],[10,25,9,23],[10,26,9,23,"_dependencyMap"],[10,40,9,23],[10,60,9,39],[10,61,9,40],[11,2,10,0],[11,8,10,6,"DEFAULT_TIMEOUT"],[11,23,10,21],[11,26,10,24],[11,28,10,26],[11,31,10,29],[11,35,10,33],[12,2,11,0],[12,8,11,6,"DEFAULT_PING_TIMEOUT"],[12,28,11,26],[12,31,11,29],[12,33,11,31],[12,36,11,34],[12,40,11,38],[13,2,12,0],[13,8,12,6,"WebsocketError"],[13,22,12,20],[13,31,12,29,"Error"],[13,36,12,34],[13,37,12,35],[14,2,13,0,"exports"],[14,9,13,7],[14,10,13,8,"WebsocketError"],[14,24,13,22],[14,27,13,25,"WebsocketError"],[14,41,13,39],[15,2,14,0],[15,8,14,6,"WebsocketClient"],[15,23,14,21],[15,32,14,30,"utils_1"],[15,39,14,37],[15,40,14,38,"TypedEmitter"],[15,52,14,50],[15,53,14,51],[16,4,17,2,"emitter"],[16,11,17,9],[16,14,17,12],[16,18,17,16],[17,4,21,2,"ping"],[17,8,21,6,"ping"],[17,9,21,6],[17,11,21,9],[18,6,22,4],[18,13,22,11],[18,17,22,15],[18,18,22,16,"sendMessage"],[18,29,22,27],[18,30,22,28],[19,8,23,6,"type"],[19,12,23,10],[19,14,23,12],[20,6,24,4],[20,7,24,5],[20,8,24,6],[21,4,25,2],[22,4,26,2,"constructor"],[22,15,26,13,"constructor"],[22,16,26,14,"options"],[22,23,26,21],[22,25,26,23],[23,6,27,4],[23,11,27,9],[23,12,27,10],[23,13,27,11],[24,6,28,4],[24,10,28,8],[24,11,28,9,"options"],[24,18,28,16],[24,21,28,19,"options"],[24,28,28,26],[25,6,29,4],[25,10,29,8],[25,11,29,9,"messages"],[25,19,29,17],[25,22,29,20],[25,23,29,21],[25,24,29,22],[25,26,29,24,"utils_1"],[25,33,29,31],[25,34,29,32,"createDeferredManager"],[25,55,29,53],[25,57,29,55],[26,8,30,6,"timeout"],[26,15,30,13],[26,17,30,15],[26,21,30,19],[26,22,30,20,"options"],[26,29,30,27],[26,30,30,28,"timeout"],[26,37,30,35],[26,41,30,39,"DEFAULT_TIMEOUT"],[26,56,30,54],[27,8,31,6,"onTimeout"],[27,17,31,15],[27,19,31,17,"promiseId"],[27,28,31,26],[27,32,31,30],[27,36,31,34],[27,37,31,35,"onMessageTimeout"],[27,53,31,51],[27,54,31,52,"promiseId"],[27,63,31,61],[28,6,32,4],[28,7,32,5],[28,8,32,6],[29,4,33,2],[30,4,34,2,"initWebsocket"],[30,17,34,15,"initWebsocket"],[30,18,34,16],[31,6,35,4,"url"],[31,9,35,7],[32,6,36,4,"timeout"],[32,13,36,11],[33,6,37,4,"headers"],[33,13,37,11],[34,6,38,4,"agent"],[35,4,39,2],[35,5,39,3],[35,7,39,5],[36,6,40,4],[36,10,40,8],[36,17,40,15,"url"],[36,20,40,18],[36,25,40,23],[36,33,40,31],[36,35,40,33],[37,8,41,6],[37,14,41,12],[37,18,41,16,"WebsocketError"],[37,32,41,30],[37,33,41,31],[37,51,41,49],[37,52,41,50],[38,6,42,4],[39,6,43,4],[39,10,43,8,"url"],[39,13,43,11],[39,14,43,12,"startsWith"],[39,24,43,22],[39,25,43,23],[39,31,43,29],[39,32,43,30],[39,34,43,32],[40,8,44,6,"url"],[40,11,44,9],[40,14,44,12,"url"],[40,17,44,15],[40,18,44,16,"replace"],[40,25,44,23],[40,26,44,24],[40,32,44,30],[40,34,44,32],[40,38,44,36],[40,39,44,37],[41,6,45,4],[42,6,46,4],[42,13,46,11],[42,17,46,15,"ws_1"],[42,21,46,19],[42,22,46,20,"default"],[42,29,46,27],[42,30,46,28,"url"],[42,33,46,31],[42,35,46,33],[43,8,47,6,"timeout"],[43,15,47,13],[44,8,48,6,"headers"],[44,15,48,13],[44,17,48,15],[45,10,49,8,"Origin"],[45,16,49,14],[45,18,49,16],[45,42,49,40],[46,10,50,8],[46,13,50,11,"headers"],[47,8,51,6],[47,9,51,7],[48,8,52,6,"agent"],[49,6,53,4],[49,7,53,5],[49,8,53,6],[50,4,54,2],[51,4,55,2,"setPingTimeout"],[51,18,55,16,"setPingTimeout"],[51,19,55,16],[51,21,55,19],[52,6,56,4,"clearTimeout"],[52,18,56,16],[52,19,56,17],[52,23,56,21],[52,24,56,22,"pingTimeout"],[52,35,56,33],[52,36,56,34],[53,6,57,4],[53,12,57,10,"doPing"],[53,18,57,16],[53,21,57,19,"doPing"],[53,22,57,19],[53,27,57,25],[54,8,58,6],[54,12,58,10],[54,16,58,14],[54,17,58,15,"isConnected"],[54,28,58,26],[54,29,58,27],[54,30,58,28],[54,32,58,30],[55,10,59,8],[55,17,59,15],[55,21,59,19],[55,22,59,20,"onPing"],[55,28,59,26],[55,29,59,27],[55,30,59,28],[55,31,59,29,"catch"],[55,36,59,34],[55,37,59,35],[55,43,59,41],[55,44,59,42],[55,45,59,43],[55,46,59,44],[56,8,60,6],[57,6,61,4],[57,7,61,5],[58,6,62,4],[58,10,62,8],[58,11,62,9,"pingTimeout"],[58,22,62,20],[58,25,62,23],[58,29,62,27],[58,30,62,28,"isConnected"],[58,41,62,39],[58,42,62,40],[58,43,62,41],[58,46,62,44,"setTimeout"],[58,56,62,54],[58,57,62,55,"doPing"],[58,63,62,61],[58,65,62,63],[58,69,62,67],[58,70,62,68,"options"],[58,77,62,75],[58,78,62,76,"pingTimeout"],[58,89,62,87],[58,93,62,91,"DEFAULT_PING_TIMEOUT"],[58,113,62,111],[58,114,62,112],[58,117,62,115,"undefined"],[58,126,62,124],[59,4,63,2],[60,4,64,2,"onPing"],[60,10,64,8,"onPing"],[60,11,64,8],[60,13,64,11],[61,6,65,4],[61,13,65,11],[61,17,65,15],[61,18,65,16,"ping"],[61,22,65,20],[61,23,65,21],[61,24,65,22],[62,4,66,2],[63,4,67,2,"onMessageTimeout"],[63,20,67,18,"onMessageTimeout"],[63,21,67,19,"_promiseId"],[63,31,67,29],[63,33,67,31],[64,6,68,4],[64,12,68,10],[65,8,69,6,"ws"],[66,6,70,4],[66,7,70,5],[66,10,70,8],[66,14,70,12],[67,6,71,4],[67,10,71,8],[67,11,71,9,"ws"],[67,13,71,11],[67,15,71,13],[68,6,72,4],[68,10,72,8],[68,11,72,9,"messages"],[68,19,72,17],[68,20,72,18,"rejectAll"],[68,29,72,27],[68,30,72,28],[68,34,72,32,"WebsocketError"],[68,48,72,46],[68,49,72,47],[68,68,72,66],[68,69,72,67],[68,70,72,68],[69,6,73,4,"ws"],[69,8,73,6],[69,9,73,7,"close"],[69,14,73,12],[69,15,73,13],[69,16,73,14],[70,4,74,2],[71,4,75,2,"onError"],[71,11,75,9,"onError"],[71,12,75,9],[71,14,75,12],[72,6,76,4],[72,10,76,8],[72,11,76,9,"onClose"],[72,18,76,16],[72,19,76,17],[72,20,76,18],[73,4,77,2],[74,4,78,2,"sendMessage"],[74,15,78,13,"sendMessage"],[74,16,78,14,"message"],[74,23,78,21],[74,25,78,23],[75,6,79,4,"timeout"],[76,4,80,2],[76,5,80,3],[76,8,80,6],[76,9,80,7],[76,10,80,8],[76,12,80,10],[77,6,81,4],[77,12,81,10],[78,8,82,6,"ws"],[79,6,83,4],[79,7,83,5],[79,10,83,8],[79,14,83,12],[80,6,84,4],[80,10,84,8],[80,11,84,9,"ws"],[80,13,84,11],[80,17,84,15],[80,18,84,16],[80,22,84,20],[80,23,84,21,"isConnected"],[80,34,84,32],[80,35,84,33],[80,36,84,34],[80,38,84,36],[80,44,84,42],[80,48,84,46,"WebsocketError"],[80,62,84,60],[80,63,84,61],[80,90,84,88],[80,91,84,89],[81,6,85,4],[81,12,85,10],[82,8,86,6,"promiseId"],[82,17,86,15],[83,8,87,6,"promise"],[84,6,88,4],[84,7,88,5],[84,10,88,8],[84,14,88,12],[84,15,88,13,"messages"],[84,23,88,21],[84,24,88,22,"create"],[84,30,88,28],[84,31,88,29,"timeout"],[84,38,88,36],[84,39,88,37],[85,6,89,4],[85,12,89,10,"req"],[85,15,89,13],[85,18,89,16],[86,8,90,6,"id"],[86,10,90,8],[86,12,90,10,"promiseId"],[86,21,90,19],[86,22,90,20,"toString"],[86,30,90,28],[86,31,90,29],[86,32,90,30],[87,8,91,6],[87,11,91,9,"message"],[88,6,92,4],[88,7,92,5],[89,6,93,4],[89,10,93,8],[89,11,93,9,"setPingTimeout"],[89,25,93,23],[89,26,93,24],[89,27,93,25],[90,6,94,4],[90,10,94,8],[90,11,94,9,"options"],[90,18,94,16],[90,19,94,17,"onSending"],[90,28,94,26],[90,31,94,29,"message"],[90,38,94,36],[90,39,94,37],[91,6,95,4,"ws"],[91,8,95,6],[91,9,95,7,"send"],[91,13,95,11],[91,14,95,12,"JSON"],[91,18,95,16],[91,19,95,17,"stringify"],[91,28,95,26],[91,29,95,27,"req"],[91,32,95,30],[91,33,95,31],[91,34,95,32],[92,6,96,4],[92,13,96,11,"promise"],[92,20,96,18],[93,4,97,2],[94,4,98,2,"sendRawMessage"],[94,18,98,16,"sendRawMessage"],[94,19,98,17,"message"],[94,26,98,24],[94,28,98,26],[95,6,99,4],[95,12,99,10],[96,8,100,6,"ws"],[97,6,101,4],[97,7,101,5],[97,10,101,8],[97,14,101,12],[98,6,102,4],[98,10,102,8],[98,11,102,9,"ws"],[98,13,102,11],[98,17,102,15],[98,18,102,16],[98,22,102,20],[98,23,102,21,"isConnected"],[98,34,102,32],[98,35,102,33],[98,36,102,34],[98,38,102,36],[98,44,102,42],[98,48,102,46,"WebsocketError"],[98,62,102,60],[98,63,102,61],[98,90,102,88],[98,91,102,89],[99,6,103,4,"ws"],[99,8,103,6],[99,9,103,7,"send"],[99,13,103,11],[99,14,103,12,"message"],[99,21,103,19],[99,23,103,21],[100,8,104,6,"binary"],[100,14,104,12],[100,16,104,14],[100,23,104,21,"message"],[100,30,104,28],[100,35,104,33],[101,6,105,4],[101,7,105,5],[101,8,105,6],[102,6,106,4],[102,10,106,8],[102,11,106,9,"setPingTimeout"],[102,25,106,23],[102,26,106,24],[102,27,106,25],[103,4,107,2],[104,4,108,2,"onMessage"],[104,13,108,11,"onMessage"],[104,14,108,12,"message"],[104,21,108,19],[104,23,108,21,"messageValidation"],[104,40,108,38],[104,42,108,40],[105,6,109,4],[105,10,109,8],[106,8,110,6],[106,14,110,12,"data"],[106,18,110,16],[106,21,110,19,"JSON"],[106,25,110,23],[106,26,110,24,"parse"],[106,31,110,29],[106,32,110,30,"message"],[106,39,110,37],[106,40,110,38,"toString"],[106,48,110,46],[106,49,110,47],[106,50,110,48],[106,51,110,49],[107,8,111,6],[107,14,111,12,"messageId"],[107,23,111,21],[107,26,111,24,"Number"],[107,32,111,30],[107,33,111,31,"data"],[107,37,111,35],[107,38,111,36,"id"],[107,40,111,38],[107,41,111,39],[108,8,112,6],[108,12,112,10],[109,10,113,8],[109,16,113,14,"payload"],[109,23,113,21],[109,26,113,24,"messageValidation"],[109,43,113,41],[109,46,113,44,"messageValidation"],[109,63,113,61],[109,64,113,62,"data"],[109,68,113,66],[109,69,113,67],[109,72,113,70,"data"],[109,76,113,74],[110,10,114,8],[110,14,114,12,"payload"],[110,21,114,19],[110,23,114,21],[111,12,115,10],[111,16,115,14],[111,17,115,15,"messages"],[111,25,115,23],[111,26,115,24,"resolve"],[111,33,115,31],[111,34,115,32,"messageId"],[111,43,115,41],[111,45,115,43,"payload"],[111,52,115,50],[111,53,115,51],[112,10,116,8],[113,8,117,6],[113,9,117,7],[113,10,117,8],[113,17,117,15,"error"],[113,22,117,20],[113,24,117,22],[114,10,118,8],[114,14,118,12],[114,15,118,13,"messages"],[114,23,118,21],[114,24,118,22,"reject"],[114,30,118,28],[114,31,118,29,"messageId"],[114,40,118,38],[114,42,118,40,"error"],[114,47,118,45],[114,48,118,46],[115,8,119,6],[116,6,120,4],[116,7,120,5],[116,8,120,6],[116,14,120,12],[116,15,120,13],[116,16,120,14],[116,25,120,23],[117,8,121,6],[117,12,121,10],[117,13,121,11,"setPingTimeout"],[117,27,121,25],[117,28,121,26],[117,29,121,27],[118,6,122,4],[119,4,123,2],[120,4,124,2],[120,10,124,8,"connect"],[120,17,124,15,"connect"],[120,18,124,15],[120,20,124,18],[121,6,125,4],[121,10,125,8],[121,14,125,12],[121,15,125,13,"connectPromise"],[121,29,125,27],[121,31,125,29],[122,8,126,6],[122,15,126,13],[122,19,126,17],[122,20,126,18,"connectPromise"],[122,34,126,32],[123,6,127,4],[124,6,128,4],[124,10,128,8],[124,14,128,12],[124,15,128,13,"isConnected"],[124,26,128,24],[124,27,128,25],[124,28,128,26],[124,30,128,28],[124,37,128,35,"Promise"],[124,44,128,42],[124,45,128,43,"resolve"],[124,52,128,50],[124,53,128,51],[124,54,128,52],[125,6,129,4],[125,10,129,8],[125,14,129,12],[125,15,129,13,"ws"],[125,17,129,15],[125,19,129,17,"readyState"],[125,29,129,27],[125,34,129,32,"ws_1"],[125,38,129,36],[125,39,129,37,"default"],[125,46,129,44],[125,47,129,45,"CLOSING"],[125,54,129,52],[125,56,129,54],[126,8,130,6],[126,14,130,12],[126,18,130,16,"Promise"],[126,25,130,23],[126,26,130,24,"resolve"],[126,33,130,31],[126,37,130,35],[126,41,130,39],[126,42,130,40,"emitter"],[126,49,130,47],[126,50,130,48,"once"],[126,54,130,52],[126,55,130,53],[126,69,130,67],[126,71,130,69,"resolve"],[126,78,130,76],[126,79,130,77],[126,80,130,78],[127,6,131,4],[128,6,132,4],[128,12,132,10,"dfd"],[128,15,132,13],[128,18,132,16],[128,19,132,17],[128,20,132,18],[128,22,132,20,"utils_1"],[128,29,132,27],[128,30,132,28,"createDeferred"],[128,44,132,42],[128,46,132,44],[128,47,132,45],[129,6,133,4],[129,10,133,8],[129,11,133,9,"connectPromise"],[129,25,133,23],[129,28,133,26,"dfd"],[129,31,133,29],[129,32,133,30,"promise"],[129,39,133,37],[130,6,134,4],[130,12,134,10,"ws"],[130,14,134,12],[130,17,134,15],[130,21,134,19],[130,22,134,20,"createWebsocket"],[130,37,134,35],[130,40,134,38],[130,44,134,42],[130,45,134,43,"createWebsocket"],[130,60,134,58],[130,61,134,59],[130,62,134,60],[130,65,134,63],[130,69,134,67],[130,70,134,68,"initWebsocket"],[130,83,134,81],[130,84,134,82],[130,88,134,86],[130,89,134,87,"options"],[130,96,134,94],[130,97,134,95],[131,6,135,4],[131,12,135,10,"connectionTimeout"],[131,29,135,27],[131,32,135,30,"setTimeout"],[131,42,135,40],[131,43,135,41],[131,49,135,47],[132,8,136,6],[132,12,136,10],[132,13,136,11,"onClose"],[132,20,136,18],[132,21,136,19],[132,22,136,20],[133,8,137,6,"dfd"],[133,11,137,9],[133,12,137,10,"reject"],[133,18,137,16],[133,19,137,17],[133,23,137,21,"WebsocketError"],[133,37,137,35],[133,38,137,36],[133,57,137,55],[133,58,137,56],[133,59,137,57],[134,8,138,6],[134,12,138,10],[135,10,139,8,"ws"],[135,12,139,10],[135,13,139,11,"close"],[135,18,139,16],[135,19,139,17],[135,20,139,18],[136,8,140,6],[136,9,140,7],[136,10,140,8],[136,16,140,14],[136,17,140,15],[137,6,141,4],[137,7,141,5],[137,9,141,7],[137,13,141,11],[137,14,141,12,"options"],[137,21,141,19],[137,22,141,20,"connectionTimeout"],[137,39,141,37],[137,43,141,41],[137,47,141,45],[137,48,141,46,"options"],[137,55,141,53],[137,56,141,54,"timeout"],[137,63,141,61],[137,67,141,65,"DEFAULT_TIMEOUT"],[137,82,141,80],[137,83,141,81],[138,6,142,4,"ws"],[138,8,142,6],[138,9,142,7,"once"],[138,13,142,11],[138,14,142,12],[138,21,142,19],[138,23,142,21,"error"],[138,28,142,26],[138,32,142,30],[139,8,143,6,"clearTimeout"],[139,20,143,18],[139,21,143,19,"connectionTimeout"],[139,38,143,36],[139,39,143,37],[140,8,144,6],[140,12,144,10],[140,13,144,11,"onClose"],[140,20,144,18],[140,21,144,19],[140,22,144,20],[141,8,145,6,"dfd"],[141,11,145,9],[141,12,145,10,"reject"],[141,18,145,16],[141,19,145,17],[141,23,145,21,"WebsocketError"],[141,37,145,35],[141,38,145,36,"error"],[141,43,145,41],[141,44,145,42,"message"],[141,51,145,49],[141,52,145,50],[141,53,145,51],[142,6,146,4],[142,7,146,5],[142,8,146,6],[143,6,147,4,"ws"],[143,8,147,6],[143,9,147,7,"on"],[143,11,147,9],[143,12,147,10],[143,18,147,16],[143,20,147,18],[143,26,147,24],[144,8,148,6,"clearTimeout"],[144,20,148,18],[144,21,148,19,"connectionTimeout"],[144,38,148,36],[144,39,148,37],[145,8,149,6],[145,12,149,10],[145,13,149,11,"init"],[145,17,149,15],[145,18,149,16],[145,19,149,17],[146,8,150,6,"dfd"],[146,11,150,9],[146,12,150,10,"resolve"],[146,19,150,17],[146,20,150,18],[146,21,150,19],[147,6,151,4],[147,7,151,5],[147,8,151,6],[148,6,152,4],[148,10,152,8],[148,11,152,9,"ws"],[148,13,152,11],[148,16,152,14,"ws"],[148,18,152,16],[149,6,153,4],[149,13,153,11,"dfd"],[149,16,153,14],[149,17,153,15,"promise"],[149,24,153,22],[149,25,153,23,"finally"],[149,32,153,30],[149,33,153,31],[149,39,153,37],[150,8,154,6],[150,12,154,10],[150,13,154,11,"connectPromise"],[150,27,154,25],[150,30,154,28,"undefined"],[150,39,154,37],[151,6,155,4],[151,7,155,5],[151,8,155,6],[152,4,156,2],[153,4,157,2,"init"],[153,8,157,6,"init"],[153,9,157,6],[153,11,157,9],[154,6,158,4],[154,12,158,10],[155,8,159,6,"ws"],[156,6,160,4],[156,7,160,5],[156,10,160,8],[156,14,160,12],[157,6,161,4],[157,10,161,8],[157,11,161,9,"ws"],[157,13,161,11],[157,17,161,15],[157,18,161,16],[157,22,161,20],[157,23,161,21,"isConnected"],[157,34,161,32],[157,35,161,33],[157,36,161,34],[157,38,161,36],[158,8,162,6],[158,14,162,12,"Error"],[158,19,162,17],[158,20,162,18],[158,53,162,51],[158,54,162,52],[159,6,163,4],[160,6,164,4,"ws"],[160,8,164,6],[160,9,164,7,"removeAllListeners"],[160,27,164,25],[160,28,164,26],[160,29,164,27],[161,6,165,4,"ws"],[161,8,165,6],[161,9,165,7,"on"],[161,11,165,9],[161,12,165,10],[161,19,165,17],[161,21,165,19,"_error"],[161,27,165,25],[161,31,165,29],[161,35,165,33],[161,36,165,34,"onError"],[161,43,165,41],[161,44,165,42],[161,45,165,43],[161,46,165,44],[162,6,166,4,"ws"],[162,8,166,6],[162,9,166,7,"on"],[162,11,166,9],[162,12,166,10],[162,21,166,19],[162,23,166,21,"message"],[162,30,166,28],[162,34,166,32],[162,38,166,36],[162,39,166,37,"onMessage"],[162,48,166,46],[162,49,166,47,"message"],[162,56,166,54],[162,57,166,55],[162,58,166,56],[163,6,167,4,"ws"],[163,8,167,6],[163,9,167,7,"on"],[163,11,167,9],[163,12,167,10],[163,19,167,17],[163,21,167,19],[163,27,167,25],[164,8,168,6],[164,12,168,10],[164,13,168,11,"emitter"],[164,20,168,18],[164,21,168,19,"emit"],[164,25,168,23],[164,26,168,24],[164,40,168,38],[164,41,168,39],[165,8,169,6],[165,12,169,10],[165,13,169,11,"onClose"],[165,20,169,18],[165,21,169,19],[165,22,169,20],[166,6,170,4],[166,7,170,5],[166,8,170,6],[167,4,171,2],[168,4,172,2,"disconnect"],[168,14,172,12,"disconnect"],[168,15,172,12],[168,17,172,15],[169,6,173,4],[169,10,173,8],[169,14,173,12],[169,15,173,13,"isConnected"],[169,26,173,24],[169,27,173,25],[169,28,173,26],[169,30,173,28],[170,8,174,6],[170,14,174,12,"disconnectPromise"],[170,31,174,29],[170,34,174,32],[170,38,174,36,"Promise"],[170,45,174,43],[170,46,174,44,"resolve"],[170,53,174,51],[170,57,174,55],[171,10,175,8],[171,14,175,12],[171,15,175,13,"ws"],[171,17,175,15],[171,19,175,17,"once"],[171,23,175,21],[171,24,175,22],[171,31,175,29],[171,33,175,31,"resolve"],[171,40,175,38],[171,41,175,39],[172,8,176,6],[172,9,176,7],[172,10,176,8],[173,8,177,6],[173,12,177,10],[173,13,177,11,"ws"],[173,15,177,13],[173,17,177,15,"close"],[173,22,177,20],[173,23,177,21],[173,24,177,22],[174,8,178,6],[174,15,178,13,"disconnectPromise"],[174,32,178,30],[175,6,179,4],[176,6,180,4],[176,13,180,11,"Promise"],[176,20,180,18],[176,21,180,19,"resolve"],[176,28,180,26],[176,29,180,27],[176,30,180,28],[177,4,181,2],[178,4,182,2,"isConnected"],[178,15,182,13,"isConnected"],[178,16,182,13],[178,18,182,16],[179,6,183,4],[179,13,183,11],[179,17,183,15],[179,18,183,16,"ws"],[179,20,183,18],[179,22,183,20,"readyState"],[179,32,183,30],[179,37,183,35,"ws_1"],[179,41,183,39],[179,42,183,40,"default"],[179,49,183,47],[179,50,183,48,"OPEN"],[179,54,183,52],[180,4,184,2],[181,4,185,2,"onClose"],[181,11,185,9,"onClose"],[181,12,185,9],[181,14,185,12],[182,6,186,4,"clearTimeout"],[182,18,186,16],[182,19,186,17],[182,23,186,21],[182,24,186,22,"pingTimeout"],[182,35,186,33],[182,36,186,34],[183,6,187,4],[183,10,187,8],[183,11,187,9,"ws"],[183,13,187,11],[183,15,187,13,"removeAllListeners"],[183,33,187,31],[183,34,187,32],[183,35,187,33],[184,6,188,4],[184,10,188,8],[184,11,188,9,"ws"],[184,13,188,11],[184,15,188,13,"on"],[184,17,188,15],[184,18,188,16],[184,25,188,23],[184,27,188,25],[184,33,188,31],[184,34,188,32],[184,35,188,33],[184,36,188,34],[185,6,189,4],[185,10,189,8],[185,11,189,9,"messages"],[185,19,189,17],[185,20,189,18,"rejectAll"],[185,29,189,27],[185,30,189,28],[185,34,189,32,"WebsocketError"],[185,48,189,46],[185,49,189,47],[185,80,189,78],[185,81,189,79],[185,82,189,80],[186,4,190,2],[187,4,191,2,"dispose"],[187,11,191,9,"dispose"],[187,12,191,9],[187,14,191,12],[188,6,192,4],[188,10,192,8],[188,11,192,9,"removeAllListeners"],[188,29,192,27],[188,30,192,28],[188,31,192,29],[189,6,193,4],[189,10,193,8],[189,11,193,9,"disconnect"],[189,21,193,19],[189,22,193,20],[189,23,193,21],[190,6,194,4],[190,10,194,8],[190,11,194,9,"onClose"],[190,18,194,16],[190,19,194,17],[190,20,194,18],[191,4,195,2],[192,2,196,0],[193,2,197,0,"exports"],[193,9,197,7],[193,10,197,8,"WebsocketClient"],[193,25,197,23],[193,28,197,26,"WebsocketClient"],[193,43,197,41],[194,0,197,42],[194,3]],"functionMap":{"names":["<global>","WebsocketError","WebsocketClient","WebsocketClient#ping","WebsocketClient#constructor","onTimeout","WebsocketClient#initWebsocket","WebsocketClient#setPingTimeout","doPing","onPing._catch$argument_0","WebsocketClient#onPing","WebsocketClient#onMessageTimeout","WebsocketClient#onError","WebsocketClient#sendMessage","WebsocketClient#sendRawMessage","WebsocketClient#onMessage","WebsocketClient#connect","Promise$argument_0","setTimeout$argument_0","ws.once$argument_1","ws.on$argument_1","dfd.promise._finally$argument_0","WebsocketClient#init","WebsocketClient#disconnect","WebsocketClient#isConnected","WebsocketClient#onClose","WebsocketClient#dispose"],"mappings":"AAA;ACW,qCD;AEE;ECO;GDI;EEC;iBCK,6CD;GFE;EIC;GJoB;EKC;mBCE;mCCE,QD;KDE;GLE;EQC;GRE;ESC;GTO;EUC;GVE;EWC;GXmB;EYC;GZS;EaC;Gbe;EcC;wBCM,qDD;yCEK;KFM;qBGC;KHI;kBIC;KJI;+BKE;KLE;GdC;EoBC;mBFQ,wBE;qBFC,kCE;mBFC;KEG;GpBC;EqBC;4CNE;OME;GrBK;EsBC;GtBE;EuBC;yBLG,QK;GvBE;EwBC;GxBI;CFC"},"hasCjsExports":true},"type":"js/module"}]}